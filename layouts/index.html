{{ partial "head" . }}

<div id="home">
{{ if (eq (trim .Site.Params.provider " " | lower) "github") | and (isset .Site.Params "repo_url") }}
  {{ $repo_id := replace .Site.Params.repo_url "https://github.com/" ""}}
  {{ .Scratch.Set "repo_id" $repo_id }}
{{ end }}

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<!-- Titlebar -->
<header>
  {{ partial "header" . }}
</header>

<!-- Main content -->
<main>
  <div class="drawer">
    {{ partial "drawer" . }}
  </div>

  <div class="product-grid">
    {{ range sort .Site.Params.Products "weight" }}
      {{ $.Scratch.Set "url" "" }}
      {{ $.Scratch.Set "url" (printf "/%s/%s/" .identifier .latest) }}
      {{ $url := $.Scratch.Get "url" }}
      <a class="product-grid--product product-grid--product-{{ .identifier }}" href="{{ $url }}">
        <div class="product-grid--product--title">{{ .name }}</div>
        <div class="product-grid--product--description">
          {{ .description }}
        </div>
      </a>
    {{ end }}
  </div>
</main>
</div>
<!-- Footer which is not displayed -->
{{ partial "footer_js" . }}
