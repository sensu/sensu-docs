[{"title":"Sensu Documentation Home","version":"latest","location":"/_index","display_name":"undefined latest: Sensu Documentation Home","content":""},{"title":"Extensions","product":"Extensions","version":"1.0","location":"/extensions/1.0/_index","display_name":"Extensions 1.0: Extensions","content":" COMING SOON "},{"title":"Extensions","product":"Extensions","version":"latest","location":"/extensions/_index","display_name":"Extensions latest: Extensions","content":""},{"title":"Plugins","tags":["sensu","plugins","2.3","index"],"product":"Plugins","version":"2.3","location":"/plugins/2.3/_index","display_name":"Plugins 2.3: Plugins","content":" Overview The goal of the Sensu Plugins project is to provide a set of community driven high quality plugins handlers and other code to maximize the effective use of Sensu in various types of autoscaling and traditional environments Much of the code is written in Ruby and uses the sensuplugin framework some also depend on additional gems or packageseg mysql2 or libopenssldevel Some are shell scripts All languages are welcome but the preference is for pure Ruby when possible to ensure the broadest range of compatibility"},{"title":"Developer Guidelines","product":"Plugins","version":"2.3","location":"/plugins/2.3/developer_guidelines","display_name":"Plugins 2.3: Developer Guidelines","content":"Table of Contents Naming Conventionsnamingconventions Coding Stylecodingstyle Copyright and Licensingcopyrightandlicensing Documentationdocumentation Changelogchangelog Dependency Managementdependencymanagement Issue and Pull Request Submissionsissueandpullrequestsubmissions Gem Metadatagemmetadata Additional Informationadditionalinformation Naming Conventions All binaries should start with either handler check metrics or mutator depending on their primary function This is done to ensure that a user can tell from the command what the primary action of the script is It also makes things easier for infrastructure tools The names of scripts should use dashes to separate words and contain an extension rb sh exe etc Extensions are unfortunately necessary for Sensu to be able to directly exec plugins and handlers on Windows All scripts should also be made executable using chmod x plugin or a similar method There is a rake task that is run by Travis that will automatically make all files in bin executable if this is not done Any repos created need to follow the format of sensupluginsapp where app is the name such as windows diskchecks or influxdb The exception to the rule are repos used for the site or tooling such as GIR or sensupluginsgithubio This is done so that the rake tasks and other automation tools can easily parse Github and effectively work with the 150 repos Coding Style When developing plugins please use the sensu plugin class1 this ensures all plugins have an identical run structure When using options please use the following structure At the very least the option needs to include a description to assist the user with configuration and deployment option port short p PORT long port PORT description Port Each script should use the following standard header usrbinenv ruby DESCRIPTION OUTPUT plain text metric data etc PLATFORMS Linux Windows BSD Solaris etc DEPENDENCIES gem sensuplugin USAGE NOTES LICENSE Released under the same terms as Sensu the MIT license see LICENSE for details When at all possible preference is given to pure Ruby implementations There should only be system or platform dependencies in the specific gems that use them such as sensupluginswindows Copyright and Licensing The preferred license for all code associated with the project is the MIT License15 other compatible licenses can certainly be looked at by the community as whole Any code that is written is owned by the developer and as such the copyright if they desire should be set to themselves This is an open source project and built upon the collective code of all who contribute no one person or entity owns everything If for whatever reason they wish to not assign copyright to themselves then it can be assigned to sensuplugins Documentation All documentation will be handled by Yard2 using the default markup at this time A brief introduction to Yard markup can be found here3 All scripts should have as much documentation coverage as possible ideally 100 Coverage can be tested by installing Yard locally and running rake yard Changelog The change log should follow the format listed here20 Please keep this changelog up to date if you make changes to the repo and submit a PR please update the changelog accordingly Please follow the guidelines below when updating the changelog with respect to which number to bump Dependency Management Dependencies ruby gems packages etc and other requirements should be declared in the header of the plugin and more importantly in the gemspec Try to use the standard library or the same dependencies as other plugins to keep the stack as small as possible Questions about using a specific gem feel can be opened as issues on Github or feel free to ask the mailing list Issue and Pull Request Submissions If you see something wrong or come across a bug please open up an issue try to include as much data in the issue as possible If you feel the issue is critical than tag a team member and we will respond as soon as is feasible Pull requests need to follow the guidelines below for the quickest possible merge These not only make our lives easier but also keep the repo and commit history as clean as possible Please do a git pull rebase both before you start working on the repo and then before you commit This will help ensure the most up to date codebase Rubocop rules and documentation is available It will also go along way towards cutting down or eliminatinghopefully annoying merge commits The CHANGELOG follows the standard conventions laid out here20 Every PR has to include an updated CHANGELOG and README if needed this makes our lives eaiser increases the accuracy of the codebase and gets your PR deployed much faster When updating the version in the changelog please keep the following in mind the patch version is for any nonbreaking changes to existing scripts or the addition of minor functionality to existing scripts the minor version is for the addition of any new scripts Even though this is generally nonbreaking it is a major change to the gem and should be indicitated as such the major version should only be bumped by a core contributor This is for major breaking or nonbreaking changes that affect widespreadspread functionality Examples of this would be a wholesale refactor of the repo or a switch away from an established method such as going from SOAP to REST across multiple checks All new scripts modules or classes must be fully tested There are well documented examples in the pagerduty21 plugin Tracking the status of your PR or issue or seeing all open tickets in the org regardless of repo is simple using Github filters16 To get started click on the Github logo in the upper left and select either Pull Requests or Issues In the search box you will see several terms predefined for you change authorname to usersensuplugins to see across the entire org Please do not not abandon your pull request only you can help us merge it We will wait for feedback from you on your pull request for up to sixty days A lack of feedback in after this may require you to reopen your pull request If you would like to make a pull request and the repo does not already exist then please feel free to directly contact a member of the team using our public email address or open an issue in the Feature Request19 repo and we will create a repo for you As a general rule if you ask to have a repo created you will also be given write access to it by default Gem Metadata Each gem has metadata that can easily be queried and is designed to allow a user or contributor to get a good quick read on the current status of the gem and how stable it is This functions much like the Milestone idea that Logstash plugins are built around thanks goes out to hatt for suggesting this smetadata maintainer The maintainer field can be anyone feel free to reach out to the team about adding your github handle to the gem and assuming ownership of it Many of these plugins require specialized knowledge and by their very nature many people depend upon them to be high quality smetadata developmentstatus The developmentstatus filed allows users know the development state of a plugin active active development is on going by a developer or maintainer maintenance no active refactoring or development but someone is watching out for any new prs or things to do unmaintained the community as a whole is keeping an eye on this but no one has staked a claim to it most plugins will end up here smetadata productionstatus The productionstatus field gives a quick glance on whether the gem should be used for production grade monitoring or if some review and care should be taken production grade near 100 rspec and yardoc coverage stable review recommended incomplete rspec and yardoc coverage stable review required littleno rspec andor yardoc coverage unstable testing recommended throw stuff at the wall and hope it sticks currently most gems are here Additional Information Testingtesting Build and Release Tools and Pipelinereleaseprocess 1 httpsgithubcomsensusensuplugin 2 httpyardocorg 3 httpwwwrubydocinfogemsyardfiledocsGettingStartedmd 4 httpsgithubcomsensupluginsGIRblobmasterfilestemplatesgemVagrantfileerb 5 httpswwwvagrantupcom 6 httpsgithubcomsensupluginsGIRblobmasterfilestemplatesgemrubocopymlerb 7 httpsgithubcomsensupluginsGIRblobmasterfilestemplatesgemtravisymlerb 8 httpsgithubcomsensupluginsGIRblobmasterfilestemplatesgemRakefileerb 9 httpsgithubcomsensusensupluginspec 10 httpsgithubcomorgssensupluginspeople 11 httpsensupluginsgithubiodevelopmentgir 12 httpswaffleiosensupluginssensupluginsgithubio 13 httpsgithubcomsensupluginsdocumentation 14 httpsgithubcomsensupluginsdocumentationblobmastertoolsgirv2md 15 httpopensourceorglicensesMIT 16 httpshelpgithubcomarticlessearchingissues 18 httpstravisciorg 19 httpsgithubcomsensupluginssensupluginsfeaturerequests 20 httpkeepachangelogcom 21 httpsgithubcomsensupluginssensupluginspagerduty"},{"title":"FAQ","product":"Plugins","version":"2.3","location":"/plugins/2.3/faq","display_name":"Plugins 2.3: FAQ","content":" Why did you split the repos This was done to simplify the deployment and delivery process When working with a repo as diverse as the communityplugins its very hard to version and deploy it in the methods that we all would like Splitting the repo into smaller pieces makes this much easier and more manageable in the long run Why are the repos named this way The repos are named based up the application product or function they are associated with This means that if you use apache you need only install the sensupluginsapache gem or clone the repo When it comes to handlers and mutators the same convention was used so that in the future if a check is added the repo name wont change Sensupluginspagerduty is a great example it may only contain handlers at this time but if in the future we want to add a check of an endpoint we dont need to do anything more than bump the version and update the docs Besides having a standard naming convention makes automation and deployment tools very happy and we all use them right How do I know what a repo contains One of the conditions for dropping the prerelease or alpha tag will be a complete README that will include a list of all binaries and what each one does sensupluginsdiskchecks1 does this now Why did you change the filenames and why name them this way One of the overriding issues is that there should be a standard naming scheme for the entire framework It is very hard to effectively automate something if the pieces are scattered or named differently As of now the current names are here to stay What about tests how do I know a plugin works as designed Tests are coming that is one of the core requirements for stability and production grade Tests are hard to write for some of these things given the very specific nature of them and most of us have other jobs so we can only contribute so much How do I use this handler deploy this check The readme will contain sample configs and commands Many of the plugins also have a header that contains specific details If this is lacking ask in Slackhttpsslacksensuio or on the mailing listhttpsgroupsgooglecomforumforumsensuusers and someone will be able to assist you Will the communityplugins repo be deleted and if so when No It will be frozen in place at a date TBD most likely sometime Fall 2015 although that is a moving target and dependent upon a lot of things How should I deploy the new plugins If a gem exists then that would be the best way Instructions for installing it can be found in the README of the repo or here3 If no gem exists yet then you can attempt to build one based upon the gemspec You can also install straight from source All repos have releases you can just download the latest tarball or zip file cloning the master branch is not recommended supported and never will be Unless its a breaking change the repo will not contain feature branches everything will be pushed to master You have been warned Checks are invasive how do I know they havent been tampered with All gems will be signed and each repo will contain the public key If you are really concerned you could just inspect the code yourself as well before deployment Will you be targeting other pkg management systems Not at this time due to the design of Sensu gems are the best choice RPMs and Deb packages have not been ruled out but the manpower to create them is just not there at this time If you have a very strong interest in this drop us a line and we can chat some more Are the gems dependent upon Rubygems No What is the policy on supporting endoflifeEOL Ruby versions We will target all non EOL Ruby versions please check the link below the see the current EOL version httpswwwrubylangorgendownloadsbranches What versions or Ruby do you test against We strive to test on all nonEOL versions It can take time to add new versions to all plugins What do you use for linting Rubocop Details are in rubocopyml within the root of each repo and in the developer guidelines2 What do you use for testing RSpec 1 httpsgithubcomsensupluginssensupluginsdiskchecks 2 developerguidelines 3 installation"},{"title":"Getting Started","product":"Plugins","version":"2.3","location":"/plugins/2.3/getting_started","display_name":"Plugins 2.3: Getting Started","content":"Table of Contents InfrastructureInfrastructure Githubgithub Trellotrello Websitewebsite Policiespolicies Organization Accessorganizationaccess Organization Structureorganizationstructure SensuPlugin Org Guidelines Infrastructure Github Github and the issues and milestones within it are the primary way the project is managed All plugin repositories are created from a standard template using a rake task to ensure that they remain consistent and manageable at an organization level There are currently five teams in the org Owners unrestricted access to the org and all repos Admins write access to all repos except core infrastructure Contributors write access to all plugin repos Core Infra write access to sensuplugin sensupluginspec GIR Kryten sensuplugingithubio tomservo and the hubots Documentation write access to the documentation repo Note Members in the Owners or Core Infra team must provide a voice number Due to the permissions and far reaching affect of these teams security practices are heavily enforced and any compromises must be dealt with immediately Trello There is a public Trello boardhttpstrellocombQjkJ8CS3sensucommunityplugins used for communicating various project wide items This is still a work in progress but it works for now Ideas are always welcome Website sensupluginsiohttpsensupluginsio Policies This is a volunteer project and as such comitters are free to come and go No one is required to do any amount of work to continue as a comitter some days you may do a ton of work or you may be on vacation or doing something that pays the bills for several weeks No worries Organization Access This is a public organization and as such anyone may join the only requirements are a firm belief in treating your infrastructure as code and 2FA on your github account Organization Structure Becoming a member of each of these groups and teams is an open decision You may be invited by any member of the team and the majority of the other team members can approve There is no time limit before being invited into a team and no set amount of work that needs to be accomplished once you are in a team You may also request to be given commit bit by openning an issue in a repo and mentioning an existing commiter We will then be happy to start a dialogue with you For security purposes though if you have not made any contributions in the last 6 months you may be removed from a team and can request access again at any time by reaching out and contacting an existing team member Any membership issues will be resolved by members of the Admin group after consultation with all parties in a public forumn If either party feels the issue is not resolved then they may reach out privately or publicly to either Matt Jones or Sean Porter or another member of the Owners group for assistance Their decisions are final core committer A committer who has read access to all public and private repos including these specific privilages Can push directly to Github and RubyGems Access to the sensuplugin bot account Access to the slack channel Access to the Google Apps account Access to the Twitter account Any member of this group must also provide a voice number that they can be reached at Due to the widespread permissions security practices are heavily enforced and any compromises must be dealt with immediately committer A commiter who has push access to all plugin repos They can either be a member of a team or be granted rights to specific repos using Githubs contributor org permissions They also have the following privilages after 6 months of continued effort or a demostrated need Discount to Tower2 OSX Git Client Access to DO droplets for testing Open Source License to various Jet Brains IDEs The ability to have an email address sensupluginsio restrictions apply The ability to become a member of the SensuPlugins Google Apps Org An invitation to the Sensu Slack org restrictions apply contributor A Github user who has had one or more merges committed to any repo but does not yet have push access to a repo"},{"title":"GSoC 15","product":"Plugins","version":"2.3","location":"/plugins/2.3/gsoc","display_name":"Plugins 2.3: GSoC 15","content":"Creating a set of production grade gems from the Sensu Community Plugins2 is a huge task that will take considerable time only with the continued effort of many people can this goal can be achieved The original community plugins repo has already been split in smaller repos3 based upon application This means all the Windows plugins handlers etc are in a repo named sensupluginswindows the aws ones are in sensupluginsaws and so on This is only the first step towards completing the transformation existing tooling will need to be improved and new tooling created for managing all the repos separately but also as a whole A maintainer should be able to issue a single command and have a template generated and installed in all repos manually copying a file to every repo is so 2006 D Task General refactoring of community plugins code base Brief explanation All the binaries in a repository should be broken down into libraries and any common code should be shared All new code should be written in Ruby and when possible existing code in other languages should be converted or its functionality should be folded into other code Expected Results Minimal code duplication Standard4 Ruby coding practices Ephemeral data whenever needed no traces left on a monitored system including temp files used to store state data Favor a pure ruby method over a arch specific method even at the sacrifice of code complexity ie sysfilesystem gem vs df Note Not every repository needs to be complete a list of high priority repos or ones of particular interest will be mutually determined Why Work On This This would be a great project for someone who wants to improve their Ruby skills or learn about using various Open Source apis and how to integrate with them Much of the code is already written so the ability to examine functional code in various styles could be very beneficial Knowledge prerequisite general Ruby knowledge or advanced knowledge of PerlPython general concepts of monitoring or willingness to learn them general understanding of how to define generate and handle exit codes and what they mean within a monitoring environment must believe in and understand treating infrastructure as code ephemeral data and why this is necessary in a cloud environment Skill level beginnermedium someone with an established track record of rapid learning will do fine Mentor Matt Jones5 or Artem Chernikov6 Proposal Guidelines When submitting your proposal please pick one or more repos and explain why you want to work with them and any domain specific knowledge or skills you have to help you complete the task Task Automated testing framework built around Travis using standard Ruby methods practices and tools Brief explanation In order to be considered production grade test coverage needs to be fairly high and not everyone has the time or ability to write tests A framework should be designed and built to automate the process of writing and executing tests There is a fair amount of latitude in how this is accomplished as minimal work has been done on this A good starting point would be the sensupluginsspec7 repo Expected Results We expect to have the foundation for a set of tools written in Ruby which will Improve the existing set of development tools including GIR1 which is currently able to bootstrap a plugin development environment including gem and repo creation Create an automated testing framework which will allow us to run a set of tests within virtual machines and report back the status of that process Why Work On This This would be a great project for someone who wants to improve their Ruby skills and learn more about tool writing and writing automated test suites This is a ground up project so you would have the ability to contribute in a major way including helping to select the test packages and work on the design of the tooling to help facilitate its use Knowledge prerequisite general understanding of various testing tools such as rspec rubocop and serverspec basic understanding of TravisCI Vagrant and RVM would be helpful but are not necessary basic understanding of Rake basic understanding of current infrastructure automation and tooling must believe in and understand treating infrastructure as code ephemeral data and why this is necessary in a cloud environment Skill Level medium Mentor Matt Jones5 or Artem Chernikov6 Proposal Guidelines When submitting your proposal please explain your views on testing code and infrastructure along with specific knowledge or skills you have to help you complete the task A brief summary of your choice of tools and why you pick them should also be included Task A simple comprehensive directory of all monitors handlers and tools Brief explanation With the split of the community repo in 150 separate repos users may have a hard time finding a particular monitor or know that a monitor or handler for a service already exists There should be a directory we can point them to that will offer this functionality in a clean manner The directory should be updated automatically upon the release of a new gem github tag or repo Consideration will need to be given for the ratelimiting that is inherent with Github Expected Results We would like a solid design and poc of the code and tools necessary to build and maintain the directory It need not be complete but substantial progress should have been made and it should be in a poc state with complete functionality Current technologies in consideration are Nodejs RoR vanilla js Why Work On This Not much has been done on this front yet so the student would in effect have free rein with the design as long as it meets the functional requirements and the code is clean modular and stable This would include the ability to design the layout pick the methods to gather the required data and select the best language and tools for the project Guidance is available on these topics as well as examples of the types of functionality and style we are looking for Knowledge prerequisite general understanding of web application design general knowledge of web site template engines any would be fine but the site currently uses JekyllLiquid good working knowledge of standard web languages such as html css js familiarity with MVC frameworks such as Django and Rails basic understanding of the necessary apis including Github TravisCI and RubyGems basic understanding of current infrastructure automation and tooling must believe in and understand treating infrastructure as code ephemeral data and why this is necessary in a cloud environment Skill Level mediumadvanced Mentor Matt Jones5 or Artem Chernikov6 Proposal Guidelines When submitting your proposal please give some examples of previously completed web applications or programs andor designs you are currently working on You should also include some sites or applications that your find inspiring and would like to incorporate into your design If you have no prior projects available then explain in detail how you would go about completing this task Previous web experience is not critical but would be helpful Task A tool to help user setup and configure basic monitoring for their system Brief explanation With the split of the community repo in 150 separate repos users may have a hard time finding a particular monitor or know that a monitor or handler for a service already exists It would be nice for a user to be able to query a db and get back a list of gems to install to monitor their system For example a user wants to setup baseline monitoring but has no idea what to install for gems They would type in baseline and get back a list of packages whose metadata matches baseline Expected Results We would like a solid design and poc of the code and tools necessary to build and maintain this It need not be complete but substantial progress should have been made and it should be in a poc state with complete functionality Current technologies in consideration are Nodejs and RoR Why Work On This Not much has been done on this front yet so the student would in effect have free rein with the design as long as it meets the functional requirements and the code is clean modular and stable This would include the ability to design the layout pick the methods to gather the required data and select the best language and tools for the project Guidance is available on these topics as well as examples of the types of functionality and style we are looking for Knowledge prerequisite general understanding of web application design general knowledge of web site template engines any would be fine but the site currently uses JekyllLiquid good working knowledge of standard web languages such as html css js familiarity with MVC frameworks such as Django and Rails basic understanding of the necessary apis including Github TravisCI and RubyGems basic understanding of current infrastructure automation and tooling must believe in and understand treating infrastructure as code ephemeral data and why this is necessary in a cloud environment Skill Level mediumadvanced Mentor Matt Jones5 or Artem Chernikov6 Proposal Guidelines When submitting your proposal please give some examples of previously completed web applications or programs andor designs you are currently working on You should also include some sites or applications that your find inspiring and would like to incorporate into your design If you have no prior projects available then explain in detail how you would go about completing this task Previous web experience is not critical but would very be helpful Task Expand monitors for a given product platform or api Brief explanation There are still lots of apis platforms and tools out there that have minimal or nonexistent monitoring The student with the guidance of the mentor can pick one or several of these to write monitors and handlers or gather metrics for At the outset a proper scope dependent upon the chosen type of monitoring to be implemented would be agreed upon by both the student and the mentor A partial list of topics include expanded monitoring of elasticsearch or other large scale data stores improvements upon existing monitoring for Windows Server and Windows applications platform specific monitors for BSD VMS etc monitors and integration with various hypervisors such as KVM QEMU or ESXi low level monitoring of the linux kernel using kernel probes monitoring of various environmental metrics found in a datacenter including battery performance chasis temperature and network latency monitoring of various scada fpga or other embedded systems Expected Results A set of completed stable and production grade monitors handlers etc that are within the scope agreed upon by the student and the mentor at the outset The emphsis will be on quality not quanity and all code will be written in Ruby following the Developer Guidelines8 for the sensu plugins Why Work On This Freedom to explore Pick a topic and figure out how it works is commonly used and fails then effectively code ways to detect or possibly correct these failures A well defined scope will be created with the student to prevent chasing edge cases feature creep and black holes You will get a feel for how infrastructure developers and system administrators tackle a monitoring problem and how an effective monitor is written from design to code through to testing and production use You will get a chance to own the problem and create a solution based upon your personal preferences while adhering to published Developer Guidelines Note Due to the nature of this task the scope will be carefully considered and may be evaluated at specific intervals taking into account the task goals and the students learning ability Knowledge prerequisite general Ruby knowledge or advanced knowledge of PerlPythonGoC general concepts of monitoring or willingness to rapidly learn them general understanding of how to define generate and handle exit codes and what they mean within a monitoring environment must believe in and understand treating infrastructure as code ephemeral data and why this is necessary in a cloud environment necessary domain specific knowledge of the selected topic or proven experience rapidly adapting to new technologies Skill Level beginneradvanced depends on chosen topic Mentor Matt Jones5 or Artem Chernikov6 Proposal Guidelines When submitting your proposal please pick one or more topics and explain why you want to work with them a simple scope for the project and any domain specific knowledge or skills you have to help you complete the task 1 httpsensupluginsgithubiodevelopmentgir 2 httpsgithubcomsensusensucommunityplugins 3 httpsgithubcomsensuplugins 4 httpsgithubcombbatsovrubystyleguide 5 httpsgithubcommattyjones 6 httpsgithubcomkalabiyau 7 httpsgithubcomsensusensupluginspec 8 httpsensupluginsgithubiodevelopmentguidelineshtml"},{"title":"Installation","product":"Plugins","version":"2.3","location":"/plugins/2.3/installation","display_name":"Plugins 2.3: Installation","content":" Gems Installing via gem is the preferred method if one exists Standard Installation gem install sensupluginsdiskchecks Secure Installation Add the public key if you havent already as a trusted certificate gem cert add curl Ls httpsrawgithubusercontentcomsensupluginssensupluginsgithubiomastercertssensupluginspem gem install sensupluginsdiskchecks P MediumSecurity You can also download the key from certs within each repository Note If the gem has an alpha tag then you will need to use the prerelease flag or the gem will not be found Bundle Add sensupluginsdiskchecks to your Gemfile and run bundle install or bundle update Chef Using the Sensu sensugem LWRP sensugem sensupluginsdiskchecks do version 001 end Using the Chef package resource gempackage sensupluginsdiskchecks do version 001 end Puppet Using the Puppet sensugem package provider package sensupluginsdiskchecks ensure 001 provider sensugem Ansible gem namesensupluginsdiskchecks version001 statepresent executableoptsensuembeddedbingem Usage In a proper gem environment plugins can be executed directly from the command line If you want to check the disk usage you could use the checkdiskusage plugin This will only work for ruby scripts Scripts in other langauges will still need to be called directly do to binstubs not being automatically created checkdiskusagerb w 80 c 90 Depending on ruby environment you may need to call ruby directly optsensuembeddedbinruby checkdiskusagerb w 80 c 90 For details check the header file of a given plugin"},{"title":"Reference","product":"Plugins","version":"2.3","location":"/plugins/2.3/reference","display_name":"Plugins 2.3: Reference","content":" What is a Sensu pluginwhatisasensuplugin The Sensu Plugin specificationthesensupluginspecification Where to find Sensu pluginswheretofindsensuplugins The Sensu Plugins projectthesensupluginsproject Featured Sensu Pluginsfeaturedsensuplugins Nagios plugins and the Nagios exchangenagiospluginsandthenagiosexchange Write you own custom pluginswriteyourowncustomplugins Plugin executionpluginexecution How and where are plugins executedhowandwherearemutatorcommandsexecuted What programming languages are supportedwhatprogramminglanguagesaresupported What is Sensus EMBEDDEDRUBYwhatissensusembeddedruby Installing Sensu Pluginsinstallingsensuplugins Use sensuinstall to install Sensu Pluginsusesensuinstalltoinstallsensuplugins Alternative installation methodsalternativeinstallationmethods The Sensu Plugin gemthesensuplugingem What is the sensuplugin gemwhatisthesensuplugingem Plugin configurationpluginconfiguration Example check plugin definitionexamplecheckplugindefinition Sensu plugin definition specificationsensuplugindefinitionspecification What is a Sensu plugin Sensu plugins provide executable scripts or other programs that can be used as Sensu checks1 ie to monitor server resources services and application health or collect analyze metrics Sensu handlers2 ie to send notifications or perform other actions based on Sensu events3 or Sensu mutators3 ie to modify event data4 prior to handling The Sensu Plugin specification Sensu Plugins provide executable scripts or other programs that can be used as a Sensu check command5 pipe handler command6 or mutator command7 Sensu plugins must comply with a simple specification Accept inputdata via STDIN handler and mutator plugins only Optionally able to parse a JSON data payload ie event data4 Output data to STDOUT or STDERR Produce an exit status code to indicate state 0 indicates OK 1 indicates WARNING 2 indicates CRITICAL exit status codes other than 0 1 or 2 indicate an unknown or custom status Optionally able to parse command line arguments to modify plugin behavior PRO TIP Those familiar with the Nagios14 monitoring system may recognize this specification as it is the same one used by Nagios plugins As a result Nagios plugins can be used with Sensu15 without any modification Where to find Sensu Plugins The Sensu Plugins project The Sensu Plugins project8 is a communitypowered open source software project9 that is organized by members of the Sensu community in collaboration with the Sensu development team The Sensu Plugins project currently maintains hundreds of plugins providing various checks handlers and mutators which are used by thousands of organizations around the world Most of the plugins maintained by the Sensu Plugins project are Rubybased plugins which are distributed via Rubygemsorg10 and installable via sensuinstall11 Featured Sensu Plugins To help new users discover some of the most popular plugins for instrumenting their infrastructure and integrating Sensu with popular tools and services a featured plugins page12 is provided on the Sensu website These featured plugins are the same plugins developed and maintained by the Sensu plugins project13 Nagios plugins and the Nagios Exchange As previously mentioned the Sensu Plugin specification16 is 100 compatible with the Nagios plugin specification17 as a result Nagios plugins may be used with Sensu without any modification Sensu allows you to bring new life to the 50 plugins in the official Nagios Plugins project18 which began life in 199919 making it a very mature source for monitoring plugins and over 4000 plugins available in the Nagios Exchange20 Write your own custom plugins With a simple specification16 which makes it possible to write Sensu plugins in almost any programming language21 its very easy to write your own custom plugins for Sensu Example plugins The following example demonstrates how to write a very basic Sensu Plugin in the Ruby programming language usrbinenv ruby A simple example handler plugin require json Read the incoming JSON data from STDIN event JSONparseSTDINread symbolizenames true Create an output object using Ruby string interpolation output The check named eventcheckname generated the following output eventoutput Convert the mutated event data back to JSON and output it to STDOUT puts output NOTE this example doesnt provide much in terms of functionality it would simply be logged to the Sensu server23 log file but it does provide a starting point for a simple custom plugin Plugin execution How and where are plugins executed As mentioned elsewhere in the documentation see check commands5 pipe handler commands6 and mutator commands7 all plugins are executed by a Sensu client24 or Sensu server23 as the sensu user Plugins must be executable files that are discoverable on the Sensu system ie installed in a system PATH directory or they must be referenced with an absolute path eg optpathtomyplugin NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commandseg command checkhttprb u httpssensuapporg What programming languages are supported Any programming language that can satisfy the Sensu plugin specification16 requirements ndash which is nearly any programming language in the world ndash can be used to write Sensu plugins One of the primary advantages of writing Sensu plugins in the Ruby programming language is that Sensu itself is written in Ruby and all Sensu installer packages provide an embedded Ruby25 eliminating the need to install or depend on a separate runtime NOTE plugins written in programming languages other than Ruby will require the corresponding runtime to be installed in order for the plugin to run What is Sensus EMBEDDEDRUBY All Sensu Core installer packages provide an embedded Ruby runtime ie even if a system Ruby is installed Sensu will run on its own Ruby This vendored Ruby runtime can be accessed by Rubybased plugins by setting Sensus EMBEDDEDRUBY configuration variable26 to true NOTE in Sensu versions 0210 all initservice scripts provided by the Sensu Core installer packages are setting Sensus EMBEDDEDRUBY environment variable to true making the use of Sensus embedded Ruby the default behavior in modern Sensu releases Installing Sensu Plugins Use sensuinstall to install Sensu Plugins The Sensu Core package provides a tool called sensuinstall a simple wrapper around the Ruby gem utility The Sensu Install tool sensuinstall simplifies installation of Rubybased plugins The sensuinstall tool can be run with one or more arguments that determine the actions to take sensuinstall h Usage sensuinstall options h help Display this message v verbose Enable verbose logging p plugin PLUGIN Install a Sensu PLUGIN P plugins PLUGINPLUGIN PLUGIN or commadelimited list of Sensu plugins to install e extension EXTENSION Install a Sensu EXTENSION E extensions EXTENSIONEXT EXTENSION or commadelimited list of Sensu extensions to install s source SOURCE Install Sensu plugins and extensions from a custom SOURCE c clean Clean up remove other installed versions of the plugins andor extensions x proxy PROXY Install Sensu plugins and extensions via a PROXY URL NOTE sensuinstall is only available in Sensu Core 0210 EXAMPLE sensuinstallexample The following instructions will install the Sensu HTTP plugin22 using the sensuinstall utility sudo sensuinstall p nginx SENSUINSTALL installing Sensu plugins SENSUINSTALL determining if Sensu plugin gem sensupluginsnginx is already installed false SENSUINSTALL Sensu plugin gems to be installed sensupluginsnginx SENSUINSTALL installing Sensu plugin gem sensupluginsnginx Fetching sensupluginsnginx100gem 100 You can use the embedded Ruby by setting EMBEDDEDRUBYtrue in etcdefaultsensu Successfully installed sensupluginsnginx100 1 gem installed SENSUINSTALL successfully installed Sensu plugins nginx To install a specific version of a plugin simply provide a version number after the plugin name separated by a colon for example sudo sensuinstall p nginx006 SENSUINSTALL installing Sensu plugins SENSUINSTALL determining if Sensu plugin gem sensupluginsnginx006 is already installed false SENSUINSTALL Sensu plugin gems to be installed sensupluginsnginx006 SENSUINSTALL installing Sensu plugin gem sensupluginsnginx006 Fetching mixlibcli150gem 100 Successfully installed mixlibcli150 Fetching sensuplugin120gem 100 Successfully installed sensuplugin120 Fetching sensupluginsnginx006gem 100 You can use the embedded Ruby by setting EMBEDDEDRUBYtrue in etcdefaultsensu Successfully installed sensupluginsnginx006 3 gems installed SENSUINSTALL successfully installed Sensu plugins nginx006 NOTE as shown in the examples above the sensuinstall utility will show the output of any gems including gem dependencies installed using sensuinstall Alternative installation methods Coming soon The Sensu Plugin gem What is the sensuplugin gem Although Sensu Plugins may be written in any programming language21 there are certain advantages of writing plugins in Ruby From an operations perspective Rubybased plugins are convenient because they are able to run on Sensus embedded Ruby25 Rubybased plugins also benefit from the sensuplugin gem27 mdash a Ruby library that provides some builtin functionality and a number of helper classes and that simplify custom plugin development Much of the builtin functionality provided by the sensuplugin gem depends on custom client check andor handler definition attributes as documented below Plugin configuration Example check plugin definition The following is an example Sensu check definition29 that uses the checkhttprb script provided by the Sensu HTTP Plugin22 and a custom check definition attribute28 called refresh Although the refresh attribute itself is not directly supported by Sensu the sensuplugin gem does provide builtin support for reducing alert fatigue via the SensuPluginHandler class ie only handling events on the first occurrence and again every N occurrences where N refresh checks apihealth command checkhttprb u httpsapiexamplecomhealth standalone true interval 60 refresh 60 Sensu plugin definition specification NOTE plugins based on the sensuplugin gem derive configuration from custom check definition attributes28 The configuration examples provided above and the specification provided here are for clarification and convenience only ie this specification is just an extension of the check definition specification29 and not a definition of a distinct Sensu primitive Check definition attributes occurrences "},{"title":"Release Process","product":"Plugins","version":"2.3","location":"/plugins/2.3/release_process","display_name":"Plugins 2.3: Release Process","content":"Currently we use Travishttpstravisciorg is used to run tests across all forks and deploying the gems When a Pull Request is submitted Travis will automatically execute all default tasks defined in the Rakefile found in the repo root and display the results in the PR When a committer wishes to deploy a new release the following procedure should be followed 1 Update CHANGELOG to reflect all of the changes that has happened between last release and now The Unreleased link in the CHANGELOG gives you a nice diff 1 make sure the README is updated as neccessary 1 Update the version using semver2httpsemverorgspecv200html 1 make a git release Example with hub hub release create majorminorpatch 1 Make sure the gem is actually uploaded to rubygems Its rare but Ive seen times when it doesnt upload for whatever reason 1 travis will only deploy if the build is passing so make sure master is building before cutting a release All tag commits that pass tests in all supported runtimes will kick a deploy to Rubygems"},{"title":"Roadmap","product":"Plugins","version":"2.3","location":"/plugins/2.3/roadmap","display_name":"Plugins 2.3: Roadmap","content":" Overview There are big plans in store for the sensuplugins Not just in terms of code but in terms of community involvement and scope Some of these are fairly far off some are nearing completion Community Involvement Umbrella Org Sensu itself is a framework and the plugins are just one piece of it Many of the companies that use Sensu have created custom workflows checks and handlers then open sourced them These could solve another users problem but if the user doesnt know about them it wont do them any good The thought here is to have a central location where other companies and individuals can list their code for all to use There would be few conditions surrounding this and it will give people a chance to see how others have implemented or modified existing solutions These companies wouldnt have to go through the PR process as they would be considered unoffical externally maintained projects and they would retain full control of the code yet be able to share it and get greater feedback There are are lot of things to still work out and think about but its on the table Planned Features Arch Independent Code One of the big pushes will be for arch independent code A short coming of other major monitoring solutions is the lack of real platform independence This is a high priority and is something that is always in consideration Many of the disk and process checks have already been refactored to achieve this and more are in progress There will always be platform dependent checks such as linux kernel monitors or Windows event monitors but the more the number of these that can be reduced the better Wider Platform Testing Due to constraints with Travis we are only able to run automated tests against OSX109 and Ubuntu LTS We are working on a workflow that will allow use to run automated tests against multiple OSs and platforms including OSX108 OSX109 OSX1010 FreeBSD latest LTS and N1 Ubuntu latest LTS and N1 RHELCentOs 5x RHELCentOs 6x RHELCentOs 7x Debian latest stable and N1 Suse latest stable and N1 Solaris maybe Windows 2k8 Windows 2k12 Due to the scope of this and the resources necessary it will be a long time coming but talks around this are slowly becoming action Official BSD Support Ruby is just ruby is should not matter the platform With that being said support for sensuplugins on FreeBSD92 and 101 is coming shortly Several of the repo have Vagrantboxes for these platforms so one could test functionality on their own before installing the gem in their environment Website Plugin Directory With the split of the community repo in 150 separate repos users may have a hard time finding a particular monitor or know that a monitor or handler for a service already exists There should be a directory we can point them to that will offer this functionality in a clean manner The directory should be updated automatically upon the release of a new gem github tag or repo Consideration will need to be given for the ratelimiting that is inherent with Github There is still a lot of talk going on around this but Travis GH hooks and sinatra and fairly high on the tool list Configuration Mgmt Tool With the split of the community repo in 150 separate repos users may have a hard time finding a particular monitor or know that a monitor or handler for a service already exists It would be nice for a user to be able to query a db and get back a list of gems to install to monitor their system For example a user wants to setup baseline monitoring but has no idea what to install for gems They would type in baseline and get back a list of packages whose metadata matches baseline There is still a lot of talk going on around this but Travis GH hooks and sinatra and fairly high on the tool list I mattyjones would love to use golang for this and the directory but that may be extreme overkill Note I personally mattjones hate gui configuration management tools and this almost falls in the realm of it but if done properly and effectively it could avoid becoming a beast of burden that needs to be put to sleep I leave it up to the community to figure out what they want I just know there has to be a better way Help Wanted Grab a repo and come play If you have another thought on something related then by all means reach out to someone on the team Until then much monitoringlove sensuplugins admins"},{"title":"Testing","product":"Plugins","version":"2.3","location":"/plugins/2.3/testing","display_name":"Plugins 2.3: Testing","content":" Linting Only pull requests passing Rubocop will be merged Rubocop is used to lint the ruby plugins This is done to standardize the style used within these plugins and ensure high quality code Most current rules6 are in effect No linting is done on Ruby code prior to version 2x Ruby 192 and 187 support has been dropped the plugins may still function with these versions but no tests will be run against them nor will code such as hashes be specifically written or enforced to ensure backwards compatibility Rubocop compliance can be checked by installing the gem and running rubocop with the repo Running rubocop a will attempt to autocorrect any issues saving considerable time in large files If it truly makes sense for code to violate a rule disable that rule within the code by either using rubocopdisable at the end of the line in violation or rubocopdisable rubocopenable If either of these methods are used please mention in the PR as this should be kept to an absolute minimum at times this can be necessary though especially concerning method length and complexity Rspec Currently RSpec3 is the test framework9 of choice Please add coverage for your check Checks will not be considered production grade and stable until they have coverage Tests are not required though to submit a check merely encouraged for the benefit of all You can run all tests locally using rake default to run all specs and rubocop tests RSpec tests are currently run against 20 and 21 There are currently no plans to support 18x or test against 192 and 193 This is little bit hard almost impossible for nonruby checks Let someone from the team10 know and maybe can can help Codeship Testing Pipeline This pipeline is run upon any commits to the master branch including Pull Request merge commits Due to limitations with Codeship tests are not run across forks and the build logs are not publicly available jut the build status If you wish to work on the build pipeline please speak to a team member about necessary access Setup Deploy the needed keys cd tmp git clone depth 1 gitgithubcomsensupluginstomservogit cd tomservo rake setupsetupenv cd clone Setup the desired Ruby environments Ruby 193 rvm use 193 install gem install bundler bundle install Ruby 20 rvm use 20 install gem install bundler bundle install Ruby 21 rvm use 21 install gem install bundler bundle install Ruby 22 rvm use 22 install gem install bundler bundle install Test Commands Ruby 193 rvm use 193 bundle exec rake default gem build gemspec gem install gem Ruby 20 rvm use 20 bundle exec rake default gem build gemspec gem install gem Ruby 21 rvm use 21 bundle exec rake default gem build gemspec gem install gem Ruby 22 rvm use 22 bundle exec rake default gem build gemspec gem install gem For each supported Ruby version we ensure the following are met Rubocop passes Yardocs build RSpec tests pass Ensure all plugins in bin are executable The gem is built without errors The gem can be installed without errors Currently this is only automated to run in Ubuntu Many repos are run tested manually against CentOS and FreeBSD as well Currently we dont have an automated way to test against them but that is forthcoming Travis Test Pipeline This pipeline is run against every commit to a repo including commits across forks and deployment commits by Tom Servo language ruby cache bundler install bundle install rvm 193 20 21 22 notifications email recipients sensupluginsensupluginsio onsuccess change onfailure always script bundle exec rake default For each supported Ruby version we ensure the following are met Rubocop passes Yardocs build RSpec tests pass Ensure all plugins in bin are executable 6 httpsgithubcomsensupluginsGIRblobmasterfilestemplatesgemrubocopymlerb 7 httpsgithubcomsensupluginsGIRblobmasterfilestemplatesgemtravisymlerb 8 httpsgithubcomsensupluginsGIRblobmasterfilestemplatesgemRakefileerb 9 httpsgithubcomsensusensupluginspec 10 httpsgithubcomorgssensupluginspeople"},{"title":"Tom Servo","product":"Plugins","version":"2.3","location":"/plugins/2.3/tom_servo","display_name":"Plugins 2.3: Tom Servo","content":"Tom ServohttpsgithubcomsensupluginstomservoblobmasterREADMEmd is our testing and deployment tool His job is top make our lives easy All deployment scripts code and tooling will be handled by him"},{"title":"What's new?","product":"Plugins","version":"latest","location":"/plugins/_index","display_name":"Plugins latest: What's new?","content":""},{"title":"Sensu Core","tags":["sensu","core","sensu core","0.29","index"],"product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/_index","display_name":"Sensu Core 0.29: Sensu Core","content":" Overview Monitor servers services application health and business KPIs Collect and analyze custom metrics Get notified about failures before your users do Give your business the competitive advantage it deserves"},{"title":"API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/_index","display_name":"Sensu Core 0.29: API","content":""},{"title":"Aggregates API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/aggregates","display_name":"Sensu Core 0.29: Aggregates API","content":" Reference documentation The aggregates API endpointtheaggregatesapiendpoint aggregates GETaggregatesget The aggregatesname API endpointstheaggregatesnameapiendpoints aggregatesname GETaggregatesnameget aggregatesname DELETEaggregatesnamedelete The aggregatesnameclients API endpointtheaggregatesnameclientsapiendpoint aggregatesnameclients GETaggregatesnameclientsget The aggregatesnamechecks API endpointtheaggregatesnamechecksapiendpoint aggregatesnamechecks GETaggregatesnamechecksget The aggregatesnameresultsseverity API endpointtheaggregatesnameresultsseverityapiendpoint aggregatesnameresultsseverity GETaggregatesnameresultsseverityget The aggregates API endpoint theaggregatesapiendpoint The aggregates API endpoint provides HTTP GET access to named aggregate data1 aggregates GET EXAMPLES aggregatesgetexamples The following example demonstrates a aggregates API query which results in a JSON Array of JSON Hashes containing named check aggregates1 curl s httplocalhost4567aggregates jq name checkhttp name checkwebapp name elasticsearchhealth API specification aggregatesgetspecification aggregates GET "},{"title":"Checks API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/checks","display_name":"Sensu Core 0.29: Checks API","content":" Reference documentation The checks API endpointthechecksapiendpoint checks GETchecksget The checkscheck API endpointsthecheckscheckapiendpoints checkscheck GETcheckscheckget The request API endpointtherequestapiendpoint request POSTrequestpost The checks API endpoint checks GET The checks API endpoint provides HTTP GET access to subscription check1 data EXAMPLE checksgetexample The following example demonstrates a request to the checks API resulting in a JSON Array of JSON Hashes containing subscription check definitions2 curl s http1270014567checks jq name sensuwebsite interval 60 subscribers production command checkhttprb u httpssensuapporg API Specification checksgetspecification checks GET "},{"title":"Clients API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/clients","display_name":"Sensu Core 0.29: Clients API","content":" Reference documentation The clients API endpointtheclientsapiendpoint clients GETclientsget clients POSTclientspost The clientsclient API endpointstheclientsclientapiendpoints clientsclient GETclientsclientget clientsclient DELETEclientsclientdelete The clientsclienthistory API endpointstheclientsclienthistoryapiendpoints"},{"title":"API Configuration","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/configuration","display_name":"Sensu Core 0.29: API Configuration","content":" Reference documentation API configurationapiconfiguration Example API definitionexampleapidefinition API definition specificationapidefinitionspecification API configuration Example API definition The following is an example API definition at etcsensuconfdapijson api host 57435322 bind 0000 port 4567 API definition specification The API definition uses the api definition scope api attributes host "},{"title":"Events API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/events","display_name":"Sensu Core 0.29: Events API","content":" Reference documentation The events API endpointtheeventsapiendpoint events GETeventsget The eventsclient API endpointtheeventsclientapiendpoint eventsclient GETeventsclientget The eventsclientcheck API endpointstheeventsclientcheckapiendpoints eventsclientcheck GETeventsclientcheckget eventsclientcheck DELETEeventsclientcheckdelete The resolve API endpointtheresolveapiendpoint resolve POSTresolvepost The events API endpoint events GET The events API endpoint provide HTTP GET access to the Sensu event registry EXAMPLES eventsgetexamples The following example demonstrates a events API query which returns a JSON Array of JSON Hashes containing event data1 curl s httplocalhost4567events jq timestamp 1460303502 action create occurrences 1 check totalstatechange 14 history 0 3 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 1 status 1 output CheckHttp WARNING 301n command checkhttprb u websitehttpsensuapporg subscribers production interval 60 handler mail name sensuwebsite issued 1460303502 executed 1460303502 duration 0032 client timestamp 1460303501 version 100 website httpgooglecom socket port 3030 bind 127001 subscriptions production environment development address 127001 name client01 id 0f42ec9412bf4918a0b952fd57e8ee96 API specification eventsgetspecification events GET "},{"title":"Health & Info APIs","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/health-and-info","display_name":"Sensu Core 0.29: Health & Info APIs","content":" Reference documentation How to obtain API status informationhowtoobtainapistatusinformation The health API endpointthehealthapiendpoint health GEThealthget The info API endpointtheinfoapiendpoint info GETinfoget How to obtain API status information The Sensu API provides two distinct endpoints for obtaining API status information health and info The Health API provides status information about the health of the APIs connections to the Sensu data store1 and transport2 The Info API provides a report on the status of the API including API version the status of the APIs connections to the Sensu data store and transport and the number of messages and consumers in various transport queues The health API endpoint health GET The health API provides HTTP GET access to test or verify the health of the monitoring system The Health API is provided for monitoring Sensu mdash it facilitates service checks to ensure that a minimal number of Sensu servers3 are connected to the transport ie transport consumers andor to ensure that the transport queue isnt growing which would indicate that the Sensu servers arent able to keeping up with the volume of keepalive messages4 and check results5 being produced NOTE the health API obtains its information via the info API PRO TIP the Health API messages URL parameter6 eg healthmessages1000 can be used to monitor the number of messages queued on the Sensu transport2 and then leveraged by other automation tools to trigger an auto scaling or similar provisioning event to automatically add one or more Sensu servers to a Sensu installation EXAMPLE healthgetexample In the following example querying the health API with the consumers6 URL parameter will return an HTTP response code7 to indicate if the expected number of consumers ie Sensu servers3 are processing check results In this example we are expecting at least two 2 consumers to be running at all times ie at least two Sensu servers processing check results The 412 Precondition Failed HTTP response code7 indicates that the requested number of consumers are not registered curl s i http1270014567healthconsumers2 HTTP11 412 Precondition Failed AccessControlAllowOrigin AccessControlAllowMethods GET POST PUT DELETE OPTIONS AccessControlAllowCredentials true AccessControlAllowHeaders Origin XRequestedWith ContentType Accept Authorization Connection close NOTE the 412 Precondition Failed HTTP response code7 does not mean that the API itself is unavailable but rather it is the equivalent of a false response to the API query ie if you want to know if there are at least two Sensu servers processing check results a 412 response code would mean no WARNING transport consumers are a native concept in pubsub technology8 including actual message queues like RabbitMQ8 Because the Sensu transport library2 supports transports which are not actual message queues eg Redis10 some transports do not support the Health API consumers check because they dont support the concept of consumers ie this means that healthconsumers1 will always fail returning a 412 response code for Sensu installations using Redis as the transport regardless of the number of Sensu servers which may be registered and processing check results API Specification healthgetspecification health GET "},{"title":"RESTful API Overview","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/overview","display_name":"Sensu Core 0.29: RESTful API Overview","content":" Sensu API The Sensu API provides access to monitoring data collected by Sensu such as a client registry1 check results2 and event data3 The API can be used to request adhoc check executions and resolve events among other things RESTful JSON API The Sensu API is JSON4based RESTful API5 Familiarity with or willingness to Google industry standard RESTful API behaviors ndash including HTTP response codes6 ndash are strongly recommended Reference documentation Clients APIclients Checks APIchecks Results APIresults Aggregates APIaggregates Events APIevents Stashes APIstashes Health Info APIhealthandinfo Settings APIsettings API configurationconfiguration Response Content Filtering Sensu API endpoints that support the GET HTTP method support HTTP response content filtering using one or more filter attributes To use response content filtering construct the URL for your API request using a dot notation query string parameter beginning with filter eg eventsfilterclientenvironmentproduction The Sensu API will only return response content objects that match the specified response content filter attributes Multiple attributes may be specified for a request eg eventsfilterclientenvironmentproductionfiltercheckcontactops 1 referenceclientsregistrationandregistry 2 referencecheckscheckresults 3 referenceeventseventdata 4 httpwwwjsonorg 5 httpsenwikipediaorgwikiRepresentationalstatetransfer 6 httpsenwikipediaorgwikiListofHTTPstatuscodes"},{"title":"Results API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/results","display_name":"Sensu Core 0.29: Results API","content":" Reference documentation The results API endpointtheresultsapiendpoint results GETresultsget results POSTresultspost The resultsclient API endpointtheresultsclientapiendpoint resultsclient GETresultsclientget The resultsclientcheck API endpointstheresultsclientcheckapiendpoints resultsclientcheck GETresultsclientcheckget resultsclientcheck DELETEresultsclientcheckdelete The results API endpoint theresultsapiendpoint The results API endpoint provides HTTP GET and HTTP POST access to current check result data1 results GET The results API endpoint provides HTTP GET access to fetch current check result data1 EXAMPLES resultsgetexamples The following example demonstrates a results API query which returns a JSON Array of JSON Hashes containing check results1 curl s httplocalhost4567results jq check status 1 output CheckHttp WARNING 301n command checkhttprb u websitehttpsensuapporg subscribers production interval 60 handler mail name sensuwebsite issued 1460312322 executed 1460312322 duration 0032 client client01 check status 0 output Keepalive sent from client 2 seconds ago executed 1460312365 issued 1460312365 name keepalive thresholds critical 180 warning 120 client client01 API specification resultsgetspecification results GET "},{"title":"Settings API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/settings","display_name":"Sensu Core 0.29: Settings API","content":" Reference documentation The settings API endpointthesettingsendpoint settings GETsettingsget The settings API endpoint thesettingsendpoint settings GET The settings API provides HTTP GET access to the APIs running configuration settings Sensitive setting values are redacted by default unless the URL query parameter redacted is set to false eg settingsredactedfalse EXAMPLE settingsgetexample The following example demonstrates a request to the settings API resulting in a JSON Hash containing the APIs running configuration settings curl s http1270014567settings jq api cors Headers Origin XRequestedWith ContentType Accept Authorization Credentials true Methods GET POST PUT DELETE OPTIONS Origin password REDACTED user admin checks API Specification settingsgetspecification settings GET "},{"title":"Silenced API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/silenced","display_name":"Sensu Core 0.29: Silenced API","content":" Reference documentation The silenced API endpointsthesilencedapiendpoints silenced GETsilencedget silenced POSTsilencedpost silencedidsid GETsilencedidsidget silencedclear POSTsilencedclearpost silencedsubscriptionssubscription GETsilencedsubscriptionsget silencedcheckscheck GETsilencedchecksget The silenced API endpoints The Silence API provides endpoint HTTP POST and GET access to create query and clear delete a silence entry via the Sensu API silenced GET Example Querying for all silence entries curl s X GET httplocalhost4567silenced jq expire 3530 expireonresolve false creator null reason null check checkhaproxy subscription loadbalancer id loadbalancercheckhaproxy expire 1 expireonresolve true creator sysopexamplecom reason we ran out of time check checkntpd subscription all id allcheckntpd API specification silencedgetspecification silenced GET "},{"title":"Stashes API","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/api/stashes","display_name":"Sensu Core 0.29: Stashes API","content":" Reference documentation The stashes API endpointsthestashesapiendpoints stashes GETstashesget stashes POSTstashespost The stashespath API endpointsthestashespathapiendpoints stashespath GETstashespathget stashespath POSTstashespathpost stashespath DELETEstashespathdelete The stashes API endpoints The stashes API endpoint provides HTTP GET and HTTP POST access to Sensu stash data3 via the Sensu keyvalue store4 stashes GET EXAMPLES stashesgetexamples The following example demonstrates a stashes query which results in a JSON Array of JSON Hashes containing stash data3 curl s httplocalhost4567stashes jq path silencei424242chefclientprocess content timestamp 1383441836 expire 3600 path applicationstorefront content timestamp 1381350802 endpoints httpshostnamestore expire 1 API specification stashesgetspecification stashes GET "},{"title":"CHANGELOG","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/changelog","display_name":"Sensu Core 0.29: CHANGELOG","content":" Releases Core 0290 Release Notescorev0290 Core 0285 Release Notescorev0285 Core 0284 Release Notescorev0284 Core 0283 Release Notescorev0283 Core 0282 Release Notescorev0282 Core 0281 Release Notescorev0281 Core 0280 Release Notescorev0280 Core 0271 Release Notescorev0271 Core 0270 Release Notescorev0270 Core 0265 Release Notescorev0265 Core 0264 Release Notescorev0264 Core 0263 Release Notescorev0263 Core 0262 Release Notescorev0262 Core 0261 Release Notescorev0261 Core 0260 Release Notescorev0260 Core 0257 Release Notescorev0257 Core 0256 Release Notescorev0256 Core 0255 Release Notescorev0255 Core 0254 Release Notescorev0254 Core 0253 Release Notescorev0253 Core 0251 Release Notescorev0252 Core 0250 Release Notescorev0250 Core 0241 Release Notescorev0241 Core 0240 Release Notescorev0240 Core 0232 Release Notescorev0232 Core 0231 Release Notescorev0231 Core 0230 Release Notescorev0230 Core 0290 Release Notes corev0290 Source GitHubcomhttpsgithubcomsensusensublobmasterCHANGELOGmd0290"},{"title":"FAQs","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/faq","display_name":"Sensu Core 0.29: FAQs","content":" Sensu Frequently Asked Questions Please note the following frequently asked questions about Sensu Core Sensu Enterprise Sensu Training Professional Services for Sensu and more If you need support for Sensu please consider giving Sensu Enterprisehttpssensuapporggetstarted a try Do I need RabbitMQ to be installed on every system I wish to monitor No Sensu uses RabbitMQreferencerabbitmq as a Transportreferencetransport Sensu services require access to a shared instance of the defined Sensu Transport eg a RabbitMQ cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscription topics Does Redis need to be installed on every system I wish to monitor No Sensu uses Redisreferenceredis as a data store and the Sensu server services ie sensuserver sensuapi for Sensu Core sensuenterprise for Sensu Enterprise require access to the same Redis instance or cluster to store and access the Sensu client registry check results check execution history and current event data Do check definitions need to exist on every system I wish to monitor No Check definitions can be written as publishsubscribe pubsub or standalone Pubsub checks which specify a list of subscribers need only be configured on the Sensu server Standalone checks which are scheduled and executed by the Sensu client need only be configured on the clients where they should be run Where should check plugin executables be installed Regardless of where checks are defined the actual check executables need to exist on the filesystem for the Sensu client to execute them Check plugin executables can be installed in etcsensuplugins or optsensuembeddedbin the latter being the location where plugin executables are installed via sensuinstall What is a standalone check A standalone check is a check definition that is installed on and executed by the Sensu client without being scheduled by the Sensu server Standalone checks defer Check execution scheduling responsibilitiesoverviewarchitecturecheckexecutionscheduler to Sensu clients enabling decentralized management of monitoring checks and distribution of scheduling responsibilities Standalone checks may be used in conjunction with pubsub checks and are distinguished from pubsub checks by inclusion of the standalone true configuration parameter What happens if a single check is defined on both the Sensu server and client When a check request is published for a check defined on the Sensu server the Sensu client will look for a local definition matching the check name prior to executing the check If a local definition exists it is mergedreferenceconfigurationconfigurationmerging with the definition provided by the server with any local definition attributes overriding the definition provided by the Sensu server What is Sensu Client safemode In safemode a client will not run a check published by a Sensu server unless that check is also defined on the client Safe mode must be enabled on the Sensu Client via the safemode configuration attribute Can multiple Sensu servers be run concurrently in a cluster Yes Sensu is designed to be scaled horizontally ie by adding additional Sensu servers It supports fully automated leader election ensuring that a single Sensu server acts as a centralized Check Execution Scheduleroverviewarchitecturecheckexecutionscheduler automated failover automatically electing a new leader if the previous leader is unexpectedly unavailable and distributed event processing check results are distributed across all Sensu servers in a roundrobin fashion Running more than one Sensu server is highly recommended for performance and availability How are new systems registered Automatically Sensu clients register themselves when they start up The Sensu client process requires access to the Sensu Transportreferencetransport by default this is RabbitMQreferencerabbitmq see Sensu Configurationreferenceconfigurationtoplevelconfigurationscopes and some minimal client configuration eg a name address and one or more subscriptions in order to start When the Sensu client process starts it begins sending keepalives ndash a special type of check result containing client configuration data ndash which the Sensu server uses to know that a client is still connected When a client keepalive is received for a client name that is not currently registered with Sensu the client is added to the registry and a registration event is created automatically Do system clocks need to be synchronized Yes The Sensu services ie sensuclient sensuserver sensuapi sensuenterprise use the localsystem clock for generating timestamps When system clocks are out of sync between Sensu clients where data is collected and the Sensu server where data is processed Sensu may generate false positive client keepalive events among other potentially unexpected behaviors Time synchronization can be facilitated with NTPhttpwwwntporg Is Sensu Enterprise available as a hosted SaaS solution No Like Sensu Core Sensu Enterprisesensuenterpriseindex is installed on your organizations infrastructure alongside other applications and services Sensu Enterprise packages are available for major Linux distributions including RHEL CentOS Debian and Ubuntu Is Sensu available for Microsoft Windows Yes An MSI installer package is available on the Downloads page Please visit the Sensu documentation for more information on configuring Sensu on Windowsplatformssensuonmicrosoftwindows How do I increase log verbosity You can toggle debug logging on and off by sending the Sensu process a TRAP signal For example ps aux grep sensuserver sensu 5992 17 03 177232 24352 kill TRAP 5992 downloads httpssensuapporgdownloads"},{"title":"Adding a Client","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/guides/adding-a-client","display_name":"Sensu Core 0.29: Adding a Client","content":"Sensu clients are pieces of infrastructure that Sensu monitors for you The Sensu client software allows you to register a running instance of itself as capable of running any checks they might be eligible for Infrastructure sometimes includes hardware or services that dont necessarily support running the Sensu client software but still needs to be monitored For those cases proxy clientsproxyclients let you monitor anything you can tell Sensu about Adding a Sensu Client One of the first challenges new Sensu users often encounter is learning what is required to get a remote Sensu client1 to communicate with the Sensu server2 If youre in a hurry skip ahead to add a remote Sensu client3 for stepbystep instructions Alternatively once you understand the two requirements for adding Sensu clients youll know everything you need to start deploying Sensu clients to your entire infrastructure Please continue reading to learn how adding Sensu clients starts with configuration4 and is ultimately all about the transport5 It starts with configuration Sensu is designed to be operated via configuration This core philosophy is what enables Sensu to work so seamlessly with modern automation solutions and configuration management platforms To learn more about how Sensu is configured please consult the Sensu configuration reference documentation6 The Sensu client requires a minimal amount of configuration to enable it to automatically register itself7 with the Sensu server which configuration includes a client definition8 eg the client name address and subscriptions and a transport definition9 Its all about the transport The Sensu processes use a transport10 a message bus for communication By default this is RabbitMQ11 but modern versions of Sensu have added support for alternative transports12 including Redis13 Without a transport connection a Sensu client will be unable to send monitoring data eg keepalive messages14 check results15 etc In order to connect to the transport the Sensu client will need three pieces of information Which transport to use this tells Sensu which transport library should it load and which configuration scope should it use to obtain connection details A valid transport definition this provides Sensu with an IP address or hostname and any security credentials needed to connect to the transport Network access to the transport socket ie the Sensu client will need outbound network access and the transport will need to be configured to listen for remote network connections Add a remote Sensu client With the exception of Sensu clients that are running on the Sensu server which is very useful and strongly recommended all Sensu clients are essentially remote clients as they have to establish network communication to send monitoring data eg client keepalives14 and check results15 Please note the following steps that are required to add a remote Sensu client 1 Configure the client Create a client definition located at etcsensuconfdclientjson with the following contents replacing the values for the client name address and subscriptions with the corresponding values for the client you are adding client name i041256 address 8888 subscriptions default webserver 2 Tell the client which transport to use Create a transport definition at etcsensuconfdtransportjson with the following contents replacing the value for the transport name with the corresponding value for the transport you are using eg use transport redis if you are using the Redis transport transport name rabbitmq reconnectonerror true 3 Tell the client how to connect to the transport Create a transport definition at etcsensuconfdrabbitmqjson or etcsensuconfdredisjson if you are using the Redis transport NOTE please consult the corresponding reference documentation for RabbitMQ11 or Redis13 for more configuration examples and detailed information on how to configure Sensus connection 4 Start the client Start the Sensu client and verify connectivity by consulting the Sensu client log file NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdsensuclient start sudo service sensuclient start Proxy Clients Sometimes a logical piece of infrastructure isnt a device we can run Sensu on Fundamentally Sensu gives you the flexibility to separate how checks run from where they run which lets you monitor arbitrary named black box devices or services For example you may have a router that you cant run Sensu on but publishes interesting information over SNMP that you want to gather metrics from Or maybe your monitor which other datacenters are visibleonline to you or have any number of creative use cases You can create a proxy client16 that can have attributes for use in check execution allowing you to use the client registry naturally for managed an unmanaged infrastructure See the reference for creating proxy clients16 or details on writing checks against them17 for more Troubleshooting 1 referenceclients 2 referenceserver 3 addaremotesensuclient 4 itstartswithconfiguration 5 itsallaboutthetransport 6 referenceconfiguration 7 referenceclientsregistrationandregistry 8 referenceclientsclientdefinitionspecification 9 referencetransporttransportdefinitionspecification 10 referencetransport 11 referencerabbitmq 12 referencetransportselectingatransport 13 referenceredis 14 referenceclientsclientkeepalives 15 referencecheckscheckresults 16 referenceclientsproxyclients 17 introtochecksproxyclients"},{"title":"Intro to Checks","version":"0.29","location":"/sensu-core/0.29/guides/intro-to-checks","display_name":"undefined 0.29: Intro to Checks","content":" An Introduction to Checks The purpose of this guide is to help Sensu users create monitoring checks At the conclusion of this guide you the user should have several Sensu checks in place to monitor and measure machine resources applications and services Each Sensu monitoring check in this guide demonstrates one or more check definition features for more information please refer to the Sensu checks reference documentation1 Objectives What will be covered in this guide Creation of standard checks functional tests Creation of metric collection checks server resources etc Creation of metric analysis checks querying time series data etc What are Sensu checks whataresensuchecks Sensu checks allow you to monitor server resources services and application health as well as collect analyze metrics they are executed on servers running the Sensu client Checks are essentially commands or scripts that output data to STDOUT or STDERR and produce an exit status code to indicate a state The common exit status codes used are 0 for OK 1 for WARNING 2 for CRITICAL and 3 or greater to indicate UNKNOWN or CUSTOM Sensu checks use the same specification as Nagios therefore Nagios check plugins may be used with Sensu Create a standard check Standard Sensu checks are used to determine the health of server resources services and applications A standard check will query a resource for information to determine its state Once a standard check has determined the resource state it outputs a human readable message and exits with the appropriate exit status code to indicate its stateseverity OK WARNING etc Monitor the cron service The following instructions install the check dependencies and configure the Sensu check definition in order to monitor the Cron service Install dependencies checkcroninstalldependencies The checkprocessrb script provided by the Sensu Process Checks Plugin2 can reliably detect if a service such as Cron is running or not The following instructions will install the Sensu Process Checks Plugin2 version 006 using Sensus embedded Ruby providing the checkprocessrb script sudo sensuinstall p processchecks006 Create the check definition for Cron The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdcheckcronjson This check definition uses the checkprocessrb script installed above3 to determine if the Cron service is running The check is named cron and it runs checkprocessrb p cron on Sensu clients with the production subscription every 60 seconds interval NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks cron command checkprocessrb p cron subscribers production interval 60 For a full listing of the checkprocessrb command line arguments run optsensuembeddedbincheckprocessrb h Currently the Cron check definition requires that check requests be sent to Sensu clients with the production subscription This is known as pubsub check Optionally a check may use standalone mode which allows clients to schedule their own check executions The following is an example of the Cron check using standalone mode true The Cron check will now be executed every 60 seconds on each Sensu client with the check definition A Sensu check definition with standalone true does not need to specify subscribers checks cron command checkprocessrb p cron standalone true interval 60 By default Sensu checks use the default Sensu event handler for events they create To specify a different Sensu event handler for a check use the handler attribute The debug event handler used in this example will log the Sensu event data to the Sensu server or Sensu Enterprise log checks cron command checkprocessrb p cron standalone true interval 60 handler debug Using multiple handlers To specify multiple Sensu event handlers use the handlers attribute plural NOTE if both handler and handlers plural check definition attributes are used handlers will take precedence checks cron command checkprocessrb p cron standalone true interval 60 handlers default debug Create a metric collection check Metric collection checks are used to collect measurements from server resources services and applications Metric collection checks can output metric data in a variety of metric formats Graphite plaintext4 Nagios Performance Data5 OpenTSDB6 Metrics 20 wire format7 Measuring CPU utilization Install dependencies cpumetricsinstalldependencies The metricscpurb script provided by the Sensu CPU Checks Plugin8 collects and outputs CPU metrics in the Graphite plaintext format The following instructions will install the Sensu CPU Checks Plugin8 version 003 using Sensus embedded Ruby providing the metricscpurb script sudo sensuinstall p cpuchecks003 Create the check definition for CPU metrics The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdcpumetricsjson This check definition uses the metricscpurb script installed above9 to collect CPU metrics and output them in the Graphite plaintext format By default Sensu checks with an exit status code of 0 for OK do not create events unless they indicate a change in state from a nonzero status to a zero status ie resulting in a resolve action see Sensu Events10 Metric collection checks will output metric data regardless of the check exit status code however they usually exit 0 To ensure events are always created for a metric collection check the check type of metric is used The check is named cpumetrics and it runs metricscpurb on Sensu clients with the production subscription every 10 seconds interval The debug handler is used to log the graphite plaintext CPU metrics to the Sensu server or Sensu Enterprise log NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks cpumetrics type metric command metricscpurb subscribers production interval 10 handler debug For a full listing of the metricscpurb command line arguments run optsensuembeddedbinmetricscpurb h Create a metric analysis check A metric analysis check analyzes metric data which may or may not have been collected by a metrics collection check11 By querying external metric stores eg Graphite to perform data evaluations metric analysis checks allow you to perform powerful analytics based on trends in metric data rather than a single data point For example where monitoring and alerting on a single CPU utilization data point can result in false positive events based on momentary spikes monitoring and alerting on CPU utilization data over a specified period of time will improve alerting accuracy Because metric analysis checks require interaction with an external metric store providing a functional example is outside of the scope of this guide However assuming the existence of a Graphite installation that is populated with metric data the following example checks could be used The following check uses the checkgraphitedatarb script provided by the Sensu Graphite Plugin12 to query the Graphite API at localhost9001 The check queries Graphite for a calculated moving average using the last 10 data points of the load balancer session count The session count moving average is compared with the provided alert thresholds A Sensu client running on the Graphite server would be responsible for scheduling and executing this check standalone mode NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks sessioncount command checkgraphitedatarb s localhost9001 t movingAveragelb1assetsbackendsessioncurrent10 w 100 c 200 standalone true interval 30 The following check uses the checkgraphitedatarb script provided by the Sensu Graphite Plugin12 to query the Graphite API at localhost9001 for disk capacity metrics The Graphite API query uses highestCurrent to grab only the highest disk capacity metric to be compared with the provided alert thresholds This check will trigger an event alert when one or more disks on any machine are at the configured capacity threshold In this example configuration the check is configured to warn at 85 capacity w 85 and to raise a critical alert at 95 capacity c 95 checks diskcapacity command checkgraphitedatarb s localhost9001 t highestCurrentdiskcapacity1 w 85 c 95 a 120 standalone true interval 30 The following instructions will install the Sensu Graphite Plugin12 version 006 using Sensus embedded Ruby providing the checkgraphitedatarb script sudo sensuinstall p graphite006 Checking on Other Clients proxyclients Sensu supports running checks where the results are considered to be for a client that isnt actually the one executing the check regardless of whether that client is a Sensu client or simply a proxy client14 There are a number of reasons for this use case but fundamentally Sensu handles it the same Checks are scheduled normally but by specifying a Proxy Request13 in your check clients that match certain definitions their clientattributes cause the check to run for each one The attributes supplied must normally match exactly as stated no variables or directives have any special meaning but you can still use eval to perform more complicated filtering with Ruby on the available value such as finding clients with particular subscriptions given that were dealing with arrays proxyrequests clientattributes uservariable somevalue subscriptions eval valueincludeasubscription 1 referencechecks 2 httpsgithubcomsensupluginssensupluginsprocesschecks 3 checkcroninstalldependencies 4 httpgraphitereadthedocsorgenlatestfeedingcarbontheplaintextprotocol 5 httpnagiossourceforgenetdocs30perfdatahtml 6 httpopentsdbnetdocsbuildhtmluserguidewritinghtml 7 httpmetrics20orgspec 8 httpsgithubcomsensupluginssensupluginscpuchecks 9 cpumetricsinstalldependencies 10 referenceeventswhataresensuevents 11 metriccollectionchecks 12 httpsgithubcomsensupluginssensupluginsgraphite 13 referencechecksproxyrequestsattributes 14 addingaclientproxyclients"},{"title":"Intro to Filters","version":"0.29","location":"/sensu-core/0.29/guides/intro-to-filters","display_name":"undefined 0.29: Intro to Filters","content":" Getting Started with Filters The purpose of this guide is to help Sensu users create event filters At the conclusion of this guide you the user should have several Sensu event filters in place to filter events for one or more event handlers Each Sensu filter in this guide demonstrates one or more filter definition features for more information please refer to the Sensu filters reference documentation1 Objectives What will be covered in this guide Creation of an event filter Creation of an event filter with Ruby and math What are Sensu filters whataresensufilters Sensu filters allow you to filter out events destined for one or more event handlers Sensu filters inspect event data and match its keyvalues pairs with filter definition attributes to determine if the event should be passed to an event handler Filters are commonly used to filter event recurrences to eliminate notification noise and to filter events that are not for production machines Create an event filter Inclusive filtering The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterproductionjson This filter definition will include events that match the filter criteria In this example the filter itself is named production which matches events with a custom client attribute entitled environment with the value production filters production attributes client environment production Exclusive filtering To exclude events based on filter criteria set the negate filter definition attribute to true In this example the production filter will match events that do not have a custom client attribute entitled environment with the value production filters production attributes client environment production negate true Using a filter To use the production filter for an event handler set the filter attribute in the handler definition For example handlers mail type pipe command mailx s sensu event exampleaddresscom filter production Using multiple filters To specify multiple Sensu event filters use the filters attribute plural NOTE if both filter and filters plural handler definition attributes are used filters will take precedence handlers mail type pipe command mailx s sensu event exampleaddresscom filters production operations Create an event filter with Ruby and math Filter attributes are compared directly with their event data counterparts via Ruby object comparison However it is also possible to use Ruby expressions to evaluate event data attribute values When a filter attribute value is a string that begins with eval the remainder of the string is evaluated as a Ruby expression The event data attribute value is provided to the Ruby expression as a variable entitled value If the evaluated expression returns true the attribute is a match This Ruby expression evaluation is performed in a sandbox for safety The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterrecurrencesjson This filter excludes events that are not the first event occurrence and those that do not have an occurrence count divisible by 60 without a remainder recurrence Logically if checks with an execution interval of 1 minute are generating events every minute this filter will help reduce noise by only allowing event handling once per hour filters recurrences attributes occurrences eval value 1 value 60 0 1 referencefilters"},{"title":"Intro to Handlers","version":"0.29","location":"/sensu-core/0.29/guides/intro-to-handlers","display_name":"undefined 0.29: Intro to Handlers","content":" Getting Started with Handlers The purpose of this guide is to help Sensu users create event handlers At the conclusion of this guide you the user should have several Sensu handlers in place to handle events Each Sensu event handler in this guide demonstrates one or more handler types and definition features for more information please refer to the handlers reference documentation1 Objectives What will be covered in this guide Creation of a pipe handler Creation of a tcp handler Creation of a udp handler Creation of a transport handler Creation of a set handler What are Sensu event handlers whataresensueventhandlers Sensu event handlers are for taking action on events2 produced by check results such as sending an email alert creating or resolving a PagerDuty incident or storing metrics in Graphite There are several types of handlers pipe tcp udp transport and set Pipe handlers execute a command and pass the event data to the created process via STDIN TCP and UDP handlers send the event data to a remote socket Transport handlers publish the event data to the Sensu transport by default this is RabbitMQ Set handlers are used to group event handlers making it easier to manage many event handlers Create a pipe handler Pipe event handlers execute a command and pass the event data to the corresponding process via STDIN Install dependencies The following instructions install the eventfile Sensu handler plugin written in Ruby to etcsensupluginseventfilerb This handler plugin reads the event data via STDIN parses it creates a file name using the parsed event data and then writes the event data to the file eg tmpclientnamechecknamejson sudo wget O etcsensupluginseventfilerb httpsensuapporgdocs12fileseventfilerb sudo chmod x etcsensupluginseventfilerb The eventfile Sensu plugin requires a Ruby runtime Install Ruby from the distribution repository and sensuplugin from Rubygems NOTE the following Ruby installation steps may differ depending on your platform You may have already done the following steps as part of the getting started with checks guide3 UbuntuDebian sudo aptget update sudo aptget install ruby rubydev CentOSRHEL sudo yum install ruby rubydevel Create the pipe handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdeventfilejson This handler definition uses the eventfile plugin installed above4 to write event data to a file The handler is named file and it runs etcsensupluginseventfilerb providing it with JSON event data via STDIN NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers file type pipe command etcsensupluginseventfilerb To add a handler execution timeout to the file handler use the timeout attribute handlers file type pipe command etcsensupluginseventfilerb timeout 10 To specify which check result severities OK WARNING etc the handler supports use the severities attribute handlers file type pipe command etcsensupluginseventfilerb timeout 10 severities critical unknown To use the file handler for a check please refer to the getting started with checks guide5 Create a TCP handler TCP and UDP event handlers send event data to a remote socket Both TCP and UDP handler types use the same definition attributes The following TCP handler instructions will work for UDP with minor adjustments Because TCP and UDP handlers require interaction with an external service providing a functional example is outside of the scope of this guide However the following instructions will allow you to run a simple TCP socket that echoes any input to STDOUT for testing purposes Run a TCP server To test the TCP handler a listening TCP socket server is required For the following examples netcat nc will be used as the TCP server The following command will create a TCP socket server listening on port 6000 NOTE netcat will output messages that it receives in the terminal window This command will need to be run in a separate terminal window nc l k 4 p 6000 To test the netcat TCP socket server run the following command and observe the netcat output testing echo testing nc localhost 6000 Create the TCP handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdtcpsocketjson This TCP handler will send JSON event data to the TCP socket server netcat in this example NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers tcpsocket type tcp socket host localhost port 6000 Create a transport handler Transport handlers publish event data to the Sensu transport by default this is RabbitMQ Transport event handlers are used to deliver event data to other services using the Sensu transport Create the transport handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdtransporteventsjson This transport handler will publish JSON event data to the Sensu transport NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers transport type transport pipe type direct name events Create a set handler Set handlers are used to group event handlers into sets of handlers making it easier to reference a set of event handlers from a check definition Create the set handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfddefaulthandlerjson This set handler is named default the handler that is used for events where a handler is not specified The previous Sensu event handler examples are included in the set NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers default type set handlers debug file tcpsocket transport 1 referencehandlers 2 referenceevents 3 introtochecksinstalldependencies 4 installdependencies 5 introtocheckscreatethecheckdefinitionforcron"},{"title":"Intro to Mutators","version":"0.29","location":"/sensu-core/0.29/guides/intro-to-mutators","display_name":"undefined 0.29: Intro to Mutators","content":" Getting Started with Mutators The purpose of this guide is to help Sensu users create event data mutators At the conclusion of this guide you the user should have several Sensu mutators in place to mutate transform event data for one or more event handlers Each Sensu mutator in this guide demonstrates one or more mutator definition features for more information please refer to the Sensu mutators reference documentation1 Objectives What will be covered in this guide What are Sensu mutators Creation of a Sensu event data mutator What are Sensu mutators whataresensumutators Sensu mutators mutate transform event data for a Sensu event handler Sensu event handlers can expect event data be in a different format andor manipulated Mutators allow one or more handlers to share logic reducing code duplication and simplifying the event handlers Sensu mutators are executed on machines running the Sensu server or Sensu Enterprise Mutators are essentially commands or scripts that receive JSON formatted event data via STDIN and output the mutated event data to STDOUT Mutators use an exit status code of 0 to indicate a success anything else indicates a failure If a mutator fails to execute nonzero exit status code the event will not be handled and an error will be logged Create an event data mutator Coming soon Please see the Mutators1 reference documentation If you have questions about event data mutators please contact Sensu Support2 1 referencemutators 2 httphelpdesksensuappcom"},{"title":"Overview","version":"0.29","location":"/sensu-core/0.29/guides/overview","display_name":"undefined 0.29: Overview","content":" Getting Started Guide The complete getting started guide The purpose of this guide is to help new Sensu users to obtain a basic understanding of the primitives or components used to build a comprehensive monitoring solution In the course of working through this guide users should be able to start monitoring servers services and application health collect and analyze metrics and setup alerts Objectives This guide will provide an introduction to the following building blocks An introduction to adding clients1 An introduction to checks2 An introduction to handlers3 An introduction to filters4 An introduction to mutators5 1 addingaclient 2 introtochecks 3 introtohandlers 4 introtofilters 5 introtomutators"},{"title":"Architecture","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/overview/architecture","display_name":"Sensu Core 0.29: Architecture","content":" Sensu Architecture Architectural Overview One of advantages that Sensu provides over other monitoring solutions is its architecture which facilitates the execution of service checks collection of metric data and event processing at scale This architecture is comprised of the following components Secure Transportsecuretransport Data Storedatastore Check Execution Schedulercheckexecutionscheduler Monitoring Agentmonitoringagent Event Processoreventprocessor RESTful APIrestfulapi Architectural Diagram Sensu Architecture Gifimagessensudiagramgif Secure Transport Sensu services use a message bus eg RabbitMQ1 to communicate with one another technically speaking the Sensu services dont actually communicate with each other they only communicate with the message bus As of Sensu Core version 013 this message bus communication in Sensu has been abstracted as the Sensu Transport2 making it possible to leverage alternate transport solutions in place of RabbitMQ the default Transport Sensu services requires access to the same instance of the defined Sensu Transport eg a RabbitMQ cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscriptions Data Store Sensu leverages a data store3 for data persistence Only the Sensu server API and dashboard services require access to the data store mdash the Sensu client4 monitoring agent does not By storing data in Redis the Sensu services themselves can remain stateless Although Sensu is designed to route telemetry data to external timeseries databases eg Graphite5 Librato6 InfluxDB7 etc Sensu does store the following state data Client registry8 Check history Event registry Stashes a keyvalue store provided by the Sensu API9 Check Execution Scheduler Sensu offers two distinct check execution schedulers the Sensu server and the Sensu client monitoring agent The Sensu server schedules and publishes check execution requests to client subscriptions via a PublishSubscribe model The Sensu client monitoring agent schedules and executes standalone checks on the local system only Sensus execution schedulers are not mutually exclusive so monitoring checks may be configured for both of Sensus schedulers the Sensu server and Sensu client and Sensu will ensure that the corresponding checks are executed on the appropriate systems Monitoring Agent The Sensu client is a fully featured monitoring agent which provides the following features dynamic selfregistration client subscriptions for monitoring checks configured via the PublishSubscribe model a local check execution scheduler10 an execution platform for monitoring the local system services andor external resources an input socket for accepting input from external services Event Processor eventprocessor The Sensu server is a scalable event processor that processes event data and takes action Sensus event processing capabilities include Registering and deregistering clients Processing check results Processing monitoring events using filters11 mutators12 and handlers13 Sensus event processor is designed to scale along with the applications and infrastructure it is monitoring Although Event Handlers are executed locally by the Sensu server multiple instances of the Sensu server can be run without any additional configuration Sensu provides builtin task election to avoid scheduling conflicts between Sensu servers and the Sensu transport14 distributes via roundrobin check results between Sensu servers for processing which provides loadbalancing RESTful API Sensu provides access to monitoring data and core functionality via a RESTful HTTP JSON API including A Clients API15 for accessing Client data and addingremoving clients A Checks API16 for accessing Check configuration data and publishing check requests An Events API17 for accessing event data and resolving events A Results API18 for accessing check result data and publishing check results An Aggregates API19 for accessing aggregated check result data and deleting aggregate data A Stashes API20 for providing readwrite access to Redis underlying keyvalue functionality 1 httpwwwrabbitmqcom 2 httpgithubcomsensusensutransport 3 referencedatastore 4 referenceclients 5 httpsgithubcomgraphiteproject 6 httpswwwlibratocom 7 httpsinfluxdatacom 8 referenceclientsregistrationandregistry 9 apioverview 10 checkexecutionscheduler 11 referencefilters 12 referencemutators 13 referencehandlers 14 referencetransport 15 apiclientsapi 16 apichecksapi 17 apieventsapi 18 apiresultsapi 19 apiaggregatesapi 20 apistashesapi"},{"title":"How Sensu Works","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/overview/how-sensu-works","display_name":"Sensu Core 0.29: How Sensu Works","content":" The Sensu Monitoring Flow Publishing subscription check requests A Check Request is scheduledpublished by the Sensu Server or a Sensu Client The Sensu Client executes a Service Check Service Checks emit status information and telemetry data as Check Results Check Results are considered to be associated with either the Sensu Client executing the check or the Proxy Client of the check Those Check Results are published by the Sensu Client to the Sensu Transport sometimes on behalf of another client The Sensu Server processes Check Results persisting a copy of the latest result in the Data Store and creating a corresponding to Event The Sensu Server processes the Event by executing one or more Event Handlers The Sensu Server applies any Event Filters defined for an Event Handler The Sensu Server applies any Event Data Mutators defined for an Event Handler assuming the event was not filtered out The Sensu Server executes the Event Handler assuming the event was not filtered out Sensu Architecture Gifimagessensudiagramgif"},{"title":"Platforms","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/overview/platforms","display_name":"Sensu Core 0.29: Platforms","content":" Sensu Core All versions of Sensu including Sensu Enterprise are based on the same core components and functionality which are provided by the Sensu opensource software project1 and collectively referred to as Sensu Core Sensu Core provides multiple processes including the Sensu server2 sensuserver Sensu API3 sensuapi and Sensu client4 sensuclient Installer packages are available for most modern operating systems via native installer packages eg deb rpm msi pkg etc which are available for download from the Sensu website5 and from package manager repositories for APT for UbuntuDebian systems and YUM for RHELCentOS NOTE although Sensu Core packages are available for a variety of platforms ndash thus making it technically possible to run the sensuserver and sensuapi processes on nonLinux operating systems ndash we strongly recommended running the Sensu Server and API on a Linuxbased platform Sensu Core installer packages for nonLinux platforms are provided for the purpose of making the sensuclient available and are not tested as extensively for running the sensuserver and sensuapi processes Sensu Server API UbuntuDebianplatformssensuonubuntudebianhtmlsensucore RHELCentOSplatformssensuonrhelcentoshtmlsensucore Sensu Client UbuntuDebianplatformssensuonubuntudebiansensucore RHELCentOSplatformssensuonrhelcentossensucore Microsoft Windowsplatformssensuonmicrosoftwindowssensucore Mac OS Xplatformssensuonmacosxsensucore FreeBSDplatformssensuonfreebsdsensucore IBM AIXplatformssensuonibmaixsensucore Oracle Solarisplatformssensuonoraclesolarissensucore Sensu Enterprise Sensu Enterprise6 is designed to be a dropin replacement for the Sensu Core server and API only ie Sensu Enterprise uses the same client as Sensu Core Sensu Enterprise provides a single process called sensuenterprise which provides addedvalue7 replacements for the Sensu Core server sensuserver and API sensuapi Sensu Enterprise Server API UbuntuDebianplatformssensuonubuntudebiansensuenterprise RHELCentOSplatformssensuonrhelcentossensuenterprise Sensu Enterprise Client As mentioned above Sensu Enterprise uses the same sensuclient process as Sensu Core By sharing the same opensource monitoring agent upgrading to Sensu Enterprise from Sensu Core is simplified as theres no need to upgrade agents mdash simply replace the server and API components Consequently Sensu Enterprise does not need to be installed on every system being monitored by Sensu 1 httpsgithubcomsensu 2 referenceserver 3 apioverview 4 referenceclients 5 httpssensuapporgdownload 6 httpssensuapporgenterprise 7 httpssensuapporgenterpriseadvantage"},{"title":"What is Sensu?","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/overview/what-is-sensu","display_name":"Sensu Core 0.29: What is Sensu?","content":"Sensu is an infrastructure and application monitoring and telemetry solution Sensu provides a framework for monitoring infrastructure service application health and business KPIs Sensu is specifically designed to solve monitoring challenges introduced by modern infrastructure platforms with a mix of static dynamic and ephemeral infrastructure at scale ie public private and hybrid clouds Sensu allows organizations to compose comprehensive monitoring telemetry solutions to meet unique business requirements By providing a platform to build upon Sensu enables you to focus on what to monitor and measure rather than how Sensu is installed on your organizations infrastructure ndash it is not a SoftwareasaService SaaS solution ndash which means Sensu gives you full control over the availability of your monitoring solution Benefits Sensu is a comprehensive infrastructure and application monitoring solution that provides the following benefits Monitor servers services application health and business KPIs Sensu is an infrastructure and application monitoring telemetry solution Send alerts and notifications Sensu integrates with the tools and services your organization is already using to do things like send emails PagerDuty1 alerts Slack2 HipChat3 IRC notifications and many4 more5 Dynamic client registration deregistration When servers are provisioned they automatically register themselves with Sensu so theres no need to manually add or configure new servers A simple yet extensible model for monitoring Sensu provides a sophisticated yet simple to understand solution for executing service checks6 and processing events7 at scale Service checks provide status and telemetry data and event handlers process results Hundreds of plugins are available for monitoring the tools and services youre already using Plugins have a very simple specification and can be written in any programming language Built for missioncritical applications and multitiered networks Sensus use of a secure transport8 protects your infrastructure from exposure and makes it possible for Sensu to traverse complex network topologies including those that use NAT and VPNs and span public networks Sensu provides a secure monitoring solution trusted by international banking institutions government agencies Fortune 100 organizations and many more Designed for automation Sensu exposes 100 of its configuration as JSON files which makes it extremely automationndashfriendly eg it was designed to work with tools like Chef9 Puppet10 and Ansible11 Open source software with commercial support Sensu is an opensource software OSS project made freely available under a permissive MIT License12 the source code is publicly available on GitHub13 Sensu Enterprise14 is based on Sensu Core the OSS version of Sensu which makes addedvalue features commercial support training and many other benefits available under the Sensu License15 A Simple Yet Powerful Framework Sensu is a comprehensive monitoring solution that is powerful enough to solve complex monitoring problems at scale yet simple enough to use for traditional monitoring scenarios and small environments It achieves this broad appeal via building upon two simple yet powerful monitoring primitives Service Checks16 and Event Processing7 These building blocks also provide an infinitely extensible framework for composing monitoring solutions What is a Service Check servicechecks Service checks allow you to monitor services eg is Nginx running or measure resources eg how much disk space do I have left Service checks are executed on machines running a monitoring agent ie Sensu client17 Service checks are essentially commands or scripts that output data to STDOUT or STDERR and produce an exit status code to indicate a state Common exit status codes used are 0 for OK 1 for WARNING 2 for CRITICAL and 3 or greater to indicate UNKNOWN or CUSTOM Sensu checks use the same specification as Nagios therefore Nagios check plugins may be used with Sensu Service checks produce results that are processed by the event processor ie the Sensu server Learn more 17 What is Event Processing eventprocessing Event processing also called stream processing is a method of analyzing processing and storing streams of information data about things that happen events deriving a conclusion from them and potentially executing some action handling The Sensu event processor the Sensu server enables you to execute Handlers18 for taking action on events produced by service checks such as sending an email alert creating or resolving an incident eg in PagerDuty or ServiceNow or storing metric data in a timeseries database eg Graphite Learn more 18 1 httpswwwpagerdutycom 2 httpsslackcom 3 httpwwwhipchatcom 4 referenceplugins 5 referenceenterprisebuiltinintegrations 6 servicechecks 7 eventprocessing 8 architecturesecuretransport 9 httpwwwchefio 10 httpspuppetlabscom 11 httpwwwansiblecom 12 httpsgithubcomsensusensublobmasterMITLICENSEtxt 13 httpgithubcomsensu 14 httpssensuapporgenterprise 15 httpssensuapporgsensulicense 16 servicechecks 17 referenceclients 18 referencehandlers"},{"title":"BSD","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/platforms/sensu-on-bsd","display_name":"Sensu Core 0.29: BSD","content":" Sensu on FreeBSD Reference documentation Installing Sensu Coresensucore Download and install Sensu using the Sensu txz filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Install Sensu Core sensucore Sensu Core is installed on FreeBSD systems via a native system installer package ie a txz file which is available for download from the Sensu Downloads1 page and from this repository 64bit FreeBSD 10 only2 WARNING FreeBSD packages are currently as a beta release Support for running Sensu on FreeBSD will be provided on a besteffort basis until further notice Download and install Sensu using the Sensu Universal txz file downloadandinstallsensucore NOTE As of Sensu version 027 package repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page NOTE FreeBSD packages are available for FreeBSD 10 and 11 Please visit the Sensu Downloads1 page for more information 2 Install the sensu1201txz package using the pkg utility sudo pkg add sensu1201txz 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Configure Sensu By default all of the Sensu services on FreeBSD systems will load configuration from the following locations usrlocaletcsensuconfigjson usrlocaletcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir usrlocaletcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at usrlocaletcsensuconfdclientjson client name freebsdclient address 127001 environment development subscriptions dev freebsdhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at usrlocaletcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Coming soon 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetfreebsd 3 httpssensuglobalsslfastlynetfreebsdFreeBSD10amd64sensusensu1201txz 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 configuresensu 10 exampletransportconfiguration 11 exampleclientconfiguration"},{"title":"IBM AIX","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/platforms/sensu-on-ibm-aix","display_name":"Sensu Core 0.29: IBM AIX","content":" Sensu on IBM AIX Installing Sensu Coresensucore Download and install Sensu using the Sensu bff filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Known limitationsknownlimitations Foreign Function Interfaceforeignfunctioninterface Install Sensu Core sensucore Sensu Core is installed on IBM AIX systems via a native system installer package ie a bff file which is available for download from the Sensu Downloads1 page and from this repository2 Download and install Sensu using the Sensu bff package downloadandinstallsensucore NOTE As of Sensu version 027 repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 The Sensu installer package for IBM AIX systems is provided in backup file format bff In order to install the content you will need to know the Fileset Name Display the content using the installp utility installp ld sensu1201powerpcbff Once you have collected the fileset name you can optionally proceed to preview installation using the installp utility with the p preview flag installp apXY d sensu1201powerpcbff sensu 3 Install Sensu using the installp utility installp aXY d sensu1201powerpcbff sensu NOTE this command uses the following installp utilty flags a to apply changes to the system X to extend the file system and Y to accept the Sensu MIT License4 4 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition11 and client definition12 Configure Sensu By default all of the Sensu services on IBM AIX systems will load configuration from the following locations etcsensuconfigjson etcsensuconfdjson NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name aixclient address localhost environment development subscriptions dev aixhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification13 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Managing the Sensu client process servicemanagement Start or stop the Sensu client using the startsrc and stopsrc utilities10 startsrc s sensuclient stopsrc s sensuclient Known limitations Please note the following platformspecific limitations affecting Sensu on AIX at this time Unless otherwise stated all documented functions of the Sensu client are supported Foreign Function Interface Foreign Function Interface FFI9 calls on Sensus embedded Ruby on AIX are not working at this time so any Rubybased Sensu plugins that require FFI will not work however all other plugins should work It is possible that FFI support will be enabled in a future release 1 httpssensuapporgdownloads 2 httpssensuglobalsslfastlynetaix 3 httpssensuglobalsslfastlynetaix61sensu1201powerpcbff 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 httpsgithubcomffiffi 10 configuresensu 11 exampletransportconfiguration 12 exampleclientconfiguration 13 referencetransporttransportdefinitionspecification"},{"title":"Mac OS X","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/platforms/sensu-on-mac-osx","display_name":"Sensu Core 0.29: Mac OS X","content":" Sensu on Mac OS X Installing Sensu Coresensucore Download and install Sensu using the Sensu Universal pkg filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Configure the Sensu client launchd daemonconfigurethesensuclientlaunchddaemon Operating Sensuoperatingsensu Managing the Sensu client process with launchctlservicemanagement Interacting with Sensu via CLIinteractingwithsensuviacli Install Sensu Core sensucore Sensu Core is installed on Mac OS X systems via a native system installer package ie a pkg file which is available for download from the Sensu Downloads1 page and from this repository2 WARNING Mac OS X packages are currently as a beta release Support for running Sensu on Mac OS X will be provided on a besteffort basis until further notice Download and install Sensu using the Sensu Universal pkg file downloadandinstallsensucore 1 Download Sensu from the Sensu Downloads1 page NOTE the Universal pkg file supports OS X Mavericks 109 and newer Mountain Lion users please use this installer3 2 Install the package using the installer utility sudo installer pkg sensu1201pkg target 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section12 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition13 and client definition14 Configure Sensu By default all of the Sensu services on Mac OS X systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus launchd daemon configuration XML andor by starting the Sensu services with the corresponding CLI arguments For more information please see the configure the Sensu client launchd daemon4 section below The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name macosxclient address 127001 environment development subscriptions dev macosxhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification15 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Configure the Sensu client launchd daemon The Sensu Core pkg package includes a Sensu client daemon configuration allowing Sensu to be run as a launchd job or daemon The OS X launchd service and launchctl utility use a plist file9 an XMLbased configuration file to configure the sensuclient daemon run arguments eg log varlogsensusensuclientlog 1 To configure the Sensu client service wrapper copy the default service definition file entitled orgsensuappsensuclientplist to LibraryLaunchDaemonsorgsensuappsensuclientplist and edit it with your favorite text editor sudo cp optsensuembeddedCellarsensu120LibraryLaunchDaemonsorgsensuappsensuclientplist LibraryLaunchDaemonsorgsensuappsensuclientplist 2 This XML configuration file allows you to set Sensu client CLI arguments10 The following example configuration file sets the Sensu client primary configuration file path to etcsensuconfigjson the Sensu configuration directory to etcsensuconfd and the log file path to etcsensusensuclientlog Labelorgsensuappsensuclient ProgramArguments optsensubinsensuclient cetcsensuconfigjson detcsensuconfd lvarlogsensusensuclientlog UserNamesensu GroupNamesensu RunAtLoad KeepAlive StandardOutPathvarlogsensusensuclientlog StandardErrorPathvarlogsensusensuclientlog Operating Sensu Managing the Sensu client process with launchctl servicemanagement Start or stop the Sensu client using the launchctl utility11 sudo launchctl load w LibraryLaunchDaemonsorgsensuappsensuclientplist sudo launchctl unload w LibraryLaunchDaemonsorgsensuappsensuclientplist Interacting with Sensu via CLI Interacting with the any of the installed Sensu processes eg sensuclient via CLI on Mac OS X requires running the processes as the sensu user which is installed by the Sensu OS X installer package EXAMPLE sudo u sensu optsensubinsensuclient V 120 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetosx 3 httpssensuglobalsslfastlynetosxsensu1201mountainlionpkg 4 configurethesensuclientlaunchddaemon 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 httpsdeveloperapplecomlibrarymacdocumentationDarwinReferenceManPagesman5plist5html 10 referenceconfigurationsensuservicecliarguments 11 httpsdeveloperapplecomlibrarymacdocumentationDarwinReferenceManPagesman1launchctl1html 12 configuresensu 13 exampletransportconfiguration 14 exampleclientconfiguration 15 referencetransporttransportdefinitionspecification"},{"title":"Solaris","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/platforms/sensu-on-oracle-solaris","display_name":"Sensu Core 0.29: Solaris","content":" Sensu on Solaris Reference documentation Installing Sensu Coresensucore Download and install Sensu on Solaris 10downloadandinstallsensucoreonsolaris10 Download and install Sensu on Solaris 11downloadandinstallsensucoreonsolaris11 Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Install Sensu sensucore Sensu Core is installed on Solaris systems via native system installer packages ie pkg or IPS13 p5p files which are available for download from the Sensu Downloads1 page and from these repositories Solaris 10 pkg2 and Solaris 11 IPS p5p3 Download and install Sensu on Solaris 10 downloadandinstallsensucoreonsolaris10 NOTE As of Sensu version 10 package repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 Install the sensu1201i386pkg package using the pkgadd utility su pkgadd d sensu1201i386pkg 3 Install the Sensu service init scripts using the svccfg utility svccfg import libsvcmanifestsitesensuclientxml 4 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Download and install Sensu on Solaris 11 downloadandinstallsensucoreonsolaris11 1 Download Sensu from the Sensu Downloads1 page or by using the wget utility wget httpssensuglobalsslfastlynetsolarisips511sensu1201i386p5p 2 Install the sensu1201i386p5p package using the pkg utility sudo pkg install g sensu1201i386p5p developerversioningsensu 3 Download and run the Sensu postinstall script12 wget httpssensuapporgdocs12filespostinstsh chmod x postinstsh sudo postinstsh NOTE all native system installer packages for Sensu contain this postinstall script which is used for setting up the sensu system user and group creating various configuration directories setting configuration directory permissions and creating service init scripts This step may will be included in future Solaris 11 packages however at this time it is necessary to perform these steps manually 4 Install the Sensu service init scripts using the svcadm utility sudo svcadm restart manifestimport 5 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Configure Sensu By default all of the Sensu services on Solaris systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name solarisclient address 127001 environment development subscriptions dev solarishosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Managing the Sensu client process servicemanagement Manually start stop and restart the Sensu services using the svcadm utility svcadm enable sensuclient svcadm disable sensuclient svcadm restart sensuclient 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetsolarispkg 3 httpssensuglobalsslfastlynetsolarisips 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 configuresensu 10 exampletransportconfiguration 11 exampleclientconfiguration 12 filespostinstsh 13 httpwwworaclecomtechnetworkserverstoragesolaris11technologiesips323421html"},{"title":"RHEL/CentOS","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/platforms/sensu-on-rhel-centos","display_name":"Sensu Core 0.29: RHEL/CentOS","content":" Sensu on RHELCentOS Reference documentation Installing Sensu Coresensucore Install Sensu using YUMinstallsensucorerepository Installing Sensu Enterprisesensuenterprise Install the Sensu Enterprise repositoryinstallsensuenterpriserepository Install Sensu Enterprise server APIinstallsensuenterprise Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Example data store configurationexampledatastoreconfiguration Example API configurationsexampleapiconfigurations Standalone configurationapistandaloneconfiguration Distributed configurationapidistributedconfiguration Example Sensu Enterprise Dashboard configurationsexamplesensuenterprisedashboardconfigurations Standalone configurationdashboardstandaloneconfiguration Distributed configurationdashboarddistributedconfiguration Enable the Sensu services to start on bootenablethesensuservicestostartonboot Disable the Sensu services on bootdisablethesensuservicesonboot Operating Sensuoperatingsensu Managing the Sensu servicesprocessesservicemanagement Install Sensu Core sensucore Sensu Core is installed on RHEL and CentOS systems via a native system installer package ie a rpm file which is available for download from the Sensu Downloads1 page and from YUM package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Install Sensu using YUM recommended installsensucorerepository Sensu packages for Red Hat target currently supported versions of Red Hat Enterprise Linux and their Centos equivalents These packages are generally expected to be compatible with Red Hat derivatives like SuSE Amazon or Scientific Linux but packages are not tested on these platforms The following instructions describe configuring package repository definitions using Yum variables14 as components of the baseurl On Red Hat derivative platforms the value of the releasever variable will not typically align with the RHEL release versions eg 6 or 7 advertised in the Sensu Yum repository Please use 6 or 7 in lieu of releasever on RHEL derivatives depending on whether they use sysv init or systemd respectively NOTE As of Sensu version 027 the yum repository URL has changed to include the releasever variable To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Sensu sudo yum install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 3 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition11 The Sensu client will need a client definition12 and both the sensuserver and sensuapi will need a datastore Redis definition13 mdash all of which are explained below Install Sensu Enterprise sensuenterprise Sensu Enterprise2 is installed on RHEL and CentOS systems via a native system installer package ie a rpm file The Sensu Enterprise installer package is made available via the Sensu Enterprise YUM repository which requires access credentials to access The Sensu Enterprise packages install two processes sensuenterprise which provides the Sensu server and API from a single process and sensuenterprisedashboard which provides the dashboard API and web application WARNING Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server and API only Sensu Enterprise uses the same sensuclient process provided by the Sensu Core installer packages above As a result Sensu Enterprise does not need to be installed on every system being monitored by Sensu Install the Sensu Enterprise repository installsensuenterpriserepository 1 Set access credentials as environment variables SEUSER1234567890 SEPASSPASSWORD NOTE please replace 1234567890 and PASSWORD with the access credentials provided with your Sensu Enterprise subscription Confirm that you have correctly set your access credentials as environment variables echo SEUSERSEPASS 1234567890PASSWORD 2 Create a YUM repository configuration file for the Sensu Enterprise repository at etcyumreposdsensuenterpriserepo echo sensuenterprise namesensuenterprise baseurlhttpSEUSERSEPASSenterprisesensuappcomyumnoarch gpgcheck0 enabled1 sudo tee etcyumreposdsensuenterpriserepo 3 Create a YUM repository configuration file for the Sensu Enterprise Dashboard repository at etcyumreposdsensuenterprisedashboardrepo echo sensuenterprisedashboard namesensuenterprisedashboard baseurlhttpSEUSERSEPASSenterprisesensuappcomyumbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensuenterprisedashboardrepo 4 Install Sensu Enterprise sudo yum install sensuenterprise sensuenterprisedashboard 5 Configure Sensu Enterprise No default configuration is provided with Sensu Enterprise so Sensu Enterprise will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu Enterprise Configure Sensu By default all of the Sensu services on Ubuntu and Debian systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE Additional or alternative configuration file and directory locations may be used by modifying Sensus service scripts andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration3 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name rhelclient address 127001 environment development subscriptions dev rhelhosts socket bind 127001 port 3030 Example transport configuration At minimum all of the Sensu processes require configuration to tell them how to connect to the configured Sensu Transport4 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification11 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis5 or RabbitMQ6 reference documentation Example data store configuration The Sensu Core server and API processes and the Sensu Enterprise process all require configuration to tell them how to connect to Redis the Sensu data store Please refer to the Redis reference documentation5 for configuration file examples Example API configurations Standalone configuration apistandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensuconfdapijson api host localhost bind 0000 port 4567 Distributed configuration apidistributedconfiguration 1 Obtain the IP address of the system where the Sensu API is installed For the purpose of this guide we will use 10017 as our example IP address 1 Create a configuration file with the following contents at etcsensuconfdapijson on the Sensu server and API systems api host 10017 bind 10017 port 4567 Example Sensu Enterprise Dashboard configurations Standalone configuration dashboardstandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host localhost port 4567 dashboard host 0000 port 3000 Distributed configuration dashboarddistributedconfiguration 1 Obtain the IP address of the system where Sensu Enterprise is installed For the purpose of this guide we will use 10017 as our example IP address 2 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host 10017 port 4567 dashboard host 0000 port 3000 NOTE Multiple Sensu Enterprise Dashboard instances can be installed When load balancing across multiple Dashboard instances your load balancer should support sticky sessions 3 The Sensu Enterprise Dashboard process requires configuration to tell it how to connect to Redis the Sensu data store Please refer to the Redis installation instructions5 for configuration file examples Enable the Sensu services to start on boot By default the Sensu services are not configured to start automatically on system boot we recommend managing the Sensu services with a process supervisor such as runit7 To enable Sensu services on system boot use the chkconfig utility8 Enable the Sensu client on system boot sudo chkconfig sensuclient on Enable the Sensu server and API to start on system boot For Sensu Core users ie sensuserver and sensuapi sudo chkconfig sensuserver on sudo chkconfig sensuapi on For Sensu Enterprise users sudo chkconfig sensuenterprise on WARNING the sensuenterprise process is intended to be a dropin replacement for the Sensu Core sensuserver and sensuapi processes Please ensure that the Sensu Core processes are not configured to start on system8 boot before enabling Sensu Enterprise to start on system boot Enable Sensu Enterprise Dashboard on system boot sudo chkconfig sensuenterprisedashboard defaults WARNING the sensuenterprisedashboard process is intended to be a dropin replacement for the Uchiwa dashboard Please ensure that the Uchiwa processes are not configured to start on system boot before enabling the Sensu Enterprise Dashboard to start on system boot Disable the Sensu services on boot If you have enabled Sensu services on boot and now need to disable them this can also be accomplished using the chkconfig utility9 Disable the Sensu client on system boot sudo chkconfig sensuclient off Disable the Sensu Core server on system boot sudo chkconfig sensuserver off Disable the Sensu Core API on system boot sudo chkconfig sensuapi off Disable Sensu Enterprise on system boot sudo chkconfig sensuenterprise off Disable Sensu Enterprise Dashboard on system boot sudo chkconfig sensuenterprisedashboard remove Operating Sensu Managing the Sensu servicesprocesses servicemanagement To manually start and stop the Sensu services use the following commands NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdsensuclient start Start or stop the Sensu client sudo service sensuclient start sudo service sensuclient stop Start or stop the Sensu Core server sudo service sensuserver start sudo service sensuserver stop Start or stop the Sensu Core API sudo service sensuapi start sudo service sensuapi stop Start or stop Sensu Enterprise sudo service sensuenterprise start sudo service sensuenterprise stop Start or stop the Sensu Enterprise Dashboard sudo service sensuenterprisedashboard start sudo service sensuenterprisedashboard stop Verify the Sensu Enterprise Dashboard is running by visiting view the dashboard at httplocalhost3000 replace localhost with the hostname or IP address where the Sensu Enterprise Dashboard is running 1 httpssensuapporgdownload 2 httpssensuapporgenterprise 3 referenceconfiguration 4 referencetransport 5 referenceredissensuredisconfiguration 6 referencerabbitmqsensurabbitmqconfiguration 7 httpsmardenorgrunit 8 disablethesensuservicesonboot 9 httpsaccessredhatcomdocumentationenUSRedHatEnterpriseLinux6htmlDeploymentGuides2serviceschkconfightml 10 configuresensu 11 exampletransportconfiguration 12 exampleclientconfiguration 13 exampledatastoreconfiguration 14 httpsaccessredhatcomdocumentationenUSRedHatEnterpriseLinux6htmlDeploymentGuidesecUsingYumVariableshtml"},{"title":"Ubuntu/Debian","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/platforms/sensu-on-ubuntu-debian","display_name":"Sensu Core 0.29: Ubuntu/Debian","content":" Sensu on UbuntuDebian Reference documentation Installing Sensu Coresensucore Install Sensu using APTinstallsensucorerepository Installing Sensu Enterprisesensuenterprise Install the Sensu Enterprise repositoryinstallsensuenterpriserepository Install Sensu Enterprise server APIinstallsensuenterprise Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Example data store configurationexampledatastoreconfiguration Example API configurationsexampleapiconfigurations Standalone configurationapistandaloneconfiguration Distributed configurationapidistributedconfiguration Example Sensu Enterprise Dashboard configurationsexamplesensuenterprisedashboardconfigurations Standalone configurationdashboardstandaloneconfiguration Distributed configurationdashboarddistributedconfiguration Enable the Sensu services to start on bootenablethesensuservicestostartonboot Disable the Sensu services on bootdisablethesensuservicesonboot Operating Sensuoperatingsensu Managing the Sensu servicesprocessesservicemanagement Install Sensu Core sensucore Sensu Core is installed on Ubuntu and Debian systems via a native system installer package ie a deb file which is available for download from the Sensu Downloads1 page and from APT package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Sensu packages for Debian target current stable and oldstable releases15 Sensu packages for Ubuntu target current Long Term Support LTS releases16 If you wish to install Sensu packages on newer Debian or Ubuntu releases please try installing a package built for the most recent Debian stable or Ubuntu LTS release Install Sensu using APT recommended installsensucorerepository NOTE As of Sensu version 027 apt repository configuration has changed to include the codename of the UbuntuDebian release To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Install the GPG public key wget q httpssensuglobalsslfastlynetaptpubkeygpg O sudo aptkey add 2 Determine the codename of the UbuntuDebian release on your system etcosrelease echo VERSION 14044 LTS Trusty Tahr codename for this system is trusty 3 Create an APT configuration file at etcaptsourceslistdsensulist export CODENAMEyourreleasecodenamehere eg trusty echo deb httpssensuglobalsslfastlynetapt CODENAME main sudo tee etcaptsourceslistdsensulist 4 Update APT sudo aptget update 5 Install Sensu sudo aptget install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 6 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition12 The Sensu client will need a client definition13 and both the sensuserver and sensuapi will need a datastore Redis definition14 mdash all of which are explained below Install Sensu Enterprise sensuenterprise Sensu Enterprise2 is installed on Ubuntu and Debian systems via a native system installer package ie a deb file The Sensu Enterprise installer package is made available via the Sensu Enterprise APT repository which requires access credentials to access The Sensu Enterprise packages install two processes sensuenterprise which provides the Sensu server and API from a single process and sensuenterprisedashboard which provides the dashboard API and web application WARNING Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server and API only Sensu Enterprise uses the same sensuclient process provided by the Sensu Core installer packages above As a result Sensu Enterprise does not need to be installed on every system being monitored by Sensu Install the Sensu Enterprise repository installsensuenterpriserepository 1 Set access credentials as environment variables SEUSER1234567890 SEPASSPASSWORD NOTE please replace 1234567890 and PASSWORD with the access credentials provided with your Sensu Enterprise subscription Confirm that you have correctly set your access credentials as environment variables echo SEUSERSEPASS 1234567890PASSWORD 2 Install the GPG public key wget q httpSEUSERSEPASSenterprisesensuappcomaptpubkeygpg O sudo aptkey add 3 Create an APT configuration file at etcaptsourceslistdsensuenterpriselist echo deb httpSEUSERSEPASSenterprisesensuappcomapt sensuenterprise main sudo tee etcaptsourceslistdsensuenterpriselist 4 Update APT sudo aptget update 5 Install Sensu Enterprise sudo aptget install sensuenterprise sensuenterprisedashboard 6 Configure Sensu Enterprise No default configuration is provided with Sensu Enterprise so Sensu Enterprise will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu Enterprise Configure Sensu By default all of the Sensu services on Ubuntu and Debian systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE Additional or alternative configuration file and directory locations may be used by modifying Sensus service scripts andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration3 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually sudo mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name ubuntuclient address 127001 environment development subscriptions dev ubuntuhosts socket bind 127001 port 3030 Example transport configuration At minimum all of the Sensu processes require configuration to tell them how to connect to the configured Sensu Transport4 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis5 or RabbitMQ6 reference documentation Example data store configuration The Sensu Core server and API processes and the Sensu Enterprise process all require configuration to tell them how to connect to Redis the Sensu data store Please refer to the Redis reference documentation5 for configuration file examples Example API configurations Standalone configuration apistandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensuconfdapijson api host localhost bind 0000 port 4567 Distributed configuration apidistributedconfiguration 1 Obtain the IP address of the system where the Sensu API is installed For the purpose of this guide we will use 10017 as our example IP address 2 Create a configuration file with the following contents at etcsensuconfdapijson on the Sensu server and API systems api host 10017 bind 10017 port 4567 Example Sensu Enterprise Dashboard configurations Standalone configuration dashboardstandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host localhost port 4567 dashboard host 0000 port 3000 Distributed configuration dashboarddistributedconfiguration 1 Obtain the IP address of the system where Sensu Enterprise is installed For the purpose of this guide we will use 10017 as our example IP address 2 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host 10017 port 4567 dashboard host 0000 port 3000 NOTE Multiple Sensu Enterprise Dashboard instances can be installed When load balancing across multiple Dashboard instances your load balancer should support sticky sessions 3 The Sensu Enterprise Dashboard process requires configuration to tell it how to connect to Redis the Sensu data store Please refer to the Redis installation instructions5 for configuration file examples Enable the Sensu services to start on boot By default the Sensu services are not configured to start automatically on system boot we recommend managing the Sensu services with a process supervisor such as runit7 To enable Sensu services on system boot use the updatercd utility Enable the Sensu client on system boot sudo updatercd sensuclient enable Enable the Sensu server and API to start on system boot For Sensu Core users ie sensuserver and sensuapi sudo updatercd sensuserver enable sudo updatercd sensuapi enable For Sensu Enterprise users sudo updatercd sensuenterprise enable WARNING the sensuenterprise process is intended to be a dropin replacement for the Sensu Core sensuserver and sensuapi processes Please ensure that the Sensu Core processes are not configured to start on system boot8 before enabling Sensu Enterprise to start on system boot Enable Sensu Enterprise Dashboard on system boot sudo updatercd sensuenterprisedashboard enable WARNING the sensuenterprisedashboard process is intended to be a dropin replacement for the Uchiwa dashboard Please ensure that the Uchiwa processes are not configured to start on system boot before enabling the Sensu Enterprise Dashboard to start on system boot Disable the Sensu services on boot If you have enabled Sensu services on boot and now need to disable them this can also be accomplished using the updatercd utility9 Disable the Sensu client on system boot sudo updatercd sensuclient disable Disable the Sensu Core server on system boot sudo updatercd sensuserver disable Disable the Sensu Core API on system boot sudo updatercd sensuapi disable Disable Sensu Enterprise on system boot sudo updatercd sensuenterprise disable Disable Sensu Enterprise Dashboard on system boot sudo updatercd sensuenterprisedashboard disable Operating Sensu Managing the Sensu servicesprocesses servicemanagement To manually start and stop the Sensu services use the following commands Start or stop the Sensu client sudo service sensuclient start sudo service sensuclient stop Start or stop the Sensu Core server sudo service sensuserver start sudo service sensuserver stop Start or stop the Sensu Core API sudo service sensuapi start sudo service sensuapi stop Start or stop Sensu Enterprise sudo service sensuenterprise start sudo service sensuenterprise stop Start or stop the Sensu Enterprise Dashboard sudo service sensuenterprisedashboard start sudo service sensuenterprisedashboard stop Verify the Sensu Enterprise Dashboard is running by visiting view the dashboard at httplocalhost3000 replace localhost with the hostname or IP address where the Sensu Enterprise Dashboard is running 1 httpssensuapporgdownload 2 httpssensuapporgenterprise 3 referenceconfiguration 4 referencetransport 5 referenceredissensuredisconfiguration 6 referencerabbitmqsensurabbitmqconfiguration 7 httpsmardenorgrunit 8 disablethesensuservicesonboot 9 httpmanpagesubuntucommanpagespreciseman8updatercd8html 10 referencetransporttransportdefinitionspecification 11 configuresensu 12 exampletransportconfiguration 13 exampleclientconfiguration 14 exampledatastoreconfiguration 15 httpswikidebianorgDebianReleases 16 httpswikiubuntucomLTS"},{"title":"Microsoft Windows","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/platforms/sensu-on-windows","display_name":"Sensu Core 0.29: Microsoft Windows","content":" Sensu on Microsoft Windows Reference documentation Installing Sensu Coresensucore Download and install Sensu using the Sensu MSIdownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Configure the Sensu client Windows service wrapperconfigurethesensuclientwindowsservicewrapper Install the Sensu client Windows serviceinstallthesensuclientwindowsservice Operating Sensuoperatingsensu Managing the Sensu client Windows serviceservicemanagement Install Sensu Core sensucore Sensu Core is installed on Microsoft Windows systems via a native system installer package ie a msi file which is available for download from the Sensu Downloads1 page and from this repository2 Download and install Sensu using the Sensu MSI downloadandinstallsensucore NOTE As of Sensu version 10 repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 Doubleclick the sensu1201x64msi installer package to launch the installer accept the Sensu Core MIT License4 and install Sensu using the default settings eg install location etc WARNING changing the default installation path from Copt is strongly discouraged 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section12 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition13 and client definition14 Configure Sensu DANGER Many text editors on Windows including Notepad save text in a format that is not suitable for Sensu configuration While we require UTF8 there are similarlooking character sets that are not actually UTF8 such as UTF8 BOM A more modern text editor such as Atom or Notepad will allow you to do this easily fortunately For more about editor encodings see this discussion on StackOverflow16 If youre automating JSON creation with eg PowerShell make sure that youre speaking UTF8 in your shell too See here17 for more details By default all of the Sensu services on Microsoft Windows systems will load configuration from the following locations Coptsensuconfigjson Coptsensuconfd NOTE in general where references to configuration file locations found elsewhere in the Sensu documentation suggest paths beginning with etcsensu these will correspond to Coptsensu on Microsoft Windows systems Additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration XML andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie Coptsensuconfd is not created by the Sensu MSI installer in which case it is necessary to create this directory manually mkdir Coptsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at Coptsensuconfdclientjson client name windowsclient address 127001 environment development subscriptions dev windowshosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification15 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Configure the Sensu client Windows service wrapper The Sensu Core MSI package includes a Sensu client service wrapper allowing Sensu to be registered as a Windows service The Sensu client service wrapper uses an XML configuration file to configure the sensuclient run arguments eg log Coptsensusensuclientlog To configure the Sensu client service wrapper edit the service definition file at Coptsensubinsensuclientxml with your favorite text editor This XML configuration file allows you to set Sensu client CLI arguments9 The following example configuration file sets the Sensu client primary configuration file path to Coptsensuconfigjson the Sensu configuration directory to Coptsensuconfd and the log file path to Coptsensusensuclientlog sensuclient Sensu Client This service runs a Sensu client Coptsensuembeddedbinruby Coptsensuembeddedbinsensuclient c Coptsensuconfigjson d Coptsensuconfd l Coptsensusensuclientlog Install the Sensu client Windows service Open a Command Prompt and use the Windows SC10 utility to create the Windows service for the Sensu client sc create sensuclient start delayedauto binPath coptsensubinsensuclientexe DisplayName Sensu Client NOTE the space between the equals and the values is required Operating Sensu Managing the Sensu client Windows service servicemanagement To manually start and stop the Sensu client Windows service use the Servicesmsc11 utility or via the Command Prompt Start or stop the Sensu client sc start sensuclient sc stop sensuclient 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetmsi 3 httpssensuglobalsslfastlynetmsi2012r2sensu1201x64msi 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 referenceconfigurationsensuservicecliarguments 10 httpstechnetmicrosoftcomenuslibrarybb490995aspx 11 httpstechnetmicrosoftcomenuslibrarycc755249aspx 12 configuresensu 13 exampletransportconfiguration 14 exampleclientconfiguration 15 referencetransporttransportdefinitionspecification 16 httpstackoverflowcomquestions2223882whatsdifferentbetweenutf8andutf8withoutbom 17 httpstackoverflowcomquestions5596982usingpowershelltowriteafileinutf8withoutthebom"},{"title":"Client Installation","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/quick-start/client-installation","display_name":"Sensu Core 0.29: Client Installation","content":" Install the Sensu Client Having successfully installed and configured a Sensu server and API Sensu Core or Sensu Enterprise lets now install andor configure a Sensu client The Sensu client is run on every system you need to monitor including those running the Sensu server and API and Sensus dependencies ie RabbitMQ andor Redis Both Sensu Core and Sensu Enterprise use the same Sensu client process ie sensuclient so upgrading from Sensu Core to Sensu Enterprise does not require you to install a difference Sensu client Included in Sensu Core The Sensu client process sensuclient is part of the open source Sensu project ie Sensu Core and it is included in the Sensu Core installer packages along with the Sensu Core server and API processes ie sensuserver and sensuapi This means that if you are following the instructions in this guide for a standalone1 installation your Sensu client is already installed Disabled by default The Sensu client process sensuclient is disabled by default on all platforms Please refer to the corresponding configuration and operation documentation corresponding to the platform where you have installed your Sensu clients for instructions on starting stopping the Sensu client process andor enabling the Sensu client process to start automatically on system boot Install Sensu Core sensucore UbuntuDebian Sensu Core is installed on Ubuntu and Debian systems via a native system installer package ie a deb file which is available for download from the Sensu Downloads1 page and from APT package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Sensu packages for Debian target current stable and oldstable releases15 Sensu packages for Ubuntu target current Long Term Support LTS releases16 If you wish to install Sensu packages on newer Debian or Ubuntu releases please try installing a package built for the most recent Debian stable or Ubuntu LTS release Install Sensu using APT recommended installsensucorerepository NOTE As of Sensu version 027 apt repository configuration has changed to include the codename of the UbuntuDebian release To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Install the GPG public key wget q httpssensuglobalsslfastlynetaptpubkeygpg O sudo aptkey add 2 Determine the codename of the UbuntuDebian release on your system etcosrelease echo VERSION 14044 LTS Trusty Tahr codename for this system is trusty 3 Create an APT configuration file at etcaptsourceslistdsensulist export CODENAMEyourreleasecodenamehere eg trusty echo deb httpssensuglobalsslfastlynetapt CODENAME main sudo tee etcaptsourceslistdsensulist 4 Update APT sudo aptget update 5 Install Sensu sudo aptget install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 6 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition12 The Sensu client will need a client definition13 and both the sensuserver and sensuapi will need a datastore Redis definition14 mdash all of which are explained below RHELCentOS Sensu Core is installed on RHEL and CentOS systems via a native system installer package ie a rpm file which is available for download from the Sensu Downloads1 page and from YUM package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Install Sensu using YUM recommended installsensucorerepository Sensu packages for Red Hat target currently supported versions of Red Hat Enterprise Linux and their Centos equivalents These packages are generally expected to be compatible with Red Hat derivatives like SuSE Amazon or Scientific Linux but packages are not tested on these platforms The following instructions describe configuring package repository definitions using Yum variables14 as components of the baseurl On Red Hat derivative platforms the value of the releasever variable will not typically align with the RHEL release versions eg 6 or 7 advertised in the Sensu Yum repository Please use 6 or 7 in lieu of releasever on RHEL derivatives depending on whether they use sysv init or systemd respectively NOTE As of Sensu version 027 the yum repository URL has changed to include the releasever variable To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Sensu sudo yum install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 3 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition11 The Sensu client will need a client definition12 and both the sensuserver and sensuapi will need a datastore Redis definition13 mdash all of which are explained below "},{"title":"The Five Minute Install","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/quick-start/five-minute-install","display_name":"Sensu Core 0.29: The Five Minute Install","content":" The Five Minute Install Objective Although Sensus architecture1 is one of its most compelling features and the complete installation guide2 can help you get Sensu installed and configured for a variety of operating environments3 you might not actually care about any of that until you can get Sensu up and running in a development environment for testing purposes This installation guide is intended to help you to install Sensu Core in five minutes or less or well give you your money back guaranteed After completing the steps in this guide you will have a fully functional Sensu Core installation in a standalone4 configuration Installation Requirements What will you need to complete this guide A virtual machine or physical computer running 64bit CentOS 75 with a minimum of 2GB of memory 4GB recommended Familiarity with a commandline interface Willingness to run a shell script downloaded from the internet6 or not7 The commitment to count to ten8 the number of steps in this guide 300 seconds the amount of time it should take to complete this installation Ready Lets get started Install Sensu in 5minutes or less installsensu The following installation steps will help you get Sensu Core installed in a standalone4 on a system running CentOS 75 only For installation on other platforms andor alternative installation configurations please consult the installation guide2 0 Install EPEL if not already done sudo yum install epelrelease y 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo or see Sensu Enterprise repository instructions9 echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Redis 1314 from EPEL sudo yum install redis y 3 Disable Redis protected mode When using Redis 320 or later you will need to edit etcredisconf in order to disable protected moderedissecurity Look for a line that reads protectedmode yes and change it to protectedmode no 4 Enable and start Redis sudo systemctl enable redis sudo systemctl start redis 5 Install Sensu sudo yum install sensu y and if youre using Sensu Enterprise9 lets go ahead and install Sensu Enterprise as well sudo yum install sensuenterprise sensuenterprisedashboard y 6 Configure Sensu server Run the following to set up a minimal client config echo transport name redis api host 127001 port 4567 sudo tee etcsensuconfigjson 7 Configure the Sensu client Run the following to set up a minimal client config echo client environment development subscriptions dev sudo tee etcsensuconfdclientjson 8 Configure a Sensu dashboard Run the following to set up a minimal dashboard config echo sensu name sensu host 127001 port 4567 dashboard host 0000 port 3000 sudo tee etcsensudashboardjson 9 Make sure that the sensu user owns all of the Sensu configuration files sudo chown R sensusensu etcsensu 10 Start the Sensu services Sensu Core users sudo systemctl enable sensuserverapiclient sudo systemctl start sensuserverapiclient Sensu Enterprise users sudo systemctl enable sensuenterpriseenterprisedashboardclient sudo systemctl start sensuenterpriseenterprisedashboardclient 11 Verify that your installation is ready to use by querying the Sensu API using the curl utility and piping the result to the jq utility10 sudo yum install jq curl y curl s http1270014567clients jq If the Sensu API returns a JSON array of Sensu clients similar to this curl s http1270014567clients jq timestamp 1458625739 version 0280 socket port 3030 bind 127001 subscriptions dev environment development address 127001 name client01 you have successfully installed and configured Sensu If you youre using Sensu Enterprise you should also be able to load the Sensu Enterprise Dashboard in your browser by visiting httphostname3000httphostname3000 replacing hostname with the hostname or IP address of the system where the dashboard is installed fiveminutedashboard1imagesfiveminutedashboard1png fiveminutedashboard2imagesfiveminutedashboard2png 1 overviewarchitecture 2 installationoverview 3 installationinstallationstrategies 4 installationinstallationstrategiesstandalone 5 httpswikicentosorgManualsReleaseNotesCentOS7 6 httpgithubcomsensusensubash 7 platformssensuonrhelcentosinstallsensucorerepository 8 httpswwwyoutubecomwatchvJ2D1XF40ok 9 platformssensuonrhelcentosinstallsensuenterpriserepository 10 httpsstedolangithubiojq redissecurity httpsredisiotopicssecurity"},{"title":"Learn Sensu in 15 Minutes","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/quick-start/learn-sensu-basics","display_name":"Sensu Core 0.29: Learn Sensu in 15 Minutes","content":" Learn Sensu in 15 Minutes Sensu was designed to provide a comprehensive monitoring platform for monitoring infrastructure servers services application health and business KPIs mdash and to collect and analyze custom metrics Although most Sensu Core and Sensu Enterprise users eventually end up replacing several other monitoring solutions and standardizing on Sensu ndash they didnt get there by learning about every feature Sensu has to offer ndash they started with the basics This Quick Start Guide is not intended to teach you everything there is to know about Sensu This guide is designed to introduce you to the some basic monitoring concepts using Sensu Core It is our hope that this guide will whet your appetite to learn more about Sensu and feel the monitoringlove1 Overview What will you learn how to do Exercise 1 Registering Sensu clientsexercise1 Exercise 2 Configuring your first Sensu checkexercise2 Exercise 3 Configuring your first Sensu handlerexercise3 Exercise 4 Use the Sensu client input socketexercise4 Exercise 5 Configuring pubsub checks using Sensu subscriptionsexercise5 Quick start requirements Familiarity with a commandline interface related tooling eg text editor curl A standalone Sensu installation preferably created using the five minute installthefiveminuteinstall Access to the Internet for downloading plugins and communicating with external services Access to an SMTP server for sending alerts via email 15 minutes the amount of time it should take to complete these exercises WARNING this guide assumes that you are using a standalone Sensu installation that was setup by following the instructions in the the five minute install2 Please proceed accordingly"},{"title":"Reference","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/_index","display_name":"Sensu Core 0.29: Reference","content":""},{"title":"Aggregates","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/aggregates","display_name":"Sensu Core 0.29: Aggregates","content":" Reference documentation What is a Sensu named aggregatewhatisacheckaggregate When should named aggregates be usedwhenshouldcheckaggregatesbeused How do named aggregates workhowdocheckaggregateswork Example aggregated check resultexampleaggregatedcheckresult Aggregate configurationaggregateconfiguration Example aggregate definitionexampleaggregatedefinition Aggregate definition specificationaggregatedefinitionspecification Aggregate check attributesaggregatecheckattributes What is a Sensu named aggregate whatisacheckaggregate Sensu named aggregates are collections of check results1 accessible via the Aggregates API2 Check aggregates make it possible to treat the results of multiple disparate check results ndash executed across multiple disparate systems ndash as a single result When should named aggregates be used whenshouldcheckaggregatesbeused Check aggregates are extremely useful in dynamic environments andor environments that have a reasonable tolerance for failure Check aggregates should be used when a service can be considered healthy as long as a minimum threshold is satisfied eg are at least 5 healthy web servers are at least 70 of N processes healthy How do named aggregates work howdocheckaggregateswork Check results are included in an aggregate when a check definition includes the aggregate definition attribute3 Check results that provide an aggregate exampleaggregate are aggregated under the corresponding name eg exampleaggregate effectively capturing multiple check results as a single aggregate Example aggregated check result Aggregated check results are available from the Aggregates API2 via the aggregatesname API endpoint An aggregate check result provides a set of counters indicating the total number of client members checks and check results collected with a breakdown of how many results were recorded per status ie ok warning critical and unknown clients 15 checks 2 results ok 18 warning 0 critical 1 unknown 0 total 19 stale 0 Additional aggregate data is available from the Aggregates API including Sensu client members of a named aggregate and the corresponding checks which are included in the aggregate curl s httplocalhost4567aggregateselasticsearchclients jq name i424242 checks elasticsearchservice elasticsearchclusterhealth name 1424243 checks elasticsearchservice Aggregate data may also be fetched per check that is a member of the named aggregate along with the corresponding clients that are producing results for said check curl s httplocalhost4567aggregateselasticsearchchecks jq name elasticsearchservice clients i424242 i424243 name elasticsearchclusterhealth clients i424242 Aggregate configuration Example aggregate definition The following is an example check definition6 a JSON configuration file located at etcsensuconfdcheckaggregateexamplejson checks examplecheckaggregate command dosomethingrb o option aggregate exampleaggregate handle false Aggregate definition specification NOTE aggregates are created via the aggregate Sensu check definition attribute4 The configuration examples provided above and the specification provided here are for clarification and convenience only ie this specification is just a subset of the check definition specification5 and not a definition of a distinct Sensu primitive Aggregate check attributes aggregate "},{"title":"Checks","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/checks","display_name":"Sensu Core 0.29: Checks","content":" Reference documentation What is a Sensu checkwhatisasensucheck Sensu check specificationsensucheckspecification Check commandscheckcommands What is a check commandwhatisacheckcommand Check command argumentscheckcommandarguments How and where are check commands executedhowandwherearecheckcommandsexecuted Check execution platformcheckexecutionplatform How are checks scheduledhowarechecksscheduled Subscription checkssubscriptionchecks Standalone checksstandalonechecks Check resultscheckresults What is a check resultwhatisacheckresult Example check result outputexamplecheckresultoutput Check token substitutionchecktokensubstitution What is check token substitutionwhatischecktokensubstitution Example check tokensexamplechecktokens Check token specificationchecktokenspecification Token substitution syntaxtokensubstitutionsyntax Token substitution default valuestokensubstitutiondefaultvalues Unmatched tokensunmatchedtokens Check configurationcheckconfiguration Example check definitionexamplecheckdefinition Check definition specificationcheckdefinitionspecification Check namingchecknames CHECK attributescheckattributes subdue attributessubdueattributes Custom attributescustomattributes Check result specificationcheckresultspecification check attributescheckresultcheckattributes client attributescheckresultclientattributes What is a Sensu check Sensu checks are commands executed by the Sensu client1 which monitor a condition eg is Nginx running or collect measurements eg how much disk space do I have left Although the Sensu client will attempt to execute any command defined for a check successful processing of check results requires adherence to a simple specification Sensu check specification Result data is output to STDOUT or STDERR2 For standard checks this output is typically a humanreadable message For metrics checks this output contains the measurements gathered by the check Exit status code indicates state 0 indicates OK 1 indicates WARNING 2 indicates CRITICAL exit status codes other than 0 1 or 2 indicate an UNKNOWN or custom status PRO TIP Those familiar with the Nagios3 monitoring system may recognize this specification as it is the same one used by Nagios plugins As a result Nagios plugins can be used with Sensu without any modification At every execution of a check command ndash regardless of success or failure ndash the Sensu client publishes the checks result4 for eventual handling by the event processor5 ie the Sensu server6 Check commands What is a check command Each Sensu check definition7 defines a command and the interval at which it should be executed Check commands are literally executable commands which will be executed on the Sensu client1 run as the sensu user Most check commands are provided by Sensu check plugins8 Check command arguments Sensu check command attributes may include command line arguments for controlling the behavior of the command executable Most Sensu check plugins8 provide support for command line arguments for reusability How and where are check commands executed As mentioned above all check commands are executed by Sensu clients1 as the sensu user Commands must be executable files that are discoverable on the Sensu client system ie installed in a system PATH directory9 NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commands eg command checkhttprb u httpssensuapporg Check execution platform How are checks scheduled Sensu offers two distinct check execution schedulers the Sensu serverserver and the Sensu client10 monitoring agent The Sensu server schedules and publishes check execution requests to client subscriptions via a PublishSubscribe model11 ie subscription checkssubscriptionchecks The Sensu client monitoring agent schedules and executes standalone checks12 on the local system only Because Sensus execution schedulers are not mutually exclusive any Sensu client may be configured to both schedule and execute its own standalone checks as well as execute subscription checks scheduled by the Sensu server Subscription checks Sensu checks which are centrally defined and scheduled by the Sensu server6 are called subscription checks Sensus use of a message bus transport13 for communication enables topicbased communication14 mdash where messages are published to a specific topic and consumers subscribe to one or more specific topics This form of communication is commonly referred to as the publishsubscribe pattern11 or pubsub for short Subscription checks have a defined set of subscribers15 a list of transport13 topics14 that check requests will be published to Sensu clients become subscribers to these topics ie subscriptions via their individual client definition16 subscriptions attribute In practice subscriptions will typically correspond to a specific role andor responsibility eg a webserver database etc Subscriptions are a powerful primitives in the monitoring context because they allow you to effectively monitor for specific behaviors or characteristics corresponding to the function being provided by a particular system For example disk capacity thresholds might be more important or at least different on a database server as opposed to a webserver conversely CPU andor memory usage thresholds might be more important on a caching system than on a file server Subscriptions also allow you to configure check requests for an entire group or subgroup of systems rather than require a traditional 11 mapping Standalone checks Sensu checks which are defined on a Sensu client1 with the check definition attribute17 standalone set to true are called standalone checks The Sensu client provides its own scheduler10 for scheduling standalone checks which ensures scheduling consistency between Sensu clients with identical check definitions assuming that system clocks are synchronized via NTP18 Standalone checks are an important complement to subscription checks19 because they provide a decentralized management alternative for Sensu Check results What is a check result A check result is a JSON20 document published as a message on the Sensu transport13 by the Sensu client upon completion of a check execution Sensu check results include the check definition attributes17 eg command subscribers interval name etc including custom attributes21 the client name the result was submitted from and the output of the check Example check result output check status 0 command checkhttprb u httpssensuapporg subscribers demo interval 60 name sensuwebsite issued 1458934742 executed 1458934742 duration 0637 output CheckHttp OK 200 78572 bytesn client sensudocs NOTE please refer to the check result specification38 below for more information about check results Check token substitution What is check token substitution Sensu check definitions17 may include attributes that you may wish to override on a clientbyclient basis For example check commands23 ndash which may include command line arguments23 for controlling the behavior of the check command ndash may benefit from clientspecific thresholds etc Sensu check tokens are check definition placeholders that will be replaced by the Sensu client with the corresponding client definition attribute16 values including custom attributes24 NOTE Sensu check tokens were formerly known as check command tokens which limited token substitution to the check command attribute command tokens were also sometimes referred to as Sensu client overrides a reference to the fact that command tokens allowed client attributes to override check command arguments23 NOTE Check tokens are processed before check execution therefore token substitution will not apply to check data delivered via the local client socket input46 Example check tokens The following is an example Sensu check definition17 using three check tokens for check command arguments23 In this example the checkdiskusagerb command accepts w warning and c critical arguments to indicate the thresholds as percentages for creating warning or critical events As configured this check will create a warning event at 80 disk capacity unless a different threshold is provided by the client definition ie diskwarning80 and a critical event will be created if disk capacity reaches 90 unless a different threshold is provided by the client definition ie diskcritical90 This example also creates a custom check definition attribute called environment which will default to a value of production unless a different value is provided by the client definition ie environmentproduction checks checkdiskusage command checkdiskusagerb w diskwarning80 c diskcritical90 subscribers production interval 60 environment environmentproduction The following example Sensu client definition16 would provide the necessary attributes to override the diskwarning diskcritical and environment tokens declared above client name i424242 address 1002100 subscriptions production webserver mysql disk warning 75 critical 85 environment development Check token specification Token substitution syntax Check tokens are invoked by wrapping references to client attributes with triple colons ie three colon characters ie Nested Sensu client definition attributes16 can be accessed via dot notation eg diskwarning address would be replaced with the client address attribute26 url would be replaced with a custom attribute24 called url diskwarning would be replaced with a custom attribute24 called warning nested inside of a JSON hash called disk Token substitution default values checktokendefaultvalues Check token default values can be used as a fallback in the event that an attribute is not provided by the client definition16 Check token default values are separated by a pipe character and can be used to provide a fallback value for clients that are missing the declared token attribute urlhttpssensuapporg would be replaced with a custom attribute24 called url If no such attribute called url is included in the client definition the default or fallback value of httpssensuapporg will be used Unmatched tokens If a token substitution default value25 is not provided ie as a fallback value and the Sensu client definition does not have a matching definition attribute a check result4 indicating unmatched tokens will be published for the check execution eg Unmatched check tokens diskwarning Check configuration Example check definition The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdchecksensuwebsitejson This check definition uses a Sensu plugin27 named checkhttprb28 to ensure that the Sensu website is still available The check is named sensuwebsite and it runs on Sensu clients with the production subscription15 at an interval of 60 seconds checks sensuwebsite command checkhttprb u httpssensuapporg subscribers production interval 60 contact ops Check definition specification Check naming checknames Each check definition has a unique check name used for the definition key Every check definition is within the checks configuration scope29 A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex30 wmatchcheckname CHECK attributes The following attributes are configured within the checks CHECK configuration scope29 where CHECK is a valid check name41 type "},{"title":"Clients","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/clients","display_name":"Sensu Core 0.29: Clients","content":" Reference documentation What is a Sensu clientwhatisasensuclient Client keepalivesclientkeepalives What is a client keepalivewhatisaclientkeepalive Client registration the client registryregistrationandregistry Registration eventsregistrationevents Proxy clientsproxyclients How are keepalive events createdkeepaliveevents Client keepalive configurationclientkeepaliveconfiguration Client signatureclientsignature Client subscriptionsclientsubscriptions What is a client subscriptionwhatisasensusubscription Roundrobin client subscriptionsroundrobinclientsubscriptions Client subscription configurationclientsubscriptionconfiguration Client socket inputclientsocketinput What is the Sensu client socketwhatisthesensuclientsocket Example client socket usageexampleclientsocketusage Client socket configurationsocketattributes Standalone check execution schedulerstandalonecheckexecutionscheduler Client configurationclientconfiguration Example client definitionexampleclientdefinition Client definition specificationclientdefinitionspecification client attributesclientattributes socket attributessocketattributes httpsocket attributeshttpsocketattributes keepalive attributeskeepaliveattributes thresholds attributesthresholdsattributes registration attributesregistrationattributes deregistration attributesderegistrationattributes ec2 attributesec2attributes chef attributeschefattributes puppet attributespuppetattributes servicenow attributesservicenowattributes Custom attributescustomattributes What is a Sensu client Sensu clients are monitoring agents1 which are installed and run on every system eg server container etc that needs to be monitored The client is responsible for registering the system with Sensu sending client keepalive2 messages the Sensu heartbeat mechanism and executing monitoring checks Each client is a member of one or more subscriptions3 ndash a list of roles andor responsibilities assigned to the system eg a webserver database etc Sensu clients will subscribe to or watch for check requests4 published by the Sensu server5 via the Sensu Transport6 execute the corresponding requests locally and publish the results of the check back to the transport to be processed by a Sensu server Client keepalives What is a client keepalive Sensu Client keepalives are the heartbeat mechanism used by Sensu to ensure that all registered Sensu clients are still operational and able to reach the Sensu Transport6 Sensu clients publish keepalive messages containing client configuration data to the Sensu transport every 20 seconds If a Sensu client fails to send keepalive messages over a period of 120 seconds by default the Sensu server or Sensu Enterprise will create a keepalive event7 Keepalives can be used to identify unhealthy systems and network partitions among other things and keepalive events can trigger email notifications and other useful actions Client registration the client registry registrationandregistry In practice client registrations happens when a Sensu server processes a client keepalive message for a client that is not already registered in the Sensu client registry based on the configured client name or source attribute This client registry is stored in the Sensu data store8 and is accessible via the Sensu Clients API9 All Sensu client data provided in client keepalive messages gets stored in the client registry which data is used to add context to Sensu Events7 and to detect Sensu clients in an unhealthy state Registration events If a Sensu event handler30 named registration is configured or if a Sensu client definition includes a registration attribute31 the Sensu server5 will create and process a Sensu event7 for the client registration applying any configured filters26 and mutators32 before executing the configured handlers30 Registration events are useful for executing onetime handlers for new Sensu clients For example registration event handlers can be used to update external Configuration Management Databases CMDBs34 such as ServiceNow35 etc To configure a registration event handler please refer to the Sensu event handler documentation30 for instructions on creating a handler named registration Alternatively please see Client definition registration attributes31 below WARNING registration events are not stored in the event registry in the Sensu data store8 so they are not accessible via the Sensu API however all registration events are logged in the Sensu server5 log Proxy clients Sensu proxy clients formerly known as Justintime or JIT clients are dynamically created clients added to the client registry if a client does not already exist for a check result Proxy client registration differs from keepalivebased registration because the registration event happens while processing a check result not a keepalive message If a check result includes a source attribute a proxy client will be created for the source and the check result will be stored under the newly created client Sensu proxy clients allow Sensu to monitor external resources eg on systems andor devices where a sensuclient cannot be installed such a network switches using the defined check source to create a proxy clients for the external resource Once created proxy clients work much in the same way as any other Sensu client eg they are used to store check execution history and provide context within event data NOTE keepalive monitoring is not supported for proxy clients as they are inherently unable to run a sensuclient Proxy client example Proxy clients are created when a check result includes a source attribute as follows check status 0 command checkhttprb u httpssensuapporg subscribers demo interval 60 name sensuwebsite source sensuapporg issued 1458934742 executed 1458934742 duration 0637 output CheckHttp OK 200 78572 bytesn client sensudocs NOTE this source attribute can be provided in a check definition14 or included in a check result published to the Sensu client input socket36 By default proxy client data includes a minimal number of attributes The following is an example of proxy client data that is added to the registry name switchx address unknown subscriptions keepalives false The Sensu API can be used to update proxy client data in the client registry To update proxy client data please refer to the Client API reference documentation9 Create a proxy client via the client socket The following is an example of how to create a proxy client payload via the client socketclientsocketinput using netcat echo source mysql01 name app01 output could not connect to mysql status 1 nc localhost 3030 How are keepalive events created keepaliveevents Sensu servers including Sensu Enterprise monitor the Sensu client registry for stale client data detecting clients that have failed to send client keepalive messages10 for more than 120 seconds by default When a Sensu server detects that a client hasnt sent a keepalive message within the configured threshold the Sensu server or Sensu Enterprise will create an event this is different from how events are created for monitoring checks see How are Sensu events created11 Client keepalive configuration For more information on configuring client keepalives please see the client keepalive attribute reference documentation12 below Sensu client keepalives are published to the Sensu transport every 20 seconds Client keepalive behavior can be configured per Sensu client allowing each Sensu client to set its own alert thresholds and keepalive event handlers By default client data is considered stale if a keepalive hasnt be received in 120 seconds WARNING By default keepalive events will be sent to the Sensu handler named keepalive if defined or the default handler will be used To configure the keepalive check for a Sensu client please refer to the client keepalive attributes reference documentation12 Client signature Sensu client definitions may specify a unique string identifier as their signature which is included in each keepalive message Once a client advertises a signature via keepalives the server will expect that signature to be present in any keepalives or check results originating from the client Any keepalives or check results which do not contain a matching signature will be dropped with an invalid client signature warning in the log A client can begin to use a signature if one was not previously configured but removing a client signature requires deleting the client Providing a unique client signature prevents other clients from accidentally or maliciously submitting keepalives or check results using the same client name Client subscriptions What is a client subscription whatisasensusubscription Sensus use of the publishsubscribe pattern of communication13 allows for automated registration deregistration of ephemeral systems At the core of this model are Sensu client subscriptions Each Sensu client has a defined set of subscriptions a list of roles andor responsibilities assigned to the system eg a webserver database etc These subscriptions determine which monitoring checks are executed by the client Client subscriptions allow Sensu to request check executions on a group of systems at a time instead of a traditional 11 mapping of configured hosts to monitoring checks Sensu checks target Sensu client subscriptions using the check definition attribute subscribers14 Roundrobin client subscriptions Roundrobin client subscriptions allow checks to be executed on a single client within a subscription in a roundrobin fashion To create a roundrobin client subscription prepend the subscription name with roundrobin eg roundrobinelasticsearch Any check that targets the roundrobinelasticsearch subscription will have its check requests sent to clients in a roundrobin fashion meaning only one member client in the subscription will execute a roundrobin check each time it is published The following is a Sensu client definition that includes a roundrobin subscription client name i424242 address 8888 subscriptions production webserver roundrobinwebserver The following is a Sensu check definition that targets a roundrobin subscription checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers roundrobinwebserver interval 20 Client subscription configuration To configure Sensu client subscriptions for a client please refer to the client subscriptions attribute reference documentation15 In addition to the subscriptions defined in the client configuration Sensu clients also subscribe automatically to a subscription matching their client name For example a client named i424242 will subscribe to check requests for the subscription clienti424242 This makes it possible to generate adhoc check requests targeting specific clients via the request API49 Client socket input What is the Sensu client socket Every Sensu client has a TCP UDP and HTTP socket listening for external check result input The Sensu client sockets listen by default on localhost port 3030 for TCPUDP and 3031 for HTTP and expect JSON formatted check results allowing external sources eg your web application backup scripts etc to push check results without needing to know anything about Sensus internal implementation An excellent client socket use case example is a web application pushing check results to indicate database connectivity issues To configure the Sensu client socket for a client please refer to the client socket attributes16 HTTP Socket The HTTP socket just like the TCP and UDP sockets accepts check results but it requires a wellformed HTTP request and exposes other functionality that is not possible with the raw TCPUDP sockets In exchange for a bit more complexity the HTTP socket interface has the advantage of being more expressive than a raw TCPUDP socket both in the requests that it accepts and how it responds and so exposes more functionality The following endpoints are available for the HTTP socket GET info This endpoint returns 200 OK with some basic Sensu information like the version and transport metrics POST results This endpoint expects an applicationjson body with a check result GET settings This endpoint responds with 200 OK and the sensu configuration Due to the possible sensitive nature of the client settings eg passwords might be in the config this endpoint is protected using HTTP basic authentication and by default the information returned is redacted eg common config keys like password have their values replaced by REDACTED See the redact configuration option if you need control over what is redacted This endpoint accepts the optional query string redactedfalse to disable redaction Refer to the http client socket attributes50 for details on configuring the HTTP basic authentication details that this endpoint requires GET brew This endpoint gets you some fresh coffee Try it Any requests for unknown endpoints will get a 404 with some help information in the body At the moment only unsecure HTTP no HTTPS is supported To configure the Sensu HTTP client socket please refer to the http client socket attributes50 Example client socket usage The following is an example demonstrating external check result input via the Sensu client TCP socket The example uses Bashs builtin devtcp file to communicate with the Sensu client socket echo name app01 output could not connect to mysql status 1 devtcplocalhost3030 Netcat17 can also be used instead of the TCP file echo name app01 output could not connect to mysql status 1 nc localhost 3030 You can do the same using the HTTP socket curl v H ContentType applicationjson X POST d name app01 output could not connect to mysql status 1 localhost 3031 Creating a dead mans switch The Sensu client sockets in combination with check TTLs can be used to create whats commonly referred to as dead mans switches Outside of the software industry a dead mans switch is a switch that is automatically triggered if a human operator becomes incapacitated source Wikipedia18 Sensu is more interested in detecting silent failures than incapacited human operators By using Check TTLs Sensu is able to set an expectation that a Sensu client will continue to publish results for a check at a regular interval If a Sensu client fails to publish a check result and the check TTL expires Sensu will create an event to indicate the silent failure For more information on check TTLs please refer to the check attributes reference documentation14 A great use case for the Sensu client socket is to create a dead mans switch for backup scripts to ensure they continue to run successfully at regular intervals If an external source sends a Sensu check result with a check TTL to the Sensu client socket Sensu will expect another check result from the same external source before the TTL expires The following is an example of external check result input via the Sensu client TCP socket using a check TTL to create a dead mans switch for MySQL backups The example uses a check TTL of 25200 seconds or 7 hours A MySQL backup script using the following code would be expected to continue to send a check result at least once every 7 hours or Sensu will create an event7 to indicate the silent failure echo name backupmysql ttl 25200 output backed up mysql successfully sizemb568 status 0 nc localhost 3030 echo name backupmysql ttl 25200 output failed to backup mysql status 1 nc localhost 3030 Standalone check execution scheduler In addition to subscribing to client subscriptions3 and executing check requests published by the Sensu server19 the Sensu client is able to maintain its ownseparate schedule for standalone checks20 Because the Sensu client shares the same check scheduling algorithm21 as the Sensu server it is not only possible to have consistency between subscription checks22 and standalone checks mdash its also possible to maintain consistency between standalone checks across an entire infrastructure assuming that system clocks are synchronized via NTP23 Client configuration Example client definition The following is an example Sensu client definition a JSON configuration file located at etcsensuconfdclientjson This client definition provides Sensu with information about the system on which it resides This is a production system running a web server and a MySQL database The client name attribute is required in the definition and must be unique client name i424242 address 8888 subscriptions production webserver mysql socket bind 127001 port 3030 Client definition specification The client definition uses the client configuration scope24 client attributes name "},{"title":"Configuration","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/configuration","display_name":"Sensu Core 0.29: Configuration","content":" Reference documentation How does Sensu load configurationhowdoessensuloadconfiguration Sensu configuration sourcessensuconfigurationsources Configuration load orderconfigurationloadorder Configuration mergingconfigurationmerging Configuration loggingconfigurationlogging Configuration scopesconfigurationscopes Configuration scopes are relativeconfigurationscopesarerelative Configuration scope examplesconfigurationscopeexamples Sensu service init configurationsensuservicescriptconfiguration Sensu service init configuration variablessensuservicescriptconfigurationvariables Sensu command line interfaces and argumentssensucommandlineinterfacesandarguments Sensu environment variablessensuenvironmentvariables Sensu configuration specificationsensuconfigurationspecification Example sensu configurationexamplesensuconfiguration Toplevel configuration scopestoplevelconfigurationscopes How does Sensu load configuration Sensu configuration sources By default the main configuration file for the Sensu platform is located at etcsensuconfigjson However Sensu also provides support for loading configuration from a directory containing multipledisparate configuration files andor environment variables Sensu merges configuration parameters provided from these three distinct configuration sources environment variables configuration file and configuration directories into a single Hash This type of Hash merging is often called deep merging and is probably the most important concept to understand when learning how to configure Sensu Configuration load order As previously mentioned Sensu configuration can be provided via three distinct sources environment variables a configuration file and one or more directories containing configuration files Sensu loads configuration from these sources in the following order 1 The Sensu service scripts provide command line arguments1 for starting the Sensu services eg the location of the configuration file c the location of configuration directories d etc 2 Sensu will load configuration from environment variables2 3 Sensu loads configuration from the configuration file by default this is located at etcsensuconfigjson 3 Sensu loads configuration snippets from configuration files located in a Sensu configuration directory by default this is etcsensuconfd however it is possible to configure Sensu to load from multiple configuration directories see command line arguments1 below NOTE configuration file load order is dictated by a json glob of the configuration directory as such it is strongly recommended to avoid a dependency on configuration directory file load order eg if youre attempting to name configuration files in the configuration directory to control load order youre doing it wrong Configuration merging configurationmerging To explain how Sensu merges configuration parameters from the various disparate configuration sources please note the following example scenario 1 The Sensu runtime configuration is stored as an inmemory Hash object For the purposes of providing a visual example lets imagine that this Hash object is actually a JSON document which begins life as Sensu is started as an empty JSON document Initial Sensu configuration Hash in memory When Sensu is started it will begin to collect configuration from environment variables a configuration file and one ore more configuration directories which configuration parameters will be used to build up this configuration Hash 2 For the purposes of this example lets assume that the first configuration snippet that Sensu encounters is a configuration file located at etcsensuconfigjson with the following contents New config file on disk at etcsensuconfigjson rabbitmq host 100110 vhost sensu user sensu password secret redis host 100120 port 6379 password secret At this time the Sensu configuration Hash in memory will look like Updated Sensu configuration Hash in memory rabbitmq host localhost vhost sensu user sensu password secret redis host localhost port 6379 password secret 3 Now lets see what happens when Sensu encounters another configuration snippet eg a file located in a Sensu configuration directory such as etcsensuconfdrabbitmqjson New config file contents on disk at etcsensuconfdrabbitmqjson rabbitmq host 100110 user sensu01 password newsecret The second configuration snippet provided configuration for the rabbitmq scope some of which already exists in the Sensu configuration Hash in memory but also missing some attributes which already exist in the Sensu configuration Hash ie vhost The result of merging this configuration snippet into the Sensu configuration Hash in memory is as follows Updated Sensu configuration Hash in memory rabbitmq host 100110 vhost sensu user sensu01 password newsecret redis host localhost port 6379 password secret The result of the deep merge is that the configuration snippet provided by etcsensuconfdrabbitmqjson was overlaid on the Sensu configuration Hash in memory essentially overwriting the previously existing values provided by the configuration snippet while not discarding configuration attributes that already existed in the rabbitmq configuration scope even though they werent provided by the configuration snippet Configuration logging As configuration snippets are applied to the Sensu configuration Hash ie during deep merge all configuration changes are logged to the corresponding log file eg the Sensu server API or Client logs Configuration scopes Because Sensu configuration can be provided in so many different sources it is important to understand that ndash regardless of the physical location of the configuration data eg from the main configuration file or from a configuration file in a configuration directory ndash all configuration must be placed in the appropriate scope in the JSON file ie the named level that attributes should be defined in For example the root or scope of the Sensu configuration would be any attributes defined at the top level of a JSON configuration file such as the configuration attributes for rabbitmq redis or the api rabbitmq redis api Attributes defined in the root scope or top level provide the corresponding scopes for additional configuration settings eg the rabbitmq attribute defined above provides the rabbitmq scope a JSON Hash for the actual RabbitMQ configuration settings Configuration scopes are relative Throughout the Sensu documentation whenever a configuration scope is mentioned it is describing the named level that the corresponding configuration attributes should be defined within which may be relative to any potentially related scopes Please note the following examples Configuration scope examples The client scope client In the Sensu Client reference documentation3 it explains that The client definition uses the client definition scope Which means that regardless where you might store a configuration file containing Sensu client configuration on disk assuming it is in a location that will be loaded by Sensu the file should contain a top level attribute called client client The client socket scope socket The Sensu Client reference documentation3 continues to explain that Sensu clients may have a socket attribute and that there are additional Client Socket attributes4 which should be defined within the socket scope The following attributes are configured within the socket client definition attribute scope Which means that regardless where you might store a configuration file containing Sensu Client Socket configuration on disk assuming it is in a location that will be loaded by Sensu the file should contain a top level attribute called client and another attribute defined within the client scope or level called socket client socket Thus when the Client Socket reference documentation continues to explain that the bind and port attributes should be defined in the Client Socket scope it means they should live under the socket level of the JSON file regardless of where you might store a configuration file containing said configuration attributes on disk assuming it is in a location that will be loaded by Sensu client socket bind 0000 port 3031 Sensu service service configuration sensuservicescriptconfiguration The Sensu services are managed by service scripts that are provided in the Sensu packages The Sensu service scripts are able to startstoprestart the corresponding Sensu services eg the Sensu server API client etc The default Sensu service scripts and related configuration files containing configuration variables are located as follows etcdefaultsensu sourced by the init scripts to provide configuration variables5 etcinitdsensuservice shared init script used by the Sensu service init scripts etcinitdsensuserver etcinitdsensuapi etcinitdsensuclient etcinitdsensuenterprise etcinitdsensuenterprisedashboard Sensu service script configuration variables sensuservicescriptconfigurationvariables The following configuration variables can be set in the service scripts for the platform EMBEDDEDRUBY "},{"title":"Sensu Data Store","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/data-store","display_name":"Sensu Core 0.29: Sensu Data Store","content":" Reference documentation What is the Sensu data storewhatisthesensudatastore What is the Sensu data store Sensu services use a data store Redis1 to persist monitoring data including the Sensu client registry check results check execution history and current event data All Sensu Core server and API processes ie sensuserver and sensuapi or the Sensu Enterprise process ie sensuenterprise require access to the same instance of the defined data store ie a Redis server or cluster NOTE unlike the Sensu Transport2 ndash which is a Sensu library that allows Sensu to be used with different transport backends eg RabbitMQ or Redis etc ndash the Sensu Data Store is not abstracted andor extensible At this time Redis is the only data store supported by Sensu Having said that because this may change at some point in the future we are beginning to use the term data store in the Sensu documentation as an abstraction for the functions currently provided by Redis 1 redis 2 transport"},{"title":"Events","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/events","display_name":"Sensu Core 0.29: Events","content":" Reference documentation What are Sensu eventswhataresensuevents How are Sensu events createdhowaresensueventscreated Event actionseventactions Event dataeventdata Example eventexampleevent Event data specificationeventdataspecification EVENT attributeseventattributes check attributescheckattributes client attributesclientattributes What are Sensu events whataresensuevents Sensu events are created to acknowledge that something potentially noteworthy has occurred which events may then be processed by one or more event handlers1 to do things such as send an email or invoke an automated action Every Sensu event provides context called event data2 which contains information about the originating Sensu client3 and the corresponding check result4 How are Sensu events created A Sensu Event is created every time a check result10 is processed by the Sensu server regardless of the status indicated by the check result An Event is created by collating data from the check result the client registry22 and additional context added at the time of processing Event actions Sensu supports the following event actions create Indicates a check result status change from zero to nonzero resolve Indicates a check result status change from a nonzero to zero flapping Indicates a rapid change in check result status NOTE for more information on event actions please see the Sensu event data specification5 below Event data Example event The following is an example Sensu event By default event data is JSON formatted making it languageindependent and fairly human readable id ef6b87d21f89439f8bea33881436ab90 action create timestamp 1460172826 occurrences 2 check type standard totalstatechange 11 history 0 0 1 1 2 2 status 2 output No keepalive sent from client for 230 seconds 180 executed 1460172826 issued 1460172826 name keepalive thresholds critical 180 warning 120 client timestamp 1460172596 version 100 socket port 3030 bind 127001 subscriptions production environment development address 127001 name client01 Event data specification EVENT attributes The following attributes are available in the root scope of the event data JSON document id "},{"title":"Extensions","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/extensions","display_name":"Sensu Core 0.29: Extensions","content":" Reference documentation What is a Sensu extensionwhatisasensuextension Installing Sensu extensionsinstallingsensuextensions Installing Sensu legacy extensionsinstallingsensulegacyextensions Configuring Sensu extensionsconfiguringsensuextensions The Sensu Extension gemthesensuextensiongem The Sensu Extensions gem templatethesensuextensionsgemtemplate What is a Sensu extension Unlike Sensu plugins which spawn a new child process at every execution Sensu extensions execute directly inside the EventMachine reactor thread1 of a Sensu client or server process Because they avoid the overhead of spawning a new process at every invocation Sensu extensions can fulfill the same functions as plugins acting as checks filters mutators or handlers but with much greater efficiency WARNING While their performance characteristics are quite desirable Sensu extensions come with major caveats extensions have full access to Sensus internals and any extension which blocks the EventMachine reactor for any period of time eg blocking on disk IO or network request will have a very significant negative impact on Sensus performance and functionality The details of evented programming as implemented by EventMachine are outside the scope of this document but Javier Acero has helpfully written on the implications of blocking the reactor2 Installing Sensu extensions As of version 026 Sensu supports loading extensions from properly packaged gems This approach takes advantage of the existing RubyGems infrastructure and tools to make publishing and installing Sensu extensions easy Use sensuinstall to install Sensu Extensions The Sensu Core package provides a tool called sensuinstall a simple wrapper around the Ruby gem utility The Sensu Install tool sensuinstall simplifies installation of Rubybased extensions The sensuinstall tool can be run with one or more arguments that determine the actions to take sensuinstall h Usage sensuinstall options h help Display this message v verbose Enable verbose logging p plugin PLUGIN Install a Sensu PLUGIN P plugins PLUGINPLUGIN PLUGIN or commadelimited list of Sensu plugins to install e extension EXTENSION Install a Sensu EXTENSION E extensions EXTENSIONEXT EXTENSION or commadelimited list of Sensu extensions to install s source SOURCE Install Sensu plugins and extensions from a custom SOURCE c clean Clean up remove other installed versions of the plugins andor extensions x proxy PROXY Install Sensu plugins and extensions via a PROXY URL NOTE sensuinstall is only available in Sensu Core 0210 Sensu extensions can be installed using the sensuinstall executable EXAMPLE installingsensuextensionsfromgemsexample sensuinstall e sensuextensionssystemprofile Or sensuinstall can prepend sensuextensions automatically sensuinstall e systemprofile Configuring Sensu to load extensions Once an extension is installed via gem Sensu must be explicitly configured to load the extension This is accomplished by providing configuration under the top level extensions attribute EXAMPLE configuringextensionloadingfromgemsexample extensions systemprofile gem sensuextensionssystemprofile EXAMPLE configuringextensionloadingfromgemswversionexample Configuration may optionally include a version specification extensions systemprofile gem sensuextensionssystemprofile version 100 Once extensions have been explicitly enabled in Sensus configuration they will be loaded the next time Sensu processes are restarted Informational messages are printed to the log when extensions are loaded EXAMPLE configuringextensionloadingfromgemslogexample timestamp20160808T1637257112750000levelwarnmessageloading extension gemgemsensuextensionssystemprofileversion100 timestamp20160808T1637257114190000levelwarnmessagerequiring extension gemrequiresensuextensionssystemprofile timestamp20160808T1637257115790000levelwarnmessageloaded extensiontypechecknamesystemprofiledescriptioncollects system metrics using the graphite plaintext format NOTE Explicit extension loading does not apply to legacy extensionsinstallingsensulegacyextensions which are loaded by virtue of being placed in the extension directory Installing Sensu legacy extensions Sensu extensions which are not properly packaged as gems are considered legacy meaning they predate the new specification for loading Sensu Extensions from gems These legacy extensions are loaded from the directory specified by the extensiondir flag provided when Sensu processes are started8 On most systems this defaults to etcsensuextensions as specified by the command flags passed to the sensuclient or sensuserver process via the service supervision scheme in use eg init runit upstart systemd etc Extensions should be installed directly into the extensions directory When an legacy extension has dependencies on thirdparty Ruby gems or other external applications those dependencies must be installed into the Sensu embedded Ruby environment as well Configuring Sensu Extensions The configurability of Sensu extensions is entirely a function of the extension code For example filters and mutators cannot be applied to an extension via a standard handler definition Instead these aspects of the extensions configuration must be defined in code by overriding the SensuExtensionBase definition method10 EXAMPLE extensionconfigurationincodeexample def definition type extension name name filters occurrences mutator onlycheckoutput end The above code would configure the associated extension to apply the occurrences filter and then the onlycheckoutput mutator prior to executing the extensions custom run method By virtue of being loaded into the Sensu client or server process Sensu extensions have access to the running Sensu configuration As such an extension can make use of any available configuration scopes9 but the prevailing convention is for extensions to use unique toplevel configuration scopes The systemprofile4 extension installed in a previous example looks to the toplevel systemprofile configuration scope The following configuration added to etcsensuconfd would change the systemprofile extensions Graphite path prefix from a default value of system to profile EXAMPLE providingextensionconfigurationexample systemprofile pathprefix profile The sensuextension gem Unlike Sensu plugins which may be written in any programming language Sensu extensions must be written in Ruby The sensuextension5 gem provides SensuExtensionBase and other classes which Sensu extensions should subclass The sensuextensions gem template The sensuextensions gem template12 provides a starting point for those who wish to author their own Sensu extension as a Ruby gem It is recommended that your gem follow the naming pattern sensuextensionNAME in order to ensure it can be easily installed with sensuinstall NOTE if you choose not to use this template for your extension note the directory structure it demonstrates eg placing extension code under libsensuextensions are required to ensure the extension is properly loaded Example extensions For simple examples of Sensu extensions consider the onlycheckoutput mutator6 or the debug handler7 both of which ship with Sensu You can find other Sensu extensions some of which are packaged in the Sensu Core distribution by searching RubyGems11 1 httpsgithubcomeventmachineeventmachinewikiGeneralIntroduction 2 httpjavieracerocomblogstartingwitheventmachineiv 4 httpsrubygemsorggemssensuextensionssystemprofile 5 httpsgithubcomsensusensuextension 6 httpsgithubcomsensuextensionssensuextensionsonlycheckoutputblobmasterlibsensuextensionsonlycheckoutputrb 7 httpsgithubcomsensuextensionssensuextensionsdebugblobmasterlibsensuextensionsdebugrb 8 configurationsensuserviceinitconfiguration 9 configurationconfigurationscopes 10 httpsgithubcomsensusensuextensionblobv150libsensuextensionrbL42L50 11 httpsrubygemsorgsearchutf8E29C93querysensuextensions 12 httpsgithubcomsensuextensionstemplate"},{"title":"Filters","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/filters","display_name":"Sensu Core 0.29: Filters","content":" Reference documentation What are Sensu Filterswhataresensufilters When to use a filterwhentouseafilter How do Sensu filters workhowdosensufilterswork Inclusive and exclusive filteringinclusiveandexclusivefiltering Filter attribute comparisonfilterattributecomparison Filter attribute evaluationfilterattributeevaluation Filter attribute eval tokensfilterattributeevaltokens What are filter attribute eval tokenswhatarefilterattributeevaltokens Example filter attribute eval tokenexamplefilterattributeevaltoken Filter attribute eval token specificationfilterattributeevaltokenspecification Eval token interpolationfilterattributeevaltokenspecification Eval token default valuesevaltokendefaultvalues Filter configurationfilterconfiguration Filter definition specificationfilterdefinitionspecification Filter namingfilternaming Filter attributesfilterattributes when attributeswhenattributes What are Sensu filters Sensu Filters also called Event Filters allow you to filter events destined for one or more event Handlers1 Sensu filters inspect event data and match its keysvalues with filter definition attributes to determine if the event should be passed to an event handler Filters are commonly used to filter recurring events ie to eliminate notification noise and to filter events from systems in preproduction environments When to use a filter Sensu Filters allow you to configure conditional logic to be applied during the event processing flow Compared to executing an event handler evaluating event filters is an inexpensive operation which can provide overall monitoring performance gains by reducing the number of events that need to be handled Additionally by using Sensu Filters instead of building conditional logic into custom Handlers conditional logic can be applied to multiple Handlers and monitoring configuration stays DRY How do Sensu filters work Sensu Filters are applied when Event Handlers1 are configured to use one or more Filters Prior to executing a Handler the Sensu server will apply any Filters configured for the Handler to the Event Data If the Event is not removed by the Filters ie filtered out the Handler will be executed The filter analysis flow performs these steps When the Sensu server is processing an Event it will check for the definition of a handler or handlers Prior to executing each Handler the Sensu server will first apply any configured filter or filters for the Handler If multiple filters are configured for a Handler they are executed sequentially Filter attributes are compared with Event data Filters can be inclusive only matching events are handled or exclusive matching events are not handled As soon as a Filter removes an Event ie filters it out no further analysis is performed and the Event Handler will not be executed NOTE Filters specified in a handler set16 definition have no effect Filters must be specified in individual handler definitions Inclusive and Exclusive Filtering Filters can be inclusive negate false or exclusive negate true Configuring a handler to use multiple inclusive filters is the equivalent of using an AND query operator ie only handle events if they match inclusive filters x AND y AND z Configuring a handler to use multiple exclusive filters is the equivalent of using an OR operator ie only handle events if they dont match x OR y OR z Inclusive filtering by setting the filter definition attribute2 negate false only events that match the defined filter attributes are handled Exclusive filtering by setting the filter definition attribute2 negate true events are only handled if they do not match the defined filter attributes NOTE unless otherwise configured in the filter definition2 the default filtering behavior is inclusive filtering ie negate false Filter attribute comparison Filter attributes are compared directly with their event data3 counterparts For inclusive filter definitions4 ie negate false matching attributes will result in the filter returning a true value for exclusive filter definitions4 ie negate true matching attributes will result in the filter returning a false value ie the event does not pass through the filter Filters that return a true value will continue to be processed mdash via additional filters if defined mutators if defined and handlers EXAMPLE The following example filter definition entitled productionfilter will match event data3 with a custom client definition attribute5 environment production filters productionfilter negate false attributes client environment production Filter attribute evaluation When more complex conditional logic is needed than direct filter attribute comparison10 Sensu filters provide support for attribute evaluation using Ruby expressions When a Filter attribute value is a string beginning with eval the remainder is evaluated as a Ruby expression The Ruby expression is evaluated in a sandbox and provided a single variable value which is equal to the event data attribute value being compared If the evaluated expression returns true the attribute is a match Example Handling state change only Some teams migrating to Sensu have asked about reproducing the behavior of their old monitoring system which alerts only on state change This statechangeonly inclusive4 filter provides such filters statechangeonly negate false attributes occurrences eval value 1 action resolve This eval filter is effective because value of event occurrences is reset on each state change except when the event action is resolve The resolve action is set on an event when its check result status is 0 following one or more prior nonzero statuses Example Handling repeated events The following example filter definition entitled filterinterval60hourly will match event data3 with a check interval6 of 60 seconds and an occurrences value of 1 ie the first occurrence OR any occurrences value that is evenly divisible by 60 via a modulo operator7 calculation ie calculating the remainder after dividing occurrences by 60 Note that negate is true making this an exclusive filter4 if evaluation returns false the event will be handled filters filterinterval60hourly negate true attributes check interval 60 occurrences eval value 1 value 60 0 The next example will apply the same logic as the previous example but for checks with a 30 second interval filters filterinterval30hourly negate true attributes check interval 30 occurrences eval value 1 value 120 0 NOTE The effect of both of these filters is that they will only allow an events with 30second or 60second intervals to be handled1 on the first occurrence of the event and again every hour Previous examples in the older Sensu docs have not included the check interval 60 attribute which has confused some users because filtering based on occurrences alone assumes some understanding of the relationship between occurrences and interval which isnt always obvious Example Handling events during office hours only This filter evaluates the event timestamp to determine if the event occurred between 9 AM and 5 PM on a weekday Remember that negate defaults to false so this is an inclusive filter If evaluation returns false the event will not be filters ninetofiver negate false attributes timestamp eval 12345includeTimeatvaluewday Timeatvaluehourbetween917 Filter attribute eval tokens What are filter attribute eval tokens Sensu filters attributes may be evaluated using Ruby expressions10 which evaluations provide support for comparing a single event attribute variable against a basic logical statement eg is value greater than 60 When additional variables are needed beyond the single value variable provided by eval tokens may be used Eval tokens are filter attribute placeholders that can be replaced by Sensu check definition attributes6 and client definition attributes8 including custom attributes Example filter attribute eval token The following is an example Sensu filter definition2 which is using a token checkoccurrences60 as a secondary attribute in the Ruby eval expression The token will be replaced by the check definition attribute6 named occurrences if it is defined otherwise it will use the fallback value of 60 filters occurrences negate true attributes occurrences eval value checkoccurrences60 This example would be useful for filtering events that dont exceed a minimum number of occurrences as configured in the check definition Filter attribute eval token specification Eval token substitution syntax Eval tokens are invoked by wrapping event data attributes with triple colons ie three colon characters before and after the attribute ie Nested event data attributes3 may be accessed via dot notation eg checkoccurrences occurrences would be replaced with the event occurrences data11 checkmythreshold would be replaced with a custom check definition attribute12 called mythreshold Eval token default values Eval token default values can be used as a fallback in the event that an eval token attribute13 is not satisfied by event data3 Eval token default values are separated by a pipe character and can be used to provide a fallback value for events that are missing the declared token attribute checkoccurrences60 would be replaced with a check definition attribute6 called occurrences If occurrences is not defined in the check definition the default or fallback value of 60 will be used NOTE if an eval token default value is not provided ie as a fallback value and the event data does not contain a matching eval token attribute13 an log entry indicating an error called filter eval unmatched tokens will be published to the Sensu server log Filter configuration Example filter definition examplefilterdefinition The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterproductionjson This is an inclusive filter definition called production The effect of this filter is that only events with the custom client attribute5 environment production will be handled filters production attributes client environment production negate false Filter definition specification Filter naming Each filter definition has a unique name used for the definition key Every filter definition is within the filters definition scope A unique string used to nameidentify the filter Cannot contain special characters or spaces Validated with Ruby regex9 wmatchfiltername Filter attributes negate "},{"title":"Handlers","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/handlers","display_name":"Sensu Core 0.29: Handlers","content":" Reference documentation What is a Sensu event handlerwhatisasensueventhandler Handler typeshandlertypes The default handlerthedefaulthandler Pipe handlerspipehandlers Pipe handler commandspipehandlercommands What is a pipe handler commandwhatisapipehandlercommand Pipe handler command argumentspipehandlercommandarguments How and where are pipe handler commands executedhowandwherearepipehandlercommandsexecuted TCPUDP handlerstcpudphandlers Transport handlerstransporthandlers Handler setshandlersets Handler configurationhandlerconfiguration Example handler definitionexamplehandlerdefinition Handler definition specificationhandlerdefinitionspecification Handler nameshandlernames HANDLER attributeshandlerattributes socket attributes TCPUDP handlerssocketattributes pipe attributes Transport handlerspipeattributess What is a Sensu event handler Sensu event handlers are actions executed by the Sensu server1 on events2 such as sending an email alert creating or resolving an incident eg in PagerDuty ServiceNow etc or storing metrics in a timeseries database eg Graphite Handler types There are several types of handlers The most common handler type is the pipe handler which works very similarly to how checks3 work enabling Sensu to interact with almost any computer program via standard streams4 Pipe handlers Pipe handlers pipe event data into arbitrary commands via STDIN TCPUDP handlers TCP and UDP handlers send event data to a remote socket eg external API Transport handlers Transport handlers publish event data to the Sensu transport5 Handler sets Handler sets also called set handlers are used to group event handlers making it easy to manage groups of actions that should be executed for certain types of events The default handler Sensu expects all events2 to have a corresponding handler Event handlers may be configured in check definitions16 however if no handler or handlers have been configured Sensu will attempt to handle the event using a handler named15 default The default handler is only a reference ie Sensu does not provide a builtin default handler so if no handler definition exists for a handler named default Sensu will log an error indicating that the event was not handled because a default handler definition does not exist To use one or more existing handlers as the default you can create a Set handler17 called default and include the existing handlers in the set Pipe handlers Pipe handlers are external commands that can consume event data6 via STDIN Example pipe handler definition handlers examplepipehandler type pipe command dosomethingawesomerb o options Pipe handler commands What is a pipe handler command Pipe handler definitions include a command attribute which are literally executable commands which will be executed on a Sensu server1 as the sensu user Pipe handler command arguments Pipe handler command attributes may include command line arguments for controlling the behavior of the command executable Most Sensu handler plugins11 provide support for command line arguments for reusability How and where are pipe handler commands executed As mentioned above all pipe handlers are executed by a Sensu server1 as the sensu user Commands must be executable files that are discoverable on the Sensu server system ie installed in a system PATH directory7 NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commands eg command handlerircrb TCPUDP handlers tcpudphandlers TCP and UDP handlers enable Sensu to forward event data to arbitrary TCP or UDP socketst for external services to consume eg thirdparty APIs Example TCP handler definition The following example TCP handler definition will forward event data6 to a TCP socket8 ie 1001994444 and will timeout if an acknowledgement ACK is not received within 30 seconds handlers exampletcphandler type tcp timeout 30 socket host 100199 port 4444 The following example UDP handler definition will forward event data6 to a UDP socket ie 100199444 handlers exampleudphandler type udp socket host 100199 port 4444 Transport handlers Transport handlers enable Sensu to publish event data to named queues on the Sensu transport5 for external services to consume Example transport handler definition The following example transport handler definition will publish event data6 to the Sensu transport on a pipe eg a queue or channel etc named examplehandlerqueue One or more instances of an external process or thirdparty application would need to subscribe to the named pipe to process the events handlers exampletransporthandler type transport pipe type direct name examplehandlerqueue Handler sets Handler set definitions allow groups of handlers ie individual collections of actions to take on event data to be referenced via a single named handler set NOTE Attributes defined on handler sets do not apply to the handlers they include For example filter filters and mutator attributes defined in a handler set will have no effect Example handler set definition The following example handler set definition will execute three handlers ie email slack and pagerduty for every event handlers notifyallthethings type set handlers email slack pagerduty Handler configuration Example handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdmailhandlerjson This handler definition uses the mailx unix command to email the event data to exampleaddresscom with the email subject sensu event The handler is named mail handlers mail type pipe command mailx s sensu event exampleaddresscom Handler definition specification Handler names handlernames Each handler definition has a unique handler name used for the definition key Every handler definition is within the handlers configuration scope9 A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex10 wmatchhandlername HANDLER attributes The following attributes are configured within the handlers HANDLER configuration scope9 where HANDLER is a valid handler name15 type "},{"title":"Mutators","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/mutators","display_name":"Sensu Core 0.29: Mutators","content":" Reference documentation What is a Sensu mutatorwhataresensumutators The Sensu mutator specificationthesensumutatorspecification When to use a mutatorwhentouseamutator How do Sensu mutators workhowdosensumutatorswork Mutator commandsmutatorcommands What is a mutator commandwhatisamutatorcommand Mutator command argumentsmutatorcommandarguments How and where are mutator commands executedhowandwherearemutatorcommandsexecuted Mutator configurationmutatorconfiguration Example mutator definitionexamplemutatordefinition Mutator definition specificationmutatordefinitionspecification Mutator namesmutatornames Mutator attributesmutatorattributes What are Sensu mutators whataresensumutators Sensu mutators are executable scripts or other programs that modify event data1 for Sensu event handlers2 which may expect additional or modified event data eg custom attributes that are not provided by the default event data specification3 The Sensu mutator specification Accept inputdata via STDIN Able to parse a JSON data payload ie a event data1 Output JSON data the modified event data to STDOUT or STDERR Produce an exit status code to indicate state 0 indicates OK exit status codes other than 0 indicates a failure When to use a mutator Many Sensu event handlers2 will modify event data1 in the course of processing an event9 and in many cases this is recommended because modifying the event data and performing some action in memory in the same process will result in better performance than executing a mutator5 and a handler two separate processes However when multiple handlers require similar event data modifications mutators provide the ability to avoid code duplication DRY and simplify event handler logic How do Sensu mutators work Sensu mutators are applied when event handlers2 are configured to use a mutator Prior to executing a Handler the Sensu server will execute the configured mutator If the mutator is successfully executed the modified event data is then provided to the handler and the handler will be executed If the mutator fails to execute for any reason an error will be logged and the handler will not be executed The complete process may be described as follows When the Sensu server is processing an event it will check for the definition of a mutator Prior to executing each handler the Sensu server will first execute the configured mutator if any for the handler If the mutator is successfully executed ie if it returns an exit status code of 0 the modified event data is provided to the handler and the handler will be executed If the mutator fails to execute ie returns a nonzero exit status code or does not complete execution within the configured timeout an error will be logged and the handler will not be executed Please refer to the Sensu event handler definition specification8 for more information about applying a mutator to an event handler see the mutator attribute Mutator commands What is a mutator command Each Sensu mutator definition6 defines a command to be executed Mutator commands are literally executable commands which will be executed on a Sensu server4 run as the sensu user Most mutator commands are provided by Sensu plugins7 Mutator command arguments Sensu mutator command attributes may include command line arguments for controlling the behavior of the command executable Many Sensu mutator plugins7 provide support for command line arguments for reusability How and where are mutator commands executed As mentioned above all mutator commands are executed by a Sensu server4 as the sensu user Commands must be executable files that are discoverable on the Sensu server system ie installed in a system PATH directory NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commandseg command checkhttprb u httpssensuapporg Mutator configuration Example mutator definition The following is an example Sensu mutator definition a JSON configuration file located at etcsensuconfdexamplemutatorjson This mutator definition uses an imaginary Sensu plugin7 called examplemutatorrb to modify event data prior to handling the event mutators examplemutator command examplemutatorrb Mutator definition specification Mutator names mutatornames Each mutator definition has a unique mutator name used for the definition key Every mutator definition is within the mutators definition scope A unique string used to nameidentify the mutator Cannot contain special characters or spaces Validated with Ruby regex10 wmatchmutatorname Mutator attributes command "},{"title":"Plugins","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/plugins","display_name":"Sensu Core 0.29: Plugins","content":" What is a Sensu plugin Sensu plugins provide executable scripts or other programs that can be used as Sensu checks1 ie to monitor server resources services and application health or collect analyze metrics Sensu handlers2 ie to send notifications or perform other actions based on Sensu events3 or Sensu mutators3 ie to modify event data4 prior to handling For more about Sensu plugins please refer to the Plugins reference documentation5 1 checks 2 handlers 3 eventseventdata 4 mutators 5 plugins23reference"},{"title":"RabbitMQ Configuration","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/rabbitmq","display_name":"Sensu Core 0.29: RabbitMQ Configuration","content":" Reference documentation What is RabbitMQwhatisrabbitmq How does Sensu use RabbitMQhowdoessensuuserabbitmq Install RabbitMQinstallrabbitmq Configure Sensusensurabbitmqconfiguration Example configuraitonssensurabbitmqconfigurationexamples RabbitMQ definition specificaitonrabbitmqdefinitionspecification rabbitmq attributesrabbitmqattributes ssl attributessslattributes Configure RabbitMQconfigurerabbitmq Standalone configurationstandaloneconfiguration Distributed configurationdistributedconfiguration Highavailability configurationhighavailabilityconfiguration What is a RabbitMQ clusterwhatisarabbitmqcluster High availability hardware requirementshighavailabilityhardwarerequirements Install RabbitMQinstallrabbitmq Configure a RabbitMQ clusterconfigurearabbitmqcluster Configure Sensu to use the RabbitMQ clusterconfiguresensutousetherabbitmqcluster Securing RabbitMQsecuringrabbitmq RabbitMQ and SELinuxrabbitmqandselinux RabbitMQ SSLrabbitmqssl RabbitMQ SSL and Erlang 183rabbitmqsslanderlang183 What is RabbitMQ RabbitMQ is a message bus which describes itself1 as a messaging broker an intermediary for messaging It gives your applications a common platform to send and receive messages and your messages a safe place to live until received To learn more about RabbitmQ please visit the official RabbitMQ website2 How does Sensu use RabbitMQ Sensu services use RabbitMQ the default Sensu transport3 to communicate with one another Every Sensu service requires access to the same instance of RabbitMQ or a RabbitMQ cluster to function Sensu check requests and check results are sent over RabbitMQ to the approprate Sensu services Install RabbitMQ For more information about installing RabbitMQ for use with Sensu please visit the RabbitMQ installation guide5 Configure Sensu sensurabbitmqconfiguration Example configurations sensurabbitmqconfigurationexamples The following are an example RabbitMQ connection definitions each located at etcsensuconfdrabbitmqjson Example standalone configuration sensurabbitmqconfigurationexamplesstandalone rabbitmq host 127001 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem Example distributed configuration sensurabbitmqconfigurationexamplesdistributed rabbitmq host 10016 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem Example highavailability configuration sensurabbitmqconfigurationexampleshighavailability rabbitmq host 10006 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem host 10007 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem host 10008 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem RabbitMQ definition specification The RabbitMQ definition uses the rabbitmq definition scope rabbitmq attributes host "},{"title":"Redis Configuration","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/redis","display_name":"Sensu Core 0.29: Redis Configuration","content":" Reference documentation What is Rediswhatisredis How does Sensu use Redishowdoessensuuseredis Install Redisinstallredis Configure Sensuconfiguresensu Example configurationssensuredisconfigurationexamples Redis definition specificationredisdefinitionspecification redis attributesredisattributes sentinels attributessentinelsattributes Configure Redissensuredisconfiguration Standalone configurationredisstandaloneconfiguration Distributed configurationredisdistributedconfiguration High Availability configurationredishighavailabilityconfiguration What is Redis masterslave replicationwhatisredismasterslavereplication What is Redis Sentinelwhatisredissentinel High availability hardware requirementshighavailabilityhardwarerequirements Install Redisinstallredis Redis masterslave configurationredismasterslaveconfiguration Configure the Redis masterconfiguretheredismaster Configure the Redis slaveconfiguretheredisslave Verify masterslave replicationverifymasterslavereplication Redis Sentinel configurationredissentinelconfiguration Configure a Sentinelconfigureasentinel Verify Redis Sentinel operationverifyredissentineloperation Configure Sensu to use Redis Sentinelconfiguresensutouseredissentinel Securing Redissecuringredis What is Redis Redis1 is a keyvalue database which describes itself as an open source BSD licensed advanced keyvalue cache and store Learn more at httpredisio1 How does Sensu uses Redis howdoessensuuseredis Sensu uses Redis as a datastore2 for storing monitoring data eg a client registry3 current check results current monitoring events etc Only the Sensu server4 and API5 processes require access to Redis ie the sensuclient process does not require access to Redis All Sensu services in a cluster require access to the same instance or cluster of Redis consequently Redis does not need to be installed on every system where Sensu is installed Sensu also provides support for using Redis as a transport14 Please see the Sensu transport reference documentation14 for more information Installing Redis For more information about installing Redis for use with Sensu please visit the Redis installation guide6 Configure Sensu configuresensu Example configurations sensuredisconfigurationexamples The following are example Redis definitions at etcsensuconfdredisjson NOTE if you are using Redis as your Sensu transport14 additional configuration will need to be provided to tell Sensu to use Redis as the transport instead of RabbitMQ default please see transport configuration15 for more information Example standalone configuration sensuredisconfigurationexamplesstandalone redis host 127001 port 6379 password secret Example distributed configuration sensuredisconfigurationexamplesdistributed redis host 100123 port 6379 password secret Example highavailability configuration sensuredisconfigurationexampleshighavailability redis password yourredispassword master redis01 sentinels host 100123 port 26379 host 100124 port 26379 host 100125 port 26379 Redis DNS resolution redisdns The Sensu Redis client will resolve the provided hostname before making a connection attempt to the Redis host Resolving the DNS hostname prior to connecting allows Sensu to properly handle resolution failures log them and make further attempts to connect to the Redis host This also allows Sensu to use Amazon AWS ElastiCache multiaz automatic failover Redis definition specification The Redis definition uses the redis definition scope redis attributes host "},{"title":"Sensu Server","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/server","display_name":"Sensu Core 0.29: Sensu Server","content":" Reference documentation What is the Sensu serverwhatisthesensuserver Sensu Core vs Sensu Enterprisesensucorevssensuenterprise Check execution schedulingcheckexecutionscheduling Check scheduling algorithm synchronizationcheckschedulingalgorithmsynchronization Event processingeventprocessing Automated Sensu server task electionautomatedtaskelection Sensu server tasksservertasks Scaling Sensuscalingsensu What is the Sensu server The Sensu server schedules and publishes check execution requests1 to client subscriptions2 via a PublishSubscribe model3 and provides a scalable event processing platform4 for processing check results and monitoring events Sensu Core vs Sensu Enterprise The Sensu server comes in two flavors the opensource Sensu Core5 via the sensuserver process and Sensu Enterprise6 via the sensuenterprise process To learn more about the differences between Sensu Core and Sensu Enterprise please visit the Sensu website7 NOTE Sensu Enterprise ie the sensuenterprise process was designed to be a dropin replacement for the Sensu Core server and API ie the sensuserver and sensuapi As such any mention of the Sensu server in the Sensu documentation also applies to the sensuenterprise process for Sensu Enterprise users WARNING as noted above the sensuenterprise process is designed to replace both of the Sensu Core sensuserver and sensuapi processes Because Sensu Enterprise will load the same configuration as Sensu Core it is important that the Sensu Core processes are stopped before starting Sensu Enterprise to avoid known conflicts and processing errors such as attempting to bind on the same ports etc Check execution scheduling Check execution scheduling is performed by a Sensu server see Sensu server task election8 Checks are scheduled by querying Sensus configuration for defined checks ndash excluding check with the attributes standalone true or publish false ndash and calculating when executions should occur based on their defined intervals Check scheduling algorithm synchronization checkschedulingalgorithmsynchronization Sensu uses an internal algorithm for determining a unique cadence for Sensu checks which uniqueness is based on the check name and interval This algorithm outputs a value in milliseconds which the Sensu server will use as an offset before the next check request should be published In practice this means that ndash assuming system clocks are in sync between disparate Sensu servers ndash check requests for a given check based on the check name will be published at the exact same time The also means that in the event of a Sensu server restart andor Sensu server task reelection ie if a new Sensu server is elected to become reponsible for check execution scheduling check execution scheduling intervals will remain consistent In fact because this algorithm is also shared by the Sensu client ndash which provides decentralized check execution scheduling in the form of standalone checks22 ndash a check defined on the Sensu server and a matching standalone check defined on a Sensu client should also stay in sync with each other again assuming that system clocks are in sync and the check names and intervals are consistent Event processing The Sensu server provides a scalable event processor Event processing involves conversion of check results9 into Sensu events and then applying any defined event filters10 event data mutators11 and event handlers12 All event processing happens on a Sensu server system The event processing workflow happens in the following order Event Filter Mutator Handler NOTE events that are filtered out ie removed by Sensu event filtersfilters will not continue to be mutated by event data mutatorsmutators or event handlershandlers Sensus event processing capabilities can be distributed among multiple Sensu servers in a Sensu cluster For more information on configuring a Sensu cluster please see Scaling Sensu13 below Automated task election The Sensu server processes ie sensuserver and sensuenterprise are designed to scale horizontally14 ie by adding systems No additional configuration is required to run a cluster of Sensu servers other than the location of the transport15 and data store16 When Sensu servers start they participate in an election process to automatically distribute tasks A Sensu server may be elected for more than one task A server task can only run on one Sensu server at a time and will automatically failover to another Sensu server in the event of a service failure or restart All Sensu servers in a Sensu cluster monitor the state of task execution on a 10second interval automatically electing a new Sensu server for a task if the current one hasnt confirmed execution in more than 30 seconds Server tasks In a Sensu server cluster responsibility for a distinct set of tasks is distributed amongst members of the cluster The tasks only run on one Sensu server at a time and will automatically failover to another Sensu server in the event of a service failure or restart When adding Sensu servers to a cluster restarting the existing Sensu servers in the cluster will force a redistribution of tasks Check request publisher The Sensu server is responsible for publishing check requests to the transport for all configured checks See check execution scheduling18 for more information Client monitor The Sensu server is responsible for monitoring the client registry19 and creating client keepalive events20 for stale clients Check result monitor The Sensu server is responsible for monitoring check results and creating TTL events for check results with expired check TTLs21 Check result aggregation pruning The Sensu server is responsible for monitoring check aggregates and pruning stale aggregate results To observe which Sensu server is currently reponsible for one or more tasks see API info23 Scaling Sensu Coming soon 1 checkscheckrequests 2 clientsclientsubscriptions 3 checkspubsubchecks 4 overviewarchitectureeventprocessor 5 httpssensuapporg 6 httpssensuapporgenterprise 7 httpssensuapporgfeaturescompare 8 automatedtaskelection 9 checkscheckresults 10 filters 11 mutators 12 handlers 13 scalingsensu 14 httpsenwikipediaorgwikiScalabilityHorizontalandverticalscaling 15 transport 16 datastore 18 checkexecutionscheduling 19 clientsregistrationandregistry 20 clientskeepaliveevents 21 checkscheckttls 22 checksstandalonechecks 23 apihealthandinfo"},{"title":"Silencing","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/silencing","display_name":"Sensu Core 0.29: Silencing","content":" Reference documentation What is Sensu Silencingwhatissensusilencing When to use silencingwhentousesilencing How does silencing workhowdoessilencingwork Silencing entry specificationsilencingentryspecification Silencing entry attributessilencingentryattributes Examplesexamples Silence all checks on a specific clientsilenceallchecksonaspecificclient Silence a specific check on a specific clientsilenceaspecificcheckonaspecificclient Silence all checks on clients with a specific subscriptionsilenceallchecksonclientswithaspecificsubscription Silence a specific check on clients with a specific subscriptionsilenceaspecificcheckonclientswithaspecificsubscription Silence a specific check on every client regardless of subscriptionssilenceaspecificcheckoneveryclient Deleting silencing entriesdeletingsilencingentries Appendix Deprecated stashbased silencingappendixdeprecatedstashbasedsilencing Comparing stashbased and native silencingcomparingstashbasedandnativesilencing Migrating from stashbased silencingmigratingfromstashbasedsilencing What is Sensu Silencing As check results0 are processed by a Sensu server the server executes event handlers1 to send alerts to personnel or otherwise relay event data to external services Although event handlers can be directly configured with filters11 to improve overall signaltonoise ratio there are many scenarios in which operators receiving notifications from Sensu require an ondemand means to suppress alerts Sensus builtin silencing provides the means to suppress execution of event handlers on an adhoc basis By using a dashboard or other tool to interact with the silenced API2 operators can mute notifications onthefly The silenced API manipulates silencing entries in the Sensu data store These entries describe a combination of check name and subscription When the check name3 andor subscription4 described in a silencing entry match an event the handler will not be executed and an informational message will be logged Individual handlers may optout of silencing by configuring the handlesilenced attribute5 NOTE Silencing described in this reference document is implemented in Sensu version 026 or later and Sensu Enterprise 20 or later When to use silencing Silencing is used to prevent handlers from being triggered based on the check name present in a check result or the subscriptions associated with the client that published the check result This can be desirable in many scenarios giving operators the ability to quiet incoming alerts while coordinating their response Sensu silencing entries make it possible to Silence all checks on a specific clientsilenceallchecksonaspecificclient Silence a specific check on a specific clientsilenceaspecificcheckonaspecificclient Silence all checks on clients with a specific subscriptionsilenceallchecksonclientswithaspecificsubscription Silence a specific check on clients with a specific subscriptionsilenceaspecificcheckonclientswithaspecificsubscription Silence a specific check on every client regardless of subscriptionssilenceaspecificcheckoneveryclient In addition to the above combinations silencing entries support Expiration after a specified number of seconds Expiration after check returns to OK state resolves Describing the reason or rationale Describing the creator or entity responsible for an entry How does silencing work Silencing entries are created on an adhoc basis via the silenced API2 endpoint When silencing entries are successfully created via the API they are assigned an ID in the format SUBSCRIPTIONCHECK where SUBSCRIPTION is the name of a Sensu client subscription and CHECK is the name of a Sensu check Silencing entries can be used to silence checks on specific clients by by taking advantage of perclient subscriptions4 added in Sensu 026 eg clientCLIENTNAME These silencing entries are persisted to the silenced registry in the Sensu data store10 When the Sensu server processes subsequent check results it consults this registry to determine whether or not a matching silencing entry exists If one or more matching entries exist in the registry the event context for the check result is updated to indicate that the event is silenced and the ID of the entries which the check result matched When creating a silencing entry a combination of check and subscription can be specified but only one or the other is strictly required For example when a silencing entry is created specifying only a check its ID will contain an asterisk or wildcard in the SUBSCRIPTION position This indicates that any event with a matching check name will be marked as silenced regardless of the originating clients subscriptions Conversely a silencing entry which specifies only a subscription will have an ID with an asterisk in the CHECK position This indicates that any event where the originating clients subscriptions match the subscription specified in the entry will be marked as silenced regardless of the check name NOTE Starting with version 026 Sensu clients automatically add a subscription containing their client name prefixed with the string client For example client i424242 will automatically add subscription clienti424242 Silencing checks at the individual client level requires clients to run Sensu 026 or be manually configured with a client subscription Silencing entry specification Silencing entries are composed as a JSON document containing at least one of the required subscription or check attributes and additional optional attributes as desired Silencing entries are created updated and deleted by submitting JSON documents to endpoints on the silenced API2 via HTTP POST as shown in the examples below Silencing entry attributes check "},{"title":"SSL Configuration","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/ssl","display_name":"Sensu Core 0.29: SSL Configuration","content":" Reference documentation How does Sensu use SSLhowdoessensuusessl SSLsecured transportssslsecuredtransports Configuring Sensu RabbitMQ for SSL encryptionconfiguringsensurabbitmqforsslencryption Generate selfsigned OpenSSL certificates CAgenerateselfsignedopensslcertificatesandca Enable RabbitMQ SSL supportenablerabbitmqsslsupport Configure Sensuconfiguresensu Known limitationsknownlimitations How does Sensu use SSL All communication between Sensu services happens via the Sensu transport1 As such to secure a Sensu installation means to secure communication between all of the Sensu services and the Sensu transport via SSL encryption Sensu can operate without the use of SSL encryption however this practice is heavily discouraged SSLsecured Transports Although the Sensu transport1 library makes it possible for Sensu to leverage transport alternatives to RabbitMQ eg Redis not all transports offer SSL support eg Redis does not support SSL For this reason this reference document will focus on SSL security for Sensu with the RabbitMQ transport Configuring Sensu RabbitMQ for SSL encryption Generate selfsigned OpenSSL certificates and CA The following instructions will generate an OpenSSL certificate authority and selfsigned certificates Alternatively please refer to the official RabbitMQ SSL documentation2 for a detailed guide on configuring RabbitMQ with SSL 1 OpenSSL is required on the machine that will generate the SSL certificates Install OpenSSL on your platform UbuntuDebian sudo aptget update sudo aptget install openssl openssl version RHELCentOS sudo yum install openssl openssl version 2 Download the Sensu SSL tool wget httpsensuapporgdocs10filessensussltooltar tar xvf sensussltooltar 3 Generate an OpenSSL certificate authority and selfsigned certificates using the Sensu SSL tool cd sensussltool sslcertssh generate ls l NOTE the generated certificates will be valid for 5 years The Sensu SSL tool will generate a certificate authority SSL certificates for the RabbitMQ server and a shared SSL certificate for all of the Sensu services client certpem keycertp12 keypem reqpem sensuca cacertcer cacertpem certs 01pem 02pem indextxt indextxtattr indextxtattrold indextxtold opensslcnf private cakeypem serial serialold server certpem keycertp12 keypem reqpem sslcertssh Enable RabbitMQ SSL support 1 Stop RabbitMQ NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdrabbitmqserver stop sudo service rabbitmqserver stop 2 Please refer to the official RabbitMQ documentation for enabling SSL support3 for instructions on installing the certificate authority and SSL certificates and configuring the RabbitMQ ssllisteners and ssloptions directives NOTE the RabbitMQ documentation will direct you to provide the location of three certificate files cacertfile certfile and keyfile These files correspond to the sensucacacertpem servercertpem and serverkeypem files generated by the Sensu SSL tool above We recommend copying these files to the RabbitMQ server in a new etcrabbitmqssl directory When complete your etcrabbitmqrabbitmqconfig file should contain the following configuration block rabbit ssllisteners 5671 ssloptions cacertfileetcrabbitmqsslcacertpem certfileetcrabbitmqsslcertpem keyfileetcrabbitmqsslkeypem versions tlsv12 ciphers rsaaes256cbcsha256 verifyverifypeer failifnopeercerttrue 3 Start RabbitMQ NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdrabbitmqserver start sudo service rabbitmqserver start Configure Sensu 1 Install the selfsigned SSL certificates generated above by copying the clientcertpem and clientkeypem files to the etcsensussl directory on all systems running Sensu processes eg the Sensu server4 API5 and clients6 2 Add ssl definition attributes7 to your Sensu RabbitMQ configuration8 Please note the following standalone configuration example9 a JSON configuration file located at etcsensuconfdrabbitmqjson Please see the ssl attributes7 section of the RabbitMQ reference documentation for more information host 127001 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem WARNING please note that by default RabbitMQ will listen for SSL connections on port 5671 instead of 5672 so if you are upgrading an existing configuration please ensure that all Sensu services are attempting to connect to RabbitMQ on port 5671 3 Restart the Sensu services Known limitations You may have noticed that the instructions above only generated a single client certificate Ideally every SSL connection would use a different certificate allowing them to be individually revoked There is currently no way to tell RabbitMQ to reject a certificate If the integrity of a certificate is compromised it is common practice to regenerate and redistribute the certificate authority and certificates This process is greatly simplified with the use of configuration management tools In the future the Sensu project hopes to be able to provide a better mechanism for distributing individual certificates and providing fastsimple revocation facilities 1 transport 2 httpwwwrabbitmqcomsslhtml 3 httpwwwrabbitmqcomsslhtmlenablingssl 4 server 5 apioverview 6 clients 7 rabbitmqsslattributes 8 rabbitmqrabbitmqdefinitionspecification 9 rabbitmqstandaloneconfiguration"},{"title":"Stashes","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/stashes","display_name":"Sensu Core 0.29: Stashes","content":" Reference documentation What is a Sensu stashwhatisasensustash The Sensu keyvalue storethesensukeyvaluestore The Sensu stash specificationthesensustashspecification Example Sensu stashexamplesensustash Stash definition specificationstashdefinitionspecification Stash attributesstashattributes content attributescontentattributes Direct access to stash content datadirectaccesstostashcontentdata What is a Sensu stash A Sensu stash is a JSON document containing arbitrary JSON Hash data which is accessible via the Stashes API1 The most common use of the Sensu Stashes are via Sensu handlers which may access the Stashes API to create andor read state information that persists between handler executions NOTE Prior to Sensu 026 the ability to silence notifications was implemented in external libraries like sensuplugin using specially crafted stashes Silencing via stashes is deprecated in favor of new native silencing Please see the silencing reference documentation7 for more details The Sensu keyvalue store thesensukeyvaluestore The Stashes API1 provides a keyvalue store1 for Sensu where arbitrary JSON data ie the values can be created accessed and deleted via an arbitrary path ie the keys The Sensu stash specification Example Sensu stash The following is an example Sensu stash path pathtomystash content message hello world foo bar expire 1 Stash definition specification Stash attributes path "},{"title":"Transport","product":"Sensu Core","version":"0.29","location":"/sensu-core/0.29/reference/transport","display_name":"Sensu Core 0.29: Transport","content":" Reference documentation What is the Sensu Transportwhatisthesensutransport Selecting a transportselectingatransport Transport configurationtransportconfiguration Example transport definitionexampletransportdefinition Transport definition specificationtransportdefinitionspecification Transport attributestransportattributes What is the Sensu Transport Sensu services use a message bus eg RabbitMQ1 for communication This message bus communication is provided by the Sensu Transport2 which is a library that makes it possible to leverage alternate transport solutions in place of RabbitMQ the default transport Sensu services requires access to the same instance of the defined transport eg a RabbitMQ server or cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscriptions Selecting a Transport The Sensu Transport library makes it possible to replace Sensus recommended and default transport RabbitMQ with alternative solutions There are currently two 2 transports provided with the sensutransport library RabbitMQ and Redis mdash each presenting unique performance and functional characteristics The RabbitMQ Transport recommended The RabbitMQ Transport is the original Sensu transport and continues to be the recommended solution for running Sensu in production environments Pros rabbitmqtransportpros Native SSL support Pluggable authentication framework Support for ACLs Cons rabbitmqtransportcons Adds Erlang as a runtime dependency to the Sensu architecture only on systems where RabbitMQ is running The Redis Transport The Redis Transport was an obvious alternative to the original RabbitMQ Transport because Sensu already depends on Redis as a data store Using Redis as a transport greatly simplifies Sensus architecture by removing the need to installconfigure RabbitMQ and Erlanghttpswwwerlangorg RabbitMQs runtime Pros redistransportpros Simplifies Sensu architecture by removing need for dedicated transport by using Redis as the data store and transport Comparable or better throughputperformance than RabbitMQ Cons redistransportcons No native support for SSL No support for transport consumers metrics see Health Info API4 Transport configuration Example transport definition The following is an example transport definition a JSON configuration file located at etcsensuconfdtransportjson This example transport configuration indicates that Redis should be used as the Sensu transport transport name redis reconnectonerror true Transport DNS resolution transportdns The Sensu Transport will resolve provided hostnames before making connection attempts to the RabbitMQ Redis transports Resolving DNS hostnames prior to connecting allows Sensu to properly handle resolution failures log them and make further attempts to connect to the selected transport This also allows Sensu to use DNS as a transport failover mechanism Transport definition specification transportdefinitionspecification The Sensu Transport uses the transport definition scope3 Transport attributes transportattributes The following attributes are defined within the transport definition scopeconfigurationconfigurationscopes name "},{"title":"Sensu Core","tags":["sensu","core","sensu core","1.0","frog","index"],"product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/_index","display_name":"Sensu Core 1.0: Sensu Core","content":" Overview Monitor servers services application health and business KPIs Collect and analyze custom metrics Get notified about failures before your users do Give your business the competitive advantage it deserves"},{"title":"API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/_index","display_name":"Sensu Core 1.0: API","content":""},{"title":"Aggregates API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/aggregates","display_name":"Sensu Core 1.0: Aggregates API","content":" Reference documentation The aggregates API endpointtheaggregatesapiendpoint aggregates GETaggregatesget The aggregatesname API endpointstheaggregatesnameapiendpoints aggregatesname GETaggregatesnameget aggregatesname DELETEaggregatesnamedelete The aggregatesnameclients API endpointtheaggregatesnameclientsapiendpoint aggregatesnameclients GETaggregatesnameclientsget The aggregatesnamechecks API endpointtheaggregatesnamechecksapiendpoint aggregatesnamechecks GETaggregatesnamechecksget The aggregatesnameresultsseverity API endpointtheaggregatesnameresultsseverityapiendpoint aggregatesnameresultsseverity GETaggregatesnameresultsseverityget The aggregates API endpoint theaggregatesapiendpoint The aggregates API endpoint provides HTTP GET access to named aggregate data1 aggregates GET EXAMPLES aggregatesgetexamples The following example demonstrates a aggregates API query which results in a JSON Array of JSON Hashes containing named check aggregates1 curl s httplocalhost4567aggregates jq name checkhttp name checkwebapp name elasticsearchhealth API specification aggregatesgetspecification aggregates GET "},{"title":"Checks API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/checks","display_name":"Sensu Core 1.0: Checks API","content":" Reference documentation The checks API endpointthechecksapiendpoint checks GETchecksget The checkscheck API endpointsthecheckscheckapiendpoints checkscheck GETcheckscheckget The request API endpointtherequestapiendpoint request POSTrequestpost The checks API endpoint checks GET The checks API endpoint provides HTTP GET access to subscription check1 data EXAMPLE checksgetexample The following example demonstrates a request to the checks API resulting in a JSON Array of JSON Hashes containing subscription check definitions2 curl s http1270014567checks jq name sensuwebsite interval 60 subscribers production command checkhttprb u httpssensuapporg API Specification checksgetspecification checks GET "},{"title":"Clients API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/clients","display_name":"Sensu Core 1.0: Clients API","content":" Reference documentation The clients API endpointtheclientsapiendpoint clients GETclientsget clients POSTclientspost The clientsclient API endpointstheclientsclientapiendpoints clientsclient GETclientsclientget clientsclient DELETEclientsclientdelete The clientsclienthistory API endpointstheclientsclienthistoryapiendpoints"},{"title":"API Configuration","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/configuration","display_name":"Sensu Core 1.0: API Configuration","content":" Reference documentation API configurationapiconfiguration Example API definitionexampleapidefinition API definition specificationapidefinitionspecification API configuration Example API definition The following is an example API definition at etcsensuconfdapijson api host 57435322 bind 0000 port 4567 API definition specification The API definition uses the api definition scope api attributes host "},{"title":"Events API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/events","display_name":"Sensu Core 1.0: Events API","content":" Reference documentation The events API endpointtheeventsapiendpoint events GETeventsget The eventsclient API endpointtheeventsclientapiendpoint eventsclient GETeventsclientget The eventsclientcheck API endpointstheeventsclientcheckapiendpoints eventsclientcheck GETeventsclientcheckget eventsclientcheck DELETEeventsclientcheckdelete The resolve API endpointtheresolveapiendpoint resolve POSTresolvepost The events API endpoint events GET The events API endpoint provide HTTP GET access to the Sensu event registry EXAMPLES eventsgetexamples The following example demonstrates a events API query which returns a JSON Array of JSON Hashes containing event data1 curl s httplocalhost4567events jq timestamp 1460303502 action create occurrences 1 check totalstatechange 14 history 0 3 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 1 status 1 output CheckHttp WARNING 301n command checkhttprb u websitehttpsensuapporg subscribers production interval 60 handler mail name sensuwebsite issued 1460303502 executed 1460303502 duration 0032 client timestamp 1460303501 version 100 website httpgooglecom socket port 3030 bind 127001 subscriptions production environment development address 127001 name client01 id 0f42ec9412bf4918a0b952fd57e8ee96 API specification eventsgetspecification events GET "},{"title":"Health & Info APIs","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/health-and-info","display_name":"Sensu Core 1.0: Health & Info APIs","content":" Reference documentation How to obtain API status informationhowtoobtainapistatusinformation The health API endpointthehealthapiendpoint health GEThealthget The info API endpointtheinfoapiendpoint info GETinfoget How to obtain API status information The Sensu API provides two distinct endpoints for obtaining API status information health and info The Health API provides status information about the health of the APIs connections to the Sensu data store1 and transport2 The Info API provides a report on the status of the API including API version the status of the APIs connections to the Sensu data store and transport and the number of messages and consumers in various transport queues The health API endpoint health GET The health API provides HTTP GET access to test or verify the health of the monitoring system The Health API is provided for monitoring Sensu mdash it facilitates service checks to ensure that a minimal number of Sensu servers3 are connected to the transport ie transport consumers andor to ensure that the transport queue isnt growing which would indicate that the Sensu servers arent able to keeping up with the volume of keepalive messages4 and check results5 being produced NOTE the health API obtains its information via the info API PRO TIP the Health API messages URL parameter6 eg healthmessages1000 can be used to monitor the number of messages queued on the Sensu transport2 and then leveraged by other automation tools to trigger an auto scaling or similar provisioning event to automatically add one or more Sensu servers to a Sensu installation EXAMPLE healthgetexample In the following example querying the health API with the consumers6 URL parameter will return an HTTP response code7 to indicate if the expected number of consumers ie Sensu servers3 are processing check results In this example we are expecting at least two 2 consumers to be running at all times ie at least two Sensu servers processing check results The 412 Precondition Failed HTTP response code7 indicates that the requested number of consumers are not registered curl s i http1270014567healthconsumers2 HTTP11 412 Precondition Failed AccessControlAllowOrigin AccessControlAllowMethods GET POST PUT DELETE OPTIONS AccessControlAllowCredentials true AccessControlAllowHeaders Origin XRequestedWith ContentType Accept Authorization Connection close NOTE the 412 Precondition Failed HTTP response code7 does not mean that the API itself is unavailable but rather it is the equivalent of a false response to the API query ie if you want to know if there are at least two Sensu servers processing check results a 412 response code would mean no WARNING transport consumers are a native concept in pubsub technology8 including actual message queues like RabbitMQ8 Because the Sensu transport library2 supports transports which are not actual message queues eg Redis10 some transports do not support the Health API consumers check because they dont support the concept of consumers ie this means that healthconsumers1 will always fail returning a 412 response code for Sensu installations using Redis as the transport regardless of the number of Sensu servers which may be registered and processing check results API Specification healthgetspecification health GET "},{"title":"RESTful API Overview","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/overview","display_name":"Sensu Core 1.0: RESTful API Overview","content":" Sensu API The Sensu API provides access to monitoring data collected by Sensu such as a client registry1 check results2 and event data3 The API can be used to request adhoc check executions and resolve events among other things RESTful JSON API The Sensu API is JSON4based RESTful API5 Familiarity with or willingness to Google industry standard RESTful API behaviors ndash including HTTP response codes6 ndash are strongly recommended Reference documentation Clients APIclients Checks APIchecks Results APIresults Aggregates APIaggregates Events APIevents Stashes APIstashes Health Info APIhealthandinfo Settings APIsettings API configurationconfiguration Response Content Filtering Sensu API endpoints that support the GET HTTP method support HTTP response content filtering using one or more filter attributes To use response content filtering construct the URL for your API request using a dot notation query string parameter beginning with filter eg eventsfilterclientenvironmentproduction The Sensu API will only return response content objects that match the specified response content filter attributes Multiple attributes may be specified for a request eg eventsfilterclientenvironmentproductionfiltercheckcontactops 1 referenceclientsregistrationandregistry 2 referencecheckscheckresults 3 referenceeventseventdata 4 httpwwwjsonorg 5 httpsenwikipediaorgwikiRepresentationalstatetransfer 6 httpsenwikipediaorgwikiListofHTTPstatuscodes"},{"title":"Results API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/results","display_name":"Sensu Core 1.0: Results API","content":" Reference documentation The results API endpointtheresultsapiendpoint results GETresultsget results POSTresultspost The resultsclient API endpointtheresultsclientapiendpoint resultsclient GETresultsclientget The resultsclientcheck API endpointstheresultsclientcheckapiendpoints resultsclientcheck GETresultsclientcheckget resultsclientcheck DELETEresultsclientcheckdelete The results API endpoint theresultsapiendpoint The results API endpoint provides HTTP GET and HTTP POST access to current check result data1 results GET The results API endpoint provides HTTP GET access to fetch current check result data1 EXAMPLES resultsgetexamples The following example demonstrates a results API query which returns a JSON Array of JSON Hashes containing check results1 curl s httplocalhost4567results jq check status 1 output CheckHttp WARNING 301n command checkhttprb u websitehttpsensuapporg subscribers production interval 60 handler mail name sensuwebsite issued 1460312322 executed 1460312322 duration 0032 client client01 check status 0 output Keepalive sent from client 2 seconds ago executed 1460312365 issued 1460312365 name keepalive thresholds critical 180 warning 120 client client01 API specification resultsgetspecification results GET "},{"title":"Settings API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/settings","display_name":"Sensu Core 1.0: Settings API","content":" Reference documentation The settings API endpointthesettingsendpoint settings GETsettingsget The settings API endpoint thesettingsendpoint settings GET The settings API provides HTTP GET access to the APIs running configuration settings Sensitive setting values are redacted by default unless the URL query parameter redacted is set to false eg settingsredactedfalse EXAMPLE settingsgetexample The following example demonstrates a request to the settings API resulting in a JSON Hash containing the APIs running configuration settings curl s http1270014567settings jq api cors Headers Origin XRequestedWith ContentType Accept Authorization Credentials true Methods GET POST PUT DELETE OPTIONS Origin password REDACTED user admin checks API Specification settingsgetspecification settings GET "},{"title":"Silenced API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/silenced","display_name":"Sensu Core 1.0: Silenced API","content":" Reference documentation The silenced API endpointsthesilencedapiendpoints silenced GETsilencedget silenced POSTsilencedpost silencedidsid GETsilencedidsidget silencedclear POSTsilencedclearpost silencedsubscriptionssubscription GETsilencedsubscriptionsget silencedcheckscheck GETsilencedchecksget The silenced API endpoints The Silence API provides endpoint HTTP POST and GET access to create query and clear delete a silence entry via the Sensu API silenced GET Example Querying for all silence entries curl s X GET httplocalhost4567silenced jq expire 3530 expireonresolve false creator null reason null check checkhaproxy subscription loadbalancer id loadbalancercheckhaproxy expire 1 expireonresolve true creator sysopexamplecom reason we ran out of time check checkntpd subscription all id allcheckntpd API specification silencedgetspecification silenced GET "},{"title":"Stashes API","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/api/stashes","display_name":"Sensu Core 1.0: Stashes API","content":" Reference documentation The stashes API endpointsthestashesapiendpoints stashes GETstashesget stashes POSTstashespost The stashespath API endpointsthestashespathapiendpoints stashespath GETstashespathget stashespath POSTstashespathpost stashespath DELETEstashespathdelete The stashes API endpoints The stashes API endpoint provides HTTP GET and HTTP POST access to Sensu stash data3 via the Sensu keyvalue store4 stashes GET EXAMPLES stashesgetexamples The following example demonstrates a stashes query which results in a JSON Array of JSON Hashes containing stash data3 curl s httplocalhost4567stashes jq path silencei424242chefclientprocess content timestamp 1383441836 expire 3600 path applicationstorefront content timestamp 1381350802 endpoints httpshostnamestore expire 1 API specification stashesgetspecification stashes GET "},{"title":"CHANGELOG","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/changelog","display_name":"Sensu Core 1.0: CHANGELOG","content":" Releases Core 104 Release Notescorev104 Core 103 Release Notescorev103 Core 102 Release Notescorev102 Core 101 Release Notescorev101 Core 100 Release Notescorev100 Core 0290 Release Notescorev0290 Core 0285 Release Notescorev0285 Core 0284 Release Notescorev0284 Core 0283 Release Notescorev0283 Core 0282 Release Notescorev0282 Core 0281 Release Notescorev0281 Core 0280 Release Notescorev0280 Core 0271 Release Notescorev0271 Core 0270 Release Notescorev0270 Core 0265 Release Notescorev0265 Core 0264 Release Notescorev0264 Core 0263 Release Notescorev0263 Core 0262 Release Notescorev0262 Core 0261 Release Notescorev0261 Core 0260 Release Notescorev0260 Core 0257 Release Notescorev0257 Core 0256 Release Notescorev0256 Core 0255 Release Notescorev0255 Core 0254 Release Notescorev0254 Core 0253 Release Notescorev0253 Core 0251 Release Notescorev0252 Core 0250 Release Notescorev0250 Core 0241 Release Notescorev0241 Core 0240 Release Notescorev0240 Core 0232 Release Notescorev0232 Core 0231 Release Notescorev0231 Core 0230 Release Notescorev0230 Core 104 Release Notes corev104 October 17 2017 mdash Sensu Core version 104 has been released and is available for immediate download Please note the following improvements CHANGES corev104changes DEBUG Added HTTP response body to sensuapi debuglevel log messages This is a temporary change not included in future releases Core 103 Release Notes corev103 Source GitHubcomhttpsgithubcomsensusensublobmasterCHANGELOGmd103"},{"title":"FAQs","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/faq","display_name":"Sensu Core 1.0: FAQs","content":" Sensu Frequently Asked Questions Please note the following frequently asked questions about Sensu Core Sensu Enterprise Sensu Training Professional Services for Sensu and more If you need support for Sensu please consider giving Sensu Enterprisehttpssensuapporggetstarted a try Do I need RabbitMQ to be installed on every system I wish to monitor No Sensu uses RabbitMQreferencerabbitmq as a Transportreferencetransport Sensu services require access to a shared instance of the defined Sensu Transport eg a RabbitMQ cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscription topics Does Redis need to be installed on every system I wish to monitor No Sensu uses Redisreferenceredis as a data store and the Sensu server services ie sensuserver sensuapi for Sensu Core sensuenterprise for Sensu Enterprise require access to the same Redis instance or cluster to store and access the Sensu client registry check results check execution history and current event data Do check definitions need to exist on every system I wish to monitor No Check definitions can be written as publishsubscribe pubsub or standalone Pubsub checks which specify a list of subscribers need only be configured on the Sensu server Standalone checks which are scheduled and executed by the Sensu client need only be configured on the clients where they should be run Where should check plugin executables be installed Regardless of where checks are defined the actual check executables need to exist on the filesystem for the Sensu client to execute them Check plugin executables can be installed in etcsensuplugins or optsensuembeddedbin the latter being the location where plugin executables are installed via sensuinstall What is a standalone check A standalone check is a check definition that is installed on and executed by the Sensu client without being scheduled by the Sensu server Standalone checks defer Check execution scheduling responsibilitiesoverviewarchitecturecheckexecutionscheduler to Sensu clients enabling decentralized management of monitoring checks and distribution of scheduling responsibilities Standalone checks may be used in conjunction with pubsub checks and are distinguished from pubsub checks by inclusion of the standalone true configuration parameter What happens if a single check is defined on both the Sensu server and client When a check request is published for a check defined on the Sensu server the Sensu client will look for a local definition matching the check name prior to executing the check If a local definition exists it is mergedreferenceconfigurationconfigurationmerging with the definition provided by the server with any local definition attributes overriding the definition provided by the Sensu server What is Sensu Client safemode In safemode a client will not run a check published by a Sensu server unless that check is also defined on the client Safe mode must be enabled on the Sensu Client via the safemode configuration attribute Can multiple Sensu servers be run concurrently in a cluster Yes Sensu is designed to be scaled horizontally ie by adding additional Sensu servers It supports fully automated leader election ensuring that a single Sensu server acts as a centralized Check Execution Scheduleroverviewarchitecturecheckexecutionscheduler automated failover automatically electing a new leader if the previous leader is unexpectedly unavailable and distributed event processing check results are distributed across all Sensu servers in a roundrobin fashion Running more than one Sensu server is highly recommended for performance and availability How are new systems registered Automatically Sensu clients register themselves when they start up The Sensu client process requires access to the Sensu Transportreferencetransport by default this is RabbitMQreferencerabbitmq see Sensu Configurationreferenceconfigurationtoplevelconfigurationscopes and some minimal client configuration eg a name address and one or more subscriptions in order to start When the Sensu client process starts it begins sending keepalives ndash a special type of check result containing client configuration data ndash which the Sensu server uses to know that a client is still connected When a client keepalive is received for a client name that is not currently registered with Sensu the client is added to the registry and a registration event is created automatically Do system clocks need to be synchronized Yes The Sensu services ie sensuclient sensuserver sensuapi sensuenterprise use the localsystem clock for generating timestamps When system clocks are out of sync between Sensu clients where data is collected and the Sensu server where data is processed Sensu may generate false positive client keepalive events among other potentially unexpected behaviors Time synchronization can be facilitated with NTPhttpwwwntporg Is Sensu Enterprise available as a hosted SaaS solution No Like Sensu Core Sensu Enterprisesensuenterpriseindex is installed on your organizations infrastructure alongside other applications and services Sensu Enterprise packages are available for major Linux distributions including RHEL CentOS Debian and Ubuntu Is Sensu available for Microsoft Windows Yes An MSI installer package is available on the Downloads page Please visit the Sensu documentation for more information on configuring Sensu on Windowsplatformssensuonmicrosoftwindows How do I increase log verbosity You can toggle debug logging on and off by sending the Sensu process a TRAP signal For example ps aux grep sensuserver sensu 5992 17 03 177232 24352 kill TRAP 5992 downloads httpssensuapporgdownloads"},{"title":"Adding a Client","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/guides/adding-a-client","display_name":"Sensu Core 1.0: Adding a Client","content":"Sensu clients are pieces of infrastructure that Sensu monitors for you The Sensu client software allows you to register a running instance of itself as capable of running any checks they might be eligible for Infrastructure sometimes includes hardware or services that dont necessarily support running the Sensu client software but still needs to be monitored For those cases proxy clientsproxyclients let you monitor anything you can tell Sensu about Adding a Sensu Client One of the first challenges new Sensu users often encounter is learning what is required to get a remote Sensu client1 to communicate with the Sensu server2 If youre in a hurry skip ahead to add a remote Sensu client3 for stepbystep instructions Alternatively once you understand the two requirements for adding Sensu clients youll know everything you need to start deploying Sensu clients to your entire infrastructure Please continue reading to learn how adding Sensu clients starts with configuration4 and is ultimately all about the transport5 It starts with configuration Sensu is designed to be operated via configuration This core philosophy is what enables Sensu to work so seamlessly with modern automation solutions and configuration management platforms To learn more about how Sensu is configured please consult the Sensu configuration reference documentation6 The Sensu client requires a minimal amount of configuration to enable it to automatically register itself7 with the Sensu server which configuration includes a client definition8 eg the client name address and subscriptions and a transport definition9 Its all about the transport The Sensu processes use a transport10 a message bus for communication By default this is RabbitMQ11 but modern versions of Sensu have added support for alternative transports12 including Redis13 Without a transport connection a Sensu client will be unable to send monitoring data eg keepalive messages14 check results15 etc In order to connect to the transport the Sensu client will need three pieces of information Which transport to use this tells Sensu which transport library should it load and which configuration scope should it use to obtain connection details A valid transport definition this provides Sensu with an IP address or hostname and any security credentials needed to connect to the transport Network access to the transport socket ie the Sensu client will need outbound network access and the transport will need to be configured to listen for remote network connections Add a remote Sensu client With the exception of Sensu clients that are running on the Sensu server which is very useful and strongly recommended all Sensu clients are essentially remote clients as they have to establish network communication to send monitoring data eg client keepalives14 and check results15 Please note the following steps that are required to add a remote Sensu client 1 Configure the client Create a client definition located at etcsensuconfdclientjson with the following contents replacing the values for the client name address and subscriptions with the corresponding values for the client you are adding client name i041256 address 8888 subscriptions default webserver 2 Tell the client which transport to use Create a transport definition at etcsensuconfdtransportjson with the following contents replacing the value for the transport name with the corresponding value for the transport you are using eg use transport redis if you are using the Redis transport transport name rabbitmq reconnectonerror true 3 Tell the client how to connect to the transport Create a transport definition at etcsensuconfdrabbitmqjson or etcsensuconfdredisjson if you are using the Redis transport NOTE please consult the corresponding reference documentation for RabbitMQ11 or Redis13 for more configuration examples and detailed information on how to configure Sensus connection 4 Start the client Start the Sensu client and verify connectivity by consulting the Sensu client log file NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdsensuclient start sudo service sensuclient start Proxy Clients Sometimes a logical piece of infrastructure isnt a device we can run Sensu on Fundamentally Sensu gives you the flexibility to separate how checks run from where they run which lets you monitor arbitrary named black box devices or services For example you may have a router that you cant run Sensu on but publishes interesting information over SNMP that you want to gather metrics from Or maybe your monitor which other datacenters are visibleonline to you or have any number of creative use cases You can create a proxy client16 that can have attributes for use in check execution allowing you to use the client registry naturally for managed an unmanaged infrastructure See the reference for creating proxy clients16 or details on writing checks against them17 for more Troubleshooting 1 referenceclients 2 referenceserver 3 addaremotesensuclient 4 itstartswithconfiguration 5 itsallaboutthetransport 6 referenceconfiguration 7 referenceclientsregistrationandregistry 8 referenceclientsclientdefinitionspecification 9 referencetransporttransportdefinitionspecification 10 referencetransport 11 referencerabbitmq 12 referencetransportselectingatransport 13 referenceredis 14 referenceclientsclientkeepalives 15 referencecheckscheckresults 16 referenceclientsproxyclients 17 introtochecksproxyclients"},{"title":"Intro to Checks","version":"1.0","location":"/sensu-core/1.0/guides/intro-to-checks","display_name":"undefined 1.0: Intro to Checks","content":" An Introduction to Checks The purpose of this guide is to help Sensu users create monitoring checks At the conclusion of this guide you the user should have several Sensu checks in place to monitor and measure machine resources applications and services Each Sensu monitoring check in this guide demonstrates one or more check definition features for more information please refer to the Sensu checks reference documentation1 Objectives What will be covered in this guide Creation of standard checks functional tests Creation of metric collection checks server resources etc Creation of metric analysis checks querying time series data etc What are Sensu checks whataresensuchecks Sensu checks allow you to monitor server resources services and application health as well as collect analyze metrics they are executed on servers running the Sensu client Checks are essentially commands or scripts that output data to STDOUT or STDERR and produce an exit status code to indicate a state The common exit status codes used are 0 for OK 1 for WARNING 2 for CRITICAL and 3 or greater to indicate UNKNOWN or CUSTOM Sensu checks use the same specification as Nagios therefore Nagios check plugins may be used with Sensu Create a standard check Standard Sensu checks are used to determine the health of server resources services and applications A standard check will query a resource for information to determine its state Once a standard check has determined the resource state it outputs a human readable message and exits with the appropriate exit status code to indicate its stateseverity OK WARNING etc Monitor the cron service The following instructions install the check dependencies and configure the Sensu check definition in order to monitor the Cron service Install dependencies checkcroninstalldependencies The checkprocessrb script provided by the Sensu Process Checks Plugin2 can reliably detect if a service such as Cron is running or not The following instructions will install the Sensu Process Checks Plugin2 version 006 using Sensus embedded Ruby providing the checkprocessrb script sudo sensuinstall p processchecks006 Create the check definition for Cron The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdcheckcronjson This check definition uses the checkprocessrb script installed above3 to determine if the Cron service is running The check is named cron and it runs checkprocessrb p cron on Sensu clients with the production subscription every 60 seconds interval NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks cron command checkprocessrb p cron subscribers production interval 60 For a full listing of the checkprocessrb command line arguments run optsensuembeddedbincheckprocessrb h Currently the Cron check definition requires that check requests be sent to Sensu clients with the production subscription This is known as pubsub check Optionally a check may use standalone mode which allows clients to schedule their own check executions The following is an example of the Cron check using standalone mode true The Cron check will now be executed every 60 seconds on each Sensu client with the check definition A Sensu check definition with standalone true does not need to specify subscribers checks cron command checkprocessrb p cron standalone true interval 60 By default Sensu checks use the default Sensu event handler for events they create To specify a different Sensu event handler for a check use the handler attribute The debug event handler used in this example will log the Sensu event data to the Sensu server or Sensu Enterprise log checks cron command checkprocessrb p cron standalone true interval 60 handler debug Using multiple handlers To specify multiple Sensu event handlers use the handlers attribute plural NOTE if both handler and handlers plural check definition attributes are used handlers will take precedence checks cron command checkprocessrb p cron standalone true interval 60 handlers default debug Create a metric collection check Metric collection checks are used to collect measurements from server resources services and applications Metric collection checks can output metric data in a variety of metric formats Graphite plaintext4 Nagios Performance Data5 OpenTSDB6 Metrics 20 wire format7 Measuring CPU utilization Install dependencies cpumetricsinstalldependencies The metricscpurb script provided by the Sensu CPU Checks Plugin8 collects and outputs CPU metrics in the Graphite plaintext format The following instructions will install the Sensu CPU Checks Plugin8 version 003 using Sensus embedded Ruby providing the metricscpurb script sudo sensuinstall p cpuchecks003 Create the check definition for CPU metrics The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdcpumetricsjson This check definition uses the metricscpurb script installed above9 to collect CPU metrics and output them in the Graphite plaintext format By default Sensu checks with an exit status code of 0 for OK do not create events unless they indicate a change in state from a nonzero status to a zero status ie resulting in a resolve action see Sensu Events10 Metric collection checks will output metric data regardless of the check exit status code however they usually exit 0 To ensure events are always created for a metric collection check the check type of metric is used The check is named cpumetrics and it runs metricscpurb on Sensu clients with the production subscription every 10 seconds interval The debug handler is used to log the graphite plaintext CPU metrics to the Sensu server or Sensu Enterprise log NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks cpumetrics type metric command metricscpurb subscribers production interval 10 handler debug For a full listing of the metricscpurb command line arguments run optsensuembeddedbinmetricscpurb h Create a metric analysis check A metric analysis check analyzes metric data which may or may not have been collected by a metrics collection check11 By querying external metric stores eg Graphite to perform data evaluations metric analysis checks allow you to perform powerful analytics based on trends in metric data rather than a single data point For example where monitoring and alerting on a single CPU utilization data point can result in false positive events based on momentary spikes monitoring and alerting on CPU utilization data over a specified period of time will improve alerting accuracy Because metric analysis checks require interaction with an external metric store providing a functional example is outside of the scope of this guide However assuming the existence of a Graphite installation that is populated with metric data the following example checks could be used The following check uses the checkgraphitedatarb script provided by the Sensu Graphite Plugin12 to query the Graphite API at localhost9001 The check queries Graphite for a calculated moving average using the last 10 data points of the load balancer session count The session count moving average is compared with the provided alert thresholds A Sensu client running on the Graphite server would be responsible for scheduling and executing this check standalone mode NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks sessioncount command checkgraphitedatarb s localhost9001 t movingAveragelb1assetsbackendsessioncurrent10 w 100 c 200 standalone true interval 30 The following check uses the checkgraphitedatarb script provided by the Sensu Graphite Plugin12 to query the Graphite API at localhost9001 for disk capacity metrics The Graphite API query uses highestCurrent to grab only the highest disk capacity metric to be compared with the provided alert thresholds This check will trigger an event alert when one or more disks on any machine are at the configured capacity threshold In this example configuration the check is configured to warn at 85 capacity w 85 and to raise a critical alert at 95 capacity c 95 checks diskcapacity command checkgraphitedatarb s localhost9001 t highestCurrentdiskcapacity1 w 85 c 95 a 120 standalone true interval 30 The following instructions will install the Sensu Graphite Plugin12 version 006 using Sensus embedded Ruby providing the checkgraphitedatarb script sudo sensuinstall p graphite006 Checking on Other Clients proxyclients Sensu supports running checks where the results are considered to be for a client that isnt actually the one executing the check regardless of whether that client is a Sensu client or simply a proxy client14 There are a number of reasons for this use case but fundamentally Sensu handles it the same Checks are scheduled normally but by specifying a Proxy Request13 in your check clients that match certain definitions their clientattributes cause the check to run for each one The attributes supplied must normally match exactly as stated no variables or directives have any special meaning but you can still use eval to perform more complicated filtering with Ruby on the available value such as finding clients with particular subscriptions given that were dealing with arrays proxyrequests clientattributes uservariable somevalue subscriptions eval valueincludeasubscription 1 referencechecks 2 httpsgithubcomsensupluginssensupluginsprocesschecks 3 checkcroninstalldependencies 4 httpgraphitereadthedocsorgenlatestfeedingcarbontheplaintextprotocol 5 httpnagiossourceforgenetdocs30perfdatahtml 6 httpopentsdbnetdocsbuildhtmluserguidewritinghtml 7 httpmetrics20orgspec 8 httpsgithubcomsensupluginssensupluginscpuchecks 9 cpumetricsinstalldependencies 10 referenceeventswhataresensuevents 11 metriccollectionchecks 12 httpsgithubcomsensupluginssensupluginsgraphite 13 referencechecksproxyrequestsattributes 14 addingaclientproxyclients"},{"title":"Intro to Filters","version":"1.0","location":"/sensu-core/1.0/guides/intro-to-filters","display_name":"undefined 1.0: Intro to Filters","content":" Getting Started with Filters The purpose of this guide is to help Sensu users create event filters At the conclusion of this guide you the user should have several Sensu event filters in place to filter events for one or more event handlers Each Sensu filter in this guide demonstrates one or more filter definition features for more information please refer to the Sensu filters reference documentation1 Objectives What will be covered in this guide Creation of an event filter Creation of an event filter with Ruby and math What are Sensu filters whataresensufilters Sensu filters allow you to filter out events destined for one or more event handlers Sensu filters inspect event data and match its keyvalues pairs with filter definition attributes to determine if the event should be passed to an event handler Filters are commonly used to filter event recurrences to eliminate notification noise and to filter events that are not for production machines Create an event filter Inclusive filtering The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterproductionjson This filter definition will include events that match the filter criteria In this example the filter itself is named production which matches events with a custom client attribute entitled environment with the value production filters production attributes client environment production Exclusive filtering To exclude events based on filter criteria set the negate filter definition attribute to true In this example the production filter will match events that do not have a custom client attribute entitled environment with the value production filters production attributes client environment production negate true Using a filter To use the production filter for an event handler set the filter attribute in the handler definition For example handlers mail type pipe command mailx s sensu event exampleaddresscom filter production Using multiple filters To specify multiple Sensu event filters use the filters attribute plural NOTE if both filter and filters plural handler definition attributes are used filters will take precedence handlers mail type pipe command mailx s sensu event exampleaddresscom filters production operations Create an event filter with Ruby and math Filter attributes are compared directly with their event data counterparts via Ruby object comparison However it is also possible to use Ruby expressions to evaluate event data attribute values When a filter attribute value is a string that begins with eval the remainder of the string is evaluated as a Ruby expression The event data attribute value is provided to the Ruby expression as a variable entitled value If the evaluated expression returns true the attribute is a match This Ruby expression evaluation is performed in a sandbox for safety The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterrecurrencesjson This filter excludes events that are not the first event occurrence and those that do not have an occurrence count divisible by 60 without a remainder recurrence Logically if checks with an execution interval of 1 minute are generating events every minute this filter will help reduce noise by only allowing event handling once per hour filters recurrences attributes occurrences eval value 1 value 60 0 1 referencefilters"},{"title":"Intro to Handlers","version":"1.0","location":"/sensu-core/1.0/guides/intro-to-handlers","display_name":"undefined 1.0: Intro to Handlers","content":" Getting Started with Handlers The purpose of this guide is to help Sensu users create event handlers At the conclusion of this guide you the user should have several Sensu handlers in place to handle events Each Sensu event handler in this guide demonstrates one or more handler types and definition features for more information please refer to the handlers reference documentation1 Objectives What will be covered in this guide Creation of a pipe handler Creation of a tcp handler Creation of a udp handler Creation of a transport handler Creation of a set handler What are Sensu event handlers whataresensueventhandlers Sensu event handlers are for taking action on events2 produced by check results such as sending an email alert creating or resolving a PagerDuty incident or storing metrics in Graphite There are several types of handlers pipe tcp udp transport and set Pipe handlers execute a command and pass the event data to the created process via STDIN TCP and UDP handlers send the event data to a remote socket Transport handlers publish the event data to the Sensu transport by default this is RabbitMQ Set handlers are used to group event handlers making it easier to manage many event handlers Create a pipe handler Pipe event handlers execute a command and pass the event data to the corresponding process via STDIN Install dependencies The following instructions install the eventfile Sensu handler plugin written in Ruby to etcsensupluginseventfilerb This handler plugin reads the event data via STDIN parses it creates a file name using the parsed event data and then writes the event data to the file eg tmpclientnamechecknamejson sudo wget O etcsensupluginseventfilerb httpsensuapporgdocs12fileseventfilerb sudo chmod x etcsensupluginseventfilerb The eventfile Sensu plugin requires a Ruby runtime Install Ruby from the distribution repository and sensuplugin from Rubygems NOTE the following Ruby installation steps may differ depending on your platform You may have already done the following steps as part of the getting started with checks guide3 UbuntuDebian sudo aptget update sudo aptget install ruby rubydev CentOSRHEL sudo yum install ruby rubydevel Create the pipe handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdeventfilejson This handler definition uses the eventfile plugin installed above4 to write event data to a file The handler is named file and it runs etcsensupluginseventfilerb providing it with JSON event data via STDIN NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers file type pipe command etcsensupluginseventfilerb To add a handler execution timeout to the file handler use the timeout attribute handlers file type pipe command etcsensupluginseventfilerb timeout 10 To specify which check result severities OK WARNING etc the handler supports use the severities attribute handlers file type pipe command etcsensupluginseventfilerb timeout 10 severities critical unknown To use the file handler for a check please refer to the getting started with checks guide5 Create a TCP handler TCP and UDP event handlers send event data to a remote socket Both TCP and UDP handler types use the same definition attributes The following TCP handler instructions will work for UDP with minor adjustments Because TCP and UDP handlers require interaction with an external service providing a functional example is outside of the scope of this guide However the following instructions will allow you to run a simple TCP socket that echoes any input to STDOUT for testing purposes Run a TCP server To test the TCP handler a listening TCP socket server is required For the following examples netcat nc will be used as the TCP server The following command will create a TCP socket server listening on port 6000 NOTE netcat will output messages that it receives in the terminal window This command will need to be run in a separate terminal window nc l k 4 p 6000 To test the netcat TCP socket server run the following command and observe the netcat output testing echo testing nc localhost 6000 Create the TCP handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdtcpsocketjson This TCP handler will send JSON event data to the TCP socket server netcat in this example NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers tcpsocket type tcp socket host localhost port 6000 Create a transport handler Transport handlers publish event data to the Sensu transport by default this is RabbitMQ Transport event handlers are used to deliver event data to other services using the Sensu transport Create the transport handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdtransporteventsjson This transport handler will publish JSON event data to the Sensu transport NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers transport type transport pipe type direct name events Create a set handler Set handlers are used to group event handlers into sets of handlers making it easier to reference a set of event handlers from a check definition Create the set handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfddefaulthandlerjson This set handler is named default the handler that is used for events where a handler is not specified The previous Sensu event handler examples are included in the set NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers default type set handlers debug file tcpsocket transport 1 referencehandlers 2 referenceevents 3 introtochecksinstalldependencies 4 installdependencies 5 introtocheckscreatethecheckdefinitionforcron"},{"title":"Intro to Mutators","version":"1.0","location":"/sensu-core/1.0/guides/intro-to-mutators","display_name":"undefined 1.0: Intro to Mutators","content":" Getting Started with Mutators The purpose of this guide is to help Sensu users create event data mutators At the conclusion of this guide you the user should have several Sensu mutators in place to mutate transform event data for one or more event handlers Each Sensu mutator in this guide demonstrates one or more mutator definition features for more information please refer to the Sensu mutators reference documentation1 Objectives What will be covered in this guide What are Sensu mutators Creation of a Sensu event data mutator What are Sensu mutators whataresensumutators Sensu mutators mutate transform event data for a Sensu event handler Sensu event handlers can expect event data be in a different format andor manipulated Mutators allow one or more handlers to share logic reducing code duplication and simplifying the event handlers Sensu mutators are executed on machines running the Sensu server or Sensu Enterprise Mutators are essentially commands or scripts that receive JSON formatted event data via STDIN and output the mutated event data to STDOUT Mutators use an exit status code of 0 to indicate a success anything else indicates a failure If a mutator fails to execute nonzero exit status code the event will not be handled and an error will be logged Create an event data mutator Coming soon Please see the Mutators1 reference documentation If you have questions about event data mutators please contact Sensu Support2 1 referencemutators 2 httphelpdesksensuappcom"},{"title":"Overview","version":"1.0","location":"/sensu-core/1.0/guides/overview","display_name":"undefined 1.0: Overview","content":" Getting Started Guide The complete getting started guide The purpose of this guide is to help new Sensu users to obtain a basic understanding of the primitives or components used to build a comprehensive monitoring solution In the course of working through this guide users should be able to start monitoring servers services and application health collect and analyze metrics and setup alerts Objectives This guide will provide an introduction to the following building blocks An introduction to adding clients1 An introduction to checks2 An introduction to handlers3 An introduction to filters4 An introduction to mutators5 1 addingaclient 2 introtochecks 3 introtohandlers 4 introtofilters 5 introtomutators"},{"title":"Architecture","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/overview/architecture","display_name":"Sensu Core 1.0: Architecture","content":" Sensu Architecture Architectural Overview One of advantages that Sensu provides over other monitoring solutions is its architecture which facilitates the execution of service checks collection of metric data and event processing at scale This architecture is comprised of the following components Secure Transportsecuretransport Data Storedatastore Check Execution Schedulercheckexecutionscheduler Monitoring Agentmonitoringagent Event Processoreventprocessor RESTful APIrestfulapi Architectural Diagram Sensu Architecture Gifimagessensudiagramgif Secure Transport Sensu services use a message bus eg RabbitMQ1 to communicate with one another technically speaking the Sensu services dont actually communicate with each other they only communicate with the message bus As of Sensu Core version 013 this message bus communication in Sensu has been abstracted as the Sensu Transport2 making it possible to leverage alternate transport solutions in place of RabbitMQ the default Transport Sensu services requires access to the same instance of the defined Sensu Transport eg a RabbitMQ cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscriptions Data Store Sensu leverages a data store3 for data persistence Only the Sensu server API and dashboard services require access to the data store mdash the Sensu client4 monitoring agent does not By storing data in Redis the Sensu services themselves can remain stateless Although Sensu is designed to route telemetry data to external timeseries databases eg Graphite5 Librato6 InfluxDB7 etc Sensu does store the following state data Client registry8 Check history Event registry Stashes a keyvalue store provided by the Sensu API9 Check Execution Scheduler Sensu offers two distinct check execution schedulers the Sensu server and the Sensu client monitoring agent The Sensu server schedules and publishes check execution requests to client subscriptions via a PublishSubscribe model The Sensu client monitoring agent schedules and executes standalone checks on the local system only Sensus execution schedulers are not mutually exclusive so monitoring checks may be configured for both of Sensus schedulers the Sensu server and Sensu client and Sensu will ensure that the corresponding checks are executed on the appropriate systems Monitoring Agent The Sensu client is a fully featured monitoring agent which provides the following features dynamic selfregistration client subscriptions for monitoring checks configured via the PublishSubscribe model a local check execution scheduler10 an execution platform for monitoring the local system services andor external resources an input socket for accepting input from external services Event Processor eventprocessor The Sensu server is a scalable event processor that processes event data and takes action Sensus event processing capabilities include Registering and deregistering clients Processing check results Processing monitoring events using filters11 mutators12 and handlers13 Sensus event processor is designed to scale along with the applications and infrastructure it is monitoring Although Event Handlers are executed locally by the Sensu server multiple instances of the Sensu server can be run without any additional configuration Sensu provides builtin task election to avoid scheduling conflicts between Sensu servers and the Sensu transport14 distributes via roundrobin check results between Sensu servers for processing which provides loadbalancing RESTful API Sensu provides access to monitoring data and core functionality via a RESTful HTTP JSON API including A Clients API15 for accessing Client data and addingremoving clients A Checks API16 for accessing Check configuration data and publishing check requests An Events API17 for accessing event data and resolving events A Results API18 for accessing check result data and publishing check results An Aggregates API19 for accessing aggregated check result data and deleting aggregate data A Stashes API20 for providing readwrite access to Redis underlying keyvalue functionality 1 httpwwwrabbitmqcom 2 httpgithubcomsensusensutransport 3 referencedatastore 4 referenceclients 5 httpsgithubcomgraphiteproject 6 httpswwwlibratocom 7 httpsinfluxdatacom 8 referenceclientsregistrationandregistry 9 apioverview 10 checkexecutionscheduler 11 referencefilters 12 referencemutators 13 referencehandlers 14 referencetransport 15 apiclientsapi 16 apichecksapi 17 apieventsapi 18 apiresultsapi 19 apiaggregatesapi 20 apistashesapi"},{"title":"How Sensu Works","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/overview/how-sensu-works","display_name":"Sensu Core 1.0: How Sensu Works","content":" The Sensu Monitoring Flow Publishing subscription check requests A Check Request is scheduledpublished by the Sensu Server or a Sensu Client The Sensu Client executes a Service Check Service Checks emit status information and telemetry data as Check Results Check Results are considered to be associated with either the Sensu Client executing the check or the Proxy Client of the check Those Check Results are published by the Sensu Client to the Sensu Transport sometimes on behalf of another client The Sensu Server processes Check Results persisting a copy of the latest result in the Data Store and creating a corresponding to Event The Sensu Server processes the Event by executing one or more Event Handlers The Sensu Server applies any Event Filters defined for an Event Handler The Sensu Server applies any Event Data Mutators defined for an Event Handler assuming the event was not filtered out The Sensu Server executes the Event Handler assuming the event was not filtered out Sensu Architecture Gifimagessensudiagramgif"},{"title":"Platforms","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/overview/platforms","display_name":"Sensu Core 1.0: Platforms","content":" Sensu Core All versions of Sensu including Sensu Enterprise are based on the same core components and functionality which are provided by the Sensu opensource software project1 and collectively referred to as Sensu Core Sensu Core provides multiple processes including the Sensu server2 sensuserver Sensu API3 sensuapi and Sensu client4 sensuclient Installer packages are available for most modern operating systems via native installer packages eg deb rpm msi pkg etc which are available for download from the Sensu website5 and from package manager repositories for APT for UbuntuDebian systems and YUM for RHELCentOS NOTE although Sensu Core packages are available for a variety of platforms ndash thus making it technically possible to run the sensuserver and sensuapi processes on nonLinux operating systems ndash we strongly recommended running the Sensu Server and API on a Linuxbased platform Sensu Core installer packages for nonLinux platforms are provided for the purpose of making the sensuclient available and are not tested as extensively for running the sensuserver and sensuapi processes Sensu Server API UbuntuDebianplatformssensuonubuntudebianhtmlsensucore RHELCentOSplatformssensuonrhelcentoshtmlsensucore Sensu Client UbuntuDebianplatformssensuonubuntudebiansensucore RHELCentOSplatformssensuonrhelcentossensucore Microsoft Windowsplatformssensuonmicrosoftwindowssensucore Mac OS Xplatformssensuonmacosxsensucore FreeBSDplatformssensuonfreebsdsensucore IBM AIXplatformssensuonibmaixsensucore Oracle Solarisplatformssensuonoraclesolarissensucore Sensu Enterprise Sensu Enterprise6 is designed to be a dropin replacement for the Sensu Core server and API only ie Sensu Enterprise uses the same client as Sensu Core Sensu Enterprise provides a single process called sensuenterprise which provides addedvalue7 replacements for the Sensu Core server sensuserver and API sensuapi Sensu Enterprise Server API UbuntuDebianplatformssensuonubuntudebiansensuenterprise RHELCentOSplatformssensuonrhelcentossensuenterprise Sensu Enterprise Client As mentioned above Sensu Enterprise uses the same sensuclient process as Sensu Core By sharing the same opensource monitoring agent upgrading to Sensu Enterprise from Sensu Core is simplified as theres no need to upgrade agents mdash simply replace the server and API components Consequently Sensu Enterprise does not need to be installed on every system being monitored by Sensu 1 httpsgithubcomsensu 2 referenceserver 3 apioverview 4 referenceclients 5 httpssensuapporgdownload 6 httpssensuapporgenterprise 7 httpssensuapporgenterpriseadvantage"},{"title":"What is Sensu?","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/overview/what-is-sensu","display_name":"Sensu Core 1.0: What is Sensu?","content":"Sensu is an infrastructure and application monitoring and telemetry solution Sensu provides a framework for monitoring infrastructure service application health and business KPIs Sensu is specifically designed to solve monitoring challenges introduced by modern infrastructure platforms with a mix of static dynamic and ephemeral infrastructure at scale ie public private and hybrid clouds Sensu allows organizations to compose comprehensive monitoring telemetry solutions to meet unique business requirements By providing a platform to build upon Sensu enables you to focus on what to monitor and measure rather than how Sensu is installed on your organizations infrastructure ndash it is not a SoftwareasaService SaaS solution ndash which means Sensu gives you full control over the availability of your monitoring solution Benefits Sensu is a comprehensive infrastructure and application monitoring solution that provides the following benefits Monitor servers services application health and business KPIs Sensu is an infrastructure and application monitoring telemetry solution Send alerts and notifications Sensu integrates with the tools and services your organization is already using to do things like send emails PagerDuty1 alerts Slack2 HipChat3 IRC notifications and many4 more5 Dynamic client registration deregistration When servers are provisioned they automatically register themselves with Sensu so theres no need to manually add or configure new servers A simple yet extensible model for monitoring Sensu provides a sophisticated yet simple to understand solution for executing service checks6 and processing events7 at scale Service checks provide status and telemetry data and event handlers process results Hundreds of plugins are available for monitoring the tools and services youre already using Plugins have a very simple specification and can be written in any programming language Built for missioncritical applications and multitiered networks Sensus use of a secure transport8 protects your infrastructure from exposure and makes it possible for Sensu to traverse complex network topologies including those that use NAT and VPNs and span public networks Sensu provides a secure monitoring solution trusted by international banking institutions government agencies Fortune 100 organizations and many more Designed for automation Sensu exposes 100 of its configuration as JSON files which makes it extremely automationndashfriendly eg it was designed to work with tools like Chef9 Puppet10 and Ansible11 Open source software with commercial support Sensu is an opensource software OSS project made freely available under a permissive MIT License12 the source code is publicly available on GitHub13 Sensu Enterprise14 is based on Sensu Core the OSS version of Sensu which makes addedvalue features commercial support training and many other benefits available under the Sensu License15 A Simple Yet Powerful Framework Sensu is a comprehensive monitoring solution that is powerful enough to solve complex monitoring problems at scale yet simple enough to use for traditional monitoring scenarios and small environments It achieves this broad appeal via building upon two simple yet powerful monitoring primitives Service Checks16 and Event Processing7 These building blocks also provide an infinitely extensible framework for composing monitoring solutions What is a Service Check servicechecks Service checks allow you to monitor services eg is Nginx running or measure resources eg how much disk space do I have left Service checks are executed on machines running a monitoring agent ie Sensu client17 Service checks are essentially commands or scripts that output data to STDOUT or STDERR and produce an exit status code to indicate a state Common exit status codes used are 0 for OK 1 for WARNING 2 for CRITICAL and 3 or greater to indicate UNKNOWN or CUSTOM Sensu checks use the same specification as Nagios therefore Nagios check plugins may be used with Sensu Service checks produce results that are processed by the event processor ie the Sensu server Learn more 17 What is Event Processing eventprocessing Event processing also called stream processing is a method of analyzing processing and storing streams of information data about things that happen events deriving a conclusion from them and potentially executing some action handling The Sensu event processor the Sensu server enables you to execute Handlers18 for taking action on events produced by service checks such as sending an email alert creating or resolving an incident eg in PagerDuty or ServiceNow or storing metric data in a timeseries database eg Graphite Learn more 18 1 httpswwwpagerdutycom 2 httpsslackcom 3 httpwwwhipchatcom 4 referenceplugins 5 referenceenterprisebuiltinintegrations 6 servicechecks 7 eventprocessing 8 architecturesecuretransport 9 httpwwwchefio 10 httpspuppetlabscom 11 httpwwwansiblecom 12 httpsgithubcomsensusensublobmasterMITLICENSEtxt 13 httpgithubcomsensu 14 httpssensuapporgenterprise 15 httpssensuapporgsensulicense 16 servicechecks 17 referenceclients 18 referencehandlers"},{"title":"BSD","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/platforms/sensu-on-bsd","display_name":"Sensu Core 1.0: BSD","content":" Sensu on FreeBSD Reference documentation Installing Sensu Coresensucore Download and install Sensu using the Sensu txz filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Install Sensu Core sensucore Sensu Core is installed on FreeBSD systems via a native system installer package ie a txz file which is available for download from the Sensu Downloads1 page and from this repository 64bit FreeBSD 10 only2 WARNING FreeBSD packages are currently as a beta release Support for running Sensu on FreeBSD will be provided on a besteffort basis until further notice Download and install Sensu using the Sensu Universal txz file downloadandinstallsensucore NOTE As of Sensu version 027 package repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page NOTE FreeBSD packages are available for FreeBSD 10 and 11 Please visit the Sensu Downloads1 page for more information 2 Install the sensu1201txz package using the pkg utility sudo pkg add sensu1201txz 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Configure Sensu By default all of the Sensu services on FreeBSD systems will load configuration from the following locations usrlocaletcsensuconfigjson usrlocaletcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir usrlocaletcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at usrlocaletcsensuconfdclientjson client name freebsdclient address 127001 environment development subscriptions dev freebsdhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at usrlocaletcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Coming soon 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetfreebsd 3 httpssensuglobalsslfastlynetfreebsdFreeBSD10amd64sensusensu1201txz 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 configuresensu 10 exampletransportconfiguration 11 exampleclientconfiguration"},{"title":"IBM AIX","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/platforms/sensu-on-ibm-aix","display_name":"Sensu Core 1.0: IBM AIX","content":" Sensu on IBM AIX Installing Sensu Coresensucore Download and install Sensu using the Sensu bff filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Known limitationsknownlimitations Foreign Function Interfaceforeignfunctioninterface Install Sensu Core sensucore Sensu Core is installed on IBM AIX systems via a native system installer package ie a bff file which is available for download from the Sensu Downloads1 page and from this repository2 Download and install Sensu using the Sensu bff package downloadandinstallsensucore NOTE As of Sensu version 027 repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 The Sensu installer package for IBM AIX systems is provided in backup file format bff In order to install the content you will need to know the Fileset Name Display the content using the installp utility installp ld sensu1201powerpcbff Once you have collected the fileset name you can optionally proceed to preview installation using the installp utility with the p preview flag installp apXY d sensu1201powerpcbff sensu 3 Install Sensu using the installp utility installp aXY d sensu1201powerpcbff sensu NOTE this command uses the following installp utilty flags a to apply changes to the system X to extend the file system and Y to accept the Sensu MIT License4 4 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition11 and client definition12 Configure Sensu By default all of the Sensu services on IBM AIX systems will load configuration from the following locations etcsensuconfigjson etcsensuconfdjson NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name aixclient address localhost environment development subscriptions dev aixhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification13 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Managing the Sensu client process servicemanagement Start or stop the Sensu client using the startsrc and stopsrc utilities10 startsrc s sensuclient stopsrc s sensuclient Known limitations Please note the following platformspecific limitations affecting Sensu on AIX at this time Unless otherwise stated all documented functions of the Sensu client are supported Foreign Function Interface Foreign Function Interface FFI9 calls on Sensus embedded Ruby on AIX are not working at this time so any Rubybased Sensu plugins that require FFI will not work however all other plugins should work It is possible that FFI support will be enabled in a future release 1 httpssensuapporgdownloads 2 httpssensuglobalsslfastlynetaix 3 httpssensuglobalsslfastlynetaix61sensu1201powerpcbff 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 httpsgithubcomffiffi 10 configuresensu 11 exampletransportconfiguration 12 exampleclientconfiguration 13 referencetransporttransportdefinitionspecification"},{"title":"Mac OS X","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/platforms/sensu-on-mac-osx","display_name":"Sensu Core 1.0: Mac OS X","content":" Sensu on Mac OS X Installing Sensu Coresensucore Download and install Sensu using the Sensu Universal pkg filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Configure the Sensu client launchd daemonconfigurethesensuclientlaunchddaemon Operating Sensuoperatingsensu Managing the Sensu client process with launchctlservicemanagement Interacting with Sensu via CLIinteractingwithsensuviacli Install Sensu Core sensucore Sensu Core is installed on Mac OS X systems via a native system installer package ie a pkg file which is available for download from the Sensu Downloads1 page and from this repository2 WARNING Mac OS X packages are currently as a beta release Support for running Sensu on Mac OS X will be provided on a besteffort basis until further notice Download and install Sensu using the Sensu Universal pkg file downloadandinstallsensucore 1 Download Sensu from the Sensu Downloads1 page NOTE the Universal pkg file supports OS X Mavericks 109 and newer Mountain Lion users please use this installer3 2 Install the package using the installer utility sudo installer pkg sensu1201pkg target 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section12 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition13 and client definition14 Configure Sensu By default all of the Sensu services on Mac OS X systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus launchd daemon configuration XML andor by starting the Sensu services with the corresponding CLI arguments For more information please see the configure the Sensu client launchd daemon4 section below The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name macosxclient address 127001 environment development subscriptions dev macosxhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification15 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Configure the Sensu client launchd daemon The Sensu Core pkg package includes a Sensu client daemon configuration allowing Sensu to be run as a launchd job or daemon The OS X launchd service and launchctl utility use a plist file9 an XMLbased configuration file to configure the sensuclient daemon run arguments eg log varlogsensusensuclientlog 1 To configure the Sensu client service wrapper copy the default service definition file entitled orgsensuappsensuclientplist to LibraryLaunchDaemonsorgsensuappsensuclientplist and edit it with your favorite text editor sudo cp optsensuembeddedCellarsensu120LibraryLaunchDaemonsorgsensuappsensuclientplist LibraryLaunchDaemonsorgsensuappsensuclientplist 2 This XML configuration file allows you to set Sensu client CLI arguments10 The following example configuration file sets the Sensu client primary configuration file path to etcsensuconfigjson the Sensu configuration directory to etcsensuconfd and the log file path to etcsensusensuclientlog Labelorgsensuappsensuclient ProgramArguments optsensubinsensuclient cetcsensuconfigjson detcsensuconfd lvarlogsensusensuclientlog UserNamesensu GroupNamesensu RunAtLoad KeepAlive StandardOutPathvarlogsensusensuclientlog StandardErrorPathvarlogsensusensuclientlog Operating Sensu Managing the Sensu client process with launchctl servicemanagement Start or stop the Sensu client using the launchctl utility11 sudo launchctl load w LibraryLaunchDaemonsorgsensuappsensuclientplist sudo launchctl unload w LibraryLaunchDaemonsorgsensuappsensuclientplist Interacting with Sensu via CLI Interacting with the any of the installed Sensu processes eg sensuclient via CLI on Mac OS X requires running the processes as the sensu user which is installed by the Sensu OS X installer package EXAMPLE sudo u sensu optsensubinsensuclient V 120 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetosx 3 httpssensuglobalsslfastlynetosxsensu1201mountainlionpkg 4 configurethesensuclientlaunchddaemon 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 httpsdeveloperapplecomlibrarymacdocumentationDarwinReferenceManPagesman5plist5html 10 referenceconfigurationsensuservicecliarguments 11 httpsdeveloperapplecomlibrarymacdocumentationDarwinReferenceManPagesman1launchctl1html 12 configuresensu 13 exampletransportconfiguration 14 exampleclientconfiguration 15 referencetransporttransportdefinitionspecification"},{"title":"Solaris","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/platforms/sensu-on-oracle-solaris","display_name":"Sensu Core 1.0: Solaris","content":" Sensu on Solaris Reference documentation Installing Sensu Coresensucore Download and install Sensu on Solaris 10downloadandinstallsensucoreonsolaris10 Download and install Sensu on Solaris 11downloadandinstallsensucoreonsolaris11 Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Install Sensu sensucore Sensu Core is installed on Solaris systems via native system installer packages ie pkg or IPS13 p5p files which are available for download from the Sensu Downloads1 page and from these repositories Solaris 10 pkg2 and Solaris 11 IPS p5p3 Download and install Sensu on Solaris 10 downloadandinstallsensucoreonsolaris10 NOTE As of Sensu version 10 package repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 Install the sensu1201i386pkg package using the pkgadd utility su pkgadd d sensu1201i386pkg 3 Install the Sensu service init scripts using the svccfg utility svccfg import libsvcmanifestsitesensuclientxml 4 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Download and install Sensu on Solaris 11 downloadandinstallsensucoreonsolaris11 1 Download Sensu from the Sensu Downloads1 page or by using the wget utility wget httpssensuglobalsslfastlynetsolarisips511sensu1201i386p5p 2 Install the sensu1201i386p5p package using the pkg utility sudo pkg install g sensu1201i386p5p developerversioningsensu 3 Download and run the Sensu postinstall script12 wget httpssensuapporgdocs12filespostinstsh chmod x postinstsh sudo postinstsh NOTE all native system installer packages for Sensu contain this postinstall script which is used for setting up the sensu system user and group creating various configuration directories setting configuration directory permissions and creating service init scripts This step may will be included in future Solaris 11 packages however at this time it is necessary to perform these steps manually 4 Install the Sensu service init scripts using the svcadm utility sudo svcadm restart manifestimport 5 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Configure Sensu By default all of the Sensu services on Solaris systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name solarisclient address 127001 environment development subscriptions dev solarishosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Managing the Sensu client process servicemanagement Manually start stop and restart the Sensu services using the svcadm utility svcadm enable sensuclient svcadm disable sensuclient svcadm restart sensuclient 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetsolarispkg 3 httpssensuglobalsslfastlynetsolarisips 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 configuresensu 10 exampletransportconfiguration 11 exampleclientconfiguration 12 filespostinstsh 13 httpwwworaclecomtechnetworkserverstoragesolaris11technologiesips323421html"},{"title":"RHEL/CentOS","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/platforms/sensu-on-rhel-centos","display_name":"Sensu Core 1.0: RHEL/CentOS","content":" Sensu on RHELCentOS Reference documentation Installing Sensu Coresensucore Install Sensu using YUMinstallsensucorerepository Installing Sensu Enterprisesensuenterprise Install the Sensu Enterprise repositoryinstallsensuenterpriserepository Install Sensu Enterprise server APIinstallsensuenterprise Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Example data store configurationexampledatastoreconfiguration Example API configurationsexampleapiconfigurations Standalone configurationapistandaloneconfiguration Distributed configurationapidistributedconfiguration Example Sensu Enterprise Dashboard configurationsexamplesensuenterprisedashboardconfigurations Standalone configurationdashboardstandaloneconfiguration Distributed configurationdashboarddistributedconfiguration Enable the Sensu services to start on bootenablethesensuservicestostartonboot Disable the Sensu services on bootdisablethesensuservicesonboot Operating Sensuoperatingsensu Managing the Sensu servicesprocessesservicemanagement Install Sensu Core sensucore Sensu Core is installed on RHEL and CentOS systems via a native system installer package ie a rpm file which is available for download from the Sensu Downloads1 page and from YUM package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Install Sensu using YUM recommended installsensucorerepository Sensu packages for Red Hat target currently supported versions of Red Hat Enterprise Linux and their Centos equivalents These packages are generally expected to be compatible with Red Hat derivatives like SuSE Amazon or Scientific Linux but packages are not tested on these platforms The following instructions describe configuring package repository definitions using Yum variables14 as components of the baseurl On Red Hat derivative platforms the value of the releasever variable will not typically align with the RHEL release versions eg 6 or 7 advertised in the Sensu Yum repository Please use 6 or 7 in lieu of releasever on RHEL derivatives depending on whether they use sysv init or systemd respectively NOTE As of Sensu version 027 the yum repository URL has changed to include the releasever variable To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Sensu sudo yum install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 3 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition11 The Sensu client will need a client definition12 and both the sensuserver and sensuapi will need a datastore Redis definition13 mdash all of which are explained below Install Sensu Enterprise sensuenterprise Sensu Enterprise2 is installed on RHEL and CentOS systems via a native system installer package ie a rpm file The Sensu Enterprise installer package is made available via the Sensu Enterprise YUM repository which requires access credentials to access The Sensu Enterprise packages install two processes sensuenterprise which provides the Sensu server and API from a single process and sensuenterprisedashboard which provides the dashboard API and web application WARNING Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server and API only Sensu Enterprise uses the same sensuclient process provided by the Sensu Core installer packages above As a result Sensu Enterprise does not need to be installed on every system being monitored by Sensu Install the Sensu Enterprise repository installsensuenterpriserepository 1 Set access credentials as environment variables SEUSER1234567890 SEPASSPASSWORD NOTE please replace 1234567890 and PASSWORD with the access credentials provided with your Sensu Enterprise subscription Confirm that you have correctly set your access credentials as environment variables echo SEUSERSEPASS 1234567890PASSWORD 2 Create a YUM repository configuration file for the Sensu Enterprise repository at etcyumreposdsensuenterpriserepo echo sensuenterprise namesensuenterprise baseurlhttpSEUSERSEPASSenterprisesensuappcomyumnoarch gpgcheck0 enabled1 sudo tee etcyumreposdsensuenterpriserepo 3 Create a YUM repository configuration file for the Sensu Enterprise Dashboard repository at etcyumreposdsensuenterprisedashboardrepo echo sensuenterprisedashboard namesensuenterprisedashboard baseurlhttpSEUSERSEPASSenterprisesensuappcomyumbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensuenterprisedashboardrepo 4 Install Sensu Enterprise sudo yum install sensuenterprise sensuenterprisedashboard 5 Configure Sensu Enterprise No default configuration is provided with Sensu Enterprise so Sensu Enterprise will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu Enterprise Configure Sensu By default all of the Sensu services on Ubuntu and Debian systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE Additional or alternative configuration file and directory locations may be used by modifying Sensus service scripts andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration3 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name rhelclient address 127001 environment development subscriptions dev rhelhosts socket bind 127001 port 3030 Example transport configuration At minimum all of the Sensu processes require configuration to tell them how to connect to the configured Sensu Transport4 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification11 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis5 or RabbitMQ6 reference documentation Example data store configuration The Sensu Core server and API processes and the Sensu Enterprise process all require configuration to tell them how to connect to Redis the Sensu data store Please refer to the Redis reference documentation5 for configuration file examples Example API configurations Standalone configuration apistandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensuconfdapijson api host localhost bind 0000 port 4567 Distributed configuration apidistributedconfiguration 1 Obtain the IP address of the system where the Sensu API is installed For the purpose of this guide we will use 10017 as our example IP address 1 Create a configuration file with the following contents at etcsensuconfdapijson on the Sensu server and API systems api host 10017 bind 10017 port 4567 Example Sensu Enterprise Dashboard configurations Standalone configuration dashboardstandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host localhost port 4567 dashboard host 0000 port 3000 Distributed configuration dashboarddistributedconfiguration 1 Obtain the IP address of the system where Sensu Enterprise is installed For the purpose of this guide we will use 10017 as our example IP address 2 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host 10017 port 4567 dashboard host 0000 port 3000 NOTE Multiple Sensu Enterprise Dashboard instances can be installed When load balancing across multiple Dashboard instances your load balancer should support sticky sessions 3 The Sensu Enterprise Dashboard process requires configuration to tell it how to connect to Redis the Sensu data store Please refer to the Redis installation instructions5 for configuration file examples Enable the Sensu services to start on boot By default the Sensu services are not configured to start automatically on system boot we recommend managing the Sensu services with a process supervisor such as runit7 To enable Sensu services on system boot use the chkconfig utility8 Enable the Sensu client on system boot sudo chkconfig sensuclient on Enable the Sensu server and API to start on system boot For Sensu Core users ie sensuserver and sensuapi sudo chkconfig sensuserver on sudo chkconfig sensuapi on For Sensu Enterprise users sudo chkconfig sensuenterprise on WARNING the sensuenterprise process is intended to be a dropin replacement for the Sensu Core sensuserver and sensuapi processes Please ensure that the Sensu Core processes are not configured to start on system8 boot before enabling Sensu Enterprise to start on system boot Enable Sensu Enterprise Dashboard on system boot sudo chkconfig sensuenterprisedashboard defaults WARNING the sensuenterprisedashboard process is intended to be a dropin replacement for the Uchiwa dashboard Please ensure that the Uchiwa processes are not configured to start on system boot before enabling the Sensu Enterprise Dashboard to start on system boot Disable the Sensu services on boot If you have enabled Sensu services on boot and now need to disable them this can also be accomplished using the chkconfig utility9 Disable the Sensu client on system boot sudo chkconfig sensuclient off Disable the Sensu Core server on system boot sudo chkconfig sensuserver off Disable the Sensu Core API on system boot sudo chkconfig sensuapi off Disable Sensu Enterprise on system boot sudo chkconfig sensuenterprise off Disable Sensu Enterprise Dashboard on system boot sudo chkconfig sensuenterprisedashboard remove Operating Sensu Managing the Sensu servicesprocesses servicemanagement To manually start and stop the Sensu services use the following commands NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdsensuclient start Start or stop the Sensu client sudo service sensuclient start sudo service sensuclient stop Start or stop the Sensu Core server sudo service sensuserver start sudo service sensuserver stop Start or stop the Sensu Core API sudo service sensuapi start sudo service sensuapi stop Start or stop Sensu Enterprise sudo service sensuenterprise start sudo service sensuenterprise stop Start or stop the Sensu Enterprise Dashboard sudo service sensuenterprisedashboard start sudo service sensuenterprisedashboard stop Verify the Sensu Enterprise Dashboard is running by visiting view the dashboard at httplocalhost3000 replace localhost with the hostname or IP address where the Sensu Enterprise Dashboard is running 1 httpssensuapporgdownload 2 httpssensuapporgenterprise 3 referenceconfiguration 4 referencetransport 5 referenceredissensuredisconfiguration 6 referencerabbitmqsensurabbitmqconfiguration 7 httpsmardenorgrunit 8 disablethesensuservicesonboot 9 httpsaccessredhatcomdocumentationenUSRedHatEnterpriseLinux6htmlDeploymentGuides2serviceschkconfightml 10 configuresensu 11 exampletransportconfiguration 12 exampleclientconfiguration 13 exampledatastoreconfiguration 14 httpsaccessredhatcomdocumentationenUSRedHatEnterpriseLinux6htmlDeploymentGuidesecUsingYumVariableshtml"},{"title":"Ubuntu/Debian","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/platforms/sensu-on-ubuntu-debian","display_name":"Sensu Core 1.0: Ubuntu/Debian","content":" Sensu on UbuntuDebian Reference documentation Installing Sensu Coresensucore Install Sensu using APTinstallsensucorerepository Installing Sensu Enterprisesensuenterprise Install the Sensu Enterprise repositoryinstallsensuenterpriserepository Install Sensu Enterprise server APIinstallsensuenterprise Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Example data store configurationexampledatastoreconfiguration Example API configurationsexampleapiconfigurations Standalone configurationapistandaloneconfiguration Distributed configurationapidistributedconfiguration Example Sensu Enterprise Dashboard configurationsexamplesensuenterprisedashboardconfigurations Standalone configurationdashboardstandaloneconfiguration Distributed configurationdashboarddistributedconfiguration Enable the Sensu services to start on bootenablethesensuservicestostartonboot Disable the Sensu services on bootdisablethesensuservicesonboot Operating Sensuoperatingsensu Managing the Sensu servicesprocessesservicemanagement Install Sensu Core sensucore Sensu Core is installed on Ubuntu and Debian systems via a native system installer package ie a deb file which is available for download from the Sensu Downloads1 page and from APT package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Sensu packages for Debian target current stable and oldstable releases15 Sensu packages for Ubuntu target current Long Term Support LTS releases16 If you wish to install Sensu packages on newer Debian or Ubuntu releases please try installing a package built for the most recent Debian stable or Ubuntu LTS release Install Sensu using APT recommended installsensucorerepository NOTE As of Sensu version 027 apt repository configuration has changed to include the codename of the UbuntuDebian release To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Install the GPG public key wget q httpssensuglobalsslfastlynetaptpubkeygpg O sudo aptkey add 2 Determine the codename of the UbuntuDebian release on your system etcosrelease echo VERSION 14044 LTS Trusty Tahr codename for this system is trusty 3 Create an APT configuration file at etcaptsourceslistdsensulist export CODENAMEyourreleasecodenamehere eg trusty echo deb httpssensuglobalsslfastlynetapt CODENAME main sudo tee etcaptsourceslistdsensulist 4 Update APT sudo aptget update 5 Install Sensu sudo aptget install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 6 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition12 The Sensu client will need a client definition13 and both the sensuserver and sensuapi will need a datastore Redis definition14 mdash all of which are explained below Install Sensu Enterprise sensuenterprise Sensu Enterprise2 is installed on Ubuntu and Debian systems via a native system installer package ie a deb file The Sensu Enterprise installer package is made available via the Sensu Enterprise APT repository which requires access credentials to access The Sensu Enterprise packages install two processes sensuenterprise which provides the Sensu server and API from a single process and sensuenterprisedashboard which provides the dashboard API and web application WARNING Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server and API only Sensu Enterprise uses the same sensuclient process provided by the Sensu Core installer packages above As a result Sensu Enterprise does not need to be installed on every system being monitored by Sensu Install the Sensu Enterprise repository installsensuenterpriserepository 1 Set access credentials as environment variables SEUSER1234567890 SEPASSPASSWORD NOTE please replace 1234567890 and PASSWORD with the access credentials provided with your Sensu Enterprise subscription Confirm that you have correctly set your access credentials as environment variables echo SEUSERSEPASS 1234567890PASSWORD 2 Install the GPG public key wget q httpSEUSERSEPASSenterprisesensuappcomaptpubkeygpg O sudo aptkey add 3 Create an APT configuration file at etcaptsourceslistdsensuenterpriselist echo deb httpSEUSERSEPASSenterprisesensuappcomapt sensuenterprise main sudo tee etcaptsourceslistdsensuenterpriselist 4 Update APT sudo aptget update 5 Install Sensu Enterprise sudo aptget install sensuenterprise sensuenterprisedashboard 6 Configure Sensu Enterprise No default configuration is provided with Sensu Enterprise so Sensu Enterprise will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu Enterprise Configure Sensu By default all of the Sensu services on Ubuntu and Debian systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE Additional or alternative configuration file and directory locations may be used by modifying Sensus service scripts andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration3 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually sudo mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name ubuntuclient address 127001 environment development subscriptions dev ubuntuhosts socket bind 127001 port 3030 Example transport configuration At minimum all of the Sensu processes require configuration to tell them how to connect to the configured Sensu Transport4 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis5 or RabbitMQ6 reference documentation Example data store configuration The Sensu Core server and API processes and the Sensu Enterprise process all require configuration to tell them how to connect to Redis the Sensu data store Please refer to the Redis reference documentation5 for configuration file examples Example API configurations Standalone configuration apistandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensuconfdapijson api host localhost bind 0000 port 4567 Distributed configuration apidistributedconfiguration 1 Obtain the IP address of the system where the Sensu API is installed For the purpose of this guide we will use 10017 as our example IP address 2 Create a configuration file with the following contents at etcsensuconfdapijson on the Sensu server and API systems api host 10017 bind 10017 port 4567 Example Sensu Enterprise Dashboard configurations Standalone configuration dashboardstandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host localhost port 4567 dashboard host 0000 port 3000 Distributed configuration dashboarddistributedconfiguration 1 Obtain the IP address of the system where Sensu Enterprise is installed For the purpose of this guide we will use 10017 as our example IP address 2 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host 10017 port 4567 dashboard host 0000 port 3000 NOTE Multiple Sensu Enterprise Dashboard instances can be installed When load balancing across multiple Dashboard instances your load balancer should support sticky sessions 3 The Sensu Enterprise Dashboard process requires configuration to tell it how to connect to Redis the Sensu data store Please refer to the Redis installation instructions5 for configuration file examples Enable the Sensu services to start on boot By default the Sensu services are not configured to start automatically on system boot we recommend managing the Sensu services with a process supervisor such as runit7 To enable Sensu services on system boot use the updatercd utility Enable the Sensu client on system boot sudo updatercd sensuclient enable Enable the Sensu server and API to start on system boot For Sensu Core users ie sensuserver and sensuapi sudo updatercd sensuserver enable sudo updatercd sensuapi enable For Sensu Enterprise users sudo updatercd sensuenterprise enable WARNING the sensuenterprise process is intended to be a dropin replacement for the Sensu Core sensuserver and sensuapi processes Please ensure that the Sensu Core processes are not configured to start on system boot8 before enabling Sensu Enterprise to start on system boot Enable Sensu Enterprise Dashboard on system boot sudo updatercd sensuenterprisedashboard enable WARNING the sensuenterprisedashboard process is intended to be a dropin replacement for the Uchiwa dashboard Please ensure that the Uchiwa processes are not configured to start on system boot before enabling the Sensu Enterprise Dashboard to start on system boot Disable the Sensu services on boot If you have enabled Sensu services on boot and now need to disable them this can also be accomplished using the updatercd utility9 Disable the Sensu client on system boot sudo updatercd sensuclient disable Disable the Sensu Core server on system boot sudo updatercd sensuserver disable Disable the Sensu Core API on system boot sudo updatercd sensuapi disable Disable Sensu Enterprise on system boot sudo updatercd sensuenterprise disable Disable Sensu Enterprise Dashboard on system boot sudo updatercd sensuenterprisedashboard disable Operating Sensu Managing the Sensu servicesprocesses servicemanagement To manually start and stop the Sensu services use the following commands Start or stop the Sensu client sudo service sensuclient start sudo service sensuclient stop Start or stop the Sensu Core server sudo service sensuserver start sudo service sensuserver stop Start or stop the Sensu Core API sudo service sensuapi start sudo service sensuapi stop Start or stop Sensu Enterprise sudo service sensuenterprise start sudo service sensuenterprise stop Start or stop the Sensu Enterprise Dashboard sudo service sensuenterprisedashboard start sudo service sensuenterprisedashboard stop Verify the Sensu Enterprise Dashboard is running by visiting view the dashboard at httplocalhost3000 replace localhost with the hostname or IP address where the Sensu Enterprise Dashboard is running 1 httpssensuapporgdownload 2 httpssensuapporgenterprise 3 referenceconfiguration 4 referencetransport 5 referenceredissensuredisconfiguration 6 referencerabbitmqsensurabbitmqconfiguration 7 httpsmardenorgrunit 8 disablethesensuservicesonboot 9 httpmanpagesubuntucommanpagespreciseman8updatercd8html 10 referencetransporttransportdefinitionspecification 11 configuresensu 12 exampletransportconfiguration 13 exampleclientconfiguration 14 exampledatastoreconfiguration 15 httpswikidebianorgDebianReleases 16 httpswikiubuntucomLTS"},{"title":"Microsoft Windows","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/platforms/sensu-on-windows","display_name":"Sensu Core 1.0: Microsoft Windows","content":" Sensu on Microsoft Windows Reference documentation Installing Sensu Coresensucore Download and install Sensu using the Sensu MSIdownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Configure the Sensu client Windows service wrapperconfigurethesensuclientwindowsservicewrapper Install the Sensu client Windows serviceinstallthesensuclientwindowsservice Operating Sensuoperatingsensu Managing the Sensu client Windows serviceservicemanagement Install Sensu Core sensucore Sensu Core is installed on Microsoft Windows systems via a native system installer package ie a msi file which is available for download from the Sensu Downloads1 page and from this repository2 Download and install Sensu using the Sensu MSI downloadandinstallsensucore NOTE As of Sensu version 10 repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 Doubleclick the sensu1201x64msi installer package to launch the installer accept the Sensu Core MIT License4 and install Sensu using the default settings eg install location etc WARNING changing the default installation path from Copt is strongly discouraged 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section12 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition13 and client definition14 Configure Sensu DANGER Many text editors on Windows including Notepad save text in a format that is not suitable for Sensu configuration While we require UTF8 there are similarlooking character sets that are not actually UTF8 such as UTF8 BOM A more modern text editor such as Atom or Notepad will allow you to do this easily fortunately For more about editor encodings see this discussion on StackOverflow16 If youre automating JSON creation with eg PowerShell make sure that youre speaking UTF8 in your shell too See here17 for more details By default all of the Sensu services on Microsoft Windows systems will load configuration from the following locations Coptsensuconfigjson Coptsensuconfd NOTE in general where references to configuration file locations found elsewhere in the Sensu documentation suggest paths beginning with etcsensu these will correspond to Coptsensu on Microsoft Windows systems Additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration XML andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie Coptsensuconfd is not created by the Sensu MSI installer in which case it is necessary to create this directory manually mkdir Coptsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at Coptsensuconfdclientjson client name windowsclient address 127001 environment development subscriptions dev windowshosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification15 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Configure the Sensu client Windows service wrapper The Sensu Core MSI package includes a Sensu client service wrapper allowing Sensu to be registered as a Windows service The Sensu client service wrapper uses an XML configuration file to configure the sensuclient run arguments eg log Coptsensusensuclientlog To configure the Sensu client service wrapper edit the service definition file at Coptsensubinsensuclientxml with your favorite text editor This XML configuration file allows you to set Sensu client CLI arguments9 The following example configuration file sets the Sensu client primary configuration file path to Coptsensuconfigjson the Sensu configuration directory to Coptsensuconfd and the log file path to Coptsensusensuclientlog sensuclient Sensu Client This service runs a Sensu client Coptsensuembeddedbinruby Coptsensuembeddedbinsensuclient c Coptsensuconfigjson d Coptsensuconfd l Coptsensusensuclientlog Install the Sensu client Windows service Open a Command Prompt and use the Windows SC10 utility to create the Windows service for the Sensu client sc create sensuclient start delayedauto binPath coptsensubinsensuclientexe DisplayName Sensu Client NOTE the space between the equals and the values is required Operating Sensu Managing the Sensu client Windows service servicemanagement To manually start and stop the Sensu client Windows service use the Servicesmsc11 utility or via the Command Prompt Start or stop the Sensu client sc start sensuclient sc stop sensuclient 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetmsi 3 httpssensuglobalsslfastlynetmsi2012r2sensu1201x64msi 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 referenceconfigurationsensuservicecliarguments 10 httpstechnetmicrosoftcomenuslibrarybb490995aspx 11 httpstechnetmicrosoftcomenuslibrarycc755249aspx 12 configuresensu 13 exampletransportconfiguration 14 exampleclientconfiguration 15 referencetransporttransportdefinitionspecification 16 httpstackoverflowcomquestions2223882whatsdifferentbetweenutf8andutf8withoutbom 17 httpstackoverflowcomquestions5596982usingpowershelltowriteafileinutf8withoutthebom"},{"title":"Client Installation","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/quick-start/client-installation","display_name":"Sensu Core 1.0: Client Installation","content":" Install the Sensu Client Having successfully installed and configured a Sensu server and API Sensu Core or Sensu Enterprise lets now install andor configure a Sensu client The Sensu client is run on every system you need to monitor including those running the Sensu server and API and Sensus dependencies ie RabbitMQ andor Redis Both Sensu Core and Sensu Enterprise use the same Sensu client process ie sensuclient so upgrading from Sensu Core to Sensu Enterprise does not require you to install a difference Sensu client Included in Sensu Core The Sensu client process sensuclient is part of the open source Sensu project ie Sensu Core and it is included in the Sensu Core installer packages along with the Sensu Core server and API processes ie sensuserver and sensuapi This means that if you are following the instructions in this guide for a standalone1 installation your Sensu client is already installed Disabled by default The Sensu client process sensuclient is disabled by default on all platforms Please refer to the corresponding configuration and operation documentation corresponding to the platform where you have installed your Sensu clients for instructions on starting stopping the Sensu client process andor enabling the Sensu client process to start automatically on system boot Install Sensu Core sensucore UbuntuDebian Sensu Core is installed on Ubuntu and Debian systems via a native system installer package ie a deb file which is available for download from the Sensu Downloads1 page and from APT package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Sensu packages for Debian target current stable and oldstable releases15 Sensu packages for Ubuntu target current Long Term Support LTS releases16 If you wish to install Sensu packages on newer Debian or Ubuntu releases please try installing a package built for the most recent Debian stable or Ubuntu LTS release Install Sensu using APT recommended installsensucorerepository NOTE As of Sensu version 027 apt repository configuration has changed to include the codename of the UbuntuDebian release To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Install the GPG public key wget q httpssensuglobalsslfastlynetaptpubkeygpg O sudo aptkey add 2 Determine the codename of the UbuntuDebian release on your system etcosrelease echo VERSION 14044 LTS Trusty Tahr codename for this system is trusty 3 Create an APT configuration file at etcaptsourceslistdsensulist export CODENAMEyourreleasecodenamehere eg trusty echo deb httpssensuglobalsslfastlynetapt CODENAME main sudo tee etcaptsourceslistdsensulist 4 Update APT sudo aptget update 5 Install Sensu sudo aptget install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 6 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition12 The Sensu client will need a client definition13 and both the sensuserver and sensuapi will need a datastore Redis definition14 mdash all of which are explained below RHELCentOS Sensu Core is installed on RHEL and CentOS systems via a native system installer package ie a rpm file which is available for download from the Sensu Downloads1 page and from YUM package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Install Sensu using YUM recommended installsensucorerepository Sensu packages for Red Hat target currently supported versions of Red Hat Enterprise Linux and their Centos equivalents These packages are generally expected to be compatible with Red Hat derivatives like SuSE Amazon or Scientific Linux but packages are not tested on these platforms The following instructions describe configuring package repository definitions using Yum variables14 as components of the baseurl On Red Hat derivative platforms the value of the releasever variable will not typically align with the RHEL release versions eg 6 or 7 advertised in the Sensu Yum repository Please use 6 or 7 in lieu of releasever on RHEL derivatives depending on whether they use sysv init or systemd respectively NOTE As of Sensu version 027 the yum repository URL has changed to include the releasever variable To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Sensu sudo yum install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 3 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition11 The Sensu client will need a client definition12 and both the sensuserver and sensuapi will need a datastore Redis definition13 mdash all of which are explained below "},{"title":"The Five Minute Install","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/quick-start/five-minute-install","display_name":"Sensu Core 1.0: The Five Minute Install","content":" The Five Minute Install Objective Although Sensus architecture1 is one of its most compelling features and the complete installation guide2 can help you get Sensu installed and configured for a variety of operating environments3 you might not actually care about any of that until you can get Sensu up and running in a development environment for testing purposes This installation guide is intended to help you to install Sensu Core in five minutes or less or well give you your money back guaranteed After completing the steps in this guide you will have a fully functional Sensu Core installation in a standalone4 configuration Installation Requirements What will you need to complete this guide A virtual machine or physical computer running 64bit CentOS 75 with a minimum of 2GB of memory 4GB recommended Familiarity with a commandline interface Willingness to run a shell script downloaded from the internet6 or not7 The commitment to count to ten8 the number of steps in this guide 300 seconds the amount of time it should take to complete this installation Ready Lets get started Install Sensu in 5minutes or less installsensu The following installation steps will help you get Sensu Core installed in a standalone4 on a system running CentOS 75 only For installation on other platforms andor alternative installation configurations please consult the installation guide2 0 Install EPEL if not already done sudo yum install epelrelease y 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo or see Sensu Enterprise repository instructions9 echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Redis 1314 from EPEL sudo yum install redis y 3 Disable Redis protected mode When using Redis 320 or later you will need to edit etcredisconf in order to disable protected moderedissecurity Look for a line that reads protectedmode yes and change it to protectedmode no 4 Enable and start Redis sudo systemctl enable redis sudo systemctl start redis 5 Install Sensu sudo yum install sensu y and if youre using Sensu Enterprise9 lets go ahead and install Sensu Enterprise as well sudo yum install sensuenterprise sensuenterprisedashboard y 6 Configure Sensu server Run the following to set up a minimal client config echo transport name redis api host 127001 port 4567 sudo tee etcsensuconfigjson 7 Configure the Sensu client Run the following to set up a minimal client config echo client environment development subscriptions dev sudo tee etcsensuconfdclientjson 8 Configure a Sensu dashboard Run the following to set up a minimal dashboard config echo sensu name sensu host 127001 port 4567 dashboard host 0000 port 3000 sudo tee etcsensudashboardjson 9 Make sure that the sensu user owns all of the Sensu configuration files sudo chown R sensusensu etcsensu 10 Start the Sensu services Sensu Core users sudo systemctl enable sensuserverapiclient sudo systemctl start sensuserverapiclient Sensu Enterprise users sudo systemctl enable sensuenterpriseenterprisedashboardclient sudo systemctl start sensuenterpriseenterprisedashboardclient 11 Verify that your installation is ready to use by querying the Sensu API using the curl utility and piping the result to the jq utility10 sudo yum install jq curl y curl s http1270014567clients jq If the Sensu API returns a JSON array of Sensu clients similar to this curl s http1270014567clients jq timestamp 1458625739 version 0280 socket port 3030 bind 127001 subscriptions dev environment development address 127001 name client01 you have successfully installed and configured Sensu If you youre using Sensu Enterprise you should also be able to load the Sensu Enterprise Dashboard in your browser by visiting httphostname3000httphostname3000 replacing hostname with the hostname or IP address of the system where the dashboard is installed fiveminutedashboard1imagesfiveminutedashboard1png fiveminutedashboard2imagesfiveminutedashboard2png 1 overviewarchitecture 2 installationoverview 3 installationinstallationstrategies 4 installationinstallationstrategiesstandalone 5 httpswikicentosorgManualsReleaseNotesCentOS7 6 httpgithubcomsensusensubash 7 platformssensuonrhelcentosinstallsensucorerepository 8 httpswwwyoutubecomwatchvJ2D1XF40ok 9 platformssensuonrhelcentosinstallsensuenterpriserepository 10 httpsstedolangithubiojq redissecurity httpsredisiotopicssecurity"},{"title":"Learn Sensu in 15 Minutes","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/quick-start/learn-sensu-basics","display_name":"Sensu Core 1.0: Learn Sensu in 15 Minutes","content":" Learn Sensu in 15 Minutes Sensu was designed to provide a comprehensive monitoring platform for monitoring infrastructure servers services application health and business KPIs mdash and to collect and analyze custom metrics Although most Sensu Core and Sensu Enterprise users eventually end up replacing several other monitoring solutions and standardizing on Sensu ndash they didnt get there by learning about every feature Sensu has to offer ndash they started with the basics This Quick Start Guide is not intended to teach you everything there is to know about Sensu This guide is designed to introduce you to the some basic monitoring concepts using Sensu Core It is our hope that this guide will whet your appetite to learn more about Sensu and feel the monitoringlove1 Overview What will you learn how to do Exercise 1 Registering Sensu clientsexercise1 Exercise 2 Configuring your first Sensu checkexercise2 Exercise 3 Configuring your first Sensu handlerexercise3 Exercise 4 Use the Sensu client input socketexercise4 Exercise 5 Configuring pubsub checks using Sensu subscriptionsexercise5 Quick start requirements Familiarity with a commandline interface related tooling eg text editor curl A standalone Sensu installation preferably created using the five minute installthefiveminuteinstall Access to the Internet for downloading plugins and communicating with external services Access to an SMTP server for sending alerts via email 15 minutes the amount of time it should take to complete these exercises WARNING this guide assumes that you are using a standalone Sensu installation that was setup by following the instructions in the the five minute install2 Please proceed accordingly"},{"title":"Reference","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/_index","display_name":"Sensu Core 1.0: Reference","content":""},{"title":"Aggregates","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/aggregates","display_name":"Sensu Core 1.0: Aggregates","content":" Reference documentation What is a Sensu named aggregatewhatisacheckaggregate When should named aggregates be usedwhenshouldcheckaggregatesbeused How do named aggregates workhowdocheckaggregateswork Example aggregated check resultexampleaggregatedcheckresult Aggregate configurationaggregateconfiguration Example aggregate definitionexampleaggregatedefinition Aggregate definition specificationaggregatedefinitionspecification Aggregate check attributesaggregatecheckattributes What is a Sensu named aggregate whatisacheckaggregate Sensu named aggregates are collections of check results1 accessible via the Aggregates API2 Check aggregates make it possible to treat the results of multiple disparate check results ndash executed across multiple disparate systems ndash as a single result When should named aggregates be used whenshouldcheckaggregatesbeused Check aggregates are extremely useful in dynamic environments andor environments that have a reasonable tolerance for failure Check aggregates should be used when a service can be considered healthy as long as a minimum threshold is satisfied eg are at least 5 healthy web servers are at least 70 of N processes healthy How do named aggregates work howdocheckaggregateswork Check results are included in an aggregate when a check definition includes the aggregate definition attribute3 Check results that provide an aggregate exampleaggregate are aggregated under the corresponding name eg exampleaggregate effectively capturing multiple check results as a single aggregate Example aggregated check result Aggregated check results are available from the Aggregates API2 via the aggregatesname API endpoint An aggregate check result provides a set of counters indicating the total number of client members checks and check results collected with a breakdown of how many results were recorded per status ie ok warning critical and unknown clients 15 checks 2 results ok 18 warning 0 critical 1 unknown 0 total 19 stale 0 Additional aggregate data is available from the Aggregates API including Sensu client members of a named aggregate and the corresponding checks which are included in the aggregate curl s httplocalhost4567aggregateselasticsearchclients jq name i424242 checks elasticsearchservice elasticsearchclusterhealth name 1424243 checks elasticsearchservice Aggregate data may also be fetched per check that is a member of the named aggregate along with the corresponding clients that are producing results for said check curl s httplocalhost4567aggregateselasticsearchchecks jq name elasticsearchservice clients i424242 i424243 name elasticsearchclusterhealth clients i424242 Aggregate configuration Example aggregate definition The following is an example check definition6 a JSON configuration file located at etcsensuconfdcheckaggregateexamplejson checks examplecheckaggregate command dosomethingrb o option aggregate exampleaggregate handle false Aggregate definition specification NOTE aggregates are created via the aggregate Sensu check definition attribute4 The configuration examples provided above and the specification provided here are for clarification and convenience only ie this specification is just a subset of the check definition specification5 and not a definition of a distinct Sensu primitive Aggregate check attributes aggregate "},{"title":"Checks","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/checks","display_name":"Sensu Core 1.0: Checks","content":" Reference documentation What is a Sensu checkwhatisasensucheck Sensu check specificationsensucheckspecification Check commandscheckcommands What is a check commandwhatisacheckcommand Check command argumentscheckcommandarguments How and where are check commands executedhowandwherearecheckcommandsexecuted Check execution platformcheckexecutionplatform How are checks scheduledhowarechecksscheduled Subscription checkssubscriptionchecks Standalone checksstandalonechecks Check resultscheckresults What is a check resultwhatisacheckresult Example check result outputexamplecheckresultoutput Check token substitutionchecktokensubstitution What is check token substitutionwhatischecktokensubstitution Example check tokensexamplechecktokens Check token specificationchecktokenspecification Token substitution syntaxtokensubstitutionsyntax Token substitution default valuestokensubstitutiondefaultvalues Unmatched tokensunmatchedtokens Check configurationcheckconfiguration Example check definitionexamplecheckdefinition Check definition specificationcheckdefinitionspecification Check namingchecknames CHECK attributescheckattributes subdue attributessubdueattributes Custom attributescustomattributes Check result specificationcheckresultspecification check attributescheckresultcheckattributes client attributescheckresultclientattributes What is a Sensu check Sensu checks are commands executed by the Sensu client1 which monitor a condition eg is Nginx running or collect measurements eg how much disk space do I have left Although the Sensu client will attempt to execute any command defined for a check successful processing of check results requires adherence to a simple specification Sensu check specification Result data is output to STDOUT or STDERR2 For standard checks this output is typically a humanreadable message For metrics checks this output contains the measurements gathered by the check Exit status code indicates state 0 indicates OK 1 indicates WARNING 2 indicates CRITICAL exit status codes other than 0 1 or 2 indicate an UNKNOWN or custom status PRO TIP Those familiar with the Nagios3 monitoring system may recognize this specification as it is the same one used by Nagios plugins As a result Nagios plugins can be used with Sensu without any modification At every execution of a check command ndash regardless of success or failure ndash the Sensu client publishes the checks result4 for eventual handling by the event processor5 ie the Sensu server6 Check commands What is a check command Each Sensu check definition7 defines a command and the interval at which it should be executed Check commands are literally executable commands which will be executed on the Sensu client1 run as the sensu user Most check commands are provided by Sensu check plugins8 Check command arguments Sensu check command attributes may include command line arguments for controlling the behavior of the command executable Most Sensu check plugins8 provide support for command line arguments for reusability How and where are check commands executed As mentioned above all check commands are executed by Sensu clients1 as the sensu user Commands must be executable files that are discoverable on the Sensu client system ie installed in a system PATH directory9 NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commands eg command checkhttprb u httpssensuapporg Check execution platform How are checks scheduled Sensu offers two distinct check execution schedulers the Sensu serverserver and the Sensu client10 monitoring agent The Sensu server schedules and publishes check execution requests to client subscriptions via a PublishSubscribe model11 ie subscription checkssubscriptionchecks The Sensu client monitoring agent schedules and executes standalone checks12 on the local system only Because Sensus execution schedulers are not mutually exclusive any Sensu client may be configured to both schedule and execute its own standalone checks as well as execute subscription checks scheduled by the Sensu server Subscription checks Sensu checks which are centrally defined and scheduled by the Sensu server6 are called subscription checks Sensus use of a message bus transport13 for communication enables topicbased communication14 mdash where messages are published to a specific topic and consumers subscribe to one or more specific topics This form of communication is commonly referred to as the publishsubscribe pattern11 or pubsub for short Subscription checks have a defined set of subscribers15 a list of transport13 topics14 that check requests will be published to Sensu clients become subscribers to these topics ie subscriptions via their individual client definition16 subscriptions attribute In practice subscriptions will typically correspond to a specific role andor responsibility eg a webserver database etc Subscriptions are a powerful primitives in the monitoring context because they allow you to effectively monitor for specific behaviors or characteristics corresponding to the function being provided by a particular system For example disk capacity thresholds might be more important or at least different on a database server as opposed to a webserver conversely CPU andor memory usage thresholds might be more important on a caching system than on a file server Subscriptions also allow you to configure check requests for an entire group or subgroup of systems rather than require a traditional 11 mapping Standalone checks Sensu checks which are defined on a Sensu client1 with the check definition attribute17 standalone set to true are called standalone checks The Sensu client provides its own scheduler10 for scheduling standalone checks which ensures scheduling consistency between Sensu clients with identical check definitions assuming that system clocks are synchronized via NTP18 Standalone checks are an important complement to subscription checks19 because they provide a decentralized management alternative for Sensu Check results What is a check result A check result is a JSON20 document published as a message on the Sensu transport13 by the Sensu client upon completion of a check execution Sensu check results include the check definition attributes17 eg command subscribers interval name etc including custom attributes21 the client name the result was submitted from and the output of the check Example check result output check status 0 command checkhttprb u httpssensuapporg subscribers demo interval 60 name sensuwebsite issued 1458934742 executed 1458934742 duration 0637 output CheckHttp OK 200 78572 bytesn client sensudocs NOTE please refer to the check result specification38 below for more information about check results Check token substitution What is check token substitution Sensu check definitions17 may include attributes that you may wish to override on a clientbyclient basis For example check commands23 ndash which may include command line arguments23 for controlling the behavior of the check command ndash may benefit from clientspecific thresholds etc Sensu check tokens are check definition placeholders that will be replaced by the Sensu client with the corresponding client definition attribute16 values including custom attributes24 NOTE Sensu check tokens were formerly known as check command tokens which limited token substitution to the check command attribute command tokens were also sometimes referred to as Sensu client overrides a reference to the fact that command tokens allowed client attributes to override check command arguments23 NOTE Check tokens are processed before check execution therefore token substitution will not apply to check data delivered via the local client socket input46 Example check tokens The following is an example Sensu check definition17 using three check tokens for check command arguments23 In this example the checkdiskusagerb command accepts w warning and c critical arguments to indicate the thresholds as percentages for creating warning or critical events As configured this check will create a warning event at 80 disk capacity unless a different threshold is provided by the client definition ie diskwarning80 and a critical event will be created if disk capacity reaches 90 unless a different threshold is provided by the client definition ie diskcritical90 This example also creates a custom check definition attribute called environment which will default to a value of production unless a different value is provided by the client definition ie environmentproduction checks checkdiskusage command checkdiskusagerb w diskwarning80 c diskcritical90 subscribers production interval 60 environment environmentproduction The following example Sensu client definition16 would provide the necessary attributes to override the diskwarning diskcritical and environment tokens declared above client name i424242 address 1002100 subscriptions production webserver mysql disk warning 75 critical 85 environment development Check token specification Token substitution syntax Check tokens are invoked by wrapping references to client attributes with triple colons ie three colon characters ie Nested Sensu client definition attributes16 can be accessed via dot notation eg diskwarning address would be replaced with the client address attribute26 url would be replaced with a custom attribute24 called url diskwarning would be replaced with a custom attribute24 called warning nested inside of a JSON hash called disk Token substitution default values checktokendefaultvalues Check token default values can be used as a fallback in the event that an attribute is not provided by the client definition16 Check token default values are separated by a pipe character and can be used to provide a fallback value for clients that are missing the declared token attribute urlhttpssensuapporg would be replaced with a custom attribute24 called url If no such attribute called url is included in the client definition the default or fallback value of httpssensuapporg will be used Unmatched tokens If a token substitution default value25 is not provided ie as a fallback value and the Sensu client definition does not have a matching definition attribute a check result4 indicating unmatched tokens will be published for the check execution eg Unmatched check tokens diskwarning Check configuration Example check definition The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdchecksensuwebsitejson This check definition uses a Sensu plugin27 named checkhttprb28 to ensure that the Sensu website is still available The check is named sensuwebsite and it runs on Sensu clients with the production subscription15 at an interval of 60 seconds checks sensuwebsite command checkhttprb u httpssensuapporg subscribers production interval 60 contact ops Check definition specification Check naming checknames Each check definition has a unique check name used for the definition key Every check definition is within the checks configuration scope29 A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex30 wmatchcheckname CHECK attributes The following attributes are configured within the checks CHECK configuration scope29 where CHECK is a valid check name41 type "},{"title":"Clients","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/clients","display_name":"Sensu Core 1.0: Clients","content":" Reference documentation What is a Sensu clientwhatisasensuclient Client keepalivesclientkeepalives What is a client keepalivewhatisaclientkeepalive Client registration the client registryregistrationandregistry Registration eventsregistrationevents Proxy clientsproxyclients How are keepalive events createdkeepaliveevents Client keepalive configurationclientkeepaliveconfiguration Client signatureclientsignature Client subscriptionsclientsubscriptions What is a client subscriptionwhatisasensusubscription Roundrobin client subscriptionsroundrobinclientsubscriptions Client subscription configurationclientsubscriptionconfiguration Client socket inputclientsocketinput What is the Sensu client socketwhatisthesensuclientsocket Example client socket usageexampleclientsocketusage Client socket configurationsocketattributes Standalone check execution schedulerstandalonecheckexecutionscheduler Client configurationclientconfiguration Example client definitionexampleclientdefinition Client definition specificationclientdefinitionspecification client attributesclientattributes socket attributessocketattributes httpsocket attributeshttpsocketattributes keepalive attributeskeepaliveattributes thresholds attributesthresholdsattributes registration attributesregistrationattributes deregistration attributesderegistrationattributes ec2 attributesec2attributes chef attributeschefattributes puppet attributespuppetattributes servicenow attributesservicenowattributes Custom attributescustomattributes What is a Sensu client Sensu clients are monitoring agents1 which are installed and run on every system eg server container etc that needs to be monitored The client is responsible for registering the system with Sensu sending client keepalive2 messages the Sensu heartbeat mechanism and executing monitoring checks Each client is a member of one or more subscriptions3 ndash a list of roles andor responsibilities assigned to the system eg a webserver database etc Sensu clients will subscribe to or watch for check requests4 published by the Sensu server5 via the Sensu Transport6 execute the corresponding requests locally and publish the results of the check back to the transport to be processed by a Sensu server Client keepalives What is a client keepalive Sensu Client keepalives are the heartbeat mechanism used by Sensu to ensure that all registered Sensu clients are still operational and able to reach the Sensu Transport6 Sensu clients publish keepalive messages containing client configuration data to the Sensu transport every 20 seconds If a Sensu client fails to send keepalive messages over a period of 120 seconds by default the Sensu server or Sensu Enterprise will create a keepalive event7 Keepalives can be used to identify unhealthy systems and network partitions among other things and keepalive events can trigger email notifications and other useful actions Client registration the client registry registrationandregistry In practice client registrations happens when a Sensu server processes a client keepalive message for a client that is not already registered in the Sensu client registry based on the configured client name or source attribute This client registry is stored in the Sensu data store8 and is accessible via the Sensu Clients API9 All Sensu client data provided in client keepalive messages gets stored in the client registry which data is used to add context to Sensu Events7 and to detect Sensu clients in an unhealthy state Registration events If a Sensu event handler30 named registration is configured or if a Sensu client definition includes a registration attribute31 the Sensu server5 will create and process a Sensu event7 for the client registration applying any configured filters26 and mutators32 before executing the configured handlers30 Registration events are useful for executing onetime handlers for new Sensu clients For example registration event handlers can be used to update external Configuration Management Databases CMDBs34 such as ServiceNow35 etc To configure a registration event handler please refer to the Sensu event handler documentation30 for instructions on creating a handler named registration Alternatively please see Client definition registration attributes31 below WARNING registration events are not stored in the event registry in the Sensu data store8 so they are not accessible via the Sensu API however all registration events are logged in the Sensu server5 log Proxy clients Sensu proxy clients formerly known as Justintime or JIT clients are dynamically created clients added to the client registry if a client does not already exist for a check result Proxy client registration differs from keepalivebased registration because the registration event happens while processing a check result not a keepalive message If a check result includes a source attribute a proxy client will be created for the source and the check result will be stored under the newly created client Sensu proxy clients allow Sensu to monitor external resources eg on systems andor devices where a sensuclient cannot be installed such a network switches using the defined check source to create a proxy clients for the external resource Once created proxy clients work much in the same way as any other Sensu client eg they are used to store check execution history and provide context within event data NOTE keepalive monitoring is not supported for proxy clients as they are inherently unable to run a sensuclient Proxy client example Proxy clients are created when a check result includes a source attribute as follows check status 0 command checkhttprb u httpssensuapporg subscribers demo interval 60 name sensuwebsite source sensuapporg issued 1458934742 executed 1458934742 duration 0637 output CheckHttp OK 200 78572 bytesn client sensudocs NOTE this source attribute can be provided in a check definition14 or included in a check result published to the Sensu client input socket36 By default proxy client data includes a minimal number of attributes The following is an example of proxy client data that is added to the registry name switchx address unknown subscriptions keepalives false The Sensu API can be used to update proxy client data in the client registry To update proxy client data please refer to the Client API reference documentation9 Create a proxy client via the client socket The following is an example of how to create a proxy client payload via the client socketclientsocketinput using netcat echo source mysql01 name app01 output could not connect to mysql status 1 nc localhost 3030 How are keepalive events created keepaliveevents Sensu servers including Sensu Enterprise monitor the Sensu client registry for stale client data detecting clients that have failed to send client keepalive messages10 for more than 120 seconds by default When a Sensu server detects that a client hasnt sent a keepalive message within the configured threshold the Sensu server or Sensu Enterprise will create an event this is different from how events are created for monitoring checks see How are Sensu events created11 Client keepalive configuration For more information on configuring client keepalives please see the client keepalive attribute reference documentation12 below Sensu client keepalives are published to the Sensu transport every 20 seconds Client keepalive behavior can be configured per Sensu client allowing each Sensu client to set its own alert thresholds and keepalive event handlers By default client data is considered stale if a keepalive hasnt be received in 120 seconds WARNING By default keepalive events will be sent to the Sensu handler named keepalive if defined or the default handler will be used To configure the keepalive check for a Sensu client please refer to the client keepalive attributes reference documentation12 Client signature Sensu client definitions may specify a unique string identifier as their signature which is included in each keepalive message Once a client advertises a signature via keepalives the server will expect that signature to be present in any keepalives or check results originating from the client Any keepalives or check results which do not contain a matching signature will be dropped with an invalid client signature warning in the log A client can begin to use a signature if one was not previously configured but removing a client signature requires deleting the client Providing a unique client signature prevents other clients from accidentally or maliciously submitting keepalives or check results using the same client name Client subscriptions What is a client subscription whatisasensusubscription Sensus use of the publishsubscribe pattern of communication13 allows for automated registration deregistration of ephemeral systems At the core of this model are Sensu client subscriptions Each Sensu client has a defined set of subscriptions a list of roles andor responsibilities assigned to the system eg a webserver database etc These subscriptions determine which monitoring checks are executed by the client Client subscriptions allow Sensu to request check executions on a group of systems at a time instead of a traditional 11 mapping of configured hosts to monitoring checks Sensu checks target Sensu client subscriptions using the check definition attribute subscribers14 Roundrobin client subscriptions Roundrobin client subscriptions allow checks to be executed on a single client within a subscription in a roundrobin fashion To create a roundrobin client subscription prepend the subscription name with roundrobin eg roundrobinelasticsearch Any check that targets the roundrobinelasticsearch subscription will have its check requests sent to clients in a roundrobin fashion meaning only one member client in the subscription will execute a roundrobin check each time it is published The following is a Sensu client definition that includes a roundrobin subscription client name i424242 address 8888 subscriptions production webserver roundrobinwebserver The following is a Sensu check definition that targets a roundrobin subscription checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers roundrobinwebserver interval 20 Client subscription configuration To configure Sensu client subscriptions for a client please refer to the client subscriptions attribute reference documentation15 In addition to the subscriptions defined in the client configuration Sensu clients also subscribe automatically to a subscription matching their client name For example a client named i424242 will subscribe to check requests for the subscription clienti424242 This makes it possible to generate adhoc check requests targeting specific clients via the request API49 Client socket input What is the Sensu client socket Every Sensu client has a TCP UDP and HTTP socket listening for external check result input The Sensu client sockets listen by default on localhost port 3030 for TCPUDP and 3031 for HTTP and expect JSON formatted check results allowing external sources eg your web application backup scripts etc to push check results without needing to know anything about Sensus internal implementation An excellent client socket use case example is a web application pushing check results to indicate database connectivity issues To configure the Sensu client socket for a client please refer to the client socket attributes16 HTTP Socket The HTTP socket just like the TCP and UDP sockets accepts check results but it requires a wellformed HTTP request and exposes other functionality that is not possible with the raw TCPUDP sockets In exchange for a bit more complexity the HTTP socket interface has the advantage of being more expressive than a raw TCPUDP socket both in the requests that it accepts and how it responds and so exposes more functionality The following endpoints are available for the HTTP socket GET info This endpoint returns 200 OK with some basic Sensu information like the version and transport metrics POST results This endpoint expects an applicationjson body with a check result GET settings This endpoint responds with 200 OK and the sensu configuration Due to the possible sensitive nature of the client settings eg passwords might be in the config this endpoint is protected using HTTP basic authentication and by default the information returned is redacted eg common config keys like password have their values replaced by REDACTED See the redact configuration option if you need control over what is redacted This endpoint accepts the optional query string redactedfalse to disable redaction Refer to the http client socket attributes50 for details on configuring the HTTP basic authentication details that this endpoint requires GET brew This endpoint gets you some fresh coffee Try it Any requests for unknown endpoints will get a 404 with some help information in the body At the moment only unsecure HTTP no HTTPS is supported To configure the Sensu HTTP client socket please refer to the http client socket attributes50 Example client socket usage The following is an example demonstrating external check result input via the Sensu client TCP socket The example uses Bashs builtin devtcp file to communicate with the Sensu client socket echo name app01 output could not connect to mysql status 1 devtcplocalhost3030 Netcat17 can also be used instead of the TCP file echo name app01 output could not connect to mysql status 1 nc localhost 3030 You can do the same using the HTTP socket curl v H ContentType applicationjson X POST d name app01 output could not connect to mysql status 1 localhost 3031 Creating a dead mans switch The Sensu client sockets in combination with check TTLs can be used to create whats commonly referred to as dead mans switches Outside of the software industry a dead mans switch is a switch that is automatically triggered if a human operator becomes incapacitated source Wikipedia18 Sensu is more interested in detecting silent failures than incapacited human operators By using Check TTLs Sensu is able to set an expectation that a Sensu client will continue to publish results for a check at a regular interval If a Sensu client fails to publish a check result and the check TTL expires Sensu will create an event to indicate the silent failure For more information on check TTLs please refer to the check attributes reference documentation14 A great use case for the Sensu client socket is to create a dead mans switch for backup scripts to ensure they continue to run successfully at regular intervals If an external source sends a Sensu check result with a check TTL to the Sensu client socket Sensu will expect another check result from the same external source before the TTL expires The following is an example of external check result input via the Sensu client TCP socket using a check TTL to create a dead mans switch for MySQL backups The example uses a check TTL of 25200 seconds or 7 hours A MySQL backup script using the following code would be expected to continue to send a check result at least once every 7 hours or Sensu will create an event7 to indicate the silent failure echo name backupmysql ttl 25200 output backed up mysql successfully sizemb568 status 0 nc localhost 3030 echo name backupmysql ttl 25200 output failed to backup mysql status 1 nc localhost 3030 Standalone check execution scheduler In addition to subscribing to client subscriptions3 and executing check requests published by the Sensu server19 the Sensu client is able to maintain its ownseparate schedule for standalone checks20 Because the Sensu client shares the same check scheduling algorithm21 as the Sensu server it is not only possible to have consistency between subscription checks22 and standalone checks mdash its also possible to maintain consistency between standalone checks across an entire infrastructure assuming that system clocks are synchronized via NTP23 Client configuration Example client definition The following is an example Sensu client definition a JSON configuration file located at etcsensuconfdclientjson This client definition provides Sensu with information about the system on which it resides This is a production system running a web server and a MySQL database The client name attribute is required in the definition and must be unique client name i424242 address 8888 subscriptions production webserver mysql socket bind 127001 port 3030 Client definition specification The client definition uses the client configuration scope24 client attributes name "},{"title":"Sensu Configuration","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/configuration","display_name":"Sensu Core 1.0: Sensu Configuration","content":" Reference documentation How does Sensu load configurationhowdoessensuloadconfiguration Sensu configuration sourcessensuconfigurationsources Configuration load orderconfigurationloadorder Configuration mergingconfigurationmerging Configuration loggingconfigurationlogging Configuration scopesconfigurationscopes Configuration scopes are relativeconfigurationscopesarerelative Configuration scope examplesconfigurationscopeexamples Sensu service init configurationsensuservicescriptconfiguration Sensu service init configuration variablessensuservicescriptconfigurationvariables Sensu command line interfaces and argumentssensucommandlineinterfacesandarguments Sensu environment variablessensuenvironmentvariables Sensu configuration specificationsensuconfigurationspecification Example sensu configurationexamplesensuconfiguration Toplevel configuration scopestoplevelconfigurationscopes How does Sensu load configuration Sensu configuration sources By default the main configuration file for the Sensu platform is located at etcsensuconfigjson However Sensu also provides support for loading configuration from a directory containing multipledisparate configuration files andor environment variables Sensu merges configuration parameters provided from these three distinct configuration sources environment variables configuration file and configuration directories into a single Hash This type of Hash merging is often called deep merging and is probably the most important concept to understand when learning how to configure Sensu Configuration load order As previously mentioned Sensu configuration can be provided via three distinct sources environment variables a configuration file and one or more directories containing configuration files Sensu loads configuration from these sources in the following order 1 The Sensu service scripts provide command line arguments1 for starting the Sensu services eg the location of the configuration file c the location of configuration directories d etc 2 Sensu will load configuration from environment variables2 3 Sensu loads configuration from the configuration file by default this is located at etcsensuconfigjson 3 Sensu loads configuration snippets from configuration files located in a Sensu configuration directory by default this is etcsensuconfd however it is possible to configure Sensu to load from multiple configuration directories see command line arguments1 below NOTE configuration file load order is dictated by a json glob of the configuration directory as such it is strongly recommended to avoid a dependency on configuration directory file load order eg if youre attempting to name configuration files in the configuration directory to control load order youre doing it wrong Configuration merging configurationmerging To explain how Sensu merges configuration parameters from the various disparate configuration sources please note the following example scenario 1 The Sensu runtime configuration is stored as an inmemory Hash object For the purposes of providing a visual example lets imagine that this Hash object is actually a JSON document which begins life as Sensu is started as an empty JSON document Initial Sensu configuration Hash in memory When Sensu is started it will begin to collect configuration from environment variables a configuration file and one ore more configuration directories which configuration parameters will be used to build up this configuration Hash 2 For the purposes of this example lets assume that the first configuration snippet that Sensu encounters is a configuration file located at etcsensuconfigjson with the following contents New config file on disk at etcsensuconfigjson rabbitmq host 100110 vhost sensu user sensu password secret redis host 100120 port 6379 password secret At this time the Sensu configuration Hash in memory will look like Updated Sensu configuration Hash in memory rabbitmq host localhost vhost sensu user sensu password secret redis host localhost port 6379 password secret 3 Now lets see what happens when Sensu encounters another configuration snippet eg a file located in a Sensu configuration directory such as etcsensuconfdrabbitmqjson New config file contents on disk at etcsensuconfdrabbitmqjson rabbitmq host 100110 user sensu01 password newsecret The second configuration snippet provided configuration for the rabbitmq scope some of which already exists in the Sensu configuration Hash in memory but also missing some attributes which already exist in the Sensu configuration Hash ie vhost The result of merging this configuration snippet into the Sensu configuration Hash in memory is as follows Updated Sensu configuration Hash in memory rabbitmq host 100110 vhost sensu user sensu01 password newsecret redis host localhost port 6379 password secret The result of the deep merge is that the configuration snippet provided by etcsensuconfdrabbitmqjson was overlaid on the Sensu configuration Hash in memory essentially overwriting the previously existing values provided by the configuration snippet while not discarding configuration attributes that already existed in the rabbitmq configuration scope even though they werent provided by the configuration snippet Configuration logging As configuration snippets are applied to the Sensu configuration Hash ie during deep merge all configuration changes are logged to the corresponding log file eg the Sensu server API or Client logs Configuration scopes Because Sensu configuration can be provided in so many different sources it is important to understand that ndash regardless of the physical location of the configuration data eg from the main configuration file or from a configuration file in a configuration directory ndash all configuration must be placed in the appropriate scope in the JSON file ie the named level that attributes should be defined in For example the root or scope of the Sensu configuration would be any attributes defined at the top level of a JSON configuration file such as the configuration attributes for rabbitmq redis or the api rabbitmq redis api Attributes defined in the root scope or top level provide the corresponding scopes for additional configuration settings eg the rabbitmq attribute defined above provides the rabbitmq scope a JSON Hash for the actual RabbitMQ configuration settings Configuration scopes are relative Throughout the Sensu documentation whenever a configuration scope is mentioned it is describing the named level that the corresponding configuration attributes should be defined within which may be relative to any potentially related scopes Please note the following examples Configuration scope examples The client scope client In the Sensu Client reference documentation3 it explains that The client definition uses the client definition scope Which means that regardless where you might store a configuration file containing Sensu client configuration on disk assuming it is in a location that will be loaded by Sensu the file should contain a top level attribute called client client The client socket scope socket The Sensu Client reference documentation3 continues to explain that Sensu clients may have a socket attribute and that there are additional Client Socket attributes4 which should be defined within the socket scope The following attributes are configured within the socket client definition attribute scope Which means that regardless where you might store a configuration file containing Sensu Client Socket configuration on disk assuming it is in a location that will be loaded by Sensu the file should contain a top level attribute called client and another attribute defined within the client scope or level called socket client socket Thus when the Client Socket reference documentation continues to explain that the bind and port attributes should be defined in the Client Socket scope it means they should live under the socket level of the JSON file regardless of where you might store a configuration file containing said configuration attributes on disk assuming it is in a location that will be loaded by Sensu client socket bind 0000 port 3031 Sensu service service configuration sensuservicescriptconfiguration The Sensu services are managed by service scripts that are provided in the Sensu packages The Sensu service scripts are able to startstoprestart the corresponding Sensu services eg the Sensu server API client etc The default Sensu service scripts and related configuration files containing configuration variables are located as follows etcdefaultsensu sourced by the init scripts to provide configuration variables5 etcinitdsensuservice shared init script used by the Sensu service init scripts etcinitdsensuserver etcinitdsensuapi etcinitdsensuclient etcinitdsensuenterprise etcinitdsensuenterprisedashboard Sensu service script configuration variables sensuservicescriptconfigurationvariables The following configuration variables can be set in the service scripts for the platform EMBEDDEDRUBY "},{"title":"Data Store","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/data-store","display_name":"Sensu Core 1.0: Data Store","content":" Reference documentation What is the Sensu data storewhatisthesensudatastore What is the Sensu data store Sensu services use a data store Redis1 to persist monitoring data including the Sensu client registry check results check execution history and current event data All Sensu Core server and API processes ie sensuserver and sensuapi or the Sensu Enterprise process ie sensuenterprise require access to the same instance of the defined data store ie a Redis server or cluster NOTE unlike the Sensu Transport2 ndash which is a Sensu library that allows Sensu to be used with different transport backends eg RabbitMQ or Redis etc ndash the Sensu Data Store is not abstracted andor extensible At this time Redis is the only data store supported by Sensu Having said that because this may change at some point in the future we are beginning to use the term data store in the Sensu documentation as an abstraction for the functions currently provided by Redis 1 redis 2 transport"},{"title":"Events","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/events","display_name":"Sensu Core 1.0: Events","content":" Reference documentation What are Sensu eventswhataresensuevents How are Sensu events createdhowaresensueventscreated Event actionseventactions Event dataeventdata Example eventexampleevent Event data specificationeventdataspecification EVENT attributeseventattributes check attributescheckattributes client attributesclientattributes What are Sensu events whataresensuevents Sensu events are created to acknowledge that something potentially noteworthy has occurred which events may then be processed by one or more event handlers1 to do things such as send an email or invoke an automated action Every Sensu event provides context called event data2 which contains information about the originating Sensu client3 and the corresponding check result4 How are Sensu events created A Sensu Event is created every time a check result10 is processed by the Sensu server regardless of the status indicated by the check result An Event is created by collating data from the check result the client registry22 and additional context added at the time of processing Event actions Sensu supports the following event actions create Indicates a check result status change from zero to nonzero resolve Indicates a check result status change from a nonzero to zero flapping Indicates a rapid change in check result status NOTE for more information on event actions please see the Sensu event data specification5 below Event data Example event The following is an example Sensu event By default event data is JSON formatted making it languageindependent and fairly human readable id ef6b87d21f89439f8bea33881436ab90 action create timestamp 1460172826 occurrences 2 check type standard totalstatechange 11 history 0 0 1 1 2 2 status 2 output No keepalive sent from client for 230 seconds 180 executed 1460172826 issued 1460172826 name keepalive thresholds critical 180 warning 120 client timestamp 1460172596 version 100 socket port 3030 bind 127001 subscriptions production environment development address 127001 name client01 Event data specification EVENT attributes The following attributes are available in the root scope of the event data JSON document id "},{"title":"Extensions","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/extensions","display_name":"Sensu Core 1.0: Extensions","content":" Reference documentation What is a Sensu extensionwhatisasensuextension Installing Sensu extensionsinstallingsensuextensions Installing Sensu legacy extensionsinstallingsensulegacyextensions Configuring Sensu extensionsconfiguringsensuextensions The Sensu Extension gemthesensuextensiongem The Sensu Extensions gem templatethesensuextensionsgemtemplate What is a Sensu extension Unlike Sensu plugins which spawn a new child process at every execution Sensu extensions execute directly inside the EventMachine reactor thread1 of a Sensu client or server process Because they avoid the overhead of spawning a new process at every invocation Sensu extensions can fulfill the same functions as plugins acting as checks filters mutators or handlers but with much greater efficiency WARNING While their performance characteristics are quite desirable Sensu extensions come with major caveats extensions have full access to Sensus internals and any extension which blocks the EventMachine reactor for any period of time eg blocking on disk IO or network request will have a very significant negative impact on Sensus performance and functionality The details of evented programming as implemented by EventMachine are outside the scope of this document but Javier Acero has helpfully written on the implications of blocking the reactor2 Installing Sensu extensions As of version 026 Sensu supports loading extensions from properly packaged gems This approach takes advantage of the existing RubyGems infrastructure and tools to make publishing and installing Sensu extensions easy Use sensuinstall to install Sensu Extensions The Sensu Core package provides a tool called sensuinstall a simple wrapper around the Ruby gem utility The Sensu Install tool sensuinstall simplifies installation of Rubybased extensions The sensuinstall tool can be run with one or more arguments that determine the actions to take sensuinstall h Usage sensuinstall options h help Display this message v verbose Enable verbose logging p plugin PLUGIN Install a Sensu PLUGIN P plugins PLUGINPLUGIN PLUGIN or commadelimited list of Sensu plugins to install e extension EXTENSION Install a Sensu EXTENSION E extensions EXTENSIONEXT EXTENSION or commadelimited list of Sensu extensions to install s source SOURCE Install Sensu plugins and extensions from a custom SOURCE c clean Clean up remove other installed versions of the plugins andor extensions x proxy PROXY Install Sensu plugins and extensions via a PROXY URL NOTE sensuinstall is only available in Sensu Core 0210 Sensu extensions can be installed using the sensuinstall executable EXAMPLE installingsensuextensionsfromgemsexample sensuinstall e sensuextensionssystemprofile Or sensuinstall can prepend sensuextensions automatically sensuinstall e systemprofile Configuring Sensu to load extensions Once an extension is installed via gem Sensu must be explicitly configured to load the extension This is accomplished by providing configuration under the top level extensions attribute EXAMPLE configuringextensionloadingfromgemsexample extensions systemprofile gem sensuextensionssystemprofile EXAMPLE configuringextensionloadingfromgemswversionexample Configuration may optionally include a version specification extensions systemprofile gem sensuextensionssystemprofile version 100 Once extensions have been explicitly enabled in Sensus configuration they will be loaded the next time Sensu processes are restarted Informational messages are printed to the log when extensions are loaded EXAMPLE configuringextensionloadingfromgemslogexample timestamp20160808T1637257112750000levelwarnmessageloading extension gemgemsensuextensionssystemprofileversion100 timestamp20160808T1637257114190000levelwarnmessagerequiring extension gemrequiresensuextensionssystemprofile timestamp20160808T1637257115790000levelwarnmessageloaded extensiontypechecknamesystemprofiledescriptioncollects system metrics using the graphite plaintext format NOTE Explicit extension loading does not apply to legacy extensionsinstallingsensulegacyextensions which are loaded by virtue of being placed in the extension directory Installing Sensu legacy extensions Sensu extensions which are not properly packaged as gems are considered legacy meaning they predate the new specification for loading Sensu Extensions from gems These legacy extensions are loaded from the directory specified by the extensiondir flag provided when Sensu processes are started8 On most systems this defaults to etcsensuextensions as specified by the command flags passed to the sensuclient or sensuserver process via the service supervision scheme in use eg init runit upstart systemd etc Extensions should be installed directly into the extensions directory When an legacy extension has dependencies on thirdparty Ruby gems or other external applications those dependencies must be installed into the Sensu embedded Ruby environment as well Configuring Sensu Extensions The configurability of Sensu extensions is entirely a function of the extension code For example filters and mutators cannot be applied to an extension via a standard handler definition Instead these aspects of the extensions configuration must be defined in code by overriding the SensuExtensionBase definition method10 EXAMPLE extensionconfigurationincodeexample def definition type extension name name filters occurrences mutator onlycheckoutput end The above code would configure the associated extension to apply the occurrences filter and then the onlycheckoutput mutator prior to executing the extensions custom run method By virtue of being loaded into the Sensu client or server process Sensu extensions have access to the running Sensu configuration As such an extension can make use of any available configuration scopes9 but the prevailing convention is for extensions to use unique toplevel configuration scopes The systemprofile4 extension installed in a previous example looks to the toplevel systemprofile configuration scope The following configuration added to etcsensuconfd would change the systemprofile extensions Graphite path prefix from a default value of system to profile EXAMPLE providingextensionconfigurationexample systemprofile pathprefix profile The sensuextension gem Unlike Sensu plugins which may be written in any programming language Sensu extensions must be written in Ruby The sensuextension5 gem provides SensuExtensionBase and other classes which Sensu extensions should subclass The sensuextensions gem template The sensuextensions gem template12 provides a starting point for those who wish to author their own Sensu extension as a Ruby gem It is recommended that your gem follow the naming pattern sensuextensionNAME in order to ensure it can be easily installed with sensuinstall NOTE if you choose not to use this template for your extension note the directory structure it demonstrates eg placing extension code under libsensuextensions are required to ensure the extension is properly loaded Example extensions For simple examples of Sensu extensions consider the onlycheckoutput mutator6 or the debug handler7 both of which ship with Sensu You can find other Sensu extensions some of which are packaged in the Sensu Core distribution by searching RubyGems11 1 httpsgithubcomeventmachineeventmachinewikiGeneralIntroduction 2 httpjavieracerocomblogstartingwitheventmachineiv 4 httpsrubygemsorggemssensuextensionssystemprofile 5 httpsgithubcomsensusensuextension 6 httpsgithubcomsensuextensionssensuextensionsonlycheckoutputblobmasterlibsensuextensionsonlycheckoutputrb 7 httpsgithubcomsensuextensionssensuextensionsdebugblobmasterlibsensuextensionsdebugrb 8 configurationsensuserviceinitconfiguration 9 configurationconfigurationscopes 10 httpsgithubcomsensusensuextensionblobv150libsensuextensionrbL42L50 11 httpsrubygemsorgsearchutf8E29C93querysensuextensions 12 httpsgithubcomsensuextensionstemplate"},{"title":"Filters","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/filters","display_name":"Sensu Core 1.0: Filters","content":" Reference documentation What are Sensu Filterswhataresensufilters When to use a filterwhentouseafilter How do Sensu filters workhowdosensufilterswork Inclusive and exclusive filteringinclusiveandexclusivefiltering Filter attribute comparisonfilterattributecomparison Filter attribute evaluationfilterattributeevaluation Filter attribute eval tokensfilterattributeevaltokens What are filter attribute eval tokenswhatarefilterattributeevaltokens Example filter attribute eval tokenexamplefilterattributeevaltoken Filter attribute eval token specificationfilterattributeevaltokenspecification Eval token interpolationfilterattributeevaltokenspecification Eval token default valuesevaltokendefaultvalues Filter configurationfilterconfiguration Filter definition specificationfilterdefinitionspecification Filter namingfilternaming Filter attributesfilterattributes when attributeswhenattributes What are Sensu filters Sensu Filters also called Event Filters allow you to filter events destined for one or more event Handlers1 Sensu filters inspect event data and match its keysvalues with filter definition attributes to determine if the event should be passed to an event handler Filters are commonly used to filter recurring events ie to eliminate notification noise and to filter events from systems in preproduction environments When to use a filter Sensu Filters allow you to configure conditional logic to be applied during the event processing flow Compared to executing an event handler evaluating event filters is an inexpensive operation which can provide overall monitoring performance gains by reducing the number of events that need to be handled Additionally by using Sensu Filters instead of building conditional logic into custom Handlers conditional logic can be applied to multiple Handlers and monitoring configuration stays DRY How do Sensu filters work Sensu Filters are applied when Event Handlers1 are configured to use one or more Filters Prior to executing a Handler the Sensu server will apply any Filters configured for the Handler to the Event Data If the Event is not removed by the Filters ie filtered out the Handler will be executed The filter analysis flow performs these steps When the Sensu server is processing an Event it will check for the definition of a handler or handlers Prior to executing each Handler the Sensu server will first apply any configured filter or filters for the Handler If multiple filters are configured for a Handler they are executed sequentially Filter attributes are compared with Event data Filters can be inclusive only matching events are handled or exclusive matching events are not handled As soon as a Filter removes an Event ie filters it out no further analysis is performed and the Event Handler will not be executed NOTE Filters specified in a handler set16 definition have no effect Filters must be specified in individual handler definitions Inclusive and Exclusive Filtering Filters can be inclusive negate false or exclusive negate true Configuring a handler to use multiple inclusive filters is the equivalent of using an AND query operator ie only handle events if they match inclusive filters x AND y AND z Configuring a handler to use multiple exclusive filters is the equivalent of using an OR operator ie only handle events if they dont match x OR y OR z Inclusive filtering by setting the filter definition attribute2 negate false only events that match the defined filter attributes are handled Exclusive filtering by setting the filter definition attribute2 negate true events are only handled if they do not match the defined filter attributes NOTE unless otherwise configured in the filter definition2 the default filtering behavior is inclusive filtering ie negate false Filter attribute comparison Filter attributes are compared directly with their event data3 counterparts For inclusive filter definitions4 ie negate false matching attributes will result in the filter returning a true value for exclusive filter definitions4 ie negate true matching attributes will result in the filter returning a false value ie the event does not pass through the filter Filters that return a true value will continue to be processed mdash via additional filters if defined mutators if defined and handlers EXAMPLE The following example filter definition entitled productionfilter will match event data3 with a custom client definition attribute5 environment production filters productionfilter negate false attributes client environment production Filter attribute evaluation When more complex conditional logic is needed than direct filter attribute comparison10 Sensu filters provide support for attribute evaluation using Ruby expressions When a Filter attribute value is a string beginning with eval the remainder is evaluated as a Ruby expression The Ruby expression is evaluated in a sandbox and provided a single variable value which is equal to the event data attribute value being compared If the evaluated expression returns true the attribute is a match Example Handling state change only Some teams migrating to Sensu have asked about reproducing the behavior of their old monitoring system which alerts only on state change This statechangeonly inclusive4 filter provides such filters statechangeonly negate false attributes occurrences eval value 1 action resolve This eval filter is effective because value of event occurrences is reset on each state change except when the event action is resolve The resolve action is set on an event when its check result status is 0 following one or more prior nonzero statuses Example Handling repeated events The following example filter definition entitled filterinterval60hourly will match event data3 with a check interval6 of 60 seconds and an occurrences value of 1 ie the first occurrence OR any occurrences value that is evenly divisible by 60 via a modulo operator7 calculation ie calculating the remainder after dividing occurrences by 60 Note that negate is true making this an exclusive filter4 if evaluation returns false the event will be handled filters filterinterval60hourly negate true attributes check interval 60 occurrences eval value 1 value 60 0 The next example will apply the same logic as the previous example but for checks with a 30 second interval filters filterinterval30hourly negate true attributes check interval 30 occurrences eval value 1 value 120 0 NOTE The effect of both of these filters is that they will only allow an events with 30second or 60second intervals to be handled1 on the first occurrence of the event and again every hour Previous examples in the older Sensu docs have not included the check interval 60 attribute which has confused some users because filtering based on occurrences alone assumes some understanding of the relationship between occurrences and interval which isnt always obvious Example Handling events during office hours only This filter evaluates the event timestamp to determine if the event occurred between 9 AM and 5 PM on a weekday Remember that negate defaults to false so this is an inclusive filter If evaluation returns false the event will not be filters ninetofiver negate false attributes timestamp eval 12345includeTimeatvaluewday Timeatvaluehourbetween917 Filter attribute eval tokens What are filter attribute eval tokens Sensu filters attributes may be evaluated using Ruby expressions10 which evaluations provide support for comparing a single event attribute variable against a basic logical statement eg is value greater than 60 When additional variables are needed beyond the single value variable provided by eval tokens may be used Eval tokens are filter attribute placeholders that can be replaced by Sensu check definition attributes6 and client definition attributes8 including custom attributes Example filter attribute eval token The following is an example Sensu filter definition2 which is using a token checkoccurrences60 as a secondary attribute in the Ruby eval expression The token will be replaced by the check definition attribute6 named occurrences if it is defined otherwise it will use the fallback value of 60 filters occurrences negate true attributes occurrences eval value checkoccurrences60 This example would be useful for filtering events that dont exceed a minimum number of occurrences as configured in the check definition Filter attribute eval token specification Eval token substitution syntax Eval tokens are invoked by wrapping event data attributes with triple colons ie three colon characters before and after the attribute ie Nested event data attributes3 may be accessed via dot notation eg checkoccurrences occurrences would be replaced with the event occurrences data11 checkmythreshold would be replaced with a custom check definition attribute12 called mythreshold Eval token default values Eval token default values can be used as a fallback in the event that an eval token attribute13 is not satisfied by event data3 Eval token default values are separated by a pipe character and can be used to provide a fallback value for events that are missing the declared token attribute checkoccurrences60 would be replaced with a check definition attribute6 called occurrences If occurrences is not defined in the check definition the default or fallback value of 60 will be used NOTE if an eval token default value is not provided ie as a fallback value and the event data does not contain a matching eval token attribute13 an log entry indicating an error called filter eval unmatched tokens will be published to the Sensu server log Filter configuration Example filter definition examplefilterdefinition The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterproductionjson This is an inclusive filter definition called production The effect of this filter is that only events with the custom client attribute5 environment production will be handled filters production attributes client environment production negate false Filter definition specification Filter naming Each filter definition has a unique name used for the definition key Every filter definition is within the filters definition scope A unique string used to nameidentify the filter Cannot contain special characters or spaces Validated with Ruby regex9 wmatchfiltername Filter attributes negate "},{"title":"Handlers","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/handlers","display_name":"Sensu Core 1.0: Handlers","content":" Reference documentation What is a Sensu event handlerwhatisasensueventhandler Handler typeshandlertypes The default handlerthedefaulthandler Pipe handlerspipehandlers Pipe handler commandspipehandlercommands What is a pipe handler commandwhatisapipehandlercommand Pipe handler command argumentspipehandlercommandarguments How and where are pipe handler commands executedhowandwherearepipehandlercommandsexecuted TCPUDP handlerstcpudphandlers Transport handlerstransporthandlers Handler setshandlersets Handler configurationhandlerconfiguration Example handler definitionexamplehandlerdefinition Handler definition specificationhandlerdefinitionspecification Handler nameshandlernames HANDLER attributeshandlerattributes socket attributes TCPUDP handlerssocketattributes pipe attributes Transport handlerspipeattributess What is a Sensu event handler Sensu event handlers are actions executed by the Sensu server1 on events2 such as sending an email alert creating or resolving an incident eg in PagerDuty ServiceNow etc or storing metrics in a timeseries database eg Graphite Handler types There are several types of handlers The most common handler type is the pipe handler which works very similarly to how checks3 work enabling Sensu to interact with almost any computer program via standard streams4 Pipe handlers Pipe handlers pipe event data into arbitrary commands via STDIN TCPUDP handlers TCP and UDP handlers send event data to a remote socket eg external API Transport handlers Transport handlers publish event data to the Sensu transport5 Handler sets Handler sets also called set handlers are used to group event handlers making it easy to manage groups of actions that should be executed for certain types of events The default handler Sensu expects all events2 to have a corresponding handler Event handlers may be configured in check definitions16 however if no handler or handlers have been configured Sensu will attempt to handle the event using a handler named15 default The default handler is only a reference ie Sensu does not provide a builtin default handler so if no handler definition exists for a handler named default Sensu will log an error indicating that the event was not handled because a default handler definition does not exist To use one or more existing handlers as the default you can create a Set handler17 called default and include the existing handlers in the set Pipe handlers Pipe handlers are external commands that can consume event data6 via STDIN Example pipe handler definition handlers examplepipehandler type pipe command dosomethingawesomerb o options Pipe handler commands What is a pipe handler command Pipe handler definitions include a command attribute which are literally executable commands which will be executed on a Sensu server1 as the sensu user Pipe handler command arguments Pipe handler command attributes may include command line arguments for controlling the behavior of the command executable Most Sensu handler plugins11 provide support for command line arguments for reusability How and where are pipe handler commands executed As mentioned above all pipe handlers are executed by a Sensu server1 as the sensu user Commands must be executable files that are discoverable on the Sensu server system ie installed in a system PATH directory7 NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commands eg command handlerircrb TCPUDP handlers tcpudphandlers TCP and UDP handlers enable Sensu to forward event data to arbitrary TCP or UDP socketst for external services to consume eg thirdparty APIs Example TCP handler definition The following example TCP handler definition will forward event data6 to a TCP socket8 ie 1001994444 and will timeout if an acknowledgement ACK is not received within 30 seconds handlers exampletcphandler type tcp timeout 30 socket host 100199 port 4444 The following example UDP handler definition will forward event data6 to a UDP socket ie 100199444 handlers exampleudphandler type udp socket host 100199 port 4444 Transport handlers Transport handlers enable Sensu to publish event data to named queues on the Sensu transport5 for external services to consume Example transport handler definition The following example transport handler definition will publish event data6 to the Sensu transport on a pipe eg a queue or channel etc named examplehandlerqueue One or more instances of an external process or thirdparty application would need to subscribe to the named pipe to process the events handlers exampletransporthandler type transport pipe type direct name examplehandlerqueue Handler sets Handler set definitions allow groups of handlers ie individual collections of actions to take on event data to be referenced via a single named handler set NOTE Attributes defined on handler sets do not apply to the handlers they include For example filter filters and mutator attributes defined in a handler set will have no effect Example handler set definition The following example handler set definition will execute three handlers ie email slack and pagerduty for every event handlers notifyallthethings type set handlers email slack pagerduty Handler configuration Example handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdmailhandlerjson This handler definition uses the mailx unix command to email the event data to exampleaddresscom with the email subject sensu event The handler is named mail handlers mail type pipe command mailx s sensu event exampleaddresscom Handler definition specification Handler names handlernames Each handler definition has a unique handler name used for the definition key Every handler definition is within the handlers configuration scope9 A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex10 wmatchhandlername HANDLER attributes The following attributes are configured within the handlers HANDLER configuration scope9 where HANDLER is a valid handler name15 type "},{"title":"Mutators","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/mutators","display_name":"Sensu Core 1.0: Mutators","content":" Reference documentation What is a Sensu mutatorwhataresensumutators The Sensu mutator specificationthesensumutatorspecification When to use a mutatorwhentouseamutator How do Sensu mutators workhowdosensumutatorswork Mutator commandsmutatorcommands What is a mutator commandwhatisamutatorcommand Mutator command argumentsmutatorcommandarguments How and where are mutator commands executedhowandwherearemutatorcommandsexecuted Mutator configurationmutatorconfiguration Example mutator definitionexamplemutatordefinition Mutator definition specificationmutatordefinitionspecification Mutator namesmutatornames Mutator attributesmutatorattributes What are Sensu mutators whataresensumutators Sensu mutators are executable scripts or other programs that modify event data1 for Sensu event handlers2 which may expect additional or modified event data eg custom attributes that are not provided by the default event data specification3 The Sensu mutator specification Accept inputdata via STDIN Able to parse a JSON data payload ie a event data1 Output JSON data the modified event data to STDOUT or STDERR Produce an exit status code to indicate state 0 indicates OK exit status codes other than 0 indicates a failure When to use a mutator Many Sensu event handlers2 will modify event data1 in the course of processing an event9 and in many cases this is recommended because modifying the event data and performing some action in memory in the same process will result in better performance than executing a mutator5 and a handler two separate processes However when multiple handlers require similar event data modifications mutators provide the ability to avoid code duplication DRY and simplify event handler logic How do Sensu mutators work Sensu mutators are applied when event handlers2 are configured to use a mutator Prior to executing a Handler the Sensu server will execute the configured mutator If the mutator is successfully executed the modified event data is then provided to the handler and the handler will be executed If the mutator fails to execute for any reason an error will be logged and the handler will not be executed The complete process may be described as follows When the Sensu server is processing an event it will check for the definition of a mutator Prior to executing each handler the Sensu server will first execute the configured mutator if any for the handler If the mutator is successfully executed ie if it returns an exit status code of 0 the modified event data is provided to the handler and the handler will be executed If the mutator fails to execute ie returns a nonzero exit status code or does not complete execution within the configured timeout an error will be logged and the handler will not be executed Please refer to the Sensu event handler definition specification8 for more information about applying a mutator to an event handler see the mutator attribute Mutator commands What is a mutator command Each Sensu mutator definition6 defines a command to be executed Mutator commands are literally executable commands which will be executed on a Sensu server4 run as the sensu user Most mutator commands are provided by Sensu plugins7 Mutator command arguments Sensu mutator command attributes may include command line arguments for controlling the behavior of the command executable Many Sensu mutator plugins7 provide support for command line arguments for reusability How and where are mutator commands executed As mentioned above all mutator commands are executed by a Sensu server4 as the sensu user Commands must be executable files that are discoverable on the Sensu server system ie installed in a system PATH directory NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commandseg command checkhttprb u httpssensuapporg Mutator configuration Example mutator definition The following is an example Sensu mutator definition a JSON configuration file located at etcsensuconfdexamplemutatorjson This mutator definition uses an imaginary Sensu plugin7 called examplemutatorrb to modify event data prior to handling the event mutators examplemutator command examplemutatorrb Mutator definition specification Mutator names mutatornames Each mutator definition has a unique mutator name used for the definition key Every mutator definition is within the mutators definition scope A unique string used to nameidentify the mutator Cannot contain special characters or spaces Validated with Ruby regex10 wmatchmutatorname Mutator attributes command "},{"title":"Plugins","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/plugins","display_name":"Sensu Core 1.0: Plugins","content":" What is a Sensu plugin Sensu plugins provide executable scripts or other programs that can be used as Sensu checks1 ie to monitor server resources services and application health or collect analyze metrics Sensu handlers2 ie to send notifications or perform other actions based on Sensu events3 or Sensu mutators3 ie to modify event data4 prior to handling For more about Sensu plugins please refer to the Plugins reference documentation5 1 checks 2 handlers 3 eventseventdata 4 mutators 5 plugins23reference"},{"title":"RabbitMQ Configuration","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/rabbitmq","display_name":"Sensu Core 1.0: RabbitMQ Configuration","content":" Reference documentation What is RabbitMQwhatisrabbitmq How does Sensu use RabbitMQhowdoessensuuserabbitmq Install RabbitMQinstallrabbitmq Configure Sensusensurabbitmqconfiguration Example configuraitonssensurabbitmqconfigurationexamples RabbitMQ definition specificaitonrabbitmqdefinitionspecification rabbitmq attributesrabbitmqattributes ssl attributessslattributes Configure RabbitMQconfigurerabbitmq Standalone configurationstandaloneconfiguration Distributed configurationdistributedconfiguration Highavailability configurationhighavailabilityconfiguration What is a RabbitMQ clusterwhatisarabbitmqcluster High availability hardware requirementshighavailabilityhardwarerequirements Install RabbitMQinstallrabbitmq Configure a RabbitMQ clusterconfigurearabbitmqcluster Configure Sensu to use the RabbitMQ clusterconfiguresensutousetherabbitmqcluster Securing RabbitMQsecuringrabbitmq RabbitMQ and SELinuxrabbitmqandselinux RabbitMQ SSLrabbitmqssl RabbitMQ SSL and Erlang 183rabbitmqsslanderlang183 What is RabbitMQ RabbitMQ is a message bus which describes itself1 as a messaging broker an intermediary for messaging It gives your applications a common platform to send and receive messages and your messages a safe place to live until received To learn more about RabbitmQ please visit the official RabbitMQ website2 How does Sensu use RabbitMQ Sensu services use RabbitMQ the default Sensu transport3 to communicate with one another Every Sensu service requires access to the same instance of RabbitMQ or a RabbitMQ cluster to function Sensu check requests and check results are sent over RabbitMQ to the approprate Sensu services Install RabbitMQ For more information about installing RabbitMQ for use with Sensu please visit the RabbitMQ installation guide5 Configure Sensu sensurabbitmqconfiguration Example configurations sensurabbitmqconfigurationexamples The following are an example RabbitMQ connection definitions each located at etcsensuconfdrabbitmqjson Example standalone configuration sensurabbitmqconfigurationexamplesstandalone rabbitmq host 127001 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem Example distributed configuration sensurabbitmqconfigurationexamplesdistributed rabbitmq host 10016 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem Example highavailability configuration sensurabbitmqconfigurationexampleshighavailability rabbitmq host 10006 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem host 10007 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem host 10008 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem RabbitMQ definition specification The RabbitMQ definition uses the rabbitmq definition scope rabbitmq attributes host "},{"title":"Redis Configuration","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/redis","display_name":"Sensu Core 1.0: Redis Configuration","content":" Reference documentation What is Rediswhatisredis How does Sensu use Redishowdoessensuuseredis Install Redisinstallredis Configure Sensuconfiguresensu Example configurationssensuredisconfigurationexamples Redis definition specificationredisdefinitionspecification redis attributesredisattributes sentinels attributessentinelsattributes Configure Redissensuredisconfiguration Standalone configurationredisstandaloneconfiguration Distributed configurationredisdistributedconfiguration High Availability configurationredishighavailabilityconfiguration What is Redis masterslave replicationwhatisredismasterslavereplication What is Redis Sentinelwhatisredissentinel High availability hardware requirementshighavailabilityhardwarerequirements Install Redisinstallredis Redis masterslave configurationredismasterslaveconfiguration Configure the Redis masterconfiguretheredismaster Configure the Redis slaveconfiguretheredisslave Verify masterslave replicationverifymasterslavereplication Redis Sentinel configurationredissentinelconfiguration Configure a Sentinelconfigureasentinel Verify Redis Sentinel operationverifyredissentineloperation Configure Sensu to use Redis Sentinelconfiguresensutouseredissentinel Securing Redissecuringredis What is Redis Redis1 is a keyvalue database which describes itself as an open source BSD licensed advanced keyvalue cache and store Learn more at httpredisio1 How does Sensu uses Redis howdoessensuuseredis Sensu uses Redis as a datastore2 for storing monitoring data eg a client registry3 current check results current monitoring events etc Only the Sensu server4 and API5 processes require access to Redis ie the sensuclient process does not require access to Redis All Sensu services in a cluster require access to the same instance or cluster of Redis consequently Redis does not need to be installed on every system where Sensu is installed Sensu also provides support for using Redis as a transport14 Please see the Sensu transport reference documentation14 for more information Installing Redis For more information about installing Redis for use with Sensu please visit the Redis installation guide6 Configure Sensu configuresensu Example configurations sensuredisconfigurationexamples The following are example Redis definitions at etcsensuconfdredisjson NOTE if you are using Redis as your Sensu transport14 additional configuration will need to be provided to tell Sensu to use Redis as the transport instead of RabbitMQ default please see transport configuration15 for more information Example standalone configuration sensuredisconfigurationexamplesstandalone redis host 127001 port 6379 password secret Example distributed configuration sensuredisconfigurationexamplesdistributed redis host 100123 port 6379 password secret Example highavailability configuration sensuredisconfigurationexampleshighavailability redis password yourredispassword master redis01 sentinels host 100123 port 26379 host 100124 port 26379 host 100125 port 26379 Redis DNS resolution redisdns The Sensu Redis client will resolve the provided hostname before making a connection attempt to the Redis host Resolving the DNS hostname prior to connecting allows Sensu to properly handle resolution failures log them and make further attempts to connect to the Redis host This also allows Sensu to use Amazon AWS ElastiCache multiaz automatic failover Redis definition specification The Redis definition uses the redis definition scope redis attributes host "},{"title":"Sensu Server","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/server","display_name":"Sensu Core 1.0: Sensu Server","content":" Reference documentation What is the Sensu serverwhatisthesensuserver Sensu Core vs Sensu Enterprisesensucorevssensuenterprise Check execution schedulingcheckexecutionscheduling Check scheduling algorithm synchronizationcheckschedulingalgorithmsynchronization Event processingeventprocessing Automated Sensu server task electionautomatedtaskelection Sensu server tasksservertasks Scaling Sensuscalingsensu What is the Sensu server The Sensu server schedules and publishes check execution requests1 to client subscriptions2 via a PublishSubscribe model3 and provides a scalable event processing platform4 for processing check results and monitoring events Sensu Core vs Sensu Enterprise The Sensu server comes in two flavors the opensource Sensu Core5 via the sensuserver process and Sensu Enterprise6 via the sensuenterprise process To learn more about the differences between Sensu Core and Sensu Enterprise please visit the Sensu website7 NOTE Sensu Enterprise ie the sensuenterprise process was designed to be a dropin replacement for the Sensu Core server and API ie the sensuserver and sensuapi As such any mention of the Sensu server in the Sensu documentation also applies to the sensuenterprise process for Sensu Enterprise users WARNING as noted above the sensuenterprise process is designed to replace both of the Sensu Core sensuserver and sensuapi processes Because Sensu Enterprise will load the same configuration as Sensu Core it is important that the Sensu Core processes are stopped before starting Sensu Enterprise to avoid known conflicts and processing errors such as attempting to bind on the same ports etc Check execution scheduling Check execution scheduling is performed by a Sensu server see Sensu server task election8 Checks are scheduled by querying Sensus configuration for defined checks ndash excluding check with the attributes standalone true or publish false ndash and calculating when executions should occur based on their defined intervals Check scheduling algorithm synchronization checkschedulingalgorithmsynchronization Sensu uses an internal algorithm for determining a unique cadence for Sensu checks which uniqueness is based on the check name and interval This algorithm outputs a value in milliseconds which the Sensu server will use as an offset before the next check request should be published In practice this means that ndash assuming system clocks are in sync between disparate Sensu servers ndash check requests for a given check based on the check name will be published at the exact same time The also means that in the event of a Sensu server restart andor Sensu server task reelection ie if a new Sensu server is elected to become reponsible for check execution scheduling check execution scheduling intervals will remain consistent In fact because this algorithm is also shared by the Sensu client ndash which provides decentralized check execution scheduling in the form of standalone checks22 ndash a check defined on the Sensu server and a matching standalone check defined on a Sensu client should also stay in sync with each other again assuming that system clocks are in sync and the check names and intervals are consistent Event processing The Sensu server provides a scalable event processor Event processing involves conversion of check results9 into Sensu events and then applying any defined event filters10 event data mutators11 and event handlers12 All event processing happens on a Sensu server system The event processing workflow happens in the following order Event Filter Mutator Handler NOTE events that are filtered out ie removed by Sensu event filtersfilters will not continue to be mutated by event data mutatorsmutators or event handlershandlers Sensus event processing capabilities can be distributed among multiple Sensu servers in a Sensu cluster For more information on configuring a Sensu cluster please see Scaling Sensu13 below Automated task election The Sensu server processes ie sensuserver and sensuenterprise are designed to scale horizontally14 ie by adding systems No additional configuration is required to run a cluster of Sensu servers other than the location of the transport15 and data store16 When Sensu servers start they participate in an election process to automatically distribute tasks A Sensu server may be elected for more than one task A server task can only run on one Sensu server at a time and will automatically failover to another Sensu server in the event of a service failure or restart All Sensu servers in a Sensu cluster monitor the state of task execution on a 10second interval automatically electing a new Sensu server for a task if the current one hasnt confirmed execution in more than 30 seconds Server tasks In a Sensu server cluster responsibility for a distinct set of tasks is distributed amongst members of the cluster The tasks only run on one Sensu server at a time and will automatically failover to another Sensu server in the event of a service failure or restart When adding Sensu servers to a cluster restarting the existing Sensu servers in the cluster will force a redistribution of tasks Check request publisher The Sensu server is responsible for publishing check requests to the transport for all configured checks See check execution scheduling18 for more information Client monitor The Sensu server is responsible for monitoring the client registry19 and creating client keepalive events20 for stale clients Check result monitor The Sensu server is responsible for monitoring check results and creating TTL events for check results with expired check TTLs21 Check result aggregation pruning The Sensu server is responsible for monitoring check aggregates and pruning stale aggregate results To observe which Sensu server is currently reponsible for one or more tasks see API info23 Scaling Sensu Coming soon 1 checkscheckrequests 2 clientsclientsubscriptions 3 checkspubsubchecks 4 overviewarchitectureeventprocessor 5 httpssensuapporg 6 httpssensuapporgenterprise 7 httpssensuapporgfeaturescompare 8 automatedtaskelection 9 checkscheckresults 10 filters 11 mutators 12 handlers 13 scalingsensu 14 httpsenwikipediaorgwikiScalabilityHorizontalandverticalscaling 15 transport 16 datastore 18 checkexecutionscheduling 19 clientsregistrationandregistry 20 clientskeepaliveevents 21 checkscheckttls 22 checksstandalonechecks 23 apihealthandinfo"},{"title":"Silencing","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/silencing","display_name":"Sensu Core 1.0: Silencing","content":" Reference documentation What is Sensu Silencingwhatissensusilencing When to use silencingwhentousesilencing How does silencing workhowdoessilencingwork Silencing entry specificationsilencingentryspecification Silencing entry attributessilencingentryattributes Examplesexamples Silence all checks on a specific clientsilenceallchecksonaspecificclient Silence a specific check on a specific clientsilenceaspecificcheckonaspecificclient Silence all checks on clients with a specific subscriptionsilenceallchecksonclientswithaspecificsubscription Silence a specific check on clients with a specific subscriptionsilenceaspecificcheckonclientswithaspecificsubscription Silence a specific check on every client regardless of subscriptionssilenceaspecificcheckoneveryclient Deleting silencing entriesdeletingsilencingentries Appendix Deprecated stashbased silencingappendixdeprecatedstashbasedsilencing Comparing stashbased and native silencingcomparingstashbasedandnativesilencing Migrating from stashbased silencingmigratingfromstashbasedsilencing What is Sensu Silencing As check results0 are processed by a Sensu server the server executes event handlers1 to send alerts to personnel or otherwise relay event data to external services Although event handlers can be directly configured with filters11 to improve overall signaltonoise ratio there are many scenarios in which operators receiving notifications from Sensu require an ondemand means to suppress alerts Sensus builtin silencing provides the means to suppress execution of event handlers on an adhoc basis By using a dashboard or other tool to interact with the silenced API2 operators can mute notifications onthefly The silenced API manipulates silencing entries in the Sensu data store These entries describe a combination of check name and subscription When the check name3 andor subscription4 described in a silencing entry match an event the handler will not be executed and an informational message will be logged Individual handlers may optout of silencing by configuring the handlesilenced attribute5 NOTE Silencing described in this reference document is implemented in Sensu version 026 or later and Sensu Enterprise 20 or later When to use silencing Silencing is used to prevent handlers from being triggered based on the check name present in a check result or the subscriptions associated with the client that published the check result This can be desirable in many scenarios giving operators the ability to quiet incoming alerts while coordinating their response Sensu silencing entries make it possible to Silence all checks on a specific clientsilenceallchecksonaspecificclient Silence a specific check on a specific clientsilenceaspecificcheckonaspecificclient Silence all checks on clients with a specific subscriptionsilenceallchecksonclientswithaspecificsubscription Silence a specific check on clients with a specific subscriptionsilenceaspecificcheckonclientswithaspecificsubscription Silence a specific check on every client regardless of subscriptionssilenceaspecificcheckoneveryclient In addition to the above combinations silencing entries support Expiration after a specified number of seconds Expiration after check returns to OK state resolves Describing the reason or rationale Describing the creator or entity responsible for an entry How does silencing work Silencing entries are created on an adhoc basis via the silenced API2 endpoint When silencing entries are successfully created via the API they are assigned an ID in the format SUBSCRIPTIONCHECK where SUBSCRIPTION is the name of a Sensu client subscription and CHECK is the name of a Sensu check Silencing entries can be used to silence checks on specific clients by by taking advantage of perclient subscriptions4 added in Sensu 026 eg clientCLIENTNAME These silencing entries are persisted to the silenced registry in the Sensu data store10 When the Sensu server processes subsequent check results it consults this registry to determine whether or not a matching silencing entry exists If one or more matching entries exist in the registry the event context for the check result is updated to indicate that the event is silenced and the ID of the entries which the check result matched When creating a silencing entry a combination of check and subscription can be specified but only one or the other is strictly required For example when a silencing entry is created specifying only a check its ID will contain an asterisk or wildcard in the SUBSCRIPTION position This indicates that any event with a matching check name will be marked as silenced regardless of the originating clients subscriptions Conversely a silencing entry which specifies only a subscription will have an ID with an asterisk in the CHECK position This indicates that any event where the originating clients subscriptions match the subscription specified in the entry will be marked as silenced regardless of the check name NOTE Starting with version 026 Sensu clients automatically add a subscription containing their client name prefixed with the string client For example client i424242 will automatically add subscription clienti424242 Silencing checks at the individual client level requires clients to run Sensu 026 or be manually configured with a client subscription Silencing entry specification Silencing entries are composed as a JSON document containing at least one of the required subscription or check attributes and additional optional attributes as desired Silencing entries are created updated and deleted by submitting JSON documents to endpoints on the silenced API2 via HTTP POST as shown in the examples below Silencing entry attributes check "},{"title":"SSL Configuration","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/ssl","display_name":"Sensu Core 1.0: SSL Configuration","content":" Reference documentation How does Sensu use SSLhowdoessensuusessl SSLsecured transportssslsecuredtransports Configuring Sensu RabbitMQ for SSL encryptionconfiguringsensurabbitmqforsslencryption Generate selfsigned OpenSSL certificates CAgenerateselfsignedopensslcertificatesandca Enable RabbitMQ SSL supportenablerabbitmqsslsupport Configure Sensuconfiguresensu Known limitationsknownlimitations How does Sensu use SSL All communication between Sensu services happens via the Sensu transport1 As such to secure a Sensu installation means to secure communication between all of the Sensu services and the Sensu transport via SSL encryption Sensu can operate without the use of SSL encryption however this practice is heavily discouraged SSLsecured Transports Although the Sensu transport1 library makes it possible for Sensu to leverage transport alternatives to RabbitMQ eg Redis not all transports offer SSL support eg Redis does not support SSL For this reason this reference document will focus on SSL security for Sensu with the RabbitMQ transport Configuring Sensu RabbitMQ for SSL encryption Generate selfsigned OpenSSL certificates and CA The following instructions will generate an OpenSSL certificate authority and selfsigned certificates Alternatively please refer to the official RabbitMQ SSL documentation2 for a detailed guide on configuring RabbitMQ with SSL 1 OpenSSL is required on the machine that will generate the SSL certificates Install OpenSSL on your platform UbuntuDebian sudo aptget update sudo aptget install openssl openssl version RHELCentOS sudo yum install openssl openssl version 2 Download the Sensu SSL tool wget httpsensuapporgdocs10filessensussltooltar tar xvf sensussltooltar 3 Generate an OpenSSL certificate authority and selfsigned certificates using the Sensu SSL tool cd sensussltool sslcertssh generate ls l NOTE the generated certificates will be valid for 5 years The Sensu SSL tool will generate a certificate authority SSL certificates for the RabbitMQ server and a shared SSL certificate for all of the Sensu services client certpem keycertp12 keypem reqpem sensuca cacertcer cacertpem certs 01pem 02pem indextxt indextxtattr indextxtattrold indextxtold opensslcnf private cakeypem serial serialold server certpem keycertp12 keypem reqpem sslcertssh Enable RabbitMQ SSL support 1 Stop RabbitMQ NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdrabbitmqserver stop sudo service rabbitmqserver stop 2 Please refer to the official RabbitMQ documentation for enabling SSL support3 for instructions on installing the certificate authority and SSL certificates and configuring the RabbitMQ ssllisteners and ssloptions directives NOTE the RabbitMQ documentation will direct you to provide the location of three certificate files cacertfile certfile and keyfile These files correspond to the sensucacacertpem servercertpem and serverkeypem files generated by the Sensu SSL tool above We recommend copying these files to the RabbitMQ server in a new etcrabbitmqssl directory When complete your etcrabbitmqrabbitmqconfig file should contain the following configuration block rabbit ssllisteners 5671 ssloptions cacertfileetcrabbitmqsslcacertpem certfileetcrabbitmqsslcertpem keyfileetcrabbitmqsslkeypem versions tlsv12 ciphers rsaaes256cbcsha256 verifyverifypeer failifnopeercerttrue 3 Start RabbitMQ NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdrabbitmqserver start sudo service rabbitmqserver start Configure Sensu 1 Install the selfsigned SSL certificates generated above by copying the clientcertpem and clientkeypem files to the etcsensussl directory on all systems running Sensu processes eg the Sensu server4 API5 and clients6 2 Add ssl definition attributes7 to your Sensu RabbitMQ configuration8 Please note the following standalone configuration example9 a JSON configuration file located at etcsensuconfdrabbitmqjson Please see the ssl attributes7 section of the RabbitMQ reference documentation for more information host 127001 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem WARNING please note that by default RabbitMQ will listen for SSL connections on port 5671 instead of 5672 so if you are upgrading an existing configuration please ensure that all Sensu services are attempting to connect to RabbitMQ on port 5671 3 Restart the Sensu services Known limitations You may have noticed that the instructions above only generated a single client certificate Ideally every SSL connection would use a different certificate allowing them to be individually revoked There is currently no way to tell RabbitMQ to reject a certificate If the integrity of a certificate is compromised it is common practice to regenerate and redistribute the certificate authority and certificates This process is greatly simplified with the use of configuration management tools In the future the Sensu project hopes to be able to provide a better mechanism for distributing individual certificates and providing fastsimple revocation facilities 1 transport 2 httpwwwrabbitmqcomsslhtml 3 httpwwwrabbitmqcomsslhtmlenablingssl 4 server 5 apioverview 6 clients 7 rabbitmqsslattributes 8 rabbitmqrabbitmqdefinitionspecification 9 rabbitmqstandaloneconfiguration"},{"title":"Stashes","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/stashes","display_name":"Sensu Core 1.0: Stashes","content":" Reference documentation What is a Sensu stashwhatisasensustash The Sensu keyvalue storethesensukeyvaluestore The Sensu stash specificationthesensustashspecification Example Sensu stashexamplesensustash Stash definition specificationstashdefinitionspecification Stash attributesstashattributes content attributescontentattributes Direct access to stash content datadirectaccesstostashcontentdata What is a Sensu stash A Sensu stash is a JSON document containing arbitrary JSON Hash data which is accessible via the Stashes API1 The most common use of the Sensu Stashes are via Sensu handlers which may access the Stashes API to create andor read state information that persists between handler executions NOTE Prior to Sensu 026 the ability to silence notifications was implemented in external libraries like sensuplugin using specially crafted stashes Silencing via stashes is deprecated in favor of new native silencing Please see the silencing reference documentation7 for more details The Sensu keyvalue store thesensukeyvaluestore The Stashes API1 provides a keyvalue store1 for Sensu where arbitrary JSON data ie the values can be created accessed and deleted via an arbitrary path ie the keys The Sensu stash specification Example Sensu stash The following is an example Sensu stash path pathtomystash content message hello world foo bar expire 1 Stash definition specification Stash attributes path "},{"title":"Transport","product":"Sensu Core","version":"1.0","location":"/sensu-core/1.0/reference/transport","display_name":"Sensu Core 1.0: Transport","content":" Reference documentation What is the Sensu Transportwhatisthesensutransport Selecting a transportselectingatransport Transport configurationtransportconfiguration Example transport definitionexampletransportdefinition Transport definition specificationtransportdefinitionspecification Transport attributestransportattributes What is the Sensu Transport Sensu services use a message bus eg RabbitMQ1 for communication This message bus communication is provided by the Sensu Transport2 which is a library that makes it possible to leverage alternate transport solutions in place of RabbitMQ the default transport Sensu services requires access to the same instance of the defined transport eg a RabbitMQ server or cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscriptions Selecting a Transport The Sensu Transport library makes it possible to replace Sensus recommended and default transport RabbitMQ with alternative solutions There are currently two 2 transports provided with the sensutransport library RabbitMQ and Redis mdash each presenting unique performance and functional characteristics The RabbitMQ Transport recommended The RabbitMQ Transport is the original Sensu transport and continues to be the recommended solution for running Sensu in production environments Pros rabbitmqtransportpros Native SSL support Pluggable authentication framework Support for ACLs Cons rabbitmqtransportcons Adds Erlang as a runtime dependency to the Sensu architecture only on systems where RabbitMQ is running The Redis Transport The Redis Transport was an obvious alternative to the original RabbitMQ Transport because Sensu already depends on Redis as a data store Using Redis as a transport greatly simplifies Sensus architecture by removing the need to installconfigure RabbitMQ and Erlanghttpswwwerlangorg RabbitMQs runtime Pros redistransportpros Simplifies Sensu architecture by removing need for dedicated transport by using Redis as the data store and transport Comparable or better throughputperformance than RabbitMQ Cons redistransportcons No native support for SSL No support for transport consumers metrics see Health Info API4 Transport configuration Example transport definition The following is an example transport definition a JSON configuration file located at etcsensuconfdtransportjson This example transport configuration indicates that Redis should be used as the Sensu transport transport name redis reconnectonerror true Transport DNS resolution transportdns The Sensu Transport will resolve provided hostnames before making connection attempts to the RabbitMQ Redis transports Resolving DNS hostnames prior to connecting allows Sensu to properly handle resolution failures log them and make further attempts to connect to the selected transport This also allows Sensu to use DNS as a transport failover mechanism Transport definition specification transportdefinitionspecification The Sensu Transport uses the transport definition scope3 Transport attributes transportattributes The following attributes are defined within the transport definition scopeconfigurationconfigurationscopes name "},{"title":"Sensu Core","tags":["sensu","core","sensu core","1.1","index"],"product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/_index","display_name":"Sensu Core 1.1: Sensu Core","content":" Overview Monitor servers services application health and business KPIs Collect and analyze custom metrics Get notified about failures before your users do Give your business the competitive advantage it deserves"},{"title":"API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/_index","display_name":"Sensu Core 1.1: API","content":""},{"title":"Aggregates API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/aggregates","display_name":"Sensu Core 1.1: Aggregates API","content":" Reference documentation The aggregates API endpointtheaggregatesapiendpoint aggregates GETaggregatesget The aggregatesname API endpointstheaggregatesnameapiendpoints aggregatesname GETaggregatesnameget aggregatesname DELETEaggregatesnamedelete The aggregatesnameclients API endpointtheaggregatesnameclientsapiendpoint aggregatesnameclients GETaggregatesnameclientsget The aggregatesnamechecks API endpointtheaggregatesnamechecksapiendpoint aggregatesnamechecks GETaggregatesnamechecksget The aggregatesnameresultsseverity API endpointtheaggregatesnameresultsseverityapiendpoint aggregatesnameresultsseverity GETaggregatesnameresultsseverityget The aggregates API endpoint theaggregatesapiendpoint The aggregates API endpoint provides HTTP GET access to named aggregate data1 aggregates GET EXAMPLES aggregatesgetexamples The following example demonstrates a aggregates API query which results in a JSON Array of JSON Hashes containing named check aggregates1 curl s httplocalhost4567aggregates jq name checkhttp name checkwebapp name elasticsearchhealth API specification aggregatesgetspecification aggregates GET "},{"title":"Checks API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/checks","display_name":"Sensu Core 1.1: Checks API","content":" Reference documentation The checks API endpointthechecksapiendpoint checks GETchecksget The checkscheck API endpointsthecheckscheckapiendpoints checkscheck GETcheckscheckget The request API endpointtherequestapiendpoint request POSTrequestpost The checks API endpoint checks GET The checks API endpoint provides HTTP GET access to subscription check1 data EXAMPLE checksgetexample The following example demonstrates a request to the checks API resulting in a JSON Array of JSON Hashes containing subscription check definitions2 curl s http1270014567checks jq name sensuwebsite interval 60 subscribers production command checkhttprb u httpssensuapporg API Specification checksgetspecification checks GET "},{"title":"Clients API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/clients","display_name":"Sensu Core 1.1: Clients API","content":" Reference documentation The clients API endpointtheclientsapiendpoint clients GETclientsget clients POSTclientspost The clientsclient API endpointstheclientsclientapiendpoints clientsclient GETclientsclientget clientsclient DELETEclientsclientdelete The clientsclienthistory API endpointstheclientsclienthistoryapiendpoints"},{"title":"API Configuration","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/configuration","display_name":"Sensu Core 1.1: API Configuration","content":" Reference documentation API configurationapiconfiguration Example API definitionexampleapidefinition API definition specificationapidefinitionspecification API configuration Example API definition The following is an example API definition at etcsensuconfdapijson api host 57435322 bind 0000 port 4567 API definition specification The API definition uses the api definition scope api attributes host "},{"title":"Events API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/events","display_name":"Sensu Core 1.1: Events API","content":" Reference documentation The events API endpointtheeventsapiendpoint events GETeventsget The eventsclient API endpointtheeventsclientapiendpoint eventsclient GETeventsclientget The eventsclientcheck API endpointstheeventsclientcheckapiendpoints eventsclientcheck GETeventsclientcheckget eventsclientcheck DELETEeventsclientcheckdelete The resolve API endpointtheresolveapiendpoint resolve POSTresolvepost The events API endpoint events GET The events API endpoint provide HTTP GET access to the Sensu event registry EXAMPLES eventsgetexamples The following example demonstrates a events API query which returns a JSON Array of JSON Hashes containing event data1 curl s httplocalhost4567events jq timestamp 1460303502 action create occurrences 1 check totalstatechange 14 history 0 3 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 1 status 1 output CheckHttp WARNING 301n command checkhttprb u websitehttpsensuapporg subscribers production interval 60 handler mail name sensuwebsite issued 1460303502 executed 1460303502 duration 0032 client timestamp 1460303501 version 100 website httpgooglecom socket port 3030 bind 127001 subscriptions production environment development address 127001 name client01 id 0f42ec9412bf4918a0b952fd57e8ee96 API specification eventsgetspecification events GET "},{"title":"Health & Info APIs","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/health-and-info","display_name":"Sensu Core 1.1: Health & Info APIs","content":" Reference documentation How to obtain API status informationhowtoobtainapistatusinformation The health API endpointthehealthapiendpoint health GEThealthget The info API endpointtheinfoapiendpoint info GETinfoget How to obtain API status information The Sensu API provides two distinct endpoints for obtaining API status information health and info The Health API provides status information about the health of the APIs connections to the Sensu data store1 and transport2 The Info API provides a report on the status of the API including API version the status of the APIs connections to the Sensu data store and transport and the number of messages and consumers in various transport queues The health API endpoint health GET The health API provides HTTP GET access to test or verify the health of the monitoring system The Health API is provided for monitoring Sensu mdash it facilitates service checks to ensure that a minimal number of Sensu servers3 are connected to the transport ie transport consumers andor to ensure that the transport queue isnt growing which would indicate that the Sensu servers arent able to keeping up with the volume of keepalive messages4 and check results5 being produced NOTE the health API obtains its information via the info API PRO TIP the Health API messages URL parameter6 eg healthmessages1000 can be used to monitor the number of messages queued on the Sensu transport2 and then leveraged by other automation tools to trigger an auto scaling or similar provisioning event to automatically add one or more Sensu servers to a Sensu installation EXAMPLE healthgetexample In the following example querying the health API with the consumers6 URL parameter will return an HTTP response code7 to indicate if the expected number of consumers ie Sensu servers3 are processing check results In this example we are expecting at least two 2 consumers to be running at all times ie at least two Sensu servers processing check results The 412 Precondition Failed HTTP response code7 indicates that the requested number of consumers are not registered curl s i http1270014567healthconsumers2 HTTP11 412 Precondition Failed AccessControlAllowOrigin AccessControlAllowMethods GET POST PUT DELETE OPTIONS AccessControlAllowCredentials true AccessControlAllowHeaders Origin XRequestedWith ContentType Accept Authorization Connection close NOTE the 412 Precondition Failed HTTP response code7 does not mean that the API itself is unavailable but rather it is the equivalent of a false response to the API query ie if you want to know if there are at least two Sensu servers processing check results a 412 response code would mean no WARNING transport consumers are a native concept in pubsub technology8 including actual message queues like RabbitMQ8 Because the Sensu transport library2 supports transports which are not actual message queues eg Redis10 some transports do not support the Health API consumers check because they dont support the concept of consumers ie this means that healthconsumers1 will always fail returning a 412 response code for Sensu installations using Redis as the transport regardless of the number of Sensu servers which may be registered and processing check results API Specification healthgetspecification health GET "},{"title":"RESTful API Overview","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/overview","display_name":"Sensu Core 1.1: RESTful API Overview","content":" Sensu API The Sensu API provides access to monitoring data collected by Sensu such as a client registry1 check results2 and event data3 The API can be used to request adhoc check executions and resolve events among other things RESTful JSON API The Sensu API is JSON4based RESTful API5 Familiarity with or willingness to Google industry standard RESTful API behaviors ndash including HTTP response codes6 ndash are strongly recommended Reference documentation Clients APIclients Checks APIchecks Results APIresults Aggregates APIaggregates Events APIevents Stashes APIstashes Health Info APIhealthandinfo Settings APIsettings API configurationconfiguration Response Content Filtering Sensu API endpoints that support the GET HTTP method support HTTP response content filtering using one or more filter attributes To use response content filtering construct the URL for your API request using a dot notation query string parameter beginning with filter eg eventsfilterclientenvironmentproduction The Sensu API will only return response content objects that match the specified response content filter attributes Multiple attributes may be specified for a request eg eventsfilterclientenvironmentproductionfiltercheckcontactops 1 referenceclientsregistrationandregistry 2 referencecheckscheckresults 3 referenceeventseventdata 4 httpwwwjsonorg 5 httpsenwikipediaorgwikiRepresentationalstatetransfer 6 httpsenwikipediaorgwikiListofHTTPstatuscodes"},{"title":"Results API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/results","display_name":"Sensu Core 1.1: Results API","content":" Reference documentation The results API endpointtheresultsapiendpoint results GETresultsget results POSTresultspost The resultsclient API endpointtheresultsclientapiendpoint resultsclient GETresultsclientget The resultsclientcheck API endpointstheresultsclientcheckapiendpoints resultsclientcheck GETresultsclientcheckget resultsclientcheck DELETEresultsclientcheckdelete The results API endpoint theresultsapiendpoint The results API endpoint provides HTTP GET and HTTP POST access to current check result data1 results GET The results API endpoint provides HTTP GET access to fetch current check result data1 EXAMPLES resultsgetexamples The following example demonstrates a results API query which returns a JSON Array of JSON Hashes containing check results1 curl s httplocalhost4567results jq check status 1 output CheckHttp WARNING 301n command checkhttprb u websitehttpsensuapporg subscribers production interval 60 handler mail name sensuwebsite issued 1460312322 executed 1460312322 duration 0032 client client01 check status 0 output Keepalive sent from client 2 seconds ago executed 1460312365 issued 1460312365 name keepalive thresholds critical 180 warning 120 client client01 API specification resultsgetspecification results GET "},{"title":"Settings API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/settings","display_name":"Sensu Core 1.1: Settings API","content":" Reference documentation The settings API endpointthesettingsendpoint settings GETsettingsget The settings API endpoint thesettingsendpoint settings GET The settings API provides HTTP GET access to the APIs running configuration settings Sensitive setting values are redacted by default unless the URL query parameter redacted is set to false eg settingsredactedfalse EXAMPLE settingsgetexample The following example demonstrates a request to the settings API resulting in a JSON Hash containing the APIs running configuration settings curl s http1270014567settings jq api cors Headers Origin XRequestedWith ContentType Accept Authorization Credentials true Methods GET POST PUT DELETE OPTIONS Origin password REDACTED user admin checks API Specification settingsgetspecification settings GET "},{"title":"Silenced API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/silenced","display_name":"Sensu Core 1.1: Silenced API","content":" Reference documentation The silenced API endpointsthesilencedapiendpoints silenced GETsilencedget silenced POSTsilencedpost silencedidsid GETsilencedidsidget silencedclear POSTsilencedclearpost silencedsubscriptionssubscription GETsilencedsubscriptionsget silencedcheckscheck GETsilencedchecksget The silenced API endpoints The Silence API provides endpoint HTTP POST and GET access to create query and clear delete a silence entry via the Sensu API silenced GET Example Querying for all silence entries curl s X GET httplocalhost4567silenced jq expire 3530 expireonresolve false creator null reason null check checkhaproxy subscription loadbalancer id loadbalancercheckhaproxy expire 1 expireonresolve true creator sysopexamplecom reason we ran out of time check checkntpd subscription all id allcheckntpd API specification silencedgetspecification silenced GET "},{"title":"Stashes API","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/api/stashes","display_name":"Sensu Core 1.1: Stashes API","content":" Reference documentation The stashes API endpointsthestashesapiendpoints stashes GETstashesget stashes POSTstashespost The stashespath API endpointsthestashespathapiendpoints stashespath GETstashespathget stashespath POSTstashespathpost stashespath DELETEstashespathdelete The stashes API endpoints The stashes API endpoint provides HTTP GET and HTTP POST access to Sensu stash data3 via the Sensu keyvalue store4 stashes GET EXAMPLES stashesgetexamples The following example demonstrates a stashes query which results in a JSON Array of JSON Hashes containing stash data3 curl s httplocalhost4567stashes jq path silencei424242chefclientprocess content timestamp 1383441836 expire 3600 path applicationstorefront content timestamp 1381350802 endpoints httpshostnamestore expire 1 API specification stashesgetspecification stashes GET "},{"title":"CHANGELOG","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/changelog","display_name":"Sensu Core 1.1: CHANGELOG","content":" Releases Core 113 Release Notescorev113 Core 112 Release Notescorev112 Core 111 Release Notescorev111 Core 110 Release Notescorev110 Core 104 Release Notescorev104 Core 103 Release Notescorev103 Core 102 Release Notescorev102 Core 101 Release Notescorev101 Core 100 Release Notescorev100 Core 0290 Release Notescorev0290 Core 0285 Release Notescorev0285 Core 0284 Release Notescorev0284 Core 0283 Release Notescorev0283 Core 0282 Release Notescorev0282 Core 0281 Release Notescorev0281 Core 0280 Release Notescorev0280 Core 0271 Release Notescorev0271 Core 0270 Release Notescorev0270 Core 0265 Release Notescorev0265 Core 0264 Release Notescorev0264 Core 0263 Release Notescorev0263 Core 0262 Release Notescorev0262 Core 0261 Release Notescorev0261 Core 0260 Release Notescorev0260 Core 0257 Release Notescorev0257 Core 0256 Release Notescorev0256 Core 0255 Release Notescorev0255 Core 0254 Release Notescorev0254 Core 0253 Release Notescorev0253 Core 0251 Release Notescorev0252 Core 0250 Release Notescorev0250 Core 0241 Release Notescorev0241 Core 0240 Release Notescorev0240 Core 0232 Release Notescorev0232 Core 0231 Release Notescorev0231 Core 0230 Release Notescorev0230 Core 113 Release Notes corev113 Source GitHubcom55 CHANGES corev113changes BUGFIX Fixed a bug in the Sensu client that broke check hooks named after numeric statuses eg 2 and nonzero they were never executed unless the client had a local check definition 1773 BUGFIX systemd units now stored in libsystemd instead of usrlibsystemd on Debian and Ubuntu systems sensuomnibus 240 BUGFIX Sensu processes once again honor servicespecific defaults in etcdefault or etcsysconfig sensuomnibus 226 BUGFIX Package scripts now use getent for usergroup verification sensuomnibus 237 BUGFIX Removing AIX package no longer fails when sensuclient isnt running sensuomnibus 243 Core 112 Release Notes corev112 Source GitHubcom54 CHANGES corev112changes BUGFIX Fixed a bug in the Sensu client HTTP socket that caused the Sensu client to crash when the the local client definition did not specify httpsocket settings and the info or results endpoints were accessed BUGFIX Fixed a bug in the Sensu client HTTP socket that caused the Sensu client to consider an HTTP contenttype that included mediatype information as invalid discarding possibly valid content Core 111 Release Notes corev111 Source GitHubcom53 CHANGES corev111changes BUGFIX Fixed a bug in check TTL monitoring that caused the Sensu server to crash Check TTL member deletion following the deletion of the associated check result would produce an uncaught error Core 110 Release Notes corev110 Source GitHubcom49 September 27 2017 mdash Sensu Core version 110 has been released and is available for immediate download Please note the following improvements CHANGES corev110changes IMPORTANT Sensu packages include Ruby 241 Upgrading from releases of Sensu prior to 100 will require all plugin or extension gems to be reinstalled under the new Ruby environment IMPORTANT Sensu packages include sensuplugin 20050 which disables its deprecated filter methods by default ie occurrences Sensu releases since 100 include builtin filters that provide the same functionality with several improvements The builtin filters are occurrences51 and checkdependencies52 To use the builtin filters apply them to Sensu event handlers via their definition filters attribute eg filters occurrences checkdependencies These filters can now be used with Sensu event handlers that do not use the sensuplugin library or Ruby NEW Check hooks commands run by the Sensu client in response to the result of the check command execution The Sensu client will execute the appropriate configured hook command depending on the check execution status eg 1 Valid hook names include in order of precedence 1255 ok warning critical unknown and nonzero The check hook command output status executed timestamp and duration are captured and published in the check result Check hook commands can optionally receive JSON serialized Sensu client and check definition data via STDIN NEW Check STDIN A boolean check definition attribute stdin when set to true instructs the Sensu client to write JSON serialized Sensu client and check definition data to the check command process STDIN This attribute cannot be used with existing Sensu check plugins nor Nagios plugins etc as the Sensu client will wait indefinitely for the check process to read and close STDIN IMPROVEMENT Splayed proxy check request publishing Users can now splay proxy check requests optional evenly over a window of time determined by the check interval and a configurable splay coverage percentage For example if a check has an interval of 60s and a configured splay coverage of 90 its proxy check requests would be splayed evenly over a time window of 60s 90 54s leaving 6s for the last proxy check execution before the the next round of proxy check requests for the same check Proxy check request splayed publishing can be configured with two new check definition attributes within the proxyrequests scope splay boolean to enable it and splaycoverage integer percentage defaults to 90 IMPROVEMENT Configurable check output truncation for storage in Redis Check output truncation can be manually enableddisabled with the check definition attribute truncateoutput egtruncateoutput false The output truncation length can be configured with the check definition attribute truncateoutputlength eg truncateoutputlength 1024 Check output truncation is still enabled by default for metric checks with type metric IMPROVEMENT Sensu client HTTP socket basic authentication can how be applied to all endpoints not just settings via the client definition httpsocket attribute protectallendpoints eg protectallendpoints true IMPROVEMENT Improved check TTL monitoring performance IMRPOVEMENT The Sensu extension run log event log level is now set to debug instead of info when the run output is empty and the status is 0 BUGFIX Added initial timestamp to proxy client definitions The Uchiwa and Sensu dashboards will no longer display Invalid Date BUGFIX Deleting check history when deleting an associated check result Core 104 Release Notes corev104 October 17 2017 mdash Sensu Core version 104 has been released and is available for immediate download Please note the following improvements CHANGES corev104changes DEBUG Added HTTP response body to sensuapi debuglevel log messages This is a temporary change not included in future releases Core 103 Release Notes corev103 Source GitHubcomhttpsgithubcomsensusensublobmasterCHANGELOGmd103"},{"title":"FAQs","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/faq","display_name":"Sensu Core 1.1: FAQs","content":" Sensu Frequently Asked Questions Please note the following frequently asked questions about Sensu Core Sensu Enterprise Sensu Training Professional Services for Sensu and more If you need support for Sensu please consider giving Sensu Enterprisehttpssensuapporggetstarted a try Do I need RabbitMQ to be installed on every system I wish to monitor No Sensu uses RabbitMQreferencerabbitmq as a Transportreferencetransport Sensu services require access to a shared instance of the defined Sensu Transport eg a RabbitMQ cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscription topics Does Redis need to be installed on every system I wish to monitor No Sensu uses Redisreferenceredis as a data store and the Sensu server services ie sensuserver sensuapi for Sensu Core sensuenterprise for Sensu Enterprise require access to the same Redis instance or cluster to store and access the Sensu client registry check results check execution history and current event data Do check definitions need to exist on every system I wish to monitor No Check definitions can be written as publishsubscribe pubsub or standalone Pubsub checks which specify a list of subscribers need only be configured on the Sensu server Standalone checks which are scheduled and executed by the Sensu client need only be configured on the clients where they should be run Where should check plugin executables be installed Regardless of where checks are defined the actual check executables need to exist on the filesystem for the Sensu client to execute them Check plugin executables can be installed in etcsensuplugins or optsensuembeddedbin the latter being the location where plugin executables are installed via sensuinstall What is a standalone check A standalone check is a check definition that is installed on and executed by the Sensu client without being scheduled by the Sensu server Standalone checks defer Check execution scheduling responsibilitiesoverviewarchitecturecheckexecutionscheduler to Sensu clients enabling decentralized management of monitoring checks and distribution of scheduling responsibilities Standalone checks may be used in conjunction with pubsub checks and are distinguished from pubsub checks by inclusion of the standalone true configuration parameter What happens if a single check is defined on both the Sensu server and client When a check request is published for a check defined on the Sensu server the Sensu client will look for a local definition matching the check name prior to executing the check If a local definition exists it is mergedreferenceconfigurationconfigurationmerging with the definition provided by the server with any local definition attributes overriding the definition provided by the Sensu server What is Sensu Client safemode In safemode a client will not run a check published by a Sensu server unless that check is also defined on the client Safe mode must be enabled on the Sensu Client via the safemode configuration attribute Can multiple Sensu servers be run concurrently in a cluster Yes Sensu is designed to be scaled horizontally ie by adding additional Sensu servers It supports fully automated leader election ensuring that a single Sensu server acts as a centralized Check Execution Scheduleroverviewarchitecturecheckexecutionscheduler automated failover automatically electing a new leader if the previous leader is unexpectedly unavailable and distributed event processing check results are distributed across all Sensu servers in a roundrobin fashion Running more than one Sensu server is highly recommended for performance and availability How are new systems registered Automatically Sensu clients register themselves when they start up The Sensu client process requires access to the Sensu Transportreferencetransport by default this is RabbitMQreferencerabbitmq see Sensu Configurationreferenceconfigurationtoplevelconfigurationscopes and some minimal client configuration eg a name address and one or more subscriptions in order to start When the Sensu client process starts it begins sending keepalives ndash a special type of check result containing client configuration data ndash which the Sensu server uses to know that a client is still connected When a client keepalive is received for a client name that is not currently registered with Sensu the client is added to the registry and a registration event is created automatically Do system clocks need to be synchronized Yes The Sensu services ie sensuclient sensuserver sensuapi sensuenterprise use the localsystem clock for generating timestamps When system clocks are out of sync between Sensu clients where data is collected and the Sensu server where data is processed Sensu may generate false positive client keepalive events among other potentially unexpected behaviors Time synchronization can be facilitated with NTPhttpwwwntporg Is Sensu Enterprise available as a hosted SaaS solution No Like Sensu Core Sensu Enterprisesensuenterpriseindex is installed on your organizations infrastructure alongside other applications and services Sensu Enterprise packages are available for major Linux distributions including RHEL CentOS Debian and Ubuntu Is Sensu available for Microsoft Windows Yes An MSI installer package is available on the Downloads page Please visit the Sensu documentation for more information on configuring Sensu on Windowsplatformssensuonmicrosoftwindows How do I increase log verbosity You can toggle debug logging on and off by sending the Sensu process a TRAP signal For example ps aux grep sensuserver sensu 5992 17 03 177232 24352 kill TRAP 5992 downloads httpssensuapporgdownloads"},{"title":"Adding a Client","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/guides/adding-a-client","display_name":"Sensu Core 1.1: Adding a Client","content":"Sensu clients are pieces of infrastructure that Sensu monitors for you The Sensu client software allows you to register a running instance of itself as capable of running any checks they might be eligible for Infrastructure sometimes includes hardware or services that dont necessarily support running the Sensu client software but still needs to be monitored For those cases proxy clientsproxyclients let you monitor anything you can tell Sensu about Adding a Sensu Client One of the first challenges new Sensu users often encounter is learning what is required to get a remote Sensu client1 to communicate with the Sensu server2 If youre in a hurry skip ahead to add a remote Sensu client3 for stepbystep instructions Alternatively once you understand the two requirements for adding Sensu clients youll know everything you need to start deploying Sensu clients to your entire infrastructure Please continue reading to learn how adding Sensu clients starts with configuration4 and is ultimately all about the transport5 It starts with configuration Sensu is designed to be operated via configuration This core philosophy is what enables Sensu to work so seamlessly with modern automation solutions and configuration management platforms To learn more about how Sensu is configured please consult the Sensu configuration reference documentation6 The Sensu client requires a minimal amount of configuration to enable it to automatically register itself7 with the Sensu server which configuration includes a client definition8 eg the client name address and subscriptions and a transport definition9 Its all about the transport The Sensu processes use a transport10 a message bus for communication By default this is RabbitMQ11 but modern versions of Sensu have added support for alternative transports12 including Redis13 Without a transport connection a Sensu client will be unable to send monitoring data eg keepalive messages14 check results15 etc In order to connect to the transport the Sensu client will need three pieces of information Which transport to use this tells Sensu which transport library should it load and which configuration scope should it use to obtain connection details A valid transport definition this provides Sensu with an IP address or hostname and any security credentials needed to connect to the transport Network access to the transport socket ie the Sensu client will need outbound network access and the transport will need to be configured to listen for remote network connections Add a remote Sensu client With the exception of Sensu clients that are running on the Sensu server which is very useful and strongly recommended all Sensu clients are essentially remote clients as they have to establish network communication to send monitoring data eg client keepalives14 and check results15 Please note the following steps that are required to add a remote Sensu client 1 Configure the client Create a client definition located at etcsensuconfdclientjson with the following contents replacing the values for the client name address and subscriptions with the corresponding values for the client you are adding client name i041256 address 8888 subscriptions default webserver 2 Tell the client which transport to use Create a transport definition at etcsensuconfdtransportjson with the following contents replacing the value for the transport name with the corresponding value for the transport you are using eg use transport redis if you are using the Redis transport transport name rabbitmq reconnectonerror true 3 Tell the client how to connect to the transport Create a transport definition at etcsensuconfdrabbitmqjson or etcsensuconfdredisjson if you are using the Redis transport NOTE please consult the corresponding reference documentation for RabbitMQ11 or Redis13 for more configuration examples and detailed information on how to configure Sensus connection 4 Start the client Start the Sensu client and verify connectivity by consulting the Sensu client log file NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdsensuclient start sudo service sensuclient start Proxy Clients Sometimes a logical piece of infrastructure isnt a device we can run Sensu on Fundamentally Sensu gives you the flexibility to separate how checks run from where they run which lets you monitor arbitrary named black box devices or services For example you may have a router that you cant run Sensu on but publishes interesting information over SNMP that you want to gather metrics from Or maybe your monitor which other datacenters are visibleonline to you or have any number of creative use cases You can create a proxy client16 that can have attributes for use in check execution allowing you to use the client registry naturally for managed an unmanaged infrastructure See the reference for creating proxy clients16 or details on writing checks against them17 for more Troubleshooting 1 referenceclients 2 referenceserver 3 addaremotesensuclient 4 itstartswithconfiguration 5 itsallaboutthetransport 6 referenceconfiguration 7 referenceclientsregistrationandregistry 8 referenceclientsclientdefinitionspecification 9 referencetransporttransportdefinitionspecification 10 referencetransport 11 referencerabbitmq 12 referencetransportselectingatransport 13 referenceredis 14 referenceclientsclientkeepalives 15 referencecheckscheckresults 16 referenceclientsproxyclients 17 introtochecksproxyclients"},{"title":"Intro to Checks","version":"1.1","location":"/sensu-core/1.1/guides/intro-to-checks","display_name":"undefined 1.1: Intro to Checks","content":" An Introduction to Checks The purpose of this guide is to help Sensu users create monitoring checks At the conclusion of this guide you the user should have several Sensu checks in place to monitor and measure machine resources applications and services Each Sensu monitoring check in this guide demonstrates one or more check definition features for more information please refer to the Sensu checks reference documentation1 Objectives What will be covered in this guide Creation of standard checks functional tests Creation of metric collection checks server resources etc Creation of metric analysis checks querying time series data etc What are Sensu checks whataresensuchecks Sensu checks allow you to monitor server resources services and application health as well as collect analyze metrics they are executed on servers running the Sensu client Checks are essentially commands or scripts that output data to STDOUT or STDERR and produce an exit status code to indicate a state The common exit status codes used are 0 for OK 1 for WARNING 2 for CRITICAL and 3 or greater to indicate UNKNOWN or CUSTOM Sensu checks use the same specification as Nagios therefore Nagios check plugins may be used with Sensu Create a standard check Standard Sensu checks are used to determine the health of server resources services and applications A standard check will query a resource for information to determine its state Once a standard check has determined the resource state it outputs a human readable message and exits with the appropriate exit status code to indicate its stateseverity OK WARNING etc Monitor the cron service The following instructions install the check dependencies and configure the Sensu check definition in order to monitor the Cron service Install dependencies checkcroninstalldependencies The checkprocessrb script provided by the Sensu Process Checks Plugin2 can reliably detect if a service such as Cron is running or not The following instructions will install the Sensu Process Checks Plugin2 version 006 using Sensus embedded Ruby providing the checkprocessrb script sudo sensuinstall p processchecks006 Create the check definition for Cron The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdcheckcronjson This check definition uses the checkprocessrb script installed above3 to determine if the Cron service is running The check is named cron and it runs checkprocessrb p cron on Sensu clients with the production subscription every 60 seconds interval NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks cron command checkprocessrb p cron subscribers production interval 60 For a full listing of the checkprocessrb command line arguments run optsensuembeddedbincheckprocessrb h Currently the Cron check definition requires that check requests be sent to Sensu clients with the production subscription This is known as pubsub check Optionally a check may use standalone mode which allows clients to schedule their own check executions The following is an example of the Cron check using standalone mode true The Cron check will now be executed every 60 seconds on each Sensu client with the check definition A Sensu check definition with standalone true does not need to specify subscribers checks cron command checkprocessrb p cron standalone true interval 60 By default Sensu checks use the default Sensu event handler for events they create To specify a different Sensu event handler for a check use the handler attribute The debug event handler used in this example will log the Sensu event data to the Sensu server or Sensu Enterprise log checks cron command checkprocessrb p cron standalone true interval 60 handler debug Using multiple handlers To specify multiple Sensu event handlers use the handlers attribute plural NOTE if both handler and handlers plural check definition attributes are used handlers will take precedence checks cron command checkprocessrb p cron standalone true interval 60 handlers default debug Create a metric collection check Metric collection checks are used to collect measurements from server resources services and applications Metric collection checks can output metric data in a variety of metric formats Graphite plaintext4 Nagios Performance Data5 OpenTSDB6 Metrics 20 wire format7 Measuring CPU utilization Install dependencies cpumetricsinstalldependencies The metricscpurb script provided by the Sensu CPU Checks Plugin8 collects and outputs CPU metrics in the Graphite plaintext format The following instructions will install the Sensu CPU Checks Plugin8 version 003 using Sensus embedded Ruby providing the metricscpurb script sudo sensuinstall p cpuchecks003 Create the check definition for CPU metrics The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdcpumetricsjson This check definition uses the metricscpurb script installed above9 to collect CPU metrics and output them in the Graphite plaintext format By default Sensu checks with an exit status code of 0 for OK do not create events unless they indicate a change in state from a nonzero status to a zero status ie resulting in a resolve action see Sensu Events10 Metric collection checks will output metric data regardless of the check exit status code however they usually exit 0 To ensure events are always created for a metric collection check the check type of metric is used The check is named cpumetrics and it runs metricscpurb on Sensu clients with the production subscription every 10 seconds interval The debug handler is used to log the graphite plaintext CPU metrics to the Sensu server or Sensu Enterprise log NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks cpumetrics type metric command metricscpurb subscribers production interval 10 handler debug For a full listing of the metricscpurb command line arguments run optsensuembeddedbinmetricscpurb h Create a metric analysis check A metric analysis check analyzes metric data which may or may not have been collected by a metrics collection check11 By querying external metric stores eg Graphite to perform data evaluations metric analysis checks allow you to perform powerful analytics based on trends in metric data rather than a single data point For example where monitoring and alerting on a single CPU utilization data point can result in false positive events based on momentary spikes monitoring and alerting on CPU utilization data over a specified period of time will improve alerting accuracy Because metric analysis checks require interaction with an external metric store providing a functional example is outside of the scope of this guide However assuming the existence of a Graphite installation that is populated with metric data the following example checks could be used The following check uses the checkgraphitedatarb script provided by the Sensu Graphite Plugin12 to query the Graphite API at localhost9001 The check queries Graphite for a calculated moving average using the last 10 data points of the load balancer session count The session count moving average is compared with the provided alert thresholds A Sensu client running on the Graphite server would be responsible for scheduling and executing this check standalone mode NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks sessioncount command checkgraphitedatarb s localhost9001 t movingAveragelb1assetsbackendsessioncurrent10 w 100 c 200 standalone true interval 30 The following check uses the checkgraphitedatarb script provided by the Sensu Graphite Plugin12 to query the Graphite API at localhost9001 for disk capacity metrics The Graphite API query uses highestCurrent to grab only the highest disk capacity metric to be compared with the provided alert thresholds This check will trigger an event alert when one or more disks on any machine are at the configured capacity threshold In this example configuration the check is configured to warn at 85 capacity w 85 and to raise a critical alert at 95 capacity c 95 checks diskcapacity command checkgraphitedatarb s localhost9001 t highestCurrentdiskcapacity1 w 85 c 95 a 120 standalone true interval 30 The following instructions will install the Sensu Graphite Plugin12 version 006 using Sensus embedded Ruby providing the checkgraphitedatarb script sudo sensuinstall p graphite006 Checking on Other Clients proxyclients Sensu supports running checks where the results are considered to be for a client that isnt actually the one executing the check regardless of whether that client is a Sensu client or simply a proxy client14 There are a number of reasons for this use case but fundamentally Sensu handles it the same Checks are scheduled normally but by specifying a Proxy Request13 in your check clients that match certain definitions their clientattributes cause the check to run for each one The attributes supplied must normally match exactly as stated no variables or directives have any special meaning but you can still use eval to perform more complicated filtering with Ruby on the available value such as finding clients with particular subscriptions given that were dealing with arrays proxyrequests clientattributes uservariable somevalue subscriptions eval valueincludeasubscription 1 referencechecks 2 httpsgithubcomsensupluginssensupluginsprocesschecks 3 checkcroninstalldependencies 4 httpgraphitereadthedocsorgenlatestfeedingcarbontheplaintextprotocol 5 httpnagiossourceforgenetdocs30perfdatahtml 6 httpopentsdbnetdocsbuildhtmluserguidewritinghtml 7 httpmetrics20orgspec 8 httpsgithubcomsensupluginssensupluginscpuchecks 9 cpumetricsinstalldependencies 10 referenceeventswhataresensuevents 11 metriccollectionchecks 12 httpsgithubcomsensupluginssensupluginsgraphite 13 referencechecksproxyrequestsattributes 14 addingaclientproxyclients"},{"title":"Intro to Filters","version":"1.1","location":"/sensu-core/1.1/guides/intro-to-filters","display_name":"undefined 1.1: Intro to Filters","content":" Getting Started with Filters The purpose of this guide is to help Sensu users create event filters At the conclusion of this guide you the user should have several Sensu event filters in place to filter events for one or more event handlers Each Sensu filter in this guide demonstrates one or more filter definition features for more information please refer to the Sensu filters reference documentation1 Objectives What will be covered in this guide Creation of an event filter Creation of an event filter with Ruby and math What are Sensu filters whataresensufilters Sensu filters allow you to filter out events destined for one or more event handlers Sensu filters inspect event data and match its keyvalues pairs with filter definition attributes to determine if the event should be passed to an event handler Filters are commonly used to filter event recurrences to eliminate notification noise and to filter events that are not for production machines Create an event filter Inclusive filtering The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterproductionjson This filter definition will include events that match the filter criteria In this example the filter itself is named production which matches events with a custom client attribute entitled environment with the value production filters production attributes client environment production Exclusive filtering To exclude events based on filter criteria set the negate filter definition attribute to true In this example the production filter will match events that do not have a custom client attribute entitled environment with the value production filters production attributes client environment production negate true Using a filter To use the production filter for an event handler set the filter attribute in the handler definition For example handlers mail type pipe command mailx s sensu event exampleaddresscom filter production Using multiple filters To specify multiple Sensu event filters use the filters attribute plural NOTE if both filter and filters plural handler definition attributes are used filters will take precedence handlers mail type pipe command mailx s sensu event exampleaddresscom filters production operations Create an event filter with Ruby and math Filter attributes are compared directly with their event data counterparts via Ruby object comparison However it is also possible to use Ruby expressions to evaluate event data attribute values When a filter attribute value is a string that begins with eval the remainder of the string is evaluated as a Ruby expression The event data attribute value is provided to the Ruby expression as a variable entitled value If the evaluated expression returns true the attribute is a match This Ruby expression evaluation is performed in a sandbox for safety The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterrecurrencesjson This filter excludes events that are not the first event occurrence and those that do not have an occurrence count divisible by 60 without a remainder recurrence Logically if checks with an execution interval of 1 minute are generating events every minute this filter will help reduce noise by only allowing event handling once per hour filters recurrences attributes occurrences eval value 1 value 60 0 1 referencefilters"},{"title":"Intro to Handlers","version":"1.1","location":"/sensu-core/1.1/guides/intro-to-handlers","display_name":"undefined 1.1: Intro to Handlers","content":" Getting Started with Handlers The purpose of this guide is to help Sensu users create event handlers At the conclusion of this guide you the user should have several Sensu handlers in place to handle events Each Sensu event handler in this guide demonstrates one or more handler types and definition features for more information please refer to the handlers reference documentation1 Objectives What will be covered in this guide Creation of a pipe handler Creation of a tcp handler Creation of a udp handler Creation of a transport handler Creation of a set handler What are Sensu event handlers whataresensueventhandlers Sensu event handlers are for taking action on events2 produced by check results such as sending an email alert creating or resolving a PagerDuty incident or storing metrics in Graphite There are several types of handlers pipe tcp udp transport and set Pipe handlers execute a command and pass the event data to the created process via STDIN TCP and UDP handlers send the event data to a remote socket Transport handlers publish the event data to the Sensu transport by default this is RabbitMQ Set handlers are used to group event handlers making it easier to manage many event handlers Create a pipe handler Pipe event handlers execute a command and pass the event data to the corresponding process via STDIN Install dependencies The following instructions install the eventfile Sensu handler plugin written in Ruby to etcsensupluginseventfilerb This handler plugin reads the event data via STDIN parses it creates a file name using the parsed event data and then writes the event data to the file eg tmpclientnamechecknamejson sudo wget O etcsensupluginseventfilerb httpsensuapporgdocs12fileseventfilerb sudo chmod x etcsensupluginseventfilerb The eventfile Sensu plugin requires a Ruby runtime Install Ruby from the distribution repository and sensuplugin from Rubygems NOTE the following Ruby installation steps may differ depending on your platform You may have already done the following steps as part of the getting started with checks guide3 UbuntuDebian sudo aptget update sudo aptget install ruby rubydev CentOSRHEL sudo yum install ruby rubydevel Create the pipe handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdeventfilejson This handler definition uses the eventfile plugin installed above4 to write event data to a file The handler is named file and it runs etcsensupluginseventfilerb providing it with JSON event data via STDIN NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers file type pipe command etcsensupluginseventfilerb To add a handler execution timeout to the file handler use the timeout attribute handlers file type pipe command etcsensupluginseventfilerb timeout 10 To specify which check result severities OK WARNING etc the handler supports use the severities attribute handlers file type pipe command etcsensupluginseventfilerb timeout 10 severities critical unknown To use the file handler for a check please refer to the getting started with checks guide5 Create a TCP handler TCP and UDP event handlers send event data to a remote socket Both TCP and UDP handler types use the same definition attributes The following TCP handler instructions will work for UDP with minor adjustments Because TCP and UDP handlers require interaction with an external service providing a functional example is outside of the scope of this guide However the following instructions will allow you to run a simple TCP socket that echoes any input to STDOUT for testing purposes Run a TCP server To test the TCP handler a listening TCP socket server is required For the following examples netcat nc will be used as the TCP server The following command will create a TCP socket server listening on port 6000 NOTE netcat will output messages that it receives in the terminal window This command will need to be run in a separate terminal window nc l k 4 p 6000 To test the netcat TCP socket server run the following command and observe the netcat output testing echo testing nc localhost 6000 Create the TCP handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdtcpsocketjson This TCP handler will send JSON event data to the TCP socket server netcat in this example NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers tcpsocket type tcp socket host localhost port 6000 Create a transport handler Transport handlers publish event data to the Sensu transport by default this is RabbitMQ Transport event handlers are used to deliver event data to other services using the Sensu transport Create the transport handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdtransporteventsjson This transport handler will publish JSON event data to the Sensu transport NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers transport type transport pipe type direct name events Create a set handler Set handlers are used to group event handlers into sets of handlers making it easier to reference a set of event handlers from a check definition Create the set handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfddefaulthandlerjson This set handler is named default the handler that is used for events where a handler is not specified The previous Sensu event handler examples are included in the set NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers default type set handlers debug file tcpsocket transport 1 referencehandlers 2 referenceevents 3 introtochecksinstalldependencies 4 installdependencies 5 introtocheckscreatethecheckdefinitionforcron"},{"title":"Intro to Mutators","version":"1.1","location":"/sensu-core/1.1/guides/intro-to-mutators","display_name":"undefined 1.1: Intro to Mutators","content":" Getting Started with Mutators The purpose of this guide is to help Sensu users create event data mutators At the conclusion of this guide you the user should have several Sensu mutators in place to mutate transform event data for one or more event handlers Each Sensu mutator in this guide demonstrates one or more mutator definition features for more information please refer to the Sensu mutators reference documentation1 Objectives What will be covered in this guide What are Sensu mutators Creation of a Sensu event data mutator What are Sensu mutators whataresensumutators Sensu mutators mutate transform event data for a Sensu event handler Sensu event handlers can expect event data be in a different format andor manipulated Mutators allow one or more handlers to share logic reducing code duplication and simplifying the event handlers Sensu mutators are executed on machines running the Sensu server or Sensu Enterprise Mutators are essentially commands or scripts that receive JSON formatted event data via STDIN and output the mutated event data to STDOUT Mutators use an exit status code of 0 to indicate a success anything else indicates a failure If a mutator fails to execute nonzero exit status code the event will not be handled and an error will be logged Create an event data mutator Coming soon Please see the Mutators1 reference documentation If you have questions about event data mutators please contact Sensu Support2 1 referencemutators 2 httphelpdesksensuappcom"},{"title":"Overview","version":"1.1","location":"/sensu-core/1.1/guides/overview","display_name":"undefined 1.1: Overview","content":" Getting Started Guide The complete getting started guide The purpose of this guide is to help new Sensu users to obtain a basic understanding of the primitives or components used to build a comprehensive monitoring solution In the course of working through this guide users should be able to start monitoring servers services and application health collect and analyze metrics and setup alerts Objectives This guide will provide an introduction to the following building blocks An introduction to adding clients1 An introduction to checks2 An introduction to handlers3 An introduction to filters4 An introduction to mutators5 1 addingaclient 2 introtochecks 3 introtohandlers 4 introtofilters 5 introtomutators"},{"title":"Architecture","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/overview/architecture","display_name":"Sensu Core 1.1: Architecture","content":" Sensu Architecture Architectural Overview One of advantages that Sensu provides over other monitoring solutions is its architecture which facilitates the execution of service checks collection of metric data and event processing at scale This architecture is comprised of the following components Secure Transportsecuretransport Data Storedatastore Check Execution Schedulercheckexecutionscheduler Monitoring Agentmonitoringagent Event Processoreventprocessor RESTful APIrestfulapi Architectural Diagram Sensu Architecture Gifimagessensudiagramgif Secure Transport Sensu services use a message bus eg RabbitMQ1 to communicate with one another technically speaking the Sensu services dont actually communicate with each other they only communicate with the message bus As of Sensu Core version 013 this message bus communication in Sensu has been abstracted as the Sensu Transport2 making it possible to leverage alternate transport solutions in place of RabbitMQ the default Transport Sensu services requires access to the same instance of the defined Sensu Transport eg a RabbitMQ cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscriptions Data Store Sensu leverages a data store3 for data persistence Only the Sensu server API and dashboard services require access to the data store mdash the Sensu client4 monitoring agent does not By storing data in Redis the Sensu services themselves can remain stateless Although Sensu is designed to route telemetry data to external timeseries databases eg Graphite5 Librato6 InfluxDB7 etc Sensu does store the following state data Client registry8 Check history Event registry Stashes a keyvalue store provided by the Sensu API9 Check Execution Scheduler Sensu offers two distinct check execution schedulers the Sensu server and the Sensu client monitoring agent The Sensu server schedules and publishes check execution requests to client subscriptions via a PublishSubscribe model The Sensu client monitoring agent schedules and executes standalone checks on the local system only Sensus execution schedulers are not mutually exclusive so monitoring checks may be configured for both of Sensus schedulers the Sensu server and Sensu client and Sensu will ensure that the corresponding checks are executed on the appropriate systems Monitoring Agent The Sensu client is a fully featured monitoring agent which provides the following features dynamic selfregistration client subscriptions for monitoring checks configured via the PublishSubscribe model a local check execution scheduler10 an execution platform for monitoring the local system services andor external resources an input socket for accepting input from external services Event Processor eventprocessor The Sensu server is a scalable event processor that processes event data and takes action Sensus event processing capabilities include Registering and deregistering clients Processing check results Processing monitoring events using filters11 mutators12 and handlers13 Sensus event processor is designed to scale along with the applications and infrastructure it is monitoring Although Event Handlers are executed locally by the Sensu server multiple instances of the Sensu server can be run without any additional configuration Sensu provides builtin task election to avoid scheduling conflicts between Sensu servers and the Sensu transport14 distributes via roundrobin check results between Sensu servers for processing which provides loadbalancing RESTful API Sensu provides access to monitoring data and core functionality via a RESTful HTTP JSON API including A Clients API15 for accessing Client data and addingremoving clients A Checks API16 for accessing Check configuration data and publishing check requests An Events API17 for accessing event data and resolving events A Results API18 for accessing check result data and publishing check results An Aggregates API19 for accessing aggregated check result data and deleting aggregate data A Stashes API20 for providing readwrite access to Redis underlying keyvalue functionality 1 httpwwwrabbitmqcom 2 httpgithubcomsensusensutransport 3 referencedatastore 4 referenceclients 5 httpsgithubcomgraphiteproject 6 httpswwwlibratocom 7 httpsinfluxdatacom 8 referenceclientsregistrationandregistry 9 apioverview 10 checkexecutionscheduler 11 referencefilters 12 referencemutators 13 referencehandlers 14 referencetransport 15 apiclientsapi 16 apichecksapi 17 apieventsapi 18 apiresultsapi 19 apiaggregatesapi 20 apistashesapi"},{"title":"How Sensu Works","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/overview/how-sensu-works","display_name":"Sensu Core 1.1: How Sensu Works","content":" The Sensu Monitoring Flow Publishing subscription check requests A Check Request is scheduledpublished by the Sensu Server or a Sensu Client The Sensu Client executes a Service Check Service Checks emit status information and telemetry data as Check Results Check Results are considered to be associated with either the Sensu Client executing the check or the Proxy Client of the check Those Check Results are published by the Sensu Client to the Sensu Transport sometimes on behalf of another client The Sensu Server processes Check Results persisting a copy of the latest result in the Data Store and creating a corresponding to Event The Sensu Server processes the Event by executing one or more Event Handlers The Sensu Server applies any Event Filters defined for an Event Handler The Sensu Server applies any Event Data Mutators defined for an Event Handler assuming the event was not filtered out The Sensu Server executes the Event Handler assuming the event was not filtered out Sensu Architecture Gifimagessensudiagramgif"},{"title":"Platforms","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/overview/platforms","display_name":"Sensu Core 1.1: Platforms","content":" Sensu Core All versions of Sensu including Sensu Enterprise are based on the same core components and functionality which are provided by the Sensu opensource software project1 and collectively referred to as Sensu Core Sensu Core provides multiple processes including the Sensu server2 sensuserver Sensu API3 sensuapi and Sensu client4 sensuclient Installer packages are available for most modern operating systems via native installer packages eg deb rpm msi pkg etc which are available for download from the Sensu website5 and from package manager repositories for APT for UbuntuDebian systems and YUM for RHELCentOS NOTE although Sensu Core packages are available for a variety of platforms ndash thus making it technically possible to run the sensuserver and sensuapi processes on nonLinux operating systems ndash we strongly recommended running the Sensu Server and API on a Linuxbased platform Sensu Core installer packages for nonLinux platforms are provided for the purpose of making the sensuclient available and are not tested as extensively for running the sensuserver and sensuapi processes Sensu Server API UbuntuDebianplatformssensuonubuntudebianhtmlsensucore RHELCentOSplatformssensuonrhelcentoshtmlsensucore Sensu Client UbuntuDebianplatformssensuonubuntudebiansensucore RHELCentOSplatformssensuonrhelcentossensucore Microsoft Windowsplatformssensuonmicrosoftwindowssensucore Mac OS Xplatformssensuonmacosxsensucore FreeBSDplatformssensuonfreebsdsensucore IBM AIXplatformssensuonibmaixsensucore Oracle Solarisplatformssensuonoraclesolarissensucore Sensu Enterprise Sensu Enterprise6 is designed to be a dropin replacement for the Sensu Core server and API only ie Sensu Enterprise uses the same client as Sensu Core Sensu Enterprise provides a single process called sensuenterprise which provides addedvalue7 replacements for the Sensu Core server sensuserver and API sensuapi Sensu Enterprise Server API UbuntuDebianplatformssensuonubuntudebiansensuenterprise RHELCentOSplatformssensuonrhelcentossensuenterprise Sensu Enterprise Client As mentioned above Sensu Enterprise uses the same sensuclient process as Sensu Core By sharing the same opensource monitoring agent upgrading to Sensu Enterprise from Sensu Core is simplified as theres no need to upgrade agents mdash simply replace the server and API components Consequently Sensu Enterprise does not need to be installed on every system being monitored by Sensu 1 httpsgithubcomsensu 2 referenceserver 3 apioverview 4 referenceclients 5 httpssensuapporgdownload 6 httpssensuapporgenterprise 7 httpssensuapporgenterpriseadvantage"},{"title":"What is Sensu?","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/overview/what-is-sensu","display_name":"Sensu Core 1.1: What is Sensu?","content":"Sensu is an infrastructure and application monitoring and telemetry solution Sensu provides a framework for monitoring infrastructure service application health and business KPIs Sensu is specifically designed to solve monitoring challenges introduced by modern infrastructure platforms with a mix of static dynamic and ephemeral infrastructure at scale ie public private and hybrid clouds Sensu allows organizations to compose comprehensive monitoring telemetry solutions to meet unique business requirements By providing a platform to build upon Sensu enables you to focus on what to monitor and measure rather than how Sensu is installed on your organizations infrastructure ndash it is not a SoftwareasaService SaaS solution ndash which means Sensu gives you full control over the availability of your monitoring solution Benefits Sensu is a comprehensive infrastructure and application monitoring solution that provides the following benefits Monitor servers services application health and business KPIs Sensu is an infrastructure and application monitoring telemetry solution Send alerts and notifications Sensu integrates with the tools and services your organization is already using to do things like send emails PagerDuty1 alerts Slack2 HipChat3 IRC notifications and many4 more5 Dynamic client registration deregistration When servers are provisioned they automatically register themselves with Sensu so theres no need to manually add or configure new servers A simple yet extensible model for monitoring Sensu provides a sophisticated yet simple to understand solution for executing service checks6 and processing events7 at scale Service checks provide status and telemetry data and event handlers process results Hundreds of plugins are available for monitoring the tools and services youre already using Plugins have a very simple specification and can be written in any programming language Built for missioncritical applications and multitiered networks Sensus use of a secure transport8 protects your infrastructure from exposure and makes it possible for Sensu to traverse complex network topologies including those that use NAT and VPNs and span public networks Sensu provides a secure monitoring solution trusted by international banking institutions government agencies Fortune 100 organizations and many more Designed for automation Sensu exposes 100 of its configuration as JSON files which makes it extremely automationndashfriendly eg it was designed to work with tools like Chef9 Puppet10 and Ansible11 Open source software with commercial support Sensu is an opensource software OSS project made freely available under a permissive MIT License12 the source code is publicly available on GitHub13 Sensu Enterprise14 is based on Sensu Core the OSS version of Sensu which makes addedvalue features commercial support training and many other benefits available under the Sensu License15 A Simple Yet Powerful Framework Sensu is a comprehensive monitoring solution that is powerful enough to solve complex monitoring problems at scale yet simple enough to use for traditional monitoring scenarios and small environments It achieves this broad appeal via building upon two simple yet powerful monitoring primitives Service Checks16 and Event Processing7 These building blocks also provide an infinitely extensible framework for composing monitoring solutions What is a Service Check servicechecks Service checks allow you to monitor services eg is Nginx running or measure resources eg how much disk space do I have left Service checks are executed on machines running a monitoring agent ie Sensu client17 Service checks are essentially commands or scripts that output data to STDOUT or STDERR and produce an exit status code to indicate a state Common exit status codes used are 0 for OK 1 for WARNING 2 for CRITICAL and 3 or greater to indicate UNKNOWN or CUSTOM Sensu checks use the same specification as Nagios therefore Nagios check plugins may be used with Sensu Service checks produce results that are processed by the event processor ie the Sensu server Learn more 17 What is Event Processing eventprocessing Event processing also called stream processing is a method of analyzing processing and storing streams of information data about things that happen events deriving a conclusion from them and potentially executing some action handling The Sensu event processor the Sensu server enables you to execute Handlers18 for taking action on events produced by service checks such as sending an email alert creating or resolving an incident eg in PagerDuty or ServiceNow or storing metric data in a timeseries database eg Graphite Learn more 18 1 httpswwwpagerdutycom 2 httpsslackcom 3 httpwwwhipchatcom 4 referenceplugins 5 referenceenterprisebuiltinintegrations 6 servicechecks 7 eventprocessing 8 architecturesecuretransport 9 httpwwwchefio 10 httpspuppetlabscom 11 httpwwwansiblecom 12 httpsgithubcomsensusensublobmasterMITLICENSEtxt 13 httpgithubcomsensu 14 httpssensuapporgenterprise 15 httpssensuapporgsensulicense 16 servicechecks 17 referenceclients 18 referencehandlers"},{"title":"BSD","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/platforms/sensu-on-bsd","display_name":"Sensu Core 1.1: BSD","content":" Sensu on FreeBSD Reference documentation Installing Sensu Coresensucore Download and install Sensu using the Sensu txz filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Install Sensu Core sensucore Sensu Core is installed on FreeBSD systems via a native system installer package ie a txz file which is available for download from the Sensu Downloads1 page and from this repository 64bit FreeBSD 10 only2 WARNING FreeBSD packages are currently as a beta release Support for running Sensu on FreeBSD will be provided on a besteffort basis until further notice Download and install Sensu using the Sensu Universal txz file downloadandinstallsensucore NOTE As of Sensu version 027 package repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page NOTE FreeBSD packages are available for FreeBSD 10 and 11 Please visit the Sensu Downloads1 page for more information 2 Install the sensu1201txz package using the pkg utility sudo pkg add sensu1201txz 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Configure Sensu By default all of the Sensu services on FreeBSD systems will load configuration from the following locations usrlocaletcsensuconfigjson usrlocaletcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir usrlocaletcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at usrlocaletcsensuconfdclientjson client name freebsdclient address 127001 environment development subscriptions dev freebsdhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at usrlocaletcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Coming soon 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetfreebsd 3 httpssensuglobalsslfastlynetfreebsdFreeBSD10amd64sensusensu1201txz 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 configuresensu 10 exampletransportconfiguration 11 exampleclientconfiguration"},{"title":"IBM AIX","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/platforms/sensu-on-ibm-aix","display_name":"Sensu Core 1.1: IBM AIX","content":" Sensu on IBM AIX Installing Sensu Coresensucore Download and install Sensu using the Sensu bff filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Known limitationsknownlimitations Foreign Function Interfaceforeignfunctioninterface Install Sensu Core sensucore Sensu Core is installed on IBM AIX systems via a native system installer package ie a bff file which is available for download from the Sensu Downloads1 page and from this repository2 Download and install Sensu using the Sensu bff package downloadandinstallsensucore NOTE As of Sensu version 027 repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 The Sensu installer package for IBM AIX systems is provided in backup file format bff In order to install the content you will need to know the Fileset Name Display the content using the installp utility installp ld sensu1201powerpcbff Once you have collected the fileset name you can optionally proceed to preview installation using the installp utility with the p preview flag installp apXY d sensu1201powerpcbff sensu 3 Install Sensu using the installp utility installp aXY d sensu1201powerpcbff sensu NOTE this command uses the following installp utilty flags a to apply changes to the system X to extend the file system and Y to accept the Sensu MIT License4 4 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition11 and client definition12 Configure Sensu By default all of the Sensu services on IBM AIX systems will load configuration from the following locations etcsensuconfigjson etcsensuconfdjson NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name aixclient address localhost environment development subscriptions dev aixhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification13 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Managing the Sensu client process servicemanagement Start or stop the Sensu client using the startsrc and stopsrc utilities10 startsrc s sensuclient stopsrc s sensuclient Known limitations Please note the following platformspecific limitations affecting Sensu on AIX at this time Unless otherwise stated all documented functions of the Sensu client are supported Foreign Function Interface Foreign Function Interface FFI9 calls on Sensus embedded Ruby on AIX are not working at this time so any Rubybased Sensu plugins that require FFI will not work however all other plugins should work It is possible that FFI support will be enabled in a future release 1 httpssensuapporgdownloads 2 httpssensuglobalsslfastlynetaix 3 httpssensuglobalsslfastlynetaix61sensu1201powerpcbff 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 httpsgithubcomffiffi 10 configuresensu 11 exampletransportconfiguration 12 exampleclientconfiguration 13 referencetransporttransportdefinitionspecification"},{"title":"Mac OS X","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/platforms/sensu-on-mac-osx","display_name":"Sensu Core 1.1: Mac OS X","content":" Sensu on Mac OS X Installing Sensu Coresensucore Download and install Sensu using the Sensu Universal pkg filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Configure the Sensu client launchd daemonconfigurethesensuclientlaunchddaemon Operating Sensuoperatingsensu Managing the Sensu client process with launchctlservicemanagement Interacting with Sensu via CLIinteractingwithsensuviacli Install Sensu Core sensucore Sensu Core is installed on Mac OS X systems via a native system installer package ie a pkg file which is available for download from the Sensu Downloads1 page and from this repository2 WARNING Mac OS X packages are currently as a beta release Support for running Sensu on Mac OS X will be provided on a besteffort basis until further notice Download and install Sensu using the Sensu Universal pkg file downloadandinstallsensucore 1 Download Sensu from the Sensu Downloads1 page NOTE the Universal pkg file supports OS X Mavericks 109 and newer Mountain Lion users please use this installer3 2 Install the package using the installer utility sudo installer pkg sensu1201pkg target 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section12 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition13 and client definition14 Configure Sensu By default all of the Sensu services on Mac OS X systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus launchd daemon configuration XML andor by starting the Sensu services with the corresponding CLI arguments For more information please see the configure the Sensu client launchd daemon4 section below The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name macosxclient address 127001 environment development subscriptions dev macosxhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification15 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Configure the Sensu client launchd daemon The Sensu Core pkg package includes a Sensu client daemon configuration allowing Sensu to be run as a launchd job or daemon The OS X launchd service and launchctl utility use a plist file9 an XMLbased configuration file to configure the sensuclient daemon run arguments eg log varlogsensusensuclientlog 1 To configure the Sensu client service wrapper copy the default service definition file entitled orgsensuappsensuclientplist to LibraryLaunchDaemonsorgsensuappsensuclientplist and edit it with your favorite text editor sudo cp optsensuembeddedCellarsensu120LibraryLaunchDaemonsorgsensuappsensuclientplist LibraryLaunchDaemonsorgsensuappsensuclientplist 2 This XML configuration file allows you to set Sensu client CLI arguments10 The following example configuration file sets the Sensu client primary configuration file path to etcsensuconfigjson the Sensu configuration directory to etcsensuconfd and the log file path to etcsensusensuclientlog Labelorgsensuappsensuclient ProgramArguments optsensubinsensuclient cetcsensuconfigjson detcsensuconfd lvarlogsensusensuclientlog UserNamesensu GroupNamesensu RunAtLoad KeepAlive StandardOutPathvarlogsensusensuclientlog StandardErrorPathvarlogsensusensuclientlog Operating Sensu Managing the Sensu client process with launchctl servicemanagement Start or stop the Sensu client using the launchctl utility11 sudo launchctl load w LibraryLaunchDaemonsorgsensuappsensuclientplist sudo launchctl unload w LibraryLaunchDaemonsorgsensuappsensuclientplist Interacting with Sensu via CLI Interacting with the any of the installed Sensu processes eg sensuclient via CLI on Mac OS X requires running the processes as the sensu user which is installed by the Sensu OS X installer package EXAMPLE sudo u sensu optsensubinsensuclient V 120 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetosx 3 httpssensuglobalsslfastlynetosxsensu1201mountainlionpkg 4 configurethesensuclientlaunchddaemon 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 httpsdeveloperapplecomlibrarymacdocumentationDarwinReferenceManPagesman5plist5html 10 referenceconfigurationsensuservicecliarguments 11 httpsdeveloperapplecomlibrarymacdocumentationDarwinReferenceManPagesman1launchctl1html 12 configuresensu 13 exampletransportconfiguration 14 exampleclientconfiguration 15 referencetransporttransportdefinitionspecification"},{"title":"Solaris","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/platforms/sensu-on-oracle-solaris","display_name":"Sensu Core 1.1: Solaris","content":" Sensu on Solaris Reference documentation Installing Sensu Coresensucore Download and install Sensu on Solaris 10downloadandinstallsensucoreonsolaris10 Download and install Sensu on Solaris 11downloadandinstallsensucoreonsolaris11 Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Install Sensu sensucore Sensu Core is installed on Solaris systems via native system installer packages ie pkg or IPS13 p5p files which are available for download from the Sensu Downloads1 page and from these repositories Solaris 10 pkg2 and Solaris 11 IPS p5p3 Download and install Sensu on Solaris 10 downloadandinstallsensucoreonsolaris10 NOTE As of Sensu version 10 package repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 Install the sensu1201i386pkg package using the pkgadd utility su pkgadd d sensu1201i386pkg 3 Install the Sensu service init scripts using the svccfg utility svccfg import libsvcmanifestsitesensuclientxml 4 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Download and install Sensu on Solaris 11 downloadandinstallsensucoreonsolaris11 1 Download Sensu from the Sensu Downloads1 page or by using the wget utility wget httpssensuglobalsslfastlynetsolarisips511sensu1201i386p5p 2 Install the sensu1201i386p5p package using the pkg utility sudo pkg install g sensu1201i386p5p developerversioningsensu 3 Download and run the Sensu postinstall script12 wget httpssensuapporgdocs12filespostinstsh chmod x postinstsh sudo postinstsh NOTE all native system installer packages for Sensu contain this postinstall script which is used for setting up the sensu system user and group creating various configuration directories setting configuration directory permissions and creating service init scripts This step may will be included in future Solaris 11 packages however at this time it is necessary to perform these steps manually 4 Install the Sensu service init scripts using the svcadm utility sudo svcadm restart manifestimport 5 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Configure Sensu By default all of the Sensu services on Solaris systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name solarisclient address 127001 environment development subscriptions dev solarishosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Managing the Sensu client process servicemanagement Manually start stop and restart the Sensu services using the svcadm utility svcadm enable sensuclient svcadm disable sensuclient svcadm restart sensuclient 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetsolarispkg 3 httpssensuglobalsslfastlynetsolarisips 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 configuresensu 10 exampletransportconfiguration 11 exampleclientconfiguration 12 filespostinstsh 13 httpwwworaclecomtechnetworkserverstoragesolaris11technologiesips323421html"},{"title":"RHEL/CentOS","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/platforms/sensu-on-rhel-centos","display_name":"Sensu Core 1.1: RHEL/CentOS","content":" Sensu on RHELCentOS Reference documentation Installing Sensu Coresensucore Install Sensu using YUMinstallsensucorerepository Installing Sensu Enterprisesensuenterprise Install the Sensu Enterprise repositoryinstallsensuenterpriserepository Install Sensu Enterprise server APIinstallsensuenterprise Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Example data store configurationexampledatastoreconfiguration Example API configurationsexampleapiconfigurations Standalone configurationapistandaloneconfiguration Distributed configurationapidistributedconfiguration Example Sensu Enterprise Dashboard configurationsexamplesensuenterprisedashboardconfigurations Standalone configurationdashboardstandaloneconfiguration Distributed configurationdashboarddistributedconfiguration Enable the Sensu services to start on bootenablethesensuservicestostartonboot Disable the Sensu services on bootdisablethesensuservicesonboot Operating Sensuoperatingsensu Managing the Sensu servicesprocessesservicemanagement Install Sensu Core sensucore Sensu Core is installed on RHEL and CentOS systems via a native system installer package ie a rpm file which is available for download from the Sensu Downloads1 page and from YUM package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Install Sensu using YUM recommended installsensucorerepository Sensu packages for Red Hat target currently supported versions of Red Hat Enterprise Linux and their Centos equivalents These packages are generally expected to be compatible with Red Hat derivatives like SuSE Amazon or Scientific Linux but packages are not tested on these platforms The following instructions describe configuring package repository definitions using Yum variables14 as components of the baseurl On Red Hat derivative platforms the value of the releasever variable will not typically align with the RHEL release versions eg 6 or 7 advertised in the Sensu Yum repository Please use 6 or 7 in lieu of releasever on RHEL derivatives depending on whether they use sysv init or systemd respectively NOTE As of Sensu version 027 the yum repository URL has changed to include the releasever variable To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Sensu sudo yum install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 3 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition11 The Sensu client will need a client definition12 and both the sensuserver and sensuapi will need a datastore Redis definition13 mdash all of which are explained below Install Sensu Enterprise sensuenterprise Sensu Enterprise2 is installed on RHEL and CentOS systems via a native system installer package ie a rpm file The Sensu Enterprise installer package is made available via the Sensu Enterprise YUM repository which requires access credentials to access The Sensu Enterprise packages install two processes sensuenterprise which provides the Sensu server and API from a single process and sensuenterprisedashboard which provides the dashboard API and web application WARNING Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server and API only Sensu Enterprise uses the same sensuclient process provided by the Sensu Core installer packages above As a result Sensu Enterprise does not need to be installed on every system being monitored by Sensu Install the Sensu Enterprise repository installsensuenterpriserepository 1 Set access credentials as environment variables SEUSER1234567890 SEPASSPASSWORD NOTE please replace 1234567890 and PASSWORD with the access credentials provided with your Sensu Enterprise subscription Confirm that you have correctly set your access credentials as environment variables echo SEUSERSEPASS 1234567890PASSWORD 2 Create a YUM repository configuration file for the Sensu Enterprise repository at etcyumreposdsensuenterpriserepo echo sensuenterprise namesensuenterprise baseurlhttpSEUSERSEPASSenterprisesensuappcomyumnoarch gpgcheck0 enabled1 sudo tee etcyumreposdsensuenterpriserepo 3 Create a YUM repository configuration file for the Sensu Enterprise Dashboard repository at etcyumreposdsensuenterprisedashboardrepo echo sensuenterprisedashboard namesensuenterprisedashboard baseurlhttpSEUSERSEPASSenterprisesensuappcomyumbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensuenterprisedashboardrepo 4 Install Sensu Enterprise sudo yum install sensuenterprise sensuenterprisedashboard 5 Configure Sensu Enterprise No default configuration is provided with Sensu Enterprise so Sensu Enterprise will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu Enterprise Configure Sensu By default all of the Sensu services on Ubuntu and Debian systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE Additional or alternative configuration file and directory locations may be used by modifying Sensus service scripts andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration3 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name rhelclient address 127001 environment development subscriptions dev rhelhosts socket bind 127001 port 3030 Example transport configuration At minimum all of the Sensu processes require configuration to tell them how to connect to the configured Sensu Transport4 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification11 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis5 or RabbitMQ6 reference documentation Example data store configuration The Sensu Core server and API processes and the Sensu Enterprise process all require configuration to tell them how to connect to Redis the Sensu data store Please refer to the Redis reference documentation5 for configuration file examples Example API configurations Standalone configuration apistandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensuconfdapijson api host localhost bind 0000 port 4567 Distributed configuration apidistributedconfiguration 1 Obtain the IP address of the system where the Sensu API is installed For the purpose of this guide we will use 10017 as our example IP address 1 Create a configuration file with the following contents at etcsensuconfdapijson on the Sensu server and API systems api host 10017 bind 10017 port 4567 Example Sensu Enterprise Dashboard configurations Standalone configuration dashboardstandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host localhost port 4567 dashboard host 0000 port 3000 Distributed configuration dashboarddistributedconfiguration 1 Obtain the IP address of the system where Sensu Enterprise is installed For the purpose of this guide we will use 10017 as our example IP address 2 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host 10017 port 4567 dashboard host 0000 port 3000 NOTE Multiple Sensu Enterprise Dashboard instances can be installed When load balancing across multiple Dashboard instances your load balancer should support sticky sessions 3 The Sensu Enterprise Dashboard process requires configuration to tell it how to connect to Redis the Sensu data store Please refer to the Redis installation instructions5 for configuration file examples Enable the Sensu services to start on boot By default the Sensu services are not configured to start automatically on system boot we recommend managing the Sensu services with a process supervisor such as runit7 To enable Sensu services on system boot use the chkconfig utility8 Enable the Sensu client on system boot sudo chkconfig sensuclient on Enable the Sensu server and API to start on system boot For Sensu Core users ie sensuserver and sensuapi sudo chkconfig sensuserver on sudo chkconfig sensuapi on For Sensu Enterprise users sudo chkconfig sensuenterprise on WARNING the sensuenterprise process is intended to be a dropin replacement for the Sensu Core sensuserver and sensuapi processes Please ensure that the Sensu Core processes are not configured to start on system8 boot before enabling Sensu Enterprise to start on system boot Enable Sensu Enterprise Dashboard on system boot sudo chkconfig sensuenterprisedashboard defaults WARNING the sensuenterprisedashboard process is intended to be a dropin replacement for the Uchiwa dashboard Please ensure that the Uchiwa processes are not configured to start on system boot before enabling the Sensu Enterprise Dashboard to start on system boot Disable the Sensu services on boot If you have enabled Sensu services on boot and now need to disable them this can also be accomplished using the chkconfig utility9 Disable the Sensu client on system boot sudo chkconfig sensuclient off Disable the Sensu Core server on system boot sudo chkconfig sensuserver off Disable the Sensu Core API on system boot sudo chkconfig sensuapi off Disable Sensu Enterprise on system boot sudo chkconfig sensuenterprise off Disable Sensu Enterprise Dashboard on system boot sudo chkconfig sensuenterprisedashboard remove Operating Sensu Managing the Sensu servicesprocesses servicemanagement To manually start and stop the Sensu services use the following commands NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdsensuclient start Start or stop the Sensu client sudo service sensuclient start sudo service sensuclient stop Start or stop the Sensu Core server sudo service sensuserver start sudo service sensuserver stop Start or stop the Sensu Core API sudo service sensuapi start sudo service sensuapi stop Start or stop Sensu Enterprise sudo service sensuenterprise start sudo service sensuenterprise stop Start or stop the Sensu Enterprise Dashboard sudo service sensuenterprisedashboard start sudo service sensuenterprisedashboard stop Verify the Sensu Enterprise Dashboard is running by visiting view the dashboard at httplocalhost3000 replace localhost with the hostname or IP address where the Sensu Enterprise Dashboard is running 1 httpssensuapporgdownload 2 httpssensuapporgenterprise 3 referenceconfiguration 4 referencetransport 5 referenceredissensuredisconfiguration 6 referencerabbitmqsensurabbitmqconfiguration 7 httpsmardenorgrunit 8 disablethesensuservicesonboot 9 httpsaccessredhatcomdocumentationenUSRedHatEnterpriseLinux6htmlDeploymentGuides2serviceschkconfightml 10 configuresensu 11 exampletransportconfiguration 12 exampleclientconfiguration 13 exampledatastoreconfiguration 14 httpsaccessredhatcomdocumentationenUSRedHatEnterpriseLinux6htmlDeploymentGuidesecUsingYumVariableshtml"},{"title":"Ubuntu/Debian","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/platforms/sensu-on-ubuntu-debian","display_name":"Sensu Core 1.1: Ubuntu/Debian","content":" Sensu on UbuntuDebian Reference documentation Installing Sensu Coresensucore Install Sensu using APTinstallsensucorerepository Installing Sensu Enterprisesensuenterprise Install the Sensu Enterprise repositoryinstallsensuenterpriserepository Install Sensu Enterprise server APIinstallsensuenterprise Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Example data store configurationexampledatastoreconfiguration Example API configurationsexampleapiconfigurations Standalone configurationapistandaloneconfiguration Distributed configurationapidistributedconfiguration Example Sensu Enterprise Dashboard configurationsexamplesensuenterprisedashboardconfigurations Standalone configurationdashboardstandaloneconfiguration Distributed configurationdashboarddistributedconfiguration Enable the Sensu services to start on bootenablethesensuservicestostartonboot Disable the Sensu services on bootdisablethesensuservicesonboot Operating Sensuoperatingsensu Managing the Sensu servicesprocessesservicemanagement Install Sensu Core sensucore Sensu Core is installed on Ubuntu and Debian systems via a native system installer package ie a deb file which is available for download from the Sensu Downloads1 page and from APT package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Sensu packages for Debian target current stable and oldstable releases15 Sensu packages for Ubuntu target current Long Term Support LTS releases16 If you wish to install Sensu packages on newer Debian or Ubuntu releases please try installing a package built for the most recent Debian stable or Ubuntu LTS release Install Sensu using APT recommended installsensucorerepository NOTE As of Sensu version 027 apt repository configuration has changed to include the codename of the UbuntuDebian release To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Install the GPG public key wget q httpssensuglobalsslfastlynetaptpubkeygpg O sudo aptkey add 2 Determine the codename of the UbuntuDebian release on your system etcosrelease echo VERSION 14044 LTS Trusty Tahr codename for this system is trusty 3 Create an APT configuration file at etcaptsourceslistdsensulist export CODENAMEyourreleasecodenamehere eg trusty echo deb httpssensuglobalsslfastlynetapt CODENAME main sudo tee etcaptsourceslistdsensulist 4 Update APT sudo aptget update 5 Install Sensu sudo aptget install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 6 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition12 The Sensu client will need a client definition13 and both the sensuserver and sensuapi will need a datastore Redis definition14 mdash all of which are explained below Install Sensu Enterprise sensuenterprise Sensu Enterprise2 is installed on Ubuntu and Debian systems via a native system installer package ie a deb file The Sensu Enterprise installer package is made available via the Sensu Enterprise APT repository which requires access credentials to access The Sensu Enterprise packages install two processes sensuenterprise which provides the Sensu server and API from a single process and sensuenterprisedashboard which provides the dashboard API and web application WARNING Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server and API only Sensu Enterprise uses the same sensuclient process provided by the Sensu Core installer packages above As a result Sensu Enterprise does not need to be installed on every system being monitored by Sensu Install the Sensu Enterprise repository installsensuenterpriserepository 1 Set access credentials as environment variables SEUSER1234567890 SEPASSPASSWORD NOTE please replace 1234567890 and PASSWORD with the access credentials provided with your Sensu Enterprise subscription Confirm that you have correctly set your access credentials as environment variables echo SEUSERSEPASS 1234567890PASSWORD 2 Install the GPG public key wget q httpSEUSERSEPASSenterprisesensuappcomaptpubkeygpg O sudo aptkey add 3 Create an APT configuration file at etcaptsourceslistdsensuenterpriselist echo deb httpSEUSERSEPASSenterprisesensuappcomapt sensuenterprise main sudo tee etcaptsourceslistdsensuenterpriselist 4 Update APT sudo aptget update 5 Install Sensu Enterprise sudo aptget install sensuenterprise sensuenterprisedashboard 6 Configure Sensu Enterprise No default configuration is provided with Sensu Enterprise so Sensu Enterprise will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu Enterprise Configure Sensu By default all of the Sensu services on Ubuntu and Debian systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE Additional or alternative configuration file and directory locations may be used by modifying Sensus service scripts andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration3 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually sudo mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name ubuntuclient address 127001 environment development subscriptions dev ubuntuhosts socket bind 127001 port 3030 Example transport configuration At minimum all of the Sensu processes require configuration to tell them how to connect to the configured Sensu Transport4 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis5 or RabbitMQ6 reference documentation Example data store configuration The Sensu Core server and API processes and the Sensu Enterprise process all require configuration to tell them how to connect to Redis the Sensu data store Please refer to the Redis reference documentation5 for configuration file examples Example API configurations Standalone configuration apistandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensuconfdapijson api host localhost bind 0000 port 4567 Distributed configuration apidistributedconfiguration 1 Obtain the IP address of the system where the Sensu API is installed For the purpose of this guide we will use 10017 as our example IP address 2 Create a configuration file with the following contents at etcsensuconfdapijson on the Sensu server and API systems api host 10017 bind 10017 port 4567 Example Sensu Enterprise Dashboard configurations Standalone configuration dashboardstandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host localhost port 4567 dashboard host 0000 port 3000 Distributed configuration dashboarddistributedconfiguration 1 Obtain the IP address of the system where Sensu Enterprise is installed For the purpose of this guide we will use 10017 as our example IP address 2 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host 10017 port 4567 dashboard host 0000 port 3000 NOTE Multiple Sensu Enterprise Dashboard instances can be installed When load balancing across multiple Dashboard instances your load balancer should support sticky sessions 3 The Sensu Enterprise Dashboard process requires configuration to tell it how to connect to Redis the Sensu data store Please refer to the Redis installation instructions5 for configuration file examples Enable the Sensu services to start on boot By default the Sensu services are not configured to start automatically on system boot we recommend managing the Sensu services with a process supervisor such as runit7 To enable Sensu services on system boot use the updatercd utility Enable the Sensu client on system boot sudo updatercd sensuclient enable Enable the Sensu server and API to start on system boot For Sensu Core users ie sensuserver and sensuapi sudo updatercd sensuserver enable sudo updatercd sensuapi enable For Sensu Enterprise users sudo updatercd sensuenterprise enable WARNING the sensuenterprise process is intended to be a dropin replacement for the Sensu Core sensuserver and sensuapi processes Please ensure that the Sensu Core processes are not configured to start on system boot8 before enabling Sensu Enterprise to start on system boot Enable Sensu Enterprise Dashboard on system boot sudo updatercd sensuenterprisedashboard enable WARNING the sensuenterprisedashboard process is intended to be a dropin replacement for the Uchiwa dashboard Please ensure that the Uchiwa processes are not configured to start on system boot before enabling the Sensu Enterprise Dashboard to start on system boot Disable the Sensu services on boot If you have enabled Sensu services on boot and now need to disable them this can also be accomplished using the updatercd utility9 Disable the Sensu client on system boot sudo updatercd sensuclient disable Disable the Sensu Core server on system boot sudo updatercd sensuserver disable Disable the Sensu Core API on system boot sudo updatercd sensuapi disable Disable Sensu Enterprise on system boot sudo updatercd sensuenterprise disable Disable Sensu Enterprise Dashboard on system boot sudo updatercd sensuenterprisedashboard disable Operating Sensu Managing the Sensu servicesprocesses servicemanagement To manually start and stop the Sensu services use the following commands Start or stop the Sensu client sudo service sensuclient start sudo service sensuclient stop Start or stop the Sensu Core server sudo service sensuserver start sudo service sensuserver stop Start or stop the Sensu Core API sudo service sensuapi start sudo service sensuapi stop Start or stop Sensu Enterprise sudo service sensuenterprise start sudo service sensuenterprise stop Start or stop the Sensu Enterprise Dashboard sudo service sensuenterprisedashboard start sudo service sensuenterprisedashboard stop Verify the Sensu Enterprise Dashboard is running by visiting view the dashboard at httplocalhost3000 replace localhost with the hostname or IP address where the Sensu Enterprise Dashboard is running 1 httpssensuapporgdownload 2 httpssensuapporgenterprise 3 referenceconfiguration 4 referencetransport 5 referenceredissensuredisconfiguration 6 referencerabbitmqsensurabbitmqconfiguration 7 httpsmardenorgrunit 8 disablethesensuservicesonboot 9 httpmanpagesubuntucommanpagespreciseman8updatercd8html 10 referencetransporttransportdefinitionspecification 11 configuresensu 12 exampletransportconfiguration 13 exampleclientconfiguration 14 exampledatastoreconfiguration 15 httpswikidebianorgDebianReleases 16 httpswikiubuntucomLTS"},{"title":"Microsoft Windows","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/platforms/sensu-on-windows","display_name":"Sensu Core 1.1: Microsoft Windows","content":" Sensu on Microsoft Windows Reference documentation Installing Sensu Coresensucore Download and install Sensu using the Sensu MSIdownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Configure the Sensu client Windows service wrapperconfigurethesensuclientwindowsservicewrapper Install the Sensu client Windows serviceinstallthesensuclientwindowsservice Operating Sensuoperatingsensu Managing the Sensu client Windows serviceservicemanagement Install Sensu Core sensucore Sensu Core is installed on Microsoft Windows systems via a native system installer package ie a msi file which is available for download from the Sensu Downloads1 page and from this repository2 Download and install Sensu using the Sensu MSI downloadandinstallsensucore NOTE As of Sensu version 10 repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 Doubleclick the sensu1201x64msi installer package to launch the installer accept the Sensu Core MIT License4 and install Sensu using the default settings eg install location etc WARNING changing the default installation path from Copt is strongly discouraged 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section12 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition13 and client definition14 Configure Sensu DANGER Many text editors on Windows including Notepad save text in a format that is not suitable for Sensu configuration While we require UTF8 there are similarlooking character sets that are not actually UTF8 such as UTF8 BOM A more modern text editor such as Atom or Notepad will allow you to do this easily fortunately For more about editor encodings see this discussion on StackOverflow16 If youre automating JSON creation with eg PowerShell make sure that youre speaking UTF8 in your shell too See here17 for more details By default all of the Sensu services on Microsoft Windows systems will load configuration from the following locations Coptsensuconfigjson Coptsensuconfd NOTE in general where references to configuration file locations found elsewhere in the Sensu documentation suggest paths beginning with etcsensu these will correspond to Coptsensu on Microsoft Windows systems Additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration XML andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie Coptsensuconfd is not created by the Sensu MSI installer in which case it is necessary to create this directory manually mkdir Coptsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at Coptsensuconfdclientjson client name windowsclient address 127001 environment development subscriptions dev windowshosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification15 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Configure the Sensu client Windows service wrapper The Sensu Core MSI package includes a Sensu client service wrapper allowing Sensu to be registered as a Windows service The Sensu client service wrapper uses an XML configuration file to configure the sensuclient run arguments eg log Coptsensusensuclientlog To configure the Sensu client service wrapper edit the service definition file at Coptsensubinsensuclientxml with your favorite text editor This XML configuration file allows you to set Sensu client CLI arguments9 The following example configuration file sets the Sensu client primary configuration file path to Coptsensuconfigjson the Sensu configuration directory to Coptsensuconfd and the log file path to Coptsensusensuclientlog sensuclient Sensu Client This service runs a Sensu client Coptsensuembeddedbinruby Coptsensuembeddedbinsensuclient c Coptsensuconfigjson d Coptsensuconfd l Coptsensusensuclientlog Install the Sensu client Windows service Open a Command Prompt and use the Windows SC10 utility to create the Windows service for the Sensu client sc create sensuclient start delayedauto binPath coptsensubinsensuclientexe DisplayName Sensu Client NOTE the space between the equals and the values is required Operating Sensu Managing the Sensu client Windows service servicemanagement To manually start and stop the Sensu client Windows service use the Servicesmsc11 utility or via the Command Prompt Start or stop the Sensu client sc start sensuclient sc stop sensuclient 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetmsi 3 httpssensuglobalsslfastlynetmsi2012r2sensu1201x64msi 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 referenceconfigurationsensuservicecliarguments 10 httpstechnetmicrosoftcomenuslibrarybb490995aspx 11 httpstechnetmicrosoftcomenuslibrarycc755249aspx 12 configuresensu 13 exampletransportconfiguration 14 exampleclientconfiguration 15 referencetransporttransportdefinitionspecification 16 httpstackoverflowcomquestions2223882whatsdifferentbetweenutf8andutf8withoutbom 17 httpstackoverflowcomquestions5596982usingpowershelltowriteafileinutf8withoutthebom"},{"title":"Client Installation","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/quick-start/client-installation","display_name":"Sensu Core 1.1: Client Installation","content":" Install the Sensu Client Having successfully installed and configured a Sensu server and API Sensu Core or Sensu Enterprise lets now install andor configure a Sensu client The Sensu client is run on every system you need to monitor including those running the Sensu server and API and Sensus dependencies ie RabbitMQ andor Redis Both Sensu Core and Sensu Enterprise use the same Sensu client process ie sensuclient so upgrading from Sensu Core to Sensu Enterprise does not require you to install a difference Sensu client Included in Sensu Core The Sensu client process sensuclient is part of the open source Sensu project ie Sensu Core and it is included in the Sensu Core installer packages along with the Sensu Core server and API processes ie sensuserver and sensuapi This means that if you are following the instructions in this guide for a standalone1 installation your Sensu client is already installed Disabled by default The Sensu client process sensuclient is disabled by default on all platforms Please refer to the corresponding configuration and operation documentation corresponding to the platform where you have installed your Sensu clients for instructions on starting stopping the Sensu client process andor enabling the Sensu client process to start automatically on system boot Install Sensu Core sensucore UbuntuDebian Sensu Core is installed on Ubuntu and Debian systems via a native system installer package ie a deb file which is available for download from the Sensu Downloads1 page and from APT package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Sensu packages for Debian target current stable and oldstable releases15 Sensu packages for Ubuntu target current Long Term Support LTS releases16 If you wish to install Sensu packages on newer Debian or Ubuntu releases please try installing a package built for the most recent Debian stable or Ubuntu LTS release Install Sensu using APT recommended installsensucorerepository NOTE As of Sensu version 027 apt repository configuration has changed to include the codename of the UbuntuDebian release To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Install the GPG public key wget q httpssensuglobalsslfastlynetaptpubkeygpg O sudo aptkey add 2 Determine the codename of the UbuntuDebian release on your system etcosrelease echo VERSION 14044 LTS Trusty Tahr codename for this system is trusty 3 Create an APT configuration file at etcaptsourceslistdsensulist export CODENAMEyourreleasecodenamehere eg trusty echo deb httpssensuglobalsslfastlynetapt CODENAME main sudo tee etcaptsourceslistdsensulist 4 Update APT sudo aptget update 5 Install Sensu sudo aptget install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 6 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition12 The Sensu client will need a client definition13 and both the sensuserver and sensuapi will need a datastore Redis definition14 mdash all of which are explained below RHELCentOS Sensu Core is installed on RHEL and CentOS systems via a native system installer package ie a rpm file which is available for download from the Sensu Downloads1 page and from YUM package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Install Sensu using YUM recommended installsensucorerepository Sensu packages for Red Hat target currently supported versions of Red Hat Enterprise Linux and their Centos equivalents These packages are generally expected to be compatible with Red Hat derivatives like SuSE Amazon or Scientific Linux but packages are not tested on these platforms The following instructions describe configuring package repository definitions using Yum variables14 as components of the baseurl On Red Hat derivative platforms the value of the releasever variable will not typically align with the RHEL release versions eg 6 or 7 advertised in the Sensu Yum repository Please use 6 or 7 in lieu of releasever on RHEL derivatives depending on whether they use sysv init or systemd respectively NOTE As of Sensu version 027 the yum repository URL has changed to include the releasever variable To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Sensu sudo yum install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 3 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition11 The Sensu client will need a client definition12 and both the sensuserver and sensuapi will need a datastore Redis definition13 mdash all of which are explained below "},{"title":"The Five Minute Install","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/quick-start/five-minute-install","display_name":"Sensu Core 1.1: The Five Minute Install","content":" The Five Minute Install Objective Although Sensus architecture1 is one of its most compelling features and the complete installation guide2 can help you get Sensu installed and configured for a variety of operating environments3 you might not actually care about any of that until you can get Sensu up and running in a development environment for testing purposes This installation guide is intended to help you to install Sensu Core in five minutes or less or well give you your money back guaranteed After completing the steps in this guide you will have a fully functional Sensu Core installation in a standalone4 configuration Installation Requirements What will you need to complete this guide A virtual machine or physical computer running 64bit CentOS 75 with a minimum of 2GB of memory 4GB recommended Familiarity with a commandline interface Willingness to run a shell script downloaded from the internet6 or not7 The commitment to count to ten8 the number of steps in this guide 300 seconds the amount of time it should take to complete this installation Ready Lets get started Install Sensu in 5minutes or less installsensu The following installation steps will help you get Sensu Core installed in a standalone4 on a system running CentOS 75 only For installation on other platforms andor alternative installation configurations please consult the installation guide2 0 Install EPEL if not already done sudo yum install epelrelease y 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo or see Sensu Enterprise repository instructions9 echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Redis 1314 from EPEL sudo yum install redis y 3 Disable Redis protected mode When using Redis 320 or later you will need to edit etcredisconf in order to disable protected moderedissecurity Look for a line that reads protectedmode yes and change it to protectedmode no 4 Enable and start Redis sudo systemctl enable redis sudo systemctl start redis 5 Install Sensu sudo yum install sensu y and if youre using Sensu Enterprise9 lets go ahead and install Sensu Enterprise as well sudo yum install sensuenterprise sensuenterprisedashboard y 6 Configure Sensu server Run the following to set up a minimal client config echo transport name redis api host 127001 port 4567 sudo tee etcsensuconfigjson 7 Configure the Sensu client Run the following to set up a minimal client config echo client environment development subscriptions dev sudo tee etcsensuconfdclientjson 8 Configure a Sensu dashboard Run the following to set up a minimal dashboard config echo sensu name sensu host 127001 port 4567 dashboard host 0000 port 3000 sudo tee etcsensudashboardjson 9 Make sure that the sensu user owns all of the Sensu configuration files sudo chown R sensusensu etcsensu 10 Start the Sensu services Sensu Core users sudo systemctl enable sensuserverapiclient sudo systemctl start sensuserverapiclient Sensu Enterprise users sudo systemctl enable sensuenterpriseenterprisedashboardclient sudo systemctl start sensuenterpriseenterprisedashboardclient 11 Verify that your installation is ready to use by querying the Sensu API using the curl utility and piping the result to the jq utility10 sudo yum install jq curl y curl s http1270014567clients jq If the Sensu API returns a JSON array of Sensu clients similar to this curl s http1270014567clients jq timestamp 1458625739 version 0280 socket port 3030 bind 127001 subscriptions dev environment development address 127001 name client01 you have successfully installed and configured Sensu If you youre using Sensu Enterprise you should also be able to load the Sensu Enterprise Dashboard in your browser by visiting httphostname3000httphostname3000 replacing hostname with the hostname or IP address of the system where the dashboard is installed fiveminutedashboard1imagesfiveminutedashboard1png fiveminutedashboard2imagesfiveminutedashboard2png 1 overviewarchitecture 2 installationoverview 3 installationinstallationstrategies 4 installationinstallationstrategiesstandalone 5 httpswikicentosorgManualsReleaseNotesCentOS7 6 httpgithubcomsensusensubash 7 platformssensuonrhelcentosinstallsensucorerepository 8 httpswwwyoutubecomwatchvJ2D1XF40ok 9 platformssensuonrhelcentosinstallsensuenterpriserepository 10 httpsstedolangithubiojq redissecurity httpsredisiotopicssecurity"},{"title":"Learn Sensu in 15 Minutes","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/quick-start/learn-sensu-basics","display_name":"Sensu Core 1.1: Learn Sensu in 15 Minutes","content":" Learn Sensu in 15 Minutes Sensu was designed to provide a comprehensive monitoring platform for monitoring infrastructure servers services application health and business KPIs mdash and to collect and analyze custom metrics Although most Sensu Core and Sensu Enterprise users eventually end up replacing several other monitoring solutions and standardizing on Sensu ndash they didnt get there by learning about every feature Sensu has to offer ndash they started with the basics This Quick Start Guide is not intended to teach you everything there is to know about Sensu This guide is designed to introduce you to the some basic monitoring concepts using Sensu Core It is our hope that this guide will whet your appetite to learn more about Sensu and feel the monitoringlove1 Overview What will you learn how to do Exercise 1 Registering Sensu clientsexercise1 Exercise 2 Configuring your first Sensu checkexercise2 Exercise 3 Configuring your first Sensu handlerexercise3 Exercise 4 Use the Sensu client input socketexercise4 Exercise 5 Configuring pubsub checks using Sensu subscriptionsexercise5 Quick start requirements Familiarity with a commandline interface related tooling eg text editor curl A standalone Sensu installation preferably created using the five minute installthefiveminuteinstall Access to the Internet for downloading plugins and communicating with external services Access to an SMTP server for sending alerts via email 15 minutes the amount of time it should take to complete these exercises WARNING this guide assumes that you are using a standalone Sensu installation that was setup by following the instructions in the the five minute install2 Please proceed accordingly"},{"title":"Reference","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/_index","display_name":"Sensu Core 1.1: Reference","content":""},{"title":"Aggregates","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/aggregates","display_name":"Sensu Core 1.1: Aggregates","content":" Reference documentation What is a Sensu named aggregatewhatisacheckaggregate When should named aggregates be usedwhenshouldcheckaggregatesbeused How do named aggregates workhowdocheckaggregateswork Example aggregated check resultexampleaggregatedcheckresult Aggregate configurationaggregateconfiguration Example aggregate definitionexampleaggregatedefinition Aggregate definition specificationaggregatedefinitionspecification Aggregate check attributesaggregatecheckattributes What is a Sensu named aggregate whatisacheckaggregate Sensu named aggregates are collections of check results1 accessible via the Aggregates API2 Check aggregates make it possible to treat the results of multiple disparate check results ndash executed across multiple disparate systems ndash as a single result When should named aggregates be used whenshouldcheckaggregatesbeused Check aggregates are extremely useful in dynamic environments andor environments that have a reasonable tolerance for failure Check aggregates should be used when a service can be considered healthy as long as a minimum threshold is satisfied eg are at least 5 healthy web servers are at least 70 of N processes healthy How do named aggregates work howdocheckaggregateswork Check results are included in an aggregate when a check definition includes the aggregate definition attribute3 Check results that provide an aggregate exampleaggregate are aggregated under the corresponding name eg exampleaggregate effectively capturing multiple check results as a single aggregate Example aggregated check result Aggregated check results are available from the Aggregates API2 via the aggregatesname API endpoint An aggregate check result provides a set of counters indicating the total number of client members checks and check results collected with a breakdown of how many results were recorded per status ie ok warning critical and unknown clients 15 checks 2 results ok 18 warning 0 critical 1 unknown 0 total 19 stale 0 Additional aggregate data is available from the Aggregates API including Sensu client members of a named aggregate and the corresponding checks which are included in the aggregate curl s httplocalhost4567aggregateselasticsearchclients jq name i424242 checks elasticsearchservice elasticsearchclusterhealth name 1424243 checks elasticsearchservice Aggregate data may also be fetched per check that is a member of the named aggregate along with the corresponding clients that are producing results for said check curl s httplocalhost4567aggregateselasticsearchchecks jq name elasticsearchservice clients i424242 i424243 name elasticsearchclusterhealth clients i424242 Aggregate configuration Example aggregate definition The following is an example check definition6 a JSON configuration file located at etcsensuconfdcheckaggregateexamplejson checks examplecheckaggregate command dosomethingrb o option aggregate exampleaggregate handle false Aggregate definition specification NOTE aggregates are created via the aggregate Sensu check definition attribute4 The configuration examples provided above and the specification provided here are for clarification and convenience only ie this specification is just a subset of the check definition specification5 and not a definition of a distinct Sensu primitive Aggregate check attributes aggregate "},{"title":"Checks","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/checks","display_name":"Sensu Core 1.1: Checks","content":" Reference documentation What is a Sensu checkwhatisasensucheck Sensu check specificationsensucheckspecification Check commandscheckcommands What is a check commandwhatisacheckcommand Check command argumentscheckcommandarguments How and where are check commands executedhowandwherearecheckcommandsexecuted Check execution platformcheckexecutionplatform How are checks scheduledhowarechecksscheduled Subscription checkssubscriptionchecks Standalone checksstandalonechecks Check resultscheckresults What is a check resultwhatisacheckresult Example check result outputexamplecheckresultoutput Check token substitutionchecktokensubstitution What is check token substitutionwhatischecktokensubstitution Example check tokensexamplechecktokens Check token specificationchecktokenspecification Token substitution syntaxtokensubstitutionsyntax Token substitution default valuestokensubstitutiondefaultvalues Unmatched tokensunmatchedtokens Check hookscheckhooks What are check hookswhatarecheckhooks Example check hooksexamplecheckhooks Check configurationcheckconfiguration Example check definitionexamplecheckdefinition Check definition specificationcheckdefinitionspecification Check namingchecknames CHECK attributescheckattributes subdue attributessubdueattributes hooks attributeshooksattributes Custom attributescustomattributes Check result specificationcheckresultspecification check attributescheckresultcheckattributes client attributescheckresultclientattributes What is a Sensu check Sensu checks are commands executed by the Sensu client1 which monitor a condition eg is Nginx running or collect measurements eg how much disk space do I have left Although the Sensu client will attempt to execute any command defined for a check successful processing of check results requires adherence to a simple specification Sensu check specification Result data is output to STDOUT or STDERR2 For standard checks this output is typically a humanreadable message For metrics checks this output contains the measurements gathered by the check Exit status code indicates state 0 indicates OK 1 indicates WARNING 2 indicates CRITICAL exit status codes other than 0 1 or 2 indicate an UNKNOWN or custom status PRO TIP Those familiar with the Nagios3 monitoring system may recognize this specification as it is the same one used by Nagios plugins As a result Nagios plugins can be used with Sensu without any modification At every execution of a check command ndash regardless of success or failure ndash the Sensu client publishes the checks result4 for eventual handling by the event processor5 ie the Sensu server6 Check commands What is a check command Each Sensu check definition7 defines a command and the interval at which it should be executed Check commands are literally executable commands which will be executed on the Sensu client1 run as the sensu user Most check commands are provided by Sensu check plugins8 Check command arguments Sensu check command attributes may include command line arguments for controlling the behavior of the command executable Most Sensu check plugins8 provide support for command line arguments for reusability How and where are check commands executed As mentioned above all check commands are executed by Sensu clients1 as the sensu user Commands must be executable files that are discoverable on the Sensu client system ie installed in a system PATH directory9 NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commands eg command checkhttprb u httpssensuapporg Check execution platform How are checks scheduled Sensu offers two distinct check execution schedulers the Sensu serverserver and the Sensu client10 monitoring agent The Sensu server schedules and publishes check execution requests to client subscriptions via a PublishSubscribe model11 ie subscription checkssubscriptionchecks The Sensu client monitoring agent schedules and executes standalone checks12 on the local system only Because Sensus execution schedulers are not mutually exclusive any Sensu client may be configured to both schedule and execute its own standalone checks as well as execute subscription checks scheduled by the Sensu server Subscription checks Sensu checks which are centrally defined and scheduled by the Sensu server6 are called subscription checks Sensus use of a message bus transport13 for communication enables topicbased communication14 mdash where messages are published to a specific topic and consumers subscribe to one or more specific topics This form of communication is commonly referred to as the publishsubscribe pattern11 or pubsub for short Subscription checks have a defined set of subscribers15 a list of transport13 topics14 that check requests will be published to Sensu clients become subscribers to these topics ie subscriptions via their individual client definition16 subscriptions attribute In practice subscriptions will typically correspond to a specific role andor responsibility eg a webserver database etc Subscriptions are a powerful primitives in the monitoring context because they allow you to effectively monitor for specific behaviors or characteristics corresponding to the function being provided by a particular system For example disk capacity thresholds might be more important or at least different on a database server as opposed to a webserver conversely CPU andor memory usage thresholds might be more important on a caching system than on a file server Subscriptions also allow you to configure check requests for an entire group or subgroup of systems rather than require a traditional 11 mapping Standalone checks Sensu checks which are defined on a Sensu client1 with the check definition attribute17 standalone set to true are called standalone checks The Sensu client provides its own scheduler10 for scheduling standalone checks which ensures scheduling consistency between Sensu clients with identical check definitions assuming that system clocks are synchronized via NTP18 Standalone checks are an important complement to subscription checks19 because they provide a decentralized management alternative for Sensu Check results What is a check result A check result is a JSON20 document published as a message on the Sensu transport13 by the Sensu client upon completion of a check execution Sensu check results include the check definition attributes17 eg command subscribers interval name etc including custom attributes21 the client name the result was submitted from and the output of the check Example check result output check status 0 command checkhttprb u httpssensuapporg subscribers demo interval 60 name sensuwebsite issued 1458934742 executed 1458934742 duration 0637 output CheckHttp OK 200 78572 bytesn client sensudocs NOTE please refer to the check result specification38 below for more information about check results Check token substitution What is check token substitution Sensu check definitions17 may include attributes that you may wish to override on a clientbyclient basis For example check commands23 ndash which may include command line arguments23 for controlling the behavior of the check command ndash may benefit from clientspecific thresholds etc Sensu check tokens are check definition placeholders that will be replaced by the Sensu client with the corresponding client definition attribute16 values including custom attributes24 NOTE Sensu check tokens were formerly known as check command tokens which limited token substitution to the check command attribute command tokens were also sometimes referred to as Sensu client overrides a reference to the fact that command tokens allowed client attributes to override check command arguments23 NOTE Check tokens are processed before check execution therefore token substitution will not apply to check data delivered via the local client socket input46 Example check tokens The following is an example Sensu check definition17 using three check tokens for check command arguments23 In this example the checkdiskusagerb command accepts w warning and c critical arguments to indicate the thresholds as percentages for creating warning or critical events As configured this check will create a warning event at 80 disk capacity unless a different threshold is provided by the client definition ie diskwarning80 and a critical event will be created if disk capacity reaches 90 unless a different threshold is provided by the client definition ie diskcritical90 This example also creates a custom check definition attribute called environment which will default to a value of production unless a different value is provided by the client definition ie environmentproduction checks checkdiskusage command checkdiskusagerb w diskwarning80 c diskcritical90 subscribers production interval 60 environment environmentproduction The following example Sensu client definition16 would provide the necessary attributes to override the diskwarning diskcritical and environment tokens declared above client name i424242 address 1002100 subscriptions production webserver mysql disk warning 75 critical 85 environment development Check token specification Token substitution syntax Check tokens are invoked by wrapping references to client attributes with triple colons ie three colon characters ie Nested Sensu client definition attributes16 can be accessed via dot notation eg diskwarning address would be replaced with the client address attribute26 url would be replaced with a custom attribute24 called url diskwarning would be replaced with a custom attribute24 called warning nested inside of a JSON hash called disk Token substitution default values checktokendefaultvalues Check token default values can be used as a fallback in the event that an attribute is not provided by the client definition16 Check token default values are separated by a pipe character and can be used to provide a fallback value for clients that are missing the declared token attribute urlhttpssensuapporg would be replaced with a custom attribute24 called url If no such attribute called url is included in the client definition the default or fallback value of httpssensuapporg will be used Unmatched tokens If a token substitution default value25 is not provided ie as a fallback value and the Sensu client definition does not have a matching definition attribute a check result4 indicating unmatched tokens will be published for the check execution eg Unmatched check tokens diskwarning Check hooks What are check hooks whatarecheckhooks Check hooks are commands run by the Sensu client in response to the result of check command execution The Sensu client will execute the appropriate configured hook command depending on the check execution status eg 1 Valid hook names include in order of precedence 1255 ok warning critical unknown and nonzero The check hook command output status executed timestamp and duration are captured and published in the check result Check hook commands can optionally receive JSON serialized Sensu client and check definition data via STDIN Example check hooks Check hooks can be used for automated data gathering for incident triage for example a check hook could be used to capture the process tree when a process has been determined to be not running etc checks nginxprocess command checkprocessrb p nginx subscribers proxy interval 60 hooks nonzero command ps aux Check hooks can also be used for rudimentary autoremediation tasks for example starting a process that is no longer running checks nginxprocess command checkprocessrb p nginx subscribers proxy interval 60 hooks critical command sudo systemctl start nginx Check configuration Example check definition The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdchecksensuwebsitejson This check definition uses a Sensu plugin27 named checkhttprb28 to ensure that the Sensu website is still available The check is named sensuwebsite and it runs on Sensu clients with the production subscription15 at an interval of 60 seconds checks sensuwebsite command checkhttprb u httpssensuapporg subscribers production interval 60 contact ops Check definition specification Check naming checknames Each check definition has a unique check name used for the definition key Every check definition is within the checks configuration scope29 A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex30 wmatchcheckname CHECK attributes The following attributes are configured within the checks CHECK configuration scope29 where CHECK is a valid check name41 type "},{"title":"Clients","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/clients","display_name":"Sensu Core 1.1: Clients","content":" Reference documentation What is a Sensu clientwhatisasensuclient Client keepalivesclientkeepalives What is a client keepalivewhatisaclientkeepalive Client registration the client registryregistrationandregistry Registration eventsregistrationevents Proxy clientsproxyclients How are keepalive events createdkeepaliveevents Client keepalive configurationclientkeepaliveconfiguration Client signatureclientsignature Client subscriptionsclientsubscriptions What is a client subscriptionwhatisasensusubscription Roundrobin client subscriptionsroundrobinclientsubscriptions Client subscription configurationclientsubscriptionconfiguration Client socket inputclientsocketinput What is the Sensu client socketwhatisthesensuclientsocket Example client socket usageexampleclientsocketusage Client socket configurationsocketattributes Standalone check execution schedulerstandalonecheckexecutionscheduler Client configurationclientconfiguration Example client definitionexampleclientdefinition Client definition specificationclientdefinitionspecification client attributesclientattributes socket attributessocketattributes httpsocket attributeshttpsocketattributes keepalive attributeskeepaliveattributes thresholds attributesthresholdsattributes registration attributesregistrationattributes deregistration attributesderegistrationattributes ec2 attributesec2attributes chef attributeschefattributes puppet attributespuppetattributes servicenow attributesservicenowattributes Custom attributescustomattributes What is a Sensu client Sensu clients are monitoring agents1 which are installed and run on every system eg server container etc that needs to be monitored The client is responsible for registering the system with Sensu sending client keepalive2 messages the Sensu heartbeat mechanism and executing monitoring checks Each client is a member of one or more subscriptions3 ndash a list of roles andor responsibilities assigned to the system eg a webserver database etc Sensu clients will subscribe to or watch for check requests4 published by the Sensu server5 via the Sensu Transport6 execute the corresponding requests locally and publish the results of the check back to the transport to be processed by a Sensu server Client keepalives What is a client keepalive Sensu Client keepalives are the heartbeat mechanism used by Sensu to ensure that all registered Sensu clients are still operational and able to reach the Sensu Transport6 Sensu clients publish keepalive messages containing client configuration data to the Sensu transport every 20 seconds If a Sensu client fails to send keepalive messages over a period of 120 seconds by default the Sensu server or Sensu Enterprise will create a keepalive event7 Keepalives can be used to identify unhealthy systems and network partitions among other things and keepalive events can trigger email notifications and other useful actions Client registration the client registry registrationandregistry In practice client registrations happens when a Sensu server processes a client keepalive message for a client that is not already registered in the Sensu client registry based on the configured client name or source attribute This client registry is stored in the Sensu data store8 and is accessible via the Sensu Clients API9 All Sensu client data provided in client keepalive messages gets stored in the client registry which data is used to add context to Sensu Events7 and to detect Sensu clients in an unhealthy state Registration events If a Sensu event handler30 named registration is configured or if a Sensu client definition includes a registration attribute31 the Sensu server5 will create and process a Sensu event7 for the client registration applying any configured filters26 and mutators32 before executing the configured handlers30 Registration events are useful for executing onetime handlers for new Sensu clients For example registration event handlers can be used to update external Configuration Management Databases CMDBs34 such as ServiceNow35 etc To configure a registration event handler please refer to the Sensu event handler documentation30 for instructions on creating a handler named registration Alternatively please see Client definition registration attributes31 below WARNING registration events are not stored in the event registry in the Sensu data store8 so they are not accessible via the Sensu API however all registration events are logged in the Sensu server5 log Proxy clients Sensu proxy clients formerly known as Justintime or JIT clients are dynamically created clients added to the client registry if a client does not already exist for a check result Proxy client registration differs from keepalivebased registration because the registration event happens while processing a check result not a keepalive message If a check result includes a source attribute a proxy client will be created for the source and the check result will be stored under the newly created client Sensu proxy clients allow Sensu to monitor external resources eg on systems andor devices where a sensuclient cannot be installed such a network switches using the defined check source to create a proxy clients for the external resource Once created proxy clients work much in the same way as any other Sensu client eg they are used to store check execution history and provide context within event data NOTE keepalive monitoring is not supported for proxy clients as they are inherently unable to run a sensuclient Proxy client example Proxy clients are created when a check result includes a source attribute as follows check status 0 command checkhttprb u httpssensuapporg subscribers demo interval 60 name sensuwebsite source sensuapporg issued 1458934742 executed 1458934742 duration 0637 output CheckHttp OK 200 78572 bytesn client sensudocs NOTE this source attribute can be provided in a check definition14 or included in a check result published to the Sensu client input socket36 By default proxy client data includes a minimal number of attributes The following is an example of proxy client data that is added to the registry name switchx address unknown subscriptions keepalives false The Sensu API can be used to update proxy client data in the client registry To update proxy client data please refer to the Client API reference documentation9 Create a proxy client via the client socket The following is an example of how to create a proxy client payload via the client socketclientsocketinput using netcat echo source mysql01 name app01 output could not connect to mysql status 1 nc localhost 3030 How are keepalive events created keepaliveevents Sensu servers including Sensu Enterprise monitor the Sensu client registry for stale client data detecting clients that have failed to send client keepalive messages10 for more than 120 seconds by default When a Sensu server detects that a client hasnt sent a keepalive message within the configured threshold the Sensu server or Sensu Enterprise will create an event this is different from how events are created for monitoring checks see How are Sensu events created11 Client keepalive configuration For more information on configuring client keepalives please see the client keepalive attribute reference documentation12 below Sensu client keepalives are published to the Sensu transport every 20 seconds Client keepalive behavior can be configured per Sensu client allowing each Sensu client to set its own alert thresholds and keepalive event handlers By default client data is considered stale if a keepalive hasnt be received in 120 seconds WARNING By default keepalive events will be sent to the Sensu handler named keepalive if defined or the default handler will be used To configure the keepalive check for a Sensu client please refer to the client keepalive attributes reference documentation12 Client signature Sensu client definitions may specify a unique string identifier as their signature which is included in each keepalive message Once a client advertises a signature via keepalives the server will expect that signature to be present in any keepalives or check results originating from the client Any keepalives or check results which do not contain a matching signature will be dropped with an invalid client signature warning in the log A client can begin to use a signature if one was not previously configured but removing a client signature requires deleting the client Providing a unique client signature prevents other clients from accidentally or maliciously submitting keepalives or check results using the same client name Client subscriptions What is a client subscription whatisasensusubscription Sensus use of the publishsubscribe pattern of communication13 allows for automated registration deregistration of ephemeral systems At the core of this model are Sensu client subscriptions Each Sensu client has a defined set of subscriptions a list of roles andor responsibilities assigned to the system eg a webserver database etc These subscriptions determine which monitoring checks are executed by the client Client subscriptions allow Sensu to request check executions on a group of systems at a time instead of a traditional 11 mapping of configured hosts to monitoring checks Sensu checks target Sensu client subscriptions using the check definition attribute subscribers14 Roundrobin client subscriptions Roundrobin client subscriptions allow checks to be executed on a single client within a subscription in a roundrobin fashion To create a roundrobin client subscription prepend the subscription name with roundrobin eg roundrobinelasticsearch Any check that targets the roundrobinelasticsearch subscription will have its check requests sent to clients in a roundrobin fashion meaning only one member client in the subscription will execute a roundrobin check each time it is published The following is a Sensu client definition that includes a roundrobin subscription client name i424242 address 8888 subscriptions production webserver roundrobinwebserver The following is a Sensu check definition that targets a roundrobin subscription checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers roundrobinwebserver interval 20 Client subscription configuration To configure Sensu client subscriptions for a client please refer to the client subscriptions attribute reference documentation15 In addition to the subscriptions defined in the client configuration Sensu clients also subscribe automatically to a subscription matching their client name For example a client named i424242 will subscribe to check requests for the subscription clienti424242 This makes it possible to generate adhoc check requests targeting specific clients via the request API49 Client socket input What is the Sensu client socket Every Sensu client has a TCP UDP and HTTP socket listening for external check result input The Sensu client sockets listen by default on localhost port 3030 for TCPUDP and 3031 for HTTP and expect JSON formatted check results allowing external sources eg your web application backup scripts etc to push check results without needing to know anything about Sensus internal implementation An excellent client socket use case example is a web application pushing check results to indicate database connectivity issues To configure the Sensu client socket for a client please refer to the client socket attributes16 HTTP Socket The HTTP socket just like the TCP and UDP sockets accepts check results but it requires a wellformed HTTP request and exposes other functionality that is not possible with the raw TCPUDP sockets In exchange for a bit more complexity the HTTP socket interface has the advantage of being more expressive than a raw TCPUDP socket both in the requests that it accepts and how it responds and so exposes more functionality The following endpoints are available for the HTTP socket GET info This endpoint returns 200 OK with some basic Sensu information like the version and transport metrics POST results This endpoint expects an applicationjson body with a check result GET settings This endpoint responds with 200 OK and the sensu configuration Due to the possible sensitive nature of the client settings eg passwords might be in the config this endpoint is protected using HTTP basic authentication and by default the information returned is redacted eg common config keys like password have their values replaced by REDACTED See the redact configuration option if you need control over what is redacted This endpoint accepts the optional query string redactedfalse to disable redaction Refer to the http client socket attributes50 for details on configuring the HTTP basic authentication details that this endpoint requires GET brew This endpoint gets you some fresh coffee Try it Any requests for unknown endpoints will get a 404 with some help information in the body At the moment only unsecure HTTP no HTTPS is supported To configure the Sensu HTTP client socket please refer to the http client socket attributes50 Example client socket usage The following is an example demonstrating external check result input via the Sensu client TCP socket The example uses Bashs builtin devtcp file to communicate with the Sensu client socket echo name app01 output could not connect to mysql status 1 devtcplocalhost3030 Netcat17 can also be used instead of the TCP file echo name app01 output could not connect to mysql status 1 nc localhost 3030 You can do the same using the HTTP socket curl v H ContentType applicationjson X POST d name app01 output could not connect to mysql status 1 localhost 3031 Creating a dead mans switch The Sensu client sockets in combination with check TTLs can be used to create whats commonly referred to as dead mans switches Outside of the software industry a dead mans switch is a switch that is automatically triggered if a human operator becomes incapacitated source Wikipedia18 Sensu is more interested in detecting silent failures than incapacited human operators By using Check TTLs Sensu is able to set an expectation that a Sensu client will continue to publish results for a check at a regular interval If a Sensu client fails to publish a check result and the check TTL expires Sensu will create an event to indicate the silent failure For more information on check TTLs please refer to the check attributes reference documentation14 A great use case for the Sensu client socket is to create a dead mans switch for backup scripts to ensure they continue to run successfully at regular intervals If an external source sends a Sensu check result with a check TTL to the Sensu client socket Sensu will expect another check result from the same external source before the TTL expires The following is an example of external check result input via the Sensu client TCP socket using a check TTL to create a dead mans switch for MySQL backups The example uses a check TTL of 25200 seconds or 7 hours A MySQL backup script using the following code would be expected to continue to send a check result at least once every 7 hours or Sensu will create an event7 to indicate the silent failure echo name backupmysql ttl 25200 output backed up mysql successfully sizemb568 status 0 nc localhost 3030 echo name backupmysql ttl 25200 output failed to backup mysql status 1 nc localhost 3030 Standalone check execution scheduler In addition to subscribing to client subscriptions3 and executing check requests published by the Sensu server19 the Sensu client is able to maintain its ownseparate schedule for standalone checks20 Because the Sensu client shares the same check scheduling algorithm21 as the Sensu server it is not only possible to have consistency between subscription checks22 and standalone checks mdash its also possible to maintain consistency between standalone checks across an entire infrastructure assuming that system clocks are synchronized via NTP23 Client configuration Example client definition The following is an example Sensu client definition a JSON configuration file located at etcsensuconfdclientjson This client definition provides Sensu with information about the system on which it resides This is a production system running a web server and a MySQL database The client name attribute is required in the definition and must be unique client name i424242 address 8888 subscriptions production webserver mysql socket bind 127001 port 3030 Client definition specification The client definition uses the client configuration scope24 client attributes name "},{"title":"Sensu Configuration","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/configuration","display_name":"Sensu Core 1.1: Sensu Configuration","content":" Reference documentation How does Sensu load configurationhowdoessensuloadconfiguration Sensu configuration sourcessensuconfigurationsources Configuration load orderconfigurationloadorder Configuration mergingconfigurationmerging Configuration loggingconfigurationlogging Configuration scopesconfigurationscopes Configuration scopes are relativeconfigurationscopesarerelative Configuration scope examplesconfigurationscopeexamples Sensu service init configurationsensuservicescriptconfiguration Sensu service init configuration variablessensuservicescriptconfigurationvariables Sensu command line interfaces and argumentssensucommandlineinterfacesandarguments Sensu environment variablessensuenvironmentvariables Sensu configuration specificationsensuconfigurationspecification Example sensu configurationexamplesensuconfiguration Toplevel configuration scopestoplevelconfigurationscopes How does Sensu load configuration Sensu configuration sources By default the main configuration file for the Sensu platform is located at etcsensuconfigjson However Sensu also provides support for loading configuration from a directory containing multipledisparate configuration files andor environment variables Sensu merges configuration parameters provided from these three distinct configuration sources environment variables configuration file and configuration directories into a single Hash This type of Hash merging is often called deep merging and is probably the most important concept to understand when learning how to configure Sensu Configuration load order As previously mentioned Sensu configuration can be provided via three distinct sources environment variables a configuration file and one or more directories containing configuration files Sensu loads configuration from these sources in the following order 1 The Sensu service scripts provide command line arguments1 for starting the Sensu services eg the location of the configuration file c the location of configuration directories d etc 2 Sensu will load configuration from environment variables2 3 Sensu loads configuration from the configuration file by default this is located at etcsensuconfigjson 3 Sensu loads configuration snippets from configuration files located in a Sensu configuration directory by default this is etcsensuconfd however it is possible to configure Sensu to load from multiple configuration directories see command line arguments1 below NOTE configuration file load order is dictated by a json glob of the configuration directory as such it is strongly recommended to avoid a dependency on configuration directory file load order eg if youre attempting to name configuration files in the configuration directory to control load order youre doing it wrong Configuration merging configurationmerging To explain how Sensu merges configuration parameters from the various disparate configuration sources please note the following example scenario 1 The Sensu runtime configuration is stored as an inmemory Hash object For the purposes of providing a visual example lets imagine that this Hash object is actually a JSON document which begins life as Sensu is started as an empty JSON document Initial Sensu configuration Hash in memory When Sensu is started it will begin to collect configuration from environment variables a configuration file and one ore more configuration directories which configuration parameters will be used to build up this configuration Hash 2 For the purposes of this example lets assume that the first configuration snippet that Sensu encounters is a configuration file located at etcsensuconfigjson with the following contents New config file on disk at etcsensuconfigjson rabbitmq host 100110 vhost sensu user sensu password secret redis host 100120 port 6379 password secret At this time the Sensu configuration Hash in memory will look like Updated Sensu configuration Hash in memory rabbitmq host localhost vhost sensu user sensu password secret redis host localhost port 6379 password secret 3 Now lets see what happens when Sensu encounters another configuration snippet eg a file located in a Sensu configuration directory such as etcsensuconfdrabbitmqjson New config file contents on disk at etcsensuconfdrabbitmqjson rabbitmq host 100110 user sensu01 password newsecret The second configuration snippet provided configuration for the rabbitmq scope some of which already exists in the Sensu configuration Hash in memory but also missing some attributes which already exist in the Sensu configuration Hash ie vhost The result of merging this configuration snippet into the Sensu configuration Hash in memory is as follows Updated Sensu configuration Hash in memory rabbitmq host 100110 vhost sensu user sensu01 password newsecret redis host localhost port 6379 password secret The result of the deep merge is that the configuration snippet provided by etcsensuconfdrabbitmqjson was overlaid on the Sensu configuration Hash in memory essentially overwriting the previously existing values provided by the configuration snippet while not discarding configuration attributes that already existed in the rabbitmq configuration scope even though they werent provided by the configuration snippet Configuration logging As configuration snippets are applied to the Sensu configuration Hash ie during deep merge all configuration changes are logged to the corresponding log file eg the Sensu server API or Client logs Configuration scopes Because Sensu configuration can be provided in so many different sources it is important to understand that ndash regardless of the physical location of the configuration data eg from the main configuration file or from a configuration file in a configuration directory ndash all configuration must be placed in the appropriate scope in the JSON file ie the named level that attributes should be defined in For example the root or scope of the Sensu configuration would be any attributes defined at the top level of a JSON configuration file such as the configuration attributes for rabbitmq redis or the api rabbitmq redis api Attributes defined in the root scope or top level provide the corresponding scopes for additional configuration settings eg the rabbitmq attribute defined above provides the rabbitmq scope a JSON Hash for the actual RabbitMQ configuration settings Configuration scopes are relative Throughout the Sensu documentation whenever a configuration scope is mentioned it is describing the named level that the corresponding configuration attributes should be defined within which may be relative to any potentially related scopes Please note the following examples Configuration scope examples The client scope client In the Sensu Client reference documentation3 it explains that The client definition uses the client definition scope Which means that regardless where you might store a configuration file containing Sensu client configuration on disk assuming it is in a location that will be loaded by Sensu the file should contain a top level attribute called client client The client socket scope socket The Sensu Client reference documentation3 continues to explain that Sensu clients may have a socket attribute and that there are additional Client Socket attributes4 which should be defined within the socket scope The following attributes are configured within the socket client definition attribute scope Which means that regardless where you might store a configuration file containing Sensu Client Socket configuration on disk assuming it is in a location that will be loaded by Sensu the file should contain a top level attribute called client and another attribute defined within the client scope or level called socket client socket Thus when the Client Socket reference documentation continues to explain that the bind and port attributes should be defined in the Client Socket scope it means they should live under the socket level of the JSON file regardless of where you might store a configuration file containing said configuration attributes on disk assuming it is in a location that will be loaded by Sensu client socket bind 0000 port 3031 Sensu service service configuration sensuservicescriptconfiguration The Sensu services are managed by service scripts that are provided in the Sensu packages The Sensu service scripts are able to startstoprestart the corresponding Sensu services eg the Sensu server API client etc The default Sensu service scripts and related configuration files containing configuration variables are located as follows etcdefaultsensu sourced by the init scripts to provide configuration variables5 etcinitdsensuservice shared init script used by the Sensu service init scripts etcinitdsensuserver etcinitdsensuapi etcinitdsensuclient etcinitdsensuenterprise etcinitdsensuenterprisedashboard Sensu service script configuration variables sensuservicescriptconfigurationvariables The following configuration variables can be set in the service scripts for the platform EMBEDDEDRUBY "},{"title":"Data Store","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/data-store","display_name":"Sensu Core 1.1: Data Store","content":" Reference documentation What is the Sensu data storewhatisthesensudatastore What is the Sensu data store Sensu services use a data store Redis1 to persist monitoring data including the Sensu client registry check results check execution history and current event data All Sensu Core server and API processes ie sensuserver and sensuapi or the Sensu Enterprise process ie sensuenterprise require access to the same instance of the defined data store ie a Redis server or cluster NOTE unlike the Sensu Transport2 ndash which is a Sensu library that allows Sensu to be used with different transport backends eg RabbitMQ or Redis etc ndash the Sensu Data Store is not abstracted andor extensible At this time Redis is the only data store supported by Sensu Having said that because this may change at some point in the future we are beginning to use the term data store in the Sensu documentation as an abstraction for the functions currently provided by Redis 1 redis 2 transport"},{"title":"Events","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/events","display_name":"Sensu Core 1.1: Events","content":" Reference documentation What are Sensu eventswhataresensuevents How are Sensu events createdhowaresensueventscreated Event actionseventactions Event dataeventdata Example eventexampleevent Event data specificationeventdataspecification EVENT attributeseventattributes check attributescheckattributes client attributesclientattributes What are Sensu events whataresensuevents Sensu events are created to acknowledge that something potentially noteworthy has occurred which events may then be processed by one or more event handlers1 to do things such as send an email or invoke an automated action Every Sensu event provides context called event data2 which contains information about the originating Sensu client3 and the corresponding check result4 How are Sensu events created A Sensu Event is created every time a check result10 is processed by the Sensu server regardless of the status indicated by the check result An Event is created by collating data from the check result the client registry22 and additional context added at the time of processing Event actions Sensu supports the following event actions create Indicates a check result status change from zero to nonzero resolve Indicates a check result status change from a nonzero to zero flapping Indicates a rapid change in check result status NOTE for more information on event actions please see the Sensu event data specification5 below Event data Example event The following is an example Sensu event By default event data is JSON formatted making it languageindependent and fairly human readable id ef6b87d21f89439f8bea33881436ab90 action create timestamp 1460172826 occurrences 2 check type standard totalstatechange 11 history 0 0 1 1 2 2 status 2 output No keepalive sent from client for 230 seconds 180 executed 1460172826 issued 1460172826 name keepalive thresholds critical 180 warning 120 client timestamp 1460172596 version 100 socket port 3030 bind 127001 subscriptions production environment development address 127001 name client01 Event data specification EVENT attributes The following attributes are available in the root scope of the event data JSON document id "},{"title":"Extensions","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/extensions","display_name":"Sensu Core 1.1: Extensions","content":" Reference documentation What is a Sensu extensionwhatisasensuextension Installing Sensu extensionsinstallingsensuextensions Installing Sensu legacy extensionsinstallingsensulegacyextensions Configuring Sensu extensionsconfiguringsensuextensions The Sensu Extension gemthesensuextensiongem The Sensu Extensions gem templatethesensuextensionsgemtemplate What is a Sensu extension Unlike Sensu plugins which spawn a new child process at every execution Sensu extensions execute directly inside the EventMachine reactor thread1 of a Sensu client or server process Because they avoid the overhead of spawning a new process at every invocation Sensu extensions can fulfill the same functions as plugins acting as checks filters mutators or handlers but with much greater efficiency WARNING While their performance characteristics are quite desirable Sensu extensions come with major caveats extensions have full access to Sensus internals and any extension which blocks the EventMachine reactor for any period of time eg blocking on disk IO or network request will have a very significant negative impact on Sensus performance and functionality The details of evented programming as implemented by EventMachine are outside the scope of this document but Javier Acero has helpfully written on the implications of blocking the reactor2 Installing Sensu extensions As of version 026 Sensu supports loading extensions from properly packaged gems This approach takes advantage of the existing RubyGems infrastructure and tools to make publishing and installing Sensu extensions easy Use sensuinstall to install Sensu Extensions The Sensu Core package provides a tool called sensuinstall a simple wrapper around the Ruby gem utility The Sensu Install tool sensuinstall simplifies installation of Rubybased extensions The sensuinstall tool can be run with one or more arguments that determine the actions to take sensuinstall h Usage sensuinstall options h help Display this message v verbose Enable verbose logging p plugin PLUGIN Install a Sensu PLUGIN P plugins PLUGINPLUGIN PLUGIN or commadelimited list of Sensu plugins to install e extension EXTENSION Install a Sensu EXTENSION E extensions EXTENSIONEXT EXTENSION or commadelimited list of Sensu extensions to install s source SOURCE Install Sensu plugins and extensions from a custom SOURCE c clean Clean up remove other installed versions of the plugins andor extensions x proxy PROXY Install Sensu plugins and extensions via a PROXY URL NOTE sensuinstall is only available in Sensu Core 0210 Sensu extensions can be installed using the sensuinstall executable EXAMPLE installingsensuextensionsfromgemsexample sensuinstall e sensuextensionssystemprofile Or sensuinstall can prepend sensuextensions automatically sensuinstall e systemprofile Configuring Sensu to load extensions Once an extension is installed via gem Sensu must be explicitly configured to load the extension This is accomplished by providing configuration under the top level extensions attribute EXAMPLE configuringextensionloadingfromgemsexample extensions systemprofile gem sensuextensionssystemprofile EXAMPLE configuringextensionloadingfromgemswversionexample Configuration may optionally include a version specification extensions systemprofile gem sensuextensionssystemprofile version 100 Once extensions have been explicitly enabled in Sensus configuration they will be loaded the next time Sensu processes are restarted Informational messages are printed to the log when extensions are loaded EXAMPLE configuringextensionloadingfromgemslogexample timestamp20160808T1637257112750000levelwarnmessageloading extension gemgemsensuextensionssystemprofileversion100 timestamp20160808T1637257114190000levelwarnmessagerequiring extension gemrequiresensuextensionssystemprofile timestamp20160808T1637257115790000levelwarnmessageloaded extensiontypechecknamesystemprofiledescriptioncollects system metrics using the graphite plaintext format NOTE Explicit extension loading does not apply to legacy extensionsinstallingsensulegacyextensions which are loaded by virtue of being placed in the extension directory Installing Sensu legacy extensions Sensu extensions which are not properly packaged as gems are considered legacy meaning they predate the new specification for loading Sensu Extensions from gems These legacy extensions are loaded from the directory specified by the extensiondir flag provided when Sensu processes are started8 On most systems this defaults to etcsensuextensions as specified by the command flags passed to the sensuclient or sensuserver process via the service supervision scheme in use eg init runit upstart systemd etc Extensions should be installed directly into the extensions directory When an legacy extension has dependencies on thirdparty Ruby gems or other external applications those dependencies must be installed into the Sensu embedded Ruby environment as well Configuring Sensu Extensions The configurability of Sensu extensions is entirely a function of the extension code For example filters and mutators cannot be applied to an extension via a standard handler definition Instead these aspects of the extensions configuration must be defined in code by overriding the SensuExtensionBase definition method10 EXAMPLE extensionconfigurationincodeexample def definition type extension name name filters occurrences mutator onlycheckoutput end The above code would configure the associated extension to apply the occurrences filter and then the onlycheckoutput mutator prior to executing the extensions custom run method By virtue of being loaded into the Sensu client or server process Sensu extensions have access to the running Sensu configuration As such an extension can make use of any available configuration scopes9 but the prevailing convention is for extensions to use unique toplevel configuration scopes The systemprofile4 extension installed in a previous example looks to the toplevel systemprofile configuration scope The following configuration added to etcsensuconfd would change the systemprofile extensions Graphite path prefix from a default value of system to profile EXAMPLE providingextensionconfigurationexample systemprofile pathprefix profile The sensuextension gem Unlike Sensu plugins which may be written in any programming language Sensu extensions must be written in Ruby The sensuextension5 gem provides SensuExtensionBase and other classes which Sensu extensions should subclass The sensuextensions gem template The sensuextensions gem template12 provides a starting point for those who wish to author their own Sensu extension as a Ruby gem It is recommended that your gem follow the naming pattern sensuextensionNAME in order to ensure it can be easily installed with sensuinstall NOTE if you choose not to use this template for your extension note the directory structure it demonstrates eg placing extension code under libsensuextensions are required to ensure the extension is properly loaded Example extensions For simple examples of Sensu extensions consider the onlycheckoutput mutator6 or the debug handler7 both of which ship with Sensu You can find other Sensu extensions some of which are packaged in the Sensu Core distribution by searching RubyGems11 1 httpsgithubcomeventmachineeventmachinewikiGeneralIntroduction 2 httpjavieracerocomblogstartingwitheventmachineiv 4 httpsrubygemsorggemssensuextensionssystemprofile 5 httpsgithubcomsensusensuextension 6 httpsgithubcomsensuextensionssensuextensionsonlycheckoutputblobmasterlibsensuextensionsonlycheckoutputrb 7 httpsgithubcomsensuextensionssensuextensionsdebugblobmasterlibsensuextensionsdebugrb 8 configurationsensuserviceinitconfiguration 9 configurationconfigurationscopes 10 httpsgithubcomsensusensuextensionblobv150libsensuextensionrbL42L50 11 httpsrubygemsorgsearchutf8E29C93querysensuextensions 12 httpsgithubcomsensuextensionstemplate"},{"title":"Filters","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/filters","display_name":"Sensu Core 1.1: Filters","content":" Reference documentation What are Sensu Filterswhataresensufilters When to use a filterwhentouseafilter How do Sensu filters workhowdosensufilterswork Inclusive and exclusive filteringinclusiveandexclusivefiltering Filter attribute comparisonfilterattributecomparison Filter attribute evaluationfilterattributeevaluation Filter attribute eval tokensfilterattributeevaltokens What are filter attribute eval tokenswhatarefilterattributeevaltokens Example filter attribute eval tokenexamplefilterattributeevaltoken Filter attribute eval token specificationfilterattributeevaltokenspecification Eval token interpolationfilterattributeevaltokenspecification Eval token default valuesevaltokendefaultvalues Filter configurationfilterconfiguration Filter definition specificationfilterdefinitionspecification Filter namingfilternaming Filter attributesfilterattributes when attributeswhenattributes What are Sensu filters Sensu Filters also called Event Filters allow you to filter events destined for one or more event Handlers1 Sensu filters inspect event data and match its keysvalues with filter definition attributes to determine if the event should be passed to an event handler Filters are commonly used to filter recurring events ie to eliminate notification noise and to filter events from systems in preproduction environments When to use a filter Sensu Filters allow you to configure conditional logic to be applied during the event processing flow Compared to executing an event handler evaluating event filters is an inexpensive operation which can provide overall monitoring performance gains by reducing the number of events that need to be handled Additionally by using Sensu Filters instead of building conditional logic into custom Handlers conditional logic can be applied to multiple Handlers and monitoring configuration stays DRY How do Sensu filters work Sensu Filters are applied when Event Handlers1 are configured to use one or more Filters Prior to executing a Handler the Sensu server will apply any Filters configured for the Handler to the Event Data If the Event is not removed by the Filters ie filtered out the Handler will be executed The filter analysis flow performs these steps When the Sensu server is processing an Event it will check for the definition of a handler or handlers Prior to executing each Handler the Sensu server will first apply any configured filter or filters for the Handler If multiple filters are configured for a Handler they are executed sequentially Filter attributes are compared with Event data Filters can be inclusive only matching events are handled or exclusive matching events are not handled As soon as a Filter removes an Event ie filters it out no further analysis is performed and the Event Handler will not be executed NOTE Filters specified in a handler set16 definition have no effect Filters must be specified in individual handler definitions Inclusive and Exclusive Filtering Filters can be inclusive negate false or exclusive negate true Configuring a handler to use multiple inclusive filters is the equivalent of using an AND query operator ie only handle events if they match inclusive filters x AND y AND z Configuring a handler to use multiple exclusive filters is the equivalent of using an OR operator ie only handle events if they dont match x OR y OR z Inclusive filtering by setting the filter definition attribute2 negate false only events that match the defined filter attributes are handled Exclusive filtering by setting the filter definition attribute2 negate true events are only handled if they do not match the defined filter attributes NOTE unless otherwise configured in the filter definition2 the default filtering behavior is inclusive filtering ie negate false Filter attribute comparison Filter attributes are compared directly with their event data3 counterparts For inclusive filter definitions4 ie negate false matching attributes will result in the filter returning a true value for exclusive filter definitions4 ie negate true matching attributes will result in the filter returning a false value ie the event does not pass through the filter Filters that return a true value will continue to be processed mdash via additional filters if defined mutators if defined and handlers EXAMPLE The following example filter definition entitled productionfilter will match event data3 with a custom client definition attribute5 environment production filters productionfilter negate false attributes client environment production Filter attribute evaluation When more complex conditional logic is needed than direct filter attribute comparison10 Sensu filters provide support for attribute evaluation using Ruby expressions When a Filter attribute value is a string beginning with eval the remainder is evaluated as a Ruby expression The Ruby expression is evaluated in a sandbox and provided a single variable value which is equal to the event data attribute value being compared If the evaluated expression returns true the attribute is a match Example Handling state change only Some teams migrating to Sensu have asked about reproducing the behavior of their old monitoring system which alerts only on state change This statechangeonly inclusive4 filter provides such filters statechangeonly negate false attributes occurrences eval value 1 action resolve This eval filter is effective because value of event occurrences is reset on each state change except when the event action is resolve The resolve action is set on an event when its check result status is 0 following one or more prior nonzero statuses Example Handling repeated events The following example filter definition entitled filterinterval60hourly will match event data3 with a check interval6 of 60 seconds and an occurrences value of 1 ie the first occurrence OR any occurrences value that is evenly divisible by 60 via a modulo operator7 calculation ie calculating the remainder after dividing occurrences by 60 Note that negate is true making this an exclusive filter4 if evaluation returns false the event will be handled filters filterinterval60hourly negate true attributes check interval 60 occurrences eval value 1 value 60 0 The next example will apply the same logic as the previous example but for checks with a 30 second interval filters filterinterval30hourly negate true attributes check interval 30 occurrences eval value 1 value 120 0 NOTE The effect of both of these filters is that they will only allow an events with 30second or 60second intervals to be handled1 on the first occurrence of the event and again every hour Previous examples in the older Sensu docs have not included the check interval 60 attribute which has confused some users because filtering based on occurrences alone assumes some understanding of the relationship between occurrences and interval which isnt always obvious Example Handling events during office hours only This filter evaluates the event timestamp to determine if the event occurred between 9 AM and 5 PM on a weekday Remember that negate defaults to false so this is an inclusive filter If evaluation returns false the event will not be filters ninetofiver negate false attributes timestamp eval 12345includeTimeatvaluewday Timeatvaluehourbetween917 Filter attribute eval tokens What are filter attribute eval tokens Sensu filters attributes may be evaluated using Ruby expressions10 which evaluations provide support for comparing a single event attribute variable against a basic logical statement eg is value greater than 60 When additional variables are needed beyond the single value variable provided by eval tokens may be used Eval tokens are filter attribute placeholders that can be replaced by Sensu check definition attributes6 and client definition attributes8 including custom attributes Example filter attribute eval token The following is an example Sensu filter definition2 which is using a token checkoccurrences60 as a secondary attribute in the Ruby eval expression The token will be replaced by the check definition attribute6 named occurrences if it is defined otherwise it will use the fallback value of 60 filters occurrences negate true attributes occurrences eval value checkoccurrences60 This example would be useful for filtering events that dont exceed a minimum number of occurrences as configured in the check definition Filter attribute eval token specification Eval token substitution syntax Eval tokens are invoked by wrapping event data attributes with triple colons ie three colon characters before and after the attribute ie Nested event data attributes3 may be accessed via dot notation eg checkoccurrences occurrences would be replaced with the event occurrences data11 checkmythreshold would be replaced with a custom check definition attribute12 called mythreshold Eval token default values Eval token default values can be used as a fallback in the event that an eval token attribute13 is not satisfied by event data3 Eval token default values are separated by a pipe character and can be used to provide a fallback value for events that are missing the declared token attribute checkoccurrences60 would be replaced with a check definition attribute6 called occurrences If occurrences is not defined in the check definition the default or fallback value of 60 will be used NOTE if an eval token default value is not provided ie as a fallback value and the event data does not contain a matching eval token attribute13 an log entry indicating an error called filter eval unmatched tokens will be published to the Sensu server log Filter configuration Example filter definition examplefilterdefinition The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterproductionjson This is an inclusive filter definition called production The effect of this filter is that only events with the custom client attribute5 environment production will be handled filters production attributes client environment production negate false Filter definition specification Filter naming Each filter definition has a unique name used for the definition key Every filter definition is within the filters definition scope A unique string used to nameidentify the filter Cannot contain special characters or spaces Validated with Ruby regex9 wmatchfiltername Filter attributes negate "},{"title":"Handlers","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/handlers","display_name":"Sensu Core 1.1: Handlers","content":" Reference documentation What is a Sensu event handlerwhatisasensueventhandler Handler typeshandlertypes The default handlerthedefaulthandler Pipe handlerspipehandlers Pipe handler commandspipehandlercommands What is a pipe handler commandwhatisapipehandlercommand Pipe handler command argumentspipehandlercommandarguments How and where are pipe handler commands executedhowandwherearepipehandlercommandsexecuted TCPUDP handlerstcpudphandlers Transport handlerstransporthandlers Handler setshandlersets Handler configurationhandlerconfiguration Example handler definitionexamplehandlerdefinition Handler definition specificationhandlerdefinitionspecification Handler nameshandlernames HANDLER attributeshandlerattributes socket attributes TCPUDP handlerssocketattributes pipe attributes Transport handlerspipeattributess What is a Sensu event handler Sensu event handlers are actions executed by the Sensu server1 on events2 such as sending an email alert creating or resolving an incident eg in PagerDuty ServiceNow etc or storing metrics in a timeseries database eg Graphite Handler types There are several types of handlers The most common handler type is the pipe handler which works very similarly to how checks3 work enabling Sensu to interact with almost any computer program via standard streams4 Pipe handlers Pipe handlers pipe event data into arbitrary commands via STDIN TCPUDP handlers TCP and UDP handlers send event data to a remote socket eg external API Transport handlers Transport handlers publish event data to the Sensu transport5 Handler sets Handler sets also called set handlers are used to group event handlers making it easy to manage groups of actions that should be executed for certain types of events The default handler Sensu expects all events2 to have a corresponding handler Event handlers may be configured in check definitions16 however if no handler or handlers have been configured Sensu will attempt to handle the event using a handler named15 default The default handler is only a reference ie Sensu does not provide a builtin default handler so if no handler definition exists for a handler named default Sensu will log an error indicating that the event was not handled because a default handler definition does not exist To use one or more existing handlers as the default you can create a Set handler17 called default and include the existing handlers in the set Pipe handlers Pipe handlers are external commands that can consume event data6 via STDIN Example pipe handler definition handlers examplepipehandler type pipe command dosomethingawesomerb o options Pipe handler commands What is a pipe handler command Pipe handler definitions include a command attribute which are literally executable commands which will be executed on a Sensu server1 as the sensu user Pipe handler command arguments Pipe handler command attributes may include command line arguments for controlling the behavior of the command executable Most Sensu handler plugins11 provide support for command line arguments for reusability How and where are pipe handler commands executed As mentioned above all pipe handlers are executed by a Sensu server1 as the sensu user Commands must be executable files that are discoverable on the Sensu server system ie installed in a system PATH directory7 NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commands eg command handlerircrb TCPUDP handlers tcpudphandlers TCP and UDP handlers enable Sensu to forward event data to arbitrary TCP or UDP socketst for external services to consume eg thirdparty APIs Example TCP handler definition The following example TCP handler definition will forward event data6 to a TCP socket8 ie 1001994444 and will timeout if an acknowledgement ACK is not received within 30 seconds handlers exampletcphandler type tcp timeout 30 socket host 100199 port 4444 The following example UDP handler definition will forward event data6 to a UDP socket ie 100199444 handlers exampleudphandler type udp socket host 100199 port 4444 Transport handlers Transport handlers enable Sensu to publish event data to named queues on the Sensu transport5 for external services to consume Example transport handler definition The following example transport handler definition will publish event data6 to the Sensu transport on a pipe eg a queue or channel etc named examplehandlerqueue One or more instances of an external process or thirdparty application would need to subscribe to the named pipe to process the events handlers exampletransporthandler type transport pipe type direct name examplehandlerqueue Handler sets Handler set definitions allow groups of handlers ie individual collections of actions to take on event data to be referenced via a single named handler set NOTE Attributes defined on handler sets do not apply to the handlers they include For example filter filters and mutator attributes defined in a handler set will have no effect Example handler set definition The following example handler set definition will execute three handlers ie email slack and pagerduty for every event handlers notifyallthethings type set handlers email slack pagerduty Handler configuration Example handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdmailhandlerjson This handler definition uses the mailx unix command to email the event data to exampleaddresscom with the email subject sensu event The handler is named mail handlers mail type pipe command mailx s sensu event exampleaddresscom Handler definition specification Handler names handlernames Each handler definition has a unique handler name used for the definition key Every handler definition is within the handlers configuration scope9 A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex10 wmatchhandlername HANDLER attributes The following attributes are configured within the handlers HANDLER configuration scope9 where HANDLER is a valid handler name15 type "},{"title":"Mutators","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/mutators","display_name":"Sensu Core 1.1: Mutators","content":" Reference documentation What is a Sensu mutatorwhataresensumutators The Sensu mutator specificationthesensumutatorspecification When to use a mutatorwhentouseamutator How do Sensu mutators workhowdosensumutatorswork Mutator commandsmutatorcommands What is a mutator commandwhatisamutatorcommand Mutator command argumentsmutatorcommandarguments How and where are mutator commands executedhowandwherearemutatorcommandsexecuted Mutator configurationmutatorconfiguration Example mutator definitionexamplemutatordefinition Mutator definition specificationmutatordefinitionspecification Mutator namesmutatornames Mutator attributesmutatorattributes What are Sensu mutators whataresensumutators Sensu mutators are executable scripts or other programs that modify event data1 for Sensu event handlers2 which may expect additional or modified event data eg custom attributes that are not provided by the default event data specification3 The Sensu mutator specification Accept inputdata via STDIN Able to parse a JSON data payload ie a event data1 Output JSON data the modified event data to STDOUT or STDERR Produce an exit status code to indicate state 0 indicates OK exit status codes other than 0 indicates a failure When to use a mutator Many Sensu event handlers2 will modify event data1 in the course of processing an event9 and in many cases this is recommended because modifying the event data and performing some action in memory in the same process will result in better performance than executing a mutator5 and a handler two separate processes However when multiple handlers require similar event data modifications mutators provide the ability to avoid code duplication DRY and simplify event handler logic How do Sensu mutators work Sensu mutators are applied when event handlers2 are configured to use a mutator Prior to executing a Handler the Sensu server will execute the configured mutator If the mutator is successfully executed the modified event data is then provided to the handler and the handler will be executed If the mutator fails to execute for any reason an error will be logged and the handler will not be executed The complete process may be described as follows When the Sensu server is processing an event it will check for the definition of a mutator Prior to executing each handler the Sensu server will first execute the configured mutator if any for the handler If the mutator is successfully executed ie if it returns an exit status code of 0 the modified event data is provided to the handler and the handler will be executed If the mutator fails to execute ie returns a nonzero exit status code or does not complete execution within the configured timeout an error will be logged and the handler will not be executed Please refer to the Sensu event handler definition specification8 for more information about applying a mutator to an event handler see the mutator attribute Mutator commands What is a mutator command Each Sensu mutator definition6 defines a command to be executed Mutator commands are literally executable commands which will be executed on a Sensu server4 run as the sensu user Most mutator commands are provided by Sensu plugins7 Mutator command arguments Sensu mutator command attributes may include command line arguments for controlling the behavior of the command executable Many Sensu mutator plugins7 provide support for command line arguments for reusability How and where are mutator commands executed As mentioned above all mutator commands are executed by a Sensu server4 as the sensu user Commands must be executable files that are discoverable on the Sensu server system ie installed in a system PATH directory NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commandseg command checkhttprb u httpssensuapporg Mutator configuration Example mutator definition The following is an example Sensu mutator definition a JSON configuration file located at etcsensuconfdexamplemutatorjson This mutator definition uses an imaginary Sensu plugin7 called examplemutatorrb to modify event data prior to handling the event mutators examplemutator command examplemutatorrb Mutator definition specification Mutator names mutatornames Each mutator definition has a unique mutator name used for the definition key Every mutator definition is within the mutators definition scope A unique string used to nameidentify the mutator Cannot contain special characters or spaces Validated with Ruby regex10 wmatchmutatorname Mutator attributes command "},{"title":"Plugins","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/plugins","display_name":"Sensu Core 1.1: Plugins","content":" What is a Sensu plugin Sensu plugins provide executable scripts or other programs that can be used as Sensu checks1 ie to monitor server resources services and application health or collect analyze metrics Sensu handlers2 ie to send notifications or perform other actions based on Sensu events3 or Sensu mutators3 ie to modify event data4 prior to handling For more about Sensu plugins please refer to the Plugins reference documentation5 1 checks 2 handlers 3 eventseventdata 4 mutators 5 plugins23reference"},{"title":"RabbitMQ Configuration","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/rabbitmq","display_name":"Sensu Core 1.1: RabbitMQ Configuration","content":" Reference documentation What is RabbitMQwhatisrabbitmq How does Sensu use RabbitMQhowdoessensuuserabbitmq Install RabbitMQinstallrabbitmq Configure Sensusensurabbitmqconfiguration Example configuraitonssensurabbitmqconfigurationexamples RabbitMQ definition specificaitonrabbitmqdefinitionspecification rabbitmq attributesrabbitmqattributes ssl attributessslattributes Configure RabbitMQconfigurerabbitmq Standalone configurationstandaloneconfiguration Distributed configurationdistributedconfiguration Highavailability configurationhighavailabilityconfiguration What is a RabbitMQ clusterwhatisarabbitmqcluster High availability hardware requirementshighavailabilityhardwarerequirements Install RabbitMQinstallrabbitmq Configure a RabbitMQ clusterconfigurearabbitmqcluster Configure Sensu to use the RabbitMQ clusterconfiguresensutousetherabbitmqcluster Securing RabbitMQsecuringrabbitmq RabbitMQ and SELinuxrabbitmqandselinux RabbitMQ SSLrabbitmqssl RabbitMQ SSL and Erlang 183rabbitmqsslanderlang183 What is RabbitMQ RabbitMQ is a message bus which describes itself1 as a messaging broker an intermediary for messaging It gives your applications a common platform to send and receive messages and your messages a safe place to live until received To learn more about RabbitmQ please visit the official RabbitMQ website2 How does Sensu use RabbitMQ Sensu services use RabbitMQ the default Sensu transport3 to communicate with one another Every Sensu service requires access to the same instance of RabbitMQ or a RabbitMQ cluster to function Sensu check requests and check results are sent over RabbitMQ to the approprate Sensu services Install RabbitMQ For more information about installing RabbitMQ for use with Sensu please visit the RabbitMQ installation guide5 Configure Sensu sensurabbitmqconfiguration Example configurations sensurabbitmqconfigurationexamples The following are an example RabbitMQ connection definitions each located at etcsensuconfdrabbitmqjson Example standalone configuration sensurabbitmqconfigurationexamplesstandalone rabbitmq host 127001 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem Example distributed configuration sensurabbitmqconfigurationexamplesdistributed rabbitmq host 10016 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem Example highavailability configuration sensurabbitmqconfigurationexampleshighavailability rabbitmq host 10006 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem host 10007 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem host 10008 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem RabbitMQ definition specification The RabbitMQ definition uses the rabbitmq definition scope rabbitmq attributes host "},{"title":"Redis Configuration","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/redis","display_name":"Sensu Core 1.1: Redis Configuration","content":" Reference documentation What is Rediswhatisredis How does Sensu use Redishowdoessensuuseredis Install Redisinstallredis Configure Sensuconfiguresensu Example configurationssensuredisconfigurationexamples Redis definition specificationredisdefinitionspecification redis attributesredisattributes sentinels attributessentinelsattributes Configure Redissensuredisconfiguration Standalone configurationredisstandaloneconfiguration Distributed configurationredisdistributedconfiguration High Availability configurationredishighavailabilityconfiguration What is Redis masterslave replicationwhatisredismasterslavereplication What is Redis Sentinelwhatisredissentinel High availability hardware requirementshighavailabilityhardwarerequirements Install Redisinstallredis Redis masterslave configurationredismasterslaveconfiguration Configure the Redis masterconfiguretheredismaster Configure the Redis slaveconfiguretheredisslave Verify masterslave replicationverifymasterslavereplication Redis Sentinel configurationredissentinelconfiguration Configure a Sentinelconfigureasentinel Verify Redis Sentinel operationverifyredissentineloperation Configure Sensu to use Redis Sentinelconfiguresensutouseredissentinel Securing Redissecuringredis What is Redis Redis1 is a keyvalue database which describes itself as an open source BSD licensed advanced keyvalue cache and store Learn more at httpredisio1 How does Sensu uses Redis howdoessensuuseredis Sensu uses Redis as a datastore2 for storing monitoring data eg a client registry3 current check results current monitoring events etc Only the Sensu server4 and API5 processes require access to Redis ie the sensuclient process does not require access to Redis All Sensu services in a cluster require access to the same instance or cluster of Redis consequently Redis does not need to be installed on every system where Sensu is installed Sensu also provides support for using Redis as a transport14 Please see the Sensu transport reference documentation14 for more information Installing Redis For more information about installing Redis for use with Sensu please visit the Redis installation guide6 Configure Sensu configuresensu Example configurations sensuredisconfigurationexamples The following are example Redis definitions at etcsensuconfdredisjson NOTE if you are using Redis as your Sensu transport14 additional configuration will need to be provided to tell Sensu to use Redis as the transport instead of RabbitMQ default please see transport configuration15 for more information Example standalone configuration sensuredisconfigurationexamplesstandalone redis host 127001 port 6379 password secret Example distributed configuration sensuredisconfigurationexamplesdistributed redis host 100123 port 6379 password secret Example highavailability configuration sensuredisconfigurationexampleshighavailability redis password yourredispassword master redis01 sentinels host 100123 port 26379 host 100124 port 26379 host 100125 port 26379 Redis DNS resolution redisdns The Sensu Redis client will resolve the provided hostname before making a connection attempt to the Redis host Resolving the DNS hostname prior to connecting allows Sensu to properly handle resolution failures log them and make further attempts to connect to the Redis host This also allows Sensu to use Amazon AWS ElastiCache multiaz automatic failover Redis definition specification The Redis definition uses the redis definition scope redis attributes host "},{"title":"Sensu Server","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/server","display_name":"Sensu Core 1.1: Sensu Server","content":" Reference documentation What is the Sensu serverwhatisthesensuserver Sensu Core vs Sensu Enterprisesensucorevssensuenterprise Check execution schedulingcheckexecutionscheduling Check scheduling algorithm synchronizationcheckschedulingalgorithmsynchronization Event processingeventprocessing Automated Sensu server task electionautomatedtaskelection Sensu server tasksservertasks Scaling Sensuscalingsensu What is the Sensu server The Sensu server schedules and publishes check execution requests1 to client subscriptions2 via a PublishSubscribe model3 and provides a scalable event processing platform4 for processing check results and monitoring events Sensu Core vs Sensu Enterprise The Sensu server comes in two flavors the opensource Sensu Core5 via the sensuserver process and Sensu Enterprise6 via the sensuenterprise process To learn more about the differences between Sensu Core and Sensu Enterprise please visit the Sensu website7 NOTE Sensu Enterprise ie the sensuenterprise process was designed to be a dropin replacement for the Sensu Core server and API ie the sensuserver and sensuapi As such any mention of the Sensu server in the Sensu documentation also applies to the sensuenterprise process for Sensu Enterprise users WARNING as noted above the sensuenterprise process is designed to replace both of the Sensu Core sensuserver and sensuapi processes Because Sensu Enterprise will load the same configuration as Sensu Core it is important that the Sensu Core processes are stopped before starting Sensu Enterprise to avoid known conflicts and processing errors such as attempting to bind on the same ports etc Check execution scheduling Check execution scheduling is performed by a Sensu server see Sensu server task election8 Checks are scheduled by querying Sensus configuration for defined checks ndash excluding check with the attributes standalone true or publish false ndash and calculating when executions should occur based on their defined intervals Check scheduling algorithm synchronization checkschedulingalgorithmsynchronization Sensu uses an internal algorithm for determining a unique cadence for Sensu checks which uniqueness is based on the check name and interval This algorithm outputs a value in milliseconds which the Sensu server will use as an offset before the next check request should be published In practice this means that ndash assuming system clocks are in sync between disparate Sensu servers ndash check requests for a given check based on the check name will be published at the exact same time The also means that in the event of a Sensu server restart andor Sensu server task reelection ie if a new Sensu server is elected to become reponsible for check execution scheduling check execution scheduling intervals will remain consistent In fact because this algorithm is also shared by the Sensu client ndash which provides decentralized check execution scheduling in the form of standalone checks22 ndash a check defined on the Sensu server and a matching standalone check defined on a Sensu client should also stay in sync with each other again assuming that system clocks are in sync and the check names and intervals are consistent Event processing The Sensu server provides a scalable event processor Event processing involves conversion of check results9 into Sensu events and then applying any defined event filters10 event data mutators11 and event handlers12 All event processing happens on a Sensu server system The event processing workflow happens in the following order Event Filter Mutator Handler NOTE events that are filtered out ie removed by Sensu event filtersfilters will not continue to be mutated by event data mutatorsmutators or event handlershandlers Sensus event processing capabilities can be distributed among multiple Sensu servers in a Sensu cluster For more information on configuring a Sensu cluster please see Scaling Sensu13 below Automated task election The Sensu server processes ie sensuserver and sensuenterprise are designed to scale horizontally14 ie by adding systems No additional configuration is required to run a cluster of Sensu servers other than the location of the transport15 and data store16 When Sensu servers start they participate in an election process to automatically distribute tasks A Sensu server may be elected for more than one task A server task can only run on one Sensu server at a time and will automatically failover to another Sensu server in the event of a service failure or restart All Sensu servers in a Sensu cluster monitor the state of task execution on a 10second interval automatically electing a new Sensu server for a task if the current one hasnt confirmed execution in more than 30 seconds Server tasks In a Sensu server cluster responsibility for a distinct set of tasks is distributed amongst members of the cluster The tasks only run on one Sensu server at a time and will automatically failover to another Sensu server in the event of a service failure or restart When adding Sensu servers to a cluster restarting the existing Sensu servers in the cluster will force a redistribution of tasks Check request publisher The Sensu server is responsible for publishing check requests to the transport for all configured checks See check execution scheduling18 for more information Client monitor The Sensu server is responsible for monitoring the client registry19 and creating client keepalive events20 for stale clients Check result monitor The Sensu server is responsible for monitoring check results and creating TTL events for check results with expired check TTLs21 Check result aggregation pruning The Sensu server is responsible for monitoring check aggregates and pruning stale aggregate results To observe which Sensu server is currently reponsible for one or more tasks see API info23 Scaling Sensu Coming soon 1 checkscheckrequests 2 clientsclientsubscriptions 3 checkspubsubchecks 4 overviewarchitectureeventprocessor 5 httpssensuapporg 6 httpssensuapporgenterprise 7 httpssensuapporgfeaturescompare 8 automatedtaskelection 9 checkscheckresults 10 filters 11 mutators 12 handlers 13 scalingsensu 14 httpsenwikipediaorgwikiScalabilityHorizontalandverticalscaling 15 transport 16 datastore 18 checkexecutionscheduling 19 clientsregistrationandregistry 20 clientskeepaliveevents 21 checkscheckttls 22 checksstandalonechecks 23 apihealthandinfo"},{"title":"Silencing","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/silencing","display_name":"Sensu Core 1.1: Silencing","content":" Reference documentation What is Sensu Silencingwhatissensusilencing When to use silencingwhentousesilencing How does silencing workhowdoessilencingwork Silencing entry specificationsilencingentryspecification Silencing entry attributessilencingentryattributes Examplesexamples Silence all checks on a specific clientsilenceallchecksonaspecificclient Silence a specific check on a specific clientsilenceaspecificcheckonaspecificclient Silence all checks on clients with a specific subscriptionsilenceallchecksonclientswithaspecificsubscription Silence a specific check on clients with a specific subscriptionsilenceaspecificcheckonclientswithaspecificsubscription Silence a specific check on every client regardless of subscriptionssilenceaspecificcheckoneveryclient Deleting silencing entriesdeletingsilencingentries Appendix Deprecated stashbased silencingappendixdeprecatedstashbasedsilencing Comparing stashbased and native silencingcomparingstashbasedandnativesilencing Migrating from stashbased silencingmigratingfromstashbasedsilencing What is Sensu Silencing As check results0 are processed by a Sensu server the server executes event handlers1 to send alerts to personnel or otherwise relay event data to external services Although event handlers can be directly configured with filters11 to improve overall signaltonoise ratio there are many scenarios in which operators receiving notifications from Sensu require an ondemand means to suppress alerts Sensus builtin silencing provides the means to suppress execution of event handlers on an adhoc basis By using a dashboard or other tool to interact with the silenced API2 operators can mute notifications onthefly The silenced API manipulates silencing entries in the Sensu data store These entries describe a combination of check name and subscription When the check name3 andor subscription4 described in a silencing entry match an event the handler will not be executed and an informational message will be logged Individual handlers may optout of silencing by configuring the handlesilenced attribute5 NOTE Silencing described in this reference document is implemented in Sensu version 026 or later and Sensu Enterprise 20 or later When to use silencing Silencing is used to prevent handlers from being triggered based on the check name present in a check result or the subscriptions associated with the client that published the check result This can be desirable in many scenarios giving operators the ability to quiet incoming alerts while coordinating their response Sensu silencing entries make it possible to Silence all checks on a specific clientsilenceallchecksonaspecificclient Silence a specific check on a specific clientsilenceaspecificcheckonaspecificclient Silence all checks on clients with a specific subscriptionsilenceallchecksonclientswithaspecificsubscription Silence a specific check on clients with a specific subscriptionsilenceaspecificcheckonclientswithaspecificsubscription Silence a specific check on every client regardless of subscriptionssilenceaspecificcheckoneveryclient In addition to the above combinations silencing entries support Expiration after a specified number of seconds Expiration after check returns to OK state resolves Describing the reason or rationale Describing the creator or entity responsible for an entry How does silencing work Silencing entries are created on an adhoc basis via the silenced API2 endpoint When silencing entries are successfully created via the API they are assigned an ID in the format SUBSCRIPTIONCHECK where SUBSCRIPTION is the name of a Sensu client subscription and CHECK is the name of a Sensu check Silencing entries can be used to silence checks on specific clients by by taking advantage of perclient subscriptions4 added in Sensu 026 eg clientCLIENTNAME These silencing entries are persisted to the silenced registry in the Sensu data store10 When the Sensu server processes subsequent check results it consults this registry to determine whether or not a matching silencing entry exists If one or more matching entries exist in the registry the event context for the check result is updated to indicate that the event is silenced and the ID of the entries which the check result matched When creating a silencing entry a combination of check and subscription can be specified but only one or the other is strictly required For example when a silencing entry is created specifying only a check its ID will contain an asterisk or wildcard in the SUBSCRIPTION position This indicates that any event with a matching check name will be marked as silenced regardless of the originating clients subscriptions Conversely a silencing entry which specifies only a subscription will have an ID with an asterisk in the CHECK position This indicates that any event where the originating clients subscriptions match the subscription specified in the entry will be marked as silenced regardless of the check name NOTE Starting with version 026 Sensu clients automatically add a subscription containing their client name prefixed with the string client For example client i424242 will automatically add subscription clienti424242 Silencing checks at the individual client level requires clients to run Sensu 026 or be manually configured with a client subscription Silencing entry specification Silencing entries are composed as a JSON document containing at least one of the required subscription or check attributes and additional optional attributes as desired Silencing entries are created updated and deleted by submitting JSON documents to endpoints on the silenced API2 via HTTP POST as shown in the examples below Silencing entry attributes check "},{"title":"SSL Configuration","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/ssl","display_name":"Sensu Core 1.1: SSL Configuration","content":" Reference documentation How does Sensu use SSLhowdoessensuusessl SSLsecured transportssslsecuredtransports Configuring Sensu RabbitMQ for SSL encryptionconfiguringsensurabbitmqforsslencryption Generate selfsigned OpenSSL certificates CAgenerateselfsignedopensslcertificatesandca Enable RabbitMQ SSL supportenablerabbitmqsslsupport Configure Sensuconfiguresensu Known limitationsknownlimitations How does Sensu use SSL All communication between Sensu services happens via the Sensu transport1 As such to secure a Sensu installation means to secure communication between all of the Sensu services and the Sensu transport via SSL encryption Sensu can operate without the use of SSL encryption however this practice is heavily discouraged SSLsecured Transports Although the Sensu transport1 library makes it possible for Sensu to leverage transport alternatives to RabbitMQ eg Redis not all transports offer SSL support eg Redis does not support SSL For this reason this reference document will focus on SSL security for Sensu with the RabbitMQ transport Configuring Sensu RabbitMQ for SSL encryption Generate selfsigned OpenSSL certificates and CA The following instructions will generate an OpenSSL certificate authority and selfsigned certificates Alternatively please refer to the official RabbitMQ SSL documentation2 for a detailed guide on configuring RabbitMQ with SSL 1 OpenSSL is required on the machine that will generate the SSL certificates Install OpenSSL on your platform UbuntuDebian sudo aptget update sudo aptget install openssl openssl version RHELCentOS sudo yum install openssl openssl version 2 Download the Sensu SSL tool wget httpsensuapporgdocs10filessensussltooltar tar xvf sensussltooltar 3 Generate an OpenSSL certificate authority and selfsigned certificates using the Sensu SSL tool cd sensussltool sslcertssh generate ls l NOTE the generated certificates will be valid for 5 years The Sensu SSL tool will generate a certificate authority SSL certificates for the RabbitMQ server and a shared SSL certificate for all of the Sensu services client certpem keycertp12 keypem reqpem sensuca cacertcer cacertpem certs 01pem 02pem indextxt indextxtattr indextxtattrold indextxtold opensslcnf private cakeypem serial serialold server certpem keycertp12 keypem reqpem sslcertssh Enable RabbitMQ SSL support 1 Stop RabbitMQ NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdrabbitmqserver stop sudo service rabbitmqserver stop 2 Please refer to the official RabbitMQ documentation for enabling SSL support3 for instructions on installing the certificate authority and SSL certificates and configuring the RabbitMQ ssllisteners and ssloptions directives NOTE the RabbitMQ documentation will direct you to provide the location of three certificate files cacertfile certfile and keyfile These files correspond to the sensucacacertpem servercertpem and serverkeypem files generated by the Sensu SSL tool above We recommend copying these files to the RabbitMQ server in a new etcrabbitmqssl directory When complete your etcrabbitmqrabbitmqconfig file should contain the following configuration block rabbit ssllisteners 5671 ssloptions cacertfileetcrabbitmqsslcacertpem certfileetcrabbitmqsslcertpem keyfileetcrabbitmqsslkeypem versions tlsv12 ciphers rsaaes256cbcsha256 verifyverifypeer failifnopeercerttrue 3 Start RabbitMQ NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdrabbitmqserver start sudo service rabbitmqserver start Configure Sensu 1 Install the selfsigned SSL certificates generated above by copying the clientcertpem and clientkeypem files to the etcsensussl directory on all systems running Sensu processes eg the Sensu server4 API5 and clients6 2 Add ssl definition attributes7 to your Sensu RabbitMQ configuration8 Please note the following standalone configuration example9 a JSON configuration file located at etcsensuconfdrabbitmqjson Please see the ssl attributes7 section of the RabbitMQ reference documentation for more information host 127001 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem WARNING please note that by default RabbitMQ will listen for SSL connections on port 5671 instead of 5672 so if you are upgrading an existing configuration please ensure that all Sensu services are attempting to connect to RabbitMQ on port 5671 3 Restart the Sensu services Known limitations You may have noticed that the instructions above only generated a single client certificate Ideally every SSL connection would use a different certificate allowing them to be individually revoked There is currently no way to tell RabbitMQ to reject a certificate If the integrity of a certificate is compromised it is common practice to regenerate and redistribute the certificate authority and certificates This process is greatly simplified with the use of configuration management tools In the future the Sensu project hopes to be able to provide a better mechanism for distributing individual certificates and providing fastsimple revocation facilities 1 transport 2 httpwwwrabbitmqcomsslhtml 3 httpwwwrabbitmqcomsslhtmlenablingssl 4 server 5 apioverview 6 clients 7 rabbitmqsslattributes 8 rabbitmqrabbitmqdefinitionspecification 9 rabbitmqstandaloneconfiguration"},{"title":"Stashes","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/stashes","display_name":"Sensu Core 1.1: Stashes","content":" Reference documentation What is a Sensu stashwhatisasensustash The Sensu keyvalue storethesensukeyvaluestore The Sensu stash specificationthesensustashspecification Example Sensu stashexamplesensustash Stash definition specificationstashdefinitionspecification Stash attributesstashattributes content attributescontentattributes Direct access to stash content datadirectaccesstostashcontentdata What is a Sensu stash A Sensu stash is a JSON document containing arbitrary JSON Hash data which is accessible via the Stashes API1 The most common use of the Sensu Stashes are via Sensu handlers which may access the Stashes API to create andor read state information that persists between handler executions NOTE Prior to Sensu 026 the ability to silence notifications was implemented in external libraries like sensuplugin using specially crafted stashes Silencing via stashes is deprecated in favor of new native silencing Please see the silencing reference documentation7 for more details The Sensu keyvalue store thesensukeyvaluestore The Stashes API1 provides a keyvalue store1 for Sensu where arbitrary JSON data ie the values can be created accessed and deleted via an arbitrary path ie the keys The Sensu stash specification Example Sensu stash The following is an example Sensu stash path pathtomystash content message hello world foo bar expire 1 Stash definition specification Stash attributes path "},{"title":"Transport","product":"Sensu Core","version":"1.1","location":"/sensu-core/1.1/reference/transport","display_name":"Sensu Core 1.1: Transport","content":" Reference documentation What is the Sensu Transportwhatisthesensutransport Selecting a transportselectingatransport Transport configurationtransportconfiguration Example transport definitionexampletransportdefinition Transport definition specificationtransportdefinitionspecification Transport attributestransportattributes What is the Sensu Transport Sensu services use a message bus eg RabbitMQ1 for communication This message bus communication is provided by the Sensu Transport2 which is a library that makes it possible to leverage alternate transport solutions in place of RabbitMQ the default transport Sensu services requires access to the same instance of the defined transport eg a RabbitMQ server or cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscriptions Selecting a Transport The Sensu Transport library makes it possible to replace Sensus recommended and default transport RabbitMQ with alternative solutions There are currently two 2 transports provided with the sensutransport library RabbitMQ and Redis mdash each presenting unique performance and functional characteristics The RabbitMQ Transport recommended The RabbitMQ Transport is the original Sensu transport and continues to be the recommended solution for running Sensu in production environments Pros rabbitmqtransportpros Native SSL support Pluggable authentication framework Support for ACLs Cons rabbitmqtransportcons Adds Erlang as a runtime dependency to the Sensu architecture only on systems where RabbitMQ is running The Redis Transport The Redis Transport was an obvious alternative to the original RabbitMQ Transport because Sensu already depends on Redis as a data store Using Redis as a transport greatly simplifies Sensus architecture by removing the need to installconfigure RabbitMQ and Erlanghttpswwwerlangorg RabbitMQs runtime Pros redistransportpros Simplifies Sensu architecture by removing need for dedicated transport by using Redis as the data store and transport Comparable or better throughputperformance than RabbitMQ Cons redistransportcons No native support for SSL No support for transport consumers metrics see Health Info API4 Transport configuration Example transport definition The following is an example transport definition a JSON configuration file located at etcsensuconfdtransportjson This example transport configuration indicates that Redis should be used as the Sensu transport transport name redis reconnectonerror true Transport DNS resolution transportdns The Sensu Transport will resolve provided hostnames before making connection attempts to the RabbitMQ Redis transports Resolving DNS hostnames prior to connecting allows Sensu to properly handle resolution failures log them and make further attempts to connect to the selected transport This also allows Sensu to use DNS as a transport failover mechanism Transport definition specification transportdefinitionspecification The Sensu Transport uses the transport definition scope3 Transport attributes transportattributes The following attributes are defined within the transport definition scopeconfigurationconfigurationscopes name "},{"title":"Sensu Core","tags":["sensu","core","sensu core","1.1","index"],"product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/_index","display_name":"Sensu Core 1.2: Sensu Core","content":" Overview Monitor servers services application health and business KPIs Collect and analyze custom metrics Get notified about failures before your users do Give your business the competitive advantage it deserves"},{"title":"API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/_index","display_name":"Sensu Core 1.2: API","content":""},{"title":"Aggregates API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/aggregates","display_name":"Sensu Core 1.2: Aggregates API","content":" Reference documentation The aggregates API endpointtheaggregatesapiendpoint aggregates GETaggregatesget The aggregatesname API endpointstheaggregatesnameapiendpoints aggregatesname GETaggregatesnameget aggregatesname DELETEaggregatesnamedelete The aggregatesnameclients API endpointtheaggregatesnameclientsapiendpoint aggregatesnameclients GETaggregatesnameclientsget The aggregatesnamechecks API endpointtheaggregatesnamechecksapiendpoint aggregatesnamechecks GETaggregatesnamechecksget The aggregatesnameresultsseverity API endpointtheaggregatesnameresultsseverityapiendpoint aggregatesnameresultsseverity GETaggregatesnameresultsseverityget The aggregates API endpoint theaggregatesapiendpoint The aggregates API endpoint provides HTTP GET access to named aggregate data1 aggregates GET EXAMPLES aggregatesgetexamples The following example demonstrates a aggregates API query which results in a JSON Array of JSON Hashes containing named check aggregates1 curl s httplocalhost4567aggregates jq name checkhttp name checkwebapp name elasticsearchhealth API specification aggregatesgetspecification aggregates GET "},{"title":"Checks API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/checks","display_name":"Sensu Core 1.2: Checks API","content":" Reference documentation The checks API endpointthechecksapiendpoint checks GETchecksget The checkscheck API endpointsthecheckscheckapiendpoints checkscheck GETcheckscheckget The request API endpointtherequestapiendpoint request POSTrequestpost The checks API endpoint checks GET The checks API endpoint provides HTTP GET access to subscription check1 data EXAMPLE checksgetexample The following example demonstrates a request to the checks API resulting in a JSON Array of JSON Hashes containing subscription check definitions2 curl s http1270014567checks jq name sensuwebsite interval 60 subscribers production command checkhttprb u httpssensuapporg API Specification checksgetspecification checks GET "},{"title":"Clients API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/clients","display_name":"Sensu Core 1.2: Clients API","content":" Reference documentation The clients API endpointtheclientsapiendpoint clients GETclientsget clients POSTclientspost The clientsclient API endpointstheclientsclientapiendpoints clientsclient GETclientsclientget clientsclient DELETEclientsclientdelete The clientsclienthistory API endpointstheclientsclienthistoryapiendpoints"},{"title":"API Configuration","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/configuration","display_name":"Sensu Core 1.2: API Configuration","content":" Reference documentation API configurationapiconfiguration Example API definitionexampleapidefinition API definition specificationapidefinitionspecification API configuration Example API definition The following is an example API definition at etcsensuconfdapijson api host 57435322 bind 0000 port 4567 API definition specification The API definition uses the api definition scope api attributes host "},{"title":"Events API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/events","display_name":"Sensu Core 1.2: Events API","content":" Reference documentation The events API endpointtheeventsapiendpoint events GETeventsget The eventsclient API endpointtheeventsclientapiendpoint eventsclient GETeventsclientget The eventsclientcheck API endpointstheeventsclientcheckapiendpoints eventsclientcheck GETeventsclientcheckget eventsclientcheck DELETEeventsclientcheckdelete The resolve API endpointtheresolveapiendpoint resolve POSTresolvepost The events API endpoint events GET The events API endpoint provide HTTP GET access to the Sensu event registry EXAMPLES eventsgetexamples The following example demonstrates a events API query which returns a JSON Array of JSON Hashes containing event data1 curl s httplocalhost4567events jq timestamp 1460303502 action create occurrences 1 check totalstatechange 14 history 0 3 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 1 status 1 output CheckHttp WARNING 301n command checkhttprb u websitehttpsensuapporg subscribers production interval 60 handler mail name sensuwebsite issued 1460303502 executed 1460303502 duration 0032 client timestamp 1460303501 version 100 website httpgooglecom socket port 3030 bind 127001 subscriptions production environment development address 127001 name client01 id 0f42ec9412bf4918a0b952fd57e8ee96 API specification eventsgetspecification events GET "},{"title":"Health & Info APIs","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/health-and-info","display_name":"Sensu Core 1.2: Health & Info APIs","content":" Reference documentation How to obtain API status informationhowtoobtainapistatusinformation The health API endpointthehealthapiendpoint health GEThealthget The info API endpointtheinfoapiendpoint info GETinfoget How to obtain API status information The Sensu API provides two distinct endpoints for obtaining API status information health and info The Health API provides status information about the health of the APIs connections to the Sensu data store1 and transport2 The Info API provides a report on the status of the API including API version the status of the APIs connections to the Sensu data store and transport and the number of messages and consumers in various transport queues The health API endpoint health GET The health API provides HTTP GET access to test or verify the health of the monitoring system The Health API is provided for monitoring Sensu mdash it facilitates service checks to ensure that a minimal number of Sensu servers3 are connected to the transport ie transport consumers andor to ensure that the transport queue isnt growing which would indicate that the Sensu servers arent able to keeping up with the volume of keepalive messages4 and check results5 being produced NOTE the health API obtains its information via the info API PRO TIP the Health API messages URL parameter6 eg healthmessages1000 can be used to monitor the number of messages queued on the Sensu transport2 and then leveraged by other automation tools to trigger an auto scaling or similar provisioning event to automatically add one or more Sensu servers to a Sensu installation EXAMPLE healthgetexample In the following example querying the health API with the consumers6 URL parameter will return an HTTP response code7 to indicate if the expected number of consumers ie Sensu servers3 are processing check results In this example we are expecting at least two 2 consumers to be running at all times ie at least two Sensu servers processing check results The 412 Precondition Failed HTTP response code7 indicates that the requested number of consumers are not registered curl s i http1270014567healthconsumers2 HTTP11 412 Precondition Failed AccessControlAllowOrigin AccessControlAllowMethods GET POST PUT DELETE OPTIONS AccessControlAllowCredentials true AccessControlAllowHeaders Origin XRequestedWith ContentType Accept Authorization Connection close NOTE the 412 Precondition Failed HTTP response code7 does not mean that the API itself is unavailable but rather it is the equivalent of a false response to the API query ie if you want to know if there are at least two Sensu servers processing check results a 412 response code would mean no WARNING transport consumers are a native concept in pubsub technology8 including actual message queues like RabbitMQ8 Because the Sensu transport library2 supports transports which are not actual message queues eg Redis10 some transports do not support the Health API consumers check because they dont support the concept of consumers ie this means that healthconsumers1 will always fail returning a 412 response code for Sensu installations using Redis as the transport regardless of the number of Sensu servers which may be registered and processing check results API Specification healthgetspecification health GET "},{"title":"RESTful API Overview","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/overview","display_name":"Sensu Core 1.2: RESTful API Overview","content":" Sensu API The Sensu API provides access to monitoring data collected by Sensu such as a client registry1 check results2 and event data3 The API can be used to request adhoc check executions and resolve events among other things RESTful JSON API The Sensu API is JSON4based RESTful API5 Familiarity with or willingness to Google industry standard RESTful API behaviors ndash including HTTP response codes6 ndash are strongly recommended Reference documentation Clients APIclients Checks APIchecks Results APIresults Aggregates APIaggregates Events APIevents Stashes APIstashes Health Info APIhealthandinfo Settings APIsettings API configurationconfiguration Response Content Filtering Sensu API endpoints that support the GET HTTP method support HTTP response content filtering using one or more filter attributes To use response content filtering construct the URL for your API request using a dot notation query string parameter beginning with filter eg eventsfilterclientenvironmentproduction The Sensu API will only return response content objects that match the specified response content filter attributes Multiple attributes may be specified for a request eg eventsfilterclientenvironmentproductionfiltercheckcontactops 1 referenceclientsregistrationandregistry 2 referencecheckscheckresults 3 referenceeventseventdata 4 httpwwwjsonorg 5 httpsenwikipediaorgwikiRepresentationalstatetransfer 6 httpsenwikipediaorgwikiListofHTTPstatuscodes"},{"title":"Results API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/results","display_name":"Sensu Core 1.2: Results API","content":" Reference documentation The results API endpointtheresultsapiendpoint results GETresultsget results POSTresultspost The resultsclient API endpointtheresultsclientapiendpoint resultsclient GETresultsclientget The resultsclientcheck API endpointstheresultsclientcheckapiendpoints resultsclientcheck GETresultsclientcheckget resultsclientcheck DELETEresultsclientcheckdelete The results API endpoint theresultsapiendpoint The results API endpoint provides HTTP GET and HTTP POST access to current check result data1 results GET The results API endpoint provides HTTP GET access to fetch current check result data1 EXAMPLES resultsgetexamples The following example demonstrates a results API query which returns a JSON Array of JSON Hashes containing check results1 curl s httplocalhost4567results jq check status 1 output CheckHttp WARNING 301n command checkhttprb u websitehttpsensuapporg subscribers production interval 60 handler mail name sensuwebsite issued 1460312322 executed 1460312322 duration 0032 history 0 0 0 0 1 2 2 0 0 1 client client01 check status 0 output Keepalive sent from client 2 seconds ago executed 1460312365 issued 1460312365 name keepalive thresholds critical 180 warning 120 history 0 0 0 0 0 0 0 0 0 0 client client01 API specification resultsgetspecification results GET "},{"title":"Settings API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/settings","display_name":"Sensu Core 1.2: Settings API","content":" Reference documentation The settings API endpointthesettingsendpoint settings GETsettingsget The settings API endpoint thesettingsendpoint settings GET The settings API provides HTTP GET access to the APIs running configuration settings Sensitive setting values are redacted by default unless the URL query parameter redacted is set to false eg settingsredactedfalse EXAMPLE settingsgetexample The following example demonstrates a request to the settings API resulting in a JSON Hash containing the APIs running configuration settings curl s http1270014567settings jq api cors Headers Origin XRequestedWith ContentType Accept Authorization Credentials true Methods GET POST PUT DELETE OPTIONS Origin password REDACTED user admin checks API Specification settingsgetspecification settings GET "},{"title":"Silenced API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/silenced","display_name":"Sensu Core 1.2: Silenced API","content":" Reference documentation The silenced API endpointsthesilencedapiendpoints silenced GETsilencedget silenced POSTsilencedpost silencedidsid GETsilencedidsidget silencedclear POSTsilencedclearpost silencedsubscriptionssubscription GETsilencedsubscriptionsget silencedcheckscheck GETsilencedchecksget The silenced API endpoints The Silence API provides endpoint HTTP POST and GET access to create query and clear delete a silence entry via the Sensu API silenced GET Example Querying for all silence entries curl s X GET httplocalhost4567silenced jq expire 3530 expireonresolve false begin null creator null reason null check checkhaproxy subscription loadbalancer id loadbalancercheckhaproxy expire 1 expireonresolve true begin null creator sysopexamplecom reason we ran out of time check checkntpd subscription all id allcheckntpd API specification silencedgetspecification silenced GET "},{"title":"Stashes API","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/api/stashes","display_name":"Sensu Core 1.2: Stashes API","content":" Reference documentation The stashes API endpointsthestashesapiendpoints stashes GETstashesget stashes POSTstashespost The stashespath API endpointsthestashespathapiendpoints stashespath GETstashespathget stashespath POSTstashespathpost stashespath DELETEstashespathdelete The stashes API endpoints The stashes API endpoint provides HTTP GET and HTTP POST access to Sensu stash data3 via the Sensu keyvalue store4 stashes GET EXAMPLES stashesgetexamples The following example demonstrates a stashes query which results in a JSON Array of JSON Hashes containing stash data3 curl s httplocalhost4567stashes jq path silencei424242chefclientprocess content timestamp 1383441836 expire 3600 path applicationstorefront content timestamp 1381350802 endpoints httpshostnamestore expire 1 API specification stashesgetspecification stashes GET "},{"title":"CHANGELOG","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/changelog","display_name":"Sensu Core 1.2: CHANGELOG","content":" Releases Core 120 Release Notescorev120 Core 113 Release Notescorev113 Core 112 Release Notescorev112 Core 111 Release Notescorev111 Core 110 Release Notescorev110 Core 104 Release Notescorev104 Core 103 Release Notescorev103 Core 102 Release Notescorev102 Core 101 Release Notescorev101 Core 100 Release Notescorev100 Core 0290 Release Notescorev0290 Core 0285 Release Notescorev0285 Core 0284 Release Notescorev0284 Core 0283 Release Notescorev0283 Core 0282 Release Notescorev0282 Core 0281 Release Notescorev0281 Core 0280 Release Notescorev0280 Core 0271 Release Notescorev0271 Core 0270 Release Notescorev0270 Core 0265 Release Notescorev0265 Core 0264 Release Notescorev0264 Core 0263 Release Notescorev0263 Core 0262 Release Notescorev0262 Core 0261 Release Notescorev0261 Core 0260 Release Notescorev0260 Core 0257 Release Notescorev0257 Core 0256 Release Notescorev0256 Core 0255 Release Notescorev0255 Core 0254 Release Notescorev0254 Core 0253 Release Notescorev0253 Core 0251 Release Notescorev0252 Core 0250 Release Notescorev0250 Core 0241 Release Notescorev0241 Core 0240 Release Notescorev0240 Core 0232 Release Notescorev0232 Core 0231 Release Notescorev0231 Core 0230 Release Notescorev0230 Core 120 Release Notes corev120 Source GitHubcom56 December 5 2017 mdash Sensu Core version 120 has been released and is available for immediate download Please note the following improvements CHANGES corev120changes NEW Scheduled maintenance Sensu now gives users the ability to silence a check andor client subscriptions at a predetermined time begin epoch timestamp with an optional expiration in seconds enabling users to silence events in advance for scheduled maintenance windows NEW The Sensu API now logs the XRequestID header making it much easier to trace a requestresponse If the API client does not provide a request ID the API generates one for the request UUID IMPROVEMENT The Sensu API results endpoints now include check history in the result data IMPROVEMENT Check token substitution is now supported in check subdue Core 113 Release Notes corev113 Source GitHubcom55 CHANGES corev113changes BUGFIX Fixed a bug in the Sensu client that broke check hooks named after numeric statuses eg 2 and nonzero they were never executed unless the client had a local check definition 1773 BUGFIX systemd units now stored in libsystemd instead of usrlibsystemd on Debian and Ubuntu systems sensuomnibus 240 BUGFIX Sensu processes once again honor servicespecific defaults in etcdefault or etcsysconfig sensuomnibus 226 BUGFIX Package scripts now use getent for usergroup verification sensuomnibus 237 BUGFIX Removing AIX package no longer fails when sensuclient isnt running sensuomnibus 243 Core 112 Release Notes corev112 Source GitHubcom54 CHANGES corev112changes BUGFIX Fixed a bug in the Sensu client HTTP socket that caused the Sensu client to crash when the the local client definition did not specify httpsocket settings and the info or results endpoints were accessed BUGFIX Fixed a bug in the Sensu client HTTP socket that caused the Sensu client to consider an HTTP contenttype that included mediatype information as invalid discarding possibly valid content Core 111 Release Notes corev111 Source GitHubcom53 CHANGES corev111changes BUGFIX Fixed a bug in check TTL monitoring that caused the Sensu server to crash Check TTL member deletion following the deletion of the associated check result would produce an uncaught error Core 110 Release Notes corev110 Source GitHubcom49 September 27 2017 mdash Sensu Core version 110 has been released and is available for immediate download Please note the following improvements CHANGES corev110changes IMPORTANT Sensu packages include Ruby 241 Upgrading from releases of Sensu prior to 100 will require all plugin or extension gems to be reinstalled under the new Ruby environment IMPORTANT Sensu packages include sensuplugin 20050 which disables its deprecated filter methods by default ie occurrences Sensu releases since 100 include builtin filters that provide the same functionality with several improvements The builtin filters are occurrences51 and checkdependencies52 To use the builtin filters apply them to Sensu event handlers via their definition filters attribute eg filters occurrences checkdependencies These filters can now be used with Sensu event handlers that do not use the sensuplugin library or Ruby NEW Check hooks commands run by the Sensu client in response to the result of the check command execution The Sensu client will execute the appropriate configured hook command depending on the check execution status eg 1 Valid hook names include in order of precedence 1255 ok warning critical unknown and nonzero The check hook command output status executed timestamp and duration are captured and published in the check result Check hook commands can optionally receive JSON serialized Sensu client and check definition data via STDIN NEW Check STDIN A boolean check definition attribute stdin when set to true instructs the Sensu client to write JSON serialized Sensu client and check definition data to the check command process STDIN This attribute cannot be used with existing Sensu check plugins nor Nagios plugins etc as the Sensu client will wait indefinitely for the check process to read and close STDIN IMPROVEMENT Splayed proxy check request publishing Users can now splay proxy check requests optional evenly over a window of time determined by the check interval and a configurable splay coverage percentage For example if a check has an interval of 60s and a configured splay coverage of 90 its proxy check requests would be splayed evenly over a time window of 60s 90 54s leaving 6s for the last proxy check execution before the the next round of proxy check requests for the same check Proxy check request splayed publishing can be configured with two new check definition attributes within the proxyrequests scope splay boolean to enable it and splaycoverage integer percentage defaults to 90 IMPROVEMENT Configurable check output truncation for storage in Redis Check output truncation can be manually enableddisabled with the check definition attribute truncateoutput egtruncateoutput false The output truncation length can be configured with the check definition attribute truncateoutputlength eg truncateoutputlength 1024 Check output truncation is still enabled by default for metric checks with type metric IMPROVEMENT Sensu client HTTP socket basic authentication can how be applied to all endpoints not just settings via the client definition httpsocket attribute protectallendpoints eg protectallendpoints true IMPROVEMENT Improved check TTL monitoring performance IMRPOVEMENT The Sensu extension run log event log level is now set to debug instead of info when the run output is empty and the status is 0 BUGFIX Added initial timestamp to proxy client definitions The Uchiwa and Sensu dashboards will no longer display Invalid Date BUGFIX Deleting check history when deleting an associated check result Core 104 Release Notes corev104 October 17 2017 mdash Sensu Core version 104 has been released and is available for immediate download Please note the following improvements CHANGES corev104changes DEBUG Added HTTP response body to sensuapi debuglevel log messages This is a temporary change not included in future releases Core 103 Release Notes corev103 Source GitHubcomhttpsgithubcomsensusensublobmasterCHANGELOGmd103"},{"title":"FAQs","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/faq","display_name":"Sensu Core 1.2: FAQs","content":" Sensu Frequently Asked Questions Please note the following frequently asked questions about Sensu Core Sensu Enterprise Sensu Training Professional Services for Sensu and more If you need support for Sensu please consider giving Sensu Enterprisehttpssensuapporggetstarted a try Do I need RabbitMQ to be installed on every system I wish to monitor No Sensu uses RabbitMQreferencerabbitmq as a Transportreferencetransport Sensu services require access to a shared instance of the defined Sensu Transport eg a RabbitMQ cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscription topics Does Redis need to be installed on every system I wish to monitor No Sensu uses Redisreferenceredis as a data store and the Sensu server services ie sensuserver sensuapi for Sensu Core sensuenterprise for Sensu Enterprise require access to the same Redis instance or cluster to store and access the Sensu client registry check results check execution history and current event data Do check definitions need to exist on every system I wish to monitor No Check definitions can be written as publishsubscribe pubsub or standalone Pubsub checks which specify a list of subscribers need only be configured on the Sensu server Standalone checks which are scheduled and executed by the Sensu client need only be configured on the clients where they should be run Where should check plugin executables be installed Regardless of where checks are defined the actual check executables need to exist on the filesystem for the Sensu client to execute them Check plugin executables can be installed in etcsensuplugins or optsensuembeddedbin the latter being the location where plugin executables are installed via sensuinstall What is a standalone check A standalone check is a check definition that is installed on and executed by the Sensu client without being scheduled by the Sensu server Standalone checks defer Check execution scheduling responsibilitiesoverviewarchitecturecheckexecutionscheduler to Sensu clients enabling decentralized management of monitoring checks and distribution of scheduling responsibilities Standalone checks may be used in conjunction with pubsub checks and are distinguished from pubsub checks by inclusion of the standalone true configuration parameter What happens if a single check is defined on both the Sensu server and client When a check request is published for a check defined on the Sensu server the Sensu client will look for a local definition matching the check name prior to executing the check If a local definition exists it is mergedreferenceconfigurationconfigurationmerging with the definition provided by the server with any local definition attributes overriding the definition provided by the Sensu server What is Sensu Client safemode In safemode a client will not run a check published by a Sensu server unless that check is also defined on the client Safe mode must be enabled on the Sensu Client via the safemode configuration attribute Can multiple Sensu servers be run concurrently in a cluster Yes Sensu is designed to be scaled horizontally ie by adding additional Sensu servers It supports fully automated leader election ensuring that a single Sensu server acts as a centralized Check Execution Scheduleroverviewarchitecturecheckexecutionscheduler automated failover automatically electing a new leader if the previous leader is unexpectedly unavailable and distributed event processing check results are distributed across all Sensu servers in a roundrobin fashion Running more than one Sensu server is highly recommended for performance and availability How are new systems registered Automatically Sensu clients register themselves when they start up The Sensu client process requires access to the Sensu Transportreferencetransport by default this is RabbitMQreferencerabbitmq see Sensu Configurationreferenceconfigurationtoplevelconfigurationscopes and some minimal client configuration eg a name address and one or more subscriptions in order to start When the Sensu client process starts it begins sending keepalives ndash a special type of check result containing client configuration data ndash which the Sensu server uses to know that a client is still connected When a client keepalive is received for a client name that is not currently registered with Sensu the client is added to the registry and a registration event is created automatically Do system clocks need to be synchronized Yes The Sensu services ie sensuclient sensuserver sensuapi sensuenterprise use the localsystem clock for generating timestamps When system clocks are out of sync between Sensu clients where data is collected and the Sensu server where data is processed Sensu may generate false positive client keepalive events among other potentially unexpected behaviors Time synchronization can be facilitated with NTPhttpwwwntporg Is Sensu Enterprise available as a hosted SaaS solution No Like Sensu Core Sensu Enterprisesensuenterpriseindex is installed on your organizations infrastructure alongside other applications and services Sensu Enterprise packages are available for major Linux distributions including RHEL CentOS Debian and Ubuntu Is Sensu available for Microsoft Windows Yes An MSI installer package is available on the Downloads page Please visit the Sensu documentation for more information on configuring Sensu on Windowsplatformssensuonmicrosoftwindows How do I increase log verbosity You can toggle debug logging on and off by sending the Sensu process a TRAP signal For example ps aux grep sensuserver sensu 5992 17 03 177232 24352 kill TRAP 5992 downloads httpssensuapporgdownloads"},{"title":"Adding a Client","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/guides/adding-a-client","display_name":"Sensu Core 1.2: Adding a Client","content":"Sensu clients are pieces of infrastructure that Sensu monitors for you The Sensu client software allows you to register a running instance of itself as capable of running any checks they might be eligible for Infrastructure sometimes includes hardware or services that dont necessarily support running the Sensu client software but still needs to be monitored For those cases proxy clientsproxyclients let you monitor anything you can tell Sensu about Adding a Sensu Client One of the first challenges new Sensu users often encounter is learning what is required to get a remote Sensu client1 to communicate with the Sensu server2 If youre in a hurry skip ahead to add a remote Sensu client3 for stepbystep instructions Alternatively once you understand the two requirements for adding Sensu clients youll know everything you need to start deploying Sensu clients to your entire infrastructure Please continue reading to learn how adding Sensu clients starts with configuration4 and is ultimately all about the transport5 It starts with configuration Sensu is designed to be operated via configuration This core philosophy is what enables Sensu to work so seamlessly with modern automation solutions and configuration management platforms To learn more about how Sensu is configured please consult the Sensu configuration reference documentation6 The Sensu client requires a minimal amount of configuration to enable it to automatically register itself7 with the Sensu server which configuration includes a client definition8 eg the client name address and subscriptions and a transport definition9 Its all about the transport The Sensu processes use a transport10 a message bus for communication By default this is RabbitMQ11 but modern versions of Sensu have added support for alternative transports12 including Redis13 Without a transport connection a Sensu client will be unable to send monitoring data eg keepalive messages14 check results15 etc In order to connect to the transport the Sensu client will need three pieces of information Which transport to use this tells Sensu which transport library should it load and which configuration scope should it use to obtain connection details A valid transport definition this provides Sensu with an IP address or hostname and any security credentials needed to connect to the transport Network access to the transport socket ie the Sensu client will need outbound network access and the transport will need to be configured to listen for remote network connections Add a remote Sensu client With the exception of Sensu clients that are running on the Sensu server which is very useful and strongly recommended all Sensu clients are essentially remote clients as they have to establish network communication to send monitoring data eg client keepalives14 and check results15 Please note the following steps that are required to add a remote Sensu client 1 Configure the client Create a client definition located at etcsensuconfdclientjson with the following contents replacing the values for the client name address and subscriptions with the corresponding values for the client you are adding client name i041256 address 8888 subscriptions default webserver 2 Tell the client which transport to use Create a transport definition at etcsensuconfdtransportjson with the following contents replacing the value for the transport name with the corresponding value for the transport you are using eg use transport redis if you are using the Redis transport transport name rabbitmq reconnectonerror true 3 Tell the client how to connect to the transport Create a transport definition at etcsensuconfdrabbitmqjson or etcsensuconfdredisjson if you are using the Redis transport NOTE please consult the corresponding reference documentation for RabbitMQ11 or Redis13 for more configuration examples and detailed information on how to configure Sensus connection 4 Start the client Start the Sensu client and verify connectivity by consulting the Sensu client log file NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdsensuclient start sudo service sensuclient start Proxy Clients Sometimes a logical piece of infrastructure isnt a device we can run Sensu on Fundamentally Sensu gives you the flexibility to separate how checks run from where they run which lets you monitor arbitrary named black box devices or services For example you may have a router that you cant run Sensu on but publishes interesting information over SNMP that you want to gather metrics from Or maybe your monitor which other datacenters are visibleonline to you or have any number of creative use cases You can create a proxy client16 that can have attributes for use in check execution allowing you to use the client registry naturally for managed an unmanaged infrastructure See the reference for creating proxy clients16 or details on writing checks against them17 for more Troubleshooting 1 referenceclients 2 referenceserver 3 addaremotesensuclient 4 itstartswithconfiguration 5 itsallaboutthetransport 6 referenceconfiguration 7 referenceclientsregistrationandregistry 8 referenceclientsclientdefinitionspecification 9 referencetransporttransportdefinitionspecification 10 referencetransport 11 referencerabbitmq 12 referencetransportselectingatransport 13 referenceredis 14 referenceclientsclientkeepalives 15 referencecheckscheckresults 16 referenceclientsproxyclients 17 introtochecksproxyclients"},{"title":"Intro to Checks","version":"1.2","location":"/sensu-core/1.2/guides/intro-to-checks","display_name":"undefined 1.2: Intro to Checks","content":" An Introduction to Checks The purpose of this guide is to help Sensu users create monitoring checks At the conclusion of this guide you the user should have several Sensu checks in place to monitor and measure machine resources applications and services Each Sensu monitoring check in this guide demonstrates one or more check definition features for more information please refer to the Sensu checks reference documentation1 Objectives What will be covered in this guide Creation of standard checks functional tests Creation of metric collection checks server resources etc Creation of metric analysis checks querying time series data etc What are Sensu checks whataresensuchecks Sensu checks allow you to monitor server resources services and application health as well as collect analyze metrics they are executed on servers running the Sensu client Checks are essentially commands or scripts that output data to STDOUT or STDERR and produce an exit status code to indicate a state The common exit status codes used are 0 for OK 1 for WARNING 2 for CRITICAL and 3 or greater to indicate UNKNOWN or CUSTOM Sensu checks use the same specification as Nagios therefore Nagios check plugins may be used with Sensu Create a standard check Standard Sensu checks are used to determine the health of server resources services and applications A standard check will query a resource for information to determine its state Once a standard check has determined the resource state it outputs a human readable message and exits with the appropriate exit status code to indicate its stateseverity OK WARNING etc Monitor the cron service The following instructions install the check dependencies and configure the Sensu check definition in order to monitor the Cron service Install dependencies checkcroninstalldependencies The checkprocessrb script provided by the Sensu Process Checks Plugin2 can reliably detect if a service such as Cron is running or not The following instructions will install the Sensu Process Checks Plugin2 version 006 using Sensus embedded Ruby providing the checkprocessrb script sudo sensuinstall p processchecks006 Create the check definition for Cron The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdcheckcronjson This check definition uses the checkprocessrb script installed above3 to determine if the Cron service is running The check is named cron and it runs checkprocessrb p cron on Sensu clients with the production subscription every 60 seconds interval NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks cron command checkprocessrb p cron subscribers production interval 60 For a full listing of the checkprocessrb command line arguments run optsensuembeddedbincheckprocessrb h Currently the Cron check definition requires that check requests be sent to Sensu clients with the production subscription This is known as pubsub check Optionally a check may use standalone mode which allows clients to schedule their own check executions The following is an example of the Cron check using standalone mode true The Cron check will now be executed every 60 seconds on each Sensu client with the check definition A Sensu check definition with standalone true does not need to specify subscribers checks cron command checkprocessrb p cron standalone true interval 60 By default Sensu checks use the default Sensu event handler for events they create To specify a different Sensu event handler for a check use the handler attribute The debug event handler used in this example will log the Sensu event data to the Sensu server or Sensu Enterprise log checks cron command checkprocessrb p cron standalone true interval 60 handler debug Using multiple handlers To specify multiple Sensu event handlers use the handlers attribute plural NOTE if both handler and handlers plural check definition attributes are used handlers will take precedence checks cron command checkprocessrb p cron standalone true interval 60 handlers default debug Create a metric collection check Metric collection checks are used to collect measurements from server resources services and applications Metric collection checks can output metric data in a variety of metric formats Graphite plaintext4 Nagios Performance Data5 OpenTSDB6 Metrics 20 wire format7 Measuring CPU utilization Install dependencies cpumetricsinstalldependencies The metricscpurb script provided by the Sensu CPU Checks Plugin8 collects and outputs CPU metrics in the Graphite plaintext format The following instructions will install the Sensu CPU Checks Plugin8 version 003 using Sensus embedded Ruby providing the metricscpurb script sudo sensuinstall p cpuchecks003 Create the check definition for CPU metrics The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdcpumetricsjson This check definition uses the metricscpurb script installed above9 to collect CPU metrics and output them in the Graphite plaintext format By default Sensu checks with an exit status code of 0 for OK do not create events unless they indicate a change in state from a nonzero status to a zero status ie resulting in a resolve action see Sensu Events10 Metric collection checks will output metric data regardless of the check exit status code however they usually exit 0 To ensure events are always created for a metric collection check the check type of metric is used The check is named cpumetrics and it runs metricscpurb on Sensu clients with the production subscription every 10 seconds interval The debug handler is used to log the graphite plaintext CPU metrics to the Sensu server or Sensu Enterprise log NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks cpumetrics type metric command metricscpurb subscribers production interval 10 handler debug For a full listing of the metricscpurb command line arguments run optsensuembeddedbinmetricscpurb h Create a metric analysis check A metric analysis check analyzes metric data which may or may not have been collected by a metrics collection check11 By querying external metric stores eg Graphite to perform data evaluations metric analysis checks allow you to perform powerful analytics based on trends in metric data rather than a single data point For example where monitoring and alerting on a single CPU utilization data point can result in false positive events based on momentary spikes monitoring and alerting on CPU utilization data over a specified period of time will improve alerting accuracy Because metric analysis checks require interaction with an external metric store providing a functional example is outside of the scope of this guide However assuming the existence of a Graphite installation that is populated with metric data the following example checks could be used The following check uses the checkgraphitedatarb script provided by the Sensu Graphite Plugin12 to query the Graphite API at localhost9001 The check queries Graphite for a calculated moving average using the last 10 data points of the load balancer session count The session count moving average is compared with the provided alert thresholds A Sensu client running on the Graphite server would be responsible for scheduling and executing this check standalone mode NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded checks sessioncount command checkgraphitedatarb s localhost9001 t movingAveragelb1assetsbackendsessioncurrent10 w 100 c 200 standalone true interval 30 The following check uses the checkgraphitedatarb script provided by the Sensu Graphite Plugin12 to query the Graphite API at localhost9001 for disk capacity metrics The Graphite API query uses highestCurrent to grab only the highest disk capacity metric to be compared with the provided alert thresholds This check will trigger an event alert when one or more disks on any machine are at the configured capacity threshold In this example configuration the check is configured to warn at 85 capacity w 85 and to raise a critical alert at 95 capacity c 95 checks diskcapacity command checkgraphitedatarb s localhost9001 t highestCurrentdiskcapacity1 w 85 c 95 a 120 standalone true interval 30 The following instructions will install the Sensu Graphite Plugin12 version 006 using Sensus embedded Ruby providing the checkgraphitedatarb script sudo sensuinstall p graphite006 Checking on Other Clients proxyclients Sensu supports running checks where the results are considered to be for a client that isnt actually the one executing the check regardless of whether that client is a Sensu client or simply a proxy client14 There are a number of reasons for this use case but fundamentally Sensu handles it the same Checks are scheduled normally but by specifying a Proxy Request13 in your check clients that match certain definitions their clientattributes cause the check to run for each one The attributes supplied must normally match exactly as stated no variables or directives have any special meaning but you can still use eval to perform more complicated filtering with Ruby on the available value such as finding clients with particular subscriptions given that were dealing with arrays proxyrequests clientattributes uservariable somevalue subscriptions eval valueincludeasubscription 1 referencechecks 2 httpsgithubcomsensupluginssensupluginsprocesschecks 3 checkcroninstalldependencies 4 httpgraphitereadthedocsorgenlatestfeedingcarbontheplaintextprotocol 5 httpnagiossourceforgenetdocs30perfdatahtml 6 httpopentsdbnetdocsbuildhtmluserguidewritinghtml 7 httpmetrics20orgspec 8 httpsgithubcomsensupluginssensupluginscpuchecks 9 cpumetricsinstalldependencies 10 referenceeventswhataresensuevents 11 metriccollectionchecks 12 httpsgithubcomsensupluginssensupluginsgraphite 13 referencechecksproxyrequestsattributes 14 addingaclientproxyclients"},{"title":"Intro to Filters","version":"1.2","location":"/sensu-core/1.2/guides/intro-to-filters","display_name":"undefined 1.2: Intro to Filters","content":" Getting Started with Filters The purpose of this guide is to help Sensu users create event filters At the conclusion of this guide you the user should have several Sensu event filters in place to filter events for one or more event handlers Each Sensu filter in this guide demonstrates one or more filter definition features for more information please refer to the Sensu filters reference documentation1 Objectives What will be covered in this guide Creation of an event filter Creation of an event filter with Ruby and math What are Sensu filters whataresensufilters Sensu filters allow you to filter out events destined for one or more event handlers Sensu filters inspect event data and match its keyvalues pairs with filter definition attributes to determine if the event should be passed to an event handler Filters are commonly used to filter event recurrences to eliminate notification noise and to filter events that are not for production machines Create an event filter Inclusive filtering The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterproductionjson This filter definition will include events that match the filter criteria In this example the filter itself is named production which matches events with a custom client attribute entitled environment with the value production filters production attributes client environment production Exclusive filtering To exclude events based on filter criteria set the negate filter definition attribute to true In this example the production filter will match events that do not have a custom client attribute entitled environment with the value production filters production attributes client environment production negate true Using a filter To use the production filter for an event handler set the filter attribute in the handler definition For example handlers mail type pipe command mailx s sensu event exampleaddresscom filter production Using multiple filters To specify multiple Sensu event filters use the filters attribute plural NOTE if both filter and filters plural handler definition attributes are used filters will take precedence handlers mail type pipe command mailx s sensu event exampleaddresscom filters production operations Create an event filter with Ruby and math Filter attributes are compared directly with their event data counterparts via Ruby object comparison However it is also possible to use Ruby expressions to evaluate event data attribute values When a filter attribute value is a string that begins with eval the remainder of the string is evaluated as a Ruby expression The event data attribute value is provided to the Ruby expression as a variable entitled value If the evaluated expression returns true the attribute is a match This Ruby expression evaluation is performed in a sandbox for safety The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterrecurrencesjson This filter excludes events that are not the first event occurrence and those that do not have an occurrence count divisible by 60 without a remainder recurrence Logically if checks with an execution interval of 1 minute are generating events every minute this filter will help reduce noise by only allowing event handling once per hour filters recurrences attributes occurrences eval value 1 value 60 0 1 referencefilters"},{"title":"Intro to Handlers","version":"1.2","location":"/sensu-core/1.2/guides/intro-to-handlers","display_name":"undefined 1.2: Intro to Handlers","content":" Getting Started with Handlers The purpose of this guide is to help Sensu users create event handlers At the conclusion of this guide you the user should have several Sensu handlers in place to handle events Each Sensu event handler in this guide demonstrates one or more handler types and definition features for more information please refer to the handlers reference documentation1 Objectives What will be covered in this guide Creation of a pipe handler Creation of a tcp handler Creation of a udp handler Creation of a transport handler Creation of a set handler What are Sensu event handlers whataresensueventhandlers Sensu event handlers are for taking action on events2 produced by check results such as sending an email alert creating or resolving a PagerDuty incident or storing metrics in Graphite There are several types of handlers pipe tcp udp transport and set Pipe handlers execute a command and pass the event data to the created process via STDIN TCP and UDP handlers send the event data to a remote socket Transport handlers publish the event data to the Sensu transport by default this is RabbitMQ Set handlers are used to group event handlers making it easier to manage many event handlers Create a pipe handler Pipe event handlers execute a command and pass the event data to the corresponding process via STDIN Install dependencies The following instructions install the eventfile Sensu handler plugin written in Ruby to etcsensupluginseventfilerb This handler plugin reads the event data via STDIN parses it creates a file name using the parsed event data and then writes the event data to the file eg tmpclientnamechecknamejson sudo wget O etcsensupluginseventfilerb httpsensuapporgdocs12fileseventfilerb sudo chmod x etcsensupluginseventfilerb The eventfile Sensu plugin requires a Ruby runtime Install Ruby from the distribution repository and sensuplugin from Rubygems NOTE the following Ruby installation steps may differ depending on your platform You may have already done the following steps as part of the getting started with checks guide3 UbuntuDebian sudo aptget update sudo aptget install ruby rubydev CentOSRHEL sudo yum install ruby rubydevel Create the pipe handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdeventfilejson This handler definition uses the eventfile plugin installed above4 to write event data to a file The handler is named file and it runs etcsensupluginseventfilerb providing it with JSON event data via STDIN NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers file type pipe command etcsensupluginseventfilerb To add a handler execution timeout to the file handler use the timeout attribute handlers file type pipe command etcsensupluginseventfilerb timeout 10 To specify which check result severities OK WARNING etc the handler supports use the severities attribute handlers file type pipe command etcsensupluginseventfilerb timeout 10 severities critical unknown To use the file handler for a check please refer to the getting started with checks guide5 Create a TCP handler TCP and UDP event handlers send event data to a remote socket Both TCP and UDP handler types use the same definition attributes The following TCP handler instructions will work for UDP with minor adjustments Because TCP and UDP handlers require interaction with an external service providing a functional example is outside of the scope of this guide However the following instructions will allow you to run a simple TCP socket that echoes any input to STDOUT for testing purposes Run a TCP server To test the TCP handler a listening TCP socket server is required For the following examples netcat nc will be used as the TCP server The following command will create a TCP socket server listening on port 6000 NOTE netcat will output messages that it receives in the terminal window This command will need to be run in a separate terminal window nc l k 4 p 6000 To test the netcat TCP socket server run the following command and observe the netcat output testing echo testing nc localhost 6000 Create the TCP handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdtcpsocketjson This TCP handler will send JSON event data to the TCP socket server netcat in this example NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers tcpsocket type tcp socket host localhost port 6000 Create a transport handler Transport handlers publish event data to the Sensu transport by default this is RabbitMQ Transport event handlers are used to deliver event data to other services using the Sensu transport Create the transport handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdtransporteventsjson This transport handler will publish JSON event data to the Sensu transport NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers transport type transport pipe type direct name events Create a set handler Set handlers are used to group event handlers into sets of handlers making it easier to reference a set of event handlers from a check definition Create the set handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfddefaulthandlerjson This set handler is named default the handler that is used for events where a handler is not specified The previous Sensu event handler examples are included in the set NOTE Sensu services must be restarted in order to pick up configuration changes Sensu Enterprise can be reloaded handlers default type set handlers debug file tcpsocket transport 1 referencehandlers 2 referenceevents 3 introtochecksinstalldependencies 4 installdependencies 5 introtocheckscreatethecheckdefinitionforcron"},{"title":"Intro to Mutators","version":"1.2","location":"/sensu-core/1.2/guides/intro-to-mutators","display_name":"undefined 1.2: Intro to Mutators","content":" Getting Started with Mutators The purpose of this guide is to help Sensu users create event data mutators At the conclusion of this guide you the user should have several Sensu mutators in place to mutate transform event data for one or more event handlers Each Sensu mutator in this guide demonstrates one or more mutator definition features for more information please refer to the Sensu mutators reference documentation1 Objectives What will be covered in this guide What are Sensu mutators Creation of a Sensu event data mutator What are Sensu mutators whataresensumutators Sensu mutators mutate transform event data for a Sensu event handler Sensu event handlers can expect event data be in a different format andor manipulated Mutators allow one or more handlers to share logic reducing code duplication and simplifying the event handlers Sensu mutators are executed on machines running the Sensu server or Sensu Enterprise Mutators are essentially commands or scripts that receive JSON formatted event data via STDIN and output the mutated event data to STDOUT Mutators use an exit status code of 0 to indicate a success anything else indicates a failure If a mutator fails to execute nonzero exit status code the event will not be handled and an error will be logged Create an event data mutator Coming soon Please see the Mutators1 reference documentation If you have questions about event data mutators please contact Sensu Support2 1 referencemutators 2 httphelpdesksensuappcom"},{"title":"Overview","version":"1.2","location":"/sensu-core/1.2/guides/overview","display_name":"undefined 1.2: Overview","content":" Getting Started Guide The complete getting started guide The purpose of this guide is to help new Sensu users to obtain a basic understanding of the primitives or components used to build a comprehensive monitoring solution In the course of working through this guide users should be able to start monitoring servers services and application health collect and analyze metrics and setup alerts Objectives This guide will provide an introduction to the following building blocks An introduction to adding clients1 An introduction to checks2 An introduction to handlers3 An introduction to filters4 An introduction to mutators5 1 addingaclient 2 introtochecks 3 introtohandlers 4 introtofilters 5 introtomutators"},{"title":"Architecture","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/overview/architecture","display_name":"Sensu Core 1.2: Architecture","content":" Sensu Architecture Architectural Overview One of advantages that Sensu provides over other monitoring solutions is its architecture which facilitates the execution of service checks collection of metric data and event processing at scale This architecture is comprised of the following components Secure Transportsecuretransport Data Storedatastore Check Execution Schedulercheckexecutionscheduler Monitoring Agentmonitoringagent Event Processoreventprocessor RESTful APIrestfulapi Architectural Diagram Sensu Architecture Gifimagessensudiagramgif Secure Transport Sensu services use a message bus eg RabbitMQ1 to communicate with one another technically speaking the Sensu services dont actually communicate with each other they only communicate with the message bus As of Sensu Core version 013 this message bus communication in Sensu has been abstracted as the Sensu Transport2 making it possible to leverage alternate transport solutions in place of RabbitMQ the default Transport Sensu services requires access to the same instance of the defined Sensu Transport eg a RabbitMQ cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscriptions Data Store Sensu leverages a data store3 for data persistence Only the Sensu server API and dashboard services require access to the data store mdash the Sensu client4 monitoring agent does not By storing data in Redis the Sensu services themselves can remain stateless Although Sensu is designed to route telemetry data to external timeseries databases eg Graphite5 Librato6 InfluxDB7 etc Sensu does store the following state data Client registry8 Check history Event registry Stashes a keyvalue store provided by the Sensu API9 Check Execution Scheduler checkexecutionscheduler Sensu offers two distinct check execution schedulers the Sensu server and the Sensu client monitoring agent The Sensu server schedules and publishes check execution requests to client subscriptions via a PublishSubscribe model The Sensu client monitoring agent schedules and executes standalone checks on the local system only Sensus execution schedulers are not mutually exclusive so monitoring checks may be configured for both of Sensus schedulers the Sensu server and Sensu client and Sensu will ensure that the corresponding checks are executed on the appropriate systems Monitoring Agent The Sensu client is a fully featured monitoring agent which provides the following features dynamic selfregistration client subscriptions for monitoring checks configured via the PublishSubscribe model a local check execution scheduler10 an execution platform for monitoring the local system services andor external resources an input socket for accepting input from external services Event Processor eventprocessor The Sensu server is a scalable event processor that processes event data and takes action Sensus event processing capabilities include Registering and deregistering clients Processing check results Processing monitoring events using filters11 mutators12 and handlers13 Sensus event processor is designed to scale along with the applications and infrastructure it is monitoring Although Event Handlers are executed locally by the Sensu server multiple instances of the Sensu server can be run without any additional configuration Sensu provides builtin task election to avoid scheduling conflicts between Sensu servers and the Sensu transport14 distributes via roundrobin check results between Sensu servers for processing which provides loadbalancing RESTful API Sensu provides access to monitoring data and core functionality via a RESTful HTTP JSON API including A Clients API15 for accessing Client data and addingremoving clients A Checks API16 for accessing Check configuration data and publishing check requests An Events API17 for accessing event data and resolving events A Results API18 for accessing check result data and publishing check results An Aggregates API19 for accessing aggregated check result data and deleting aggregate data A Stashes API20 for providing readwrite access to Redis underlying keyvalue functionality 1 httpwwwrabbitmqcom 2 httpgithubcomsensusensutransport 3 referencedatastore 4 referenceclients 5 httpsgithubcomgraphiteproject 6 httpswwwlibratocom 7 httpsinfluxdatacom 8 referenceclientsregistrationandregistry 9 apioverview 10 checkexecutionscheduler 11 referencefilters 12 referencemutators 13 referencehandlers 14 referencetransport 15 apiclientsapi 16 apichecksapi 17 apieventsapi 18 apiresultsapi 19 apiaggregatesapi 20 apistashesapi"},{"title":"How Sensu Works","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/overview/how-sensu-works","display_name":"Sensu Core 1.2: How Sensu Works","content":" The Sensu Monitoring Flow Publishing subscription check requests A Check Request is scheduledpublished by the Sensu Server or a Sensu Client The Sensu Client executes a Service Check Service Checks emit status information and telemetry data as Check Results Check Results are considered to be associated with either the Sensu Client executing the check or the Proxy Client of the check Those Check Results are published by the Sensu Client to the Sensu Transport sometimes on behalf of another client The Sensu Server processes Check Results persisting a copy of the latest result in the Data Store and creating a corresponding to Event The Sensu Server processes the Event by executing one or more Event Handlers The Sensu Server applies any Event Filters defined for an Event Handler The Sensu Server applies any Event Data Mutators defined for an Event Handler assuming the event was not filtered out The Sensu Server executes the Event Handler assuming the event was not filtered out Sensu Architecture Gifimagessensudiagramgif"},{"title":"Platforms","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/overview/platforms","display_name":"Sensu Core 1.2: Platforms","content":" Sensu Core All versions of Sensu including Sensu Enterprise are based on the same core components and functionality which are provided by the Sensu opensource software project1 and collectively referred to as Sensu Core Sensu Core provides multiple processes including the Sensu server2 sensuserver Sensu API3 sensuapi and Sensu client4 sensuclient Installer packages are available for most modern operating systems via native installer packages eg deb rpm msi pkg etc which are available for download from the Sensu website5 and from package manager repositories for APT for UbuntuDebian systems and YUM for RHELCentOS NOTE although Sensu Core packages are available for a variety of platforms ndash thus making it technically possible to run the sensuserver and sensuapi processes on nonLinux operating systems ndash we strongly recommended running the Sensu Server and API on a Linuxbased platform Sensu Core installer packages for nonLinux platforms are provided for the purpose of making the sensuclient available and are not tested as extensively for running the sensuserver and sensuapi processes Sensu Server API UbuntuDebianplatformssensuonubuntudebianhtmlsensucore RHELCentOSplatformssensuonrhelcentoshtmlsensucore Sensu Client UbuntuDebianplatformssensuonubuntudebiansensucore RHELCentOSplatformssensuonrhelcentossensucore Microsoft Windowsplatformssensuonmicrosoftwindowssensucore Mac OS Xplatformssensuonmacosxsensucore FreeBSDplatformssensuonfreebsdsensucore IBM AIXplatformssensuonibmaixsensucore Oracle Solarisplatformssensuonoraclesolarissensucore Sensu Enterprise Sensu Enterprise6 is designed to be a dropin replacement for the Sensu Core server and API only ie Sensu Enterprise uses the same client as Sensu Core Sensu Enterprise provides a single process called sensuenterprise which provides addedvalue7 replacements for the Sensu Core server sensuserver and API sensuapi Sensu Enterprise Server API UbuntuDebianplatformssensuonubuntudebiansensuenterprise RHELCentOSplatformssensuonrhelcentossensuenterprise Sensu Enterprise Client As mentioned above Sensu Enterprise uses the same sensuclient process as Sensu Core By sharing the same opensource monitoring agent upgrading to Sensu Enterprise from Sensu Core is simplified as theres no need to upgrade agents mdash simply replace the server and API components Consequently Sensu Enterprise does not need to be installed on every system being monitored by Sensu 1 httpsgithubcomsensu 2 referenceserver 3 apioverview 4 referenceclients 5 httpssensuapporgdownload 6 httpssensuapporgenterprise 7 httpssensuapporgenterpriseadvantage"},{"title":"What is Sensu?","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/overview/what-is-sensu","display_name":"Sensu Core 1.2: What is Sensu?","content":"Sensu is an infrastructure and application monitoring and telemetry solution Sensu provides a framework for monitoring infrastructure service application health and business KPIs Sensu is specifically designed to solve monitoring challenges introduced by modern infrastructure platforms with a mix of static dynamic and ephemeral infrastructure at scale ie public private and hybrid clouds Sensu allows organizations to compose comprehensive monitoring telemetry solutions to meet unique business requirements By providing a platform to build upon Sensu enables you to focus on what to monitor and measure rather than how Sensu is installed on your organizations infrastructure ndash it is not a SoftwareasaService SaaS solution ndash which means Sensu gives you full control over the availability of your monitoring solution Benefits Sensu is a comprehensive infrastructure and application monitoring solution that provides the following benefits Monitor servers services application health and business KPIs Sensu is an infrastructure and application monitoring telemetry solution Send alerts and notifications Sensu integrates with the tools and services your organization is already using to do things like send emails PagerDuty1 alerts Slack2 HipChat3 IRC notifications and many4 more5 Dynamic client registration deregistration When servers are provisioned they automatically register themselves with Sensu so theres no need to manually add or configure new servers A simple yet extensible model for monitoring Sensu provides a sophisticated yet simple to understand solution for executing service checks6 and processing events7 at scale Service checks provide status and telemetry data and event handlers process results Hundreds of plugins are available for monitoring the tools and services youre already using Plugins have a very simple specification and can be written in any programming language Built for missioncritical applications and multitiered networks Sensus use of a secure transport8 protects your infrastructure from exposure and makes it possible for Sensu to traverse complex network topologies including those that use NAT and VPNs and span public networks Sensu provides a secure monitoring solution trusted by international banking institutions government agencies Fortune 100 organizations and many more Designed for automation Sensu exposes 100 of its configuration as JSON files which makes it extremely automationndashfriendly eg it was designed to work with tools like Chef9 Puppet10 and Ansible11 Open source software with commercial support Sensu is an opensource software OSS project made freely available under a permissive MIT License12 the source code is publicly available on GitHub13 Sensu Enterprise14 is based on Sensu Core the OSS version of Sensu which makes addedvalue features commercial support training and many other benefits available under the Sensu License15 A Simple Yet Powerful Framework Sensu is a comprehensive monitoring solution that is powerful enough to solve complex monitoring problems at scale yet simple enough to use for traditional monitoring scenarios and small environments It achieves this broad appeal via building upon two simple yet powerful monitoring primitives Service Checks16 and Event Processing7 These building blocks also provide an infinitely extensible framework for composing monitoring solutions What is a Service Check servicechecks Service checks allow you to monitor services eg is Nginx running or measure resources eg how much disk space do I have left Service checks are executed on machines running a monitoring agent ie Sensu client17 Service checks are essentially commands or scripts that output data to STDOUT or STDERR and produce an exit status code to indicate a state Common exit status codes used are 0 for OK 1 for WARNING 2 for CRITICAL and 3 or greater to indicate UNKNOWN or CUSTOM Sensu checks use the same specification as Nagios therefore Nagios check plugins may be used with Sensu Service checks produce results that are processed by the event processor ie the Sensu server Learn more 17 What is Event Processing eventprocessing Event processing also called stream processing is a method of analyzing processing and storing streams of information data about things that happen events deriving a conclusion from them and potentially executing some action handling The Sensu event processor the Sensu server enables you to execute Handlers18 for taking action on events produced by service checks such as sending an email alert creating or resolving an incident eg in PagerDuty or ServiceNow or storing metric data in a timeseries database eg Graphite Learn more 18 1 httpswwwpagerdutycom 2 httpsslackcom 3 httpwwwhipchatcom 4 referenceplugins 5 referenceenterprisebuiltinintegrations 6 servicechecks 7 eventprocessing 8 architecturesecuretransport 9 httpwwwchefio 10 httpspuppetlabscom 11 httpwwwansiblecom 12 httpsgithubcomsensusensublobmasterMITLICENSEtxt 13 httpgithubcomsensu 14 httpssensuapporgenterprise 15 httpssensuapporgsensulicense 16 servicechecks 17 referenceclients 18 referencehandlers"},{"title":"BSD","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/platforms/sensu-on-bsd","display_name":"Sensu Core 1.2: BSD","content":" Sensu on FreeBSD Reference documentation Installing Sensu Coresensucore Download and install Sensu using the Sensu txz filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Install Sensu Core sensucore Sensu Core is installed on FreeBSD systems via a native system installer package ie a txz file which is available for download from the Sensu Downloads1 page and from this repository 64bit FreeBSD 10 only2 WARNING FreeBSD packages are currently as a beta release Support for running Sensu on FreeBSD will be provided on a besteffort basis until further notice Download and install Sensu using the Sensu Universal txz file downloadandinstallsensucore NOTE As of Sensu version 027 package repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page NOTE FreeBSD packages are available for FreeBSD 10 and 11 Please visit the Sensu Downloads1 page for more information 2 Install the sensu1201txz package using the pkg utility sudo pkg add sensu1201txz 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Configure Sensu By default all of the Sensu services on FreeBSD systems will load configuration from the following locations usrlocaletcsensuconfigjson usrlocaletcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir usrlocaletcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at usrlocaletcsensuconfdclientjson client name freebsdclient address 127001 environment development subscriptions dev freebsdhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at usrlocaletcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Coming soon 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetfreebsd 3 httpssensuglobalsslfastlynetfreebsdFreeBSD10amd64sensusensu1201txz 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 configuresensu 10 exampletransportconfiguration 11 exampleclientconfiguration"},{"title":"IBM AIX","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/platforms/sensu-on-ibm-aix","display_name":"Sensu Core 1.2: IBM AIX","content":" Sensu on IBM AIX Installing Sensu Coresensucore Download and install Sensu using the Sensu bff filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Known limitationsknownlimitations Foreign Function Interfaceforeignfunctioninterface Install Sensu Core sensucore Sensu Core is installed on IBM AIX systems via a native system installer package ie a bff file which is available for download from the Sensu Downloads1 page and from this repository2 Download and install Sensu using the Sensu bff package downloadandinstallsensucore NOTE As of Sensu version 027 repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 The Sensu installer package for IBM AIX systems is provided in backup file format bff In order to install the content you will need to know the Fileset Name Display the content using the installp utility installp ld sensu1201powerpcbff Once you have collected the fileset name you can optionally proceed to preview installation using the installp utility with the p preview flag installp apXY d sensu1201powerpcbff sensu 3 Install Sensu using the installp utility installp aXY d sensu1201powerpcbff sensu NOTE this command uses the following installp utilty flags a to apply changes to the system X to extend the file system and Y to accept the Sensu MIT License4 4 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition11 and client definition12 Configure Sensu By default all of the Sensu services on IBM AIX systems will load configuration from the following locations etcsensuconfigjson etcsensuconfdjson NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name aixclient address localhost environment development subscriptions dev aixhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification13 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Managing the Sensu client process servicemanagement Start or stop the Sensu client using the startsrc and stopsrc utilities10 startsrc s sensuclient stopsrc s sensuclient Known limitations Please note the following platformspecific limitations affecting Sensu on AIX at this time Unless otherwise stated all documented functions of the Sensu client are supported Foreign Function Interface Foreign Function Interface FFI9 calls on Sensus embedded Ruby on AIX are not working at this time so any Rubybased Sensu plugins that require FFI will not work however all other plugins should work It is possible that FFI support will be enabled in a future release 1 httpssensuapporgdownloads 2 httpssensuglobalsslfastlynetaix 3 httpssensuglobalsslfastlynetaix61sensu1201powerpcbff 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 httpsgithubcomffiffi 10 configuresensu 11 exampletransportconfiguration 12 exampleclientconfiguration 13 referencetransporttransportdefinitionspecification"},{"title":"Mac OS X","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/platforms/sensu-on-mac-osx","display_name":"Sensu Core 1.2: Mac OS X","content":" Sensu on Mac OS X Installing Sensu Coresensucore Download and install Sensu using the Sensu Universal pkg filedownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Configure the Sensu client launchd daemonconfigurethesensuclientlaunchddaemon Operating Sensuoperatingsensu Managing the Sensu client process with launchctlservicemanagement Interacting with Sensu via CLIinteractingwithsensuviacli Install Sensu Core sensucore Sensu Core is installed on Mac OS X systems via a native system installer package ie a pkg file which is available for download from the Sensu Downloads1 page and from this repository2 WARNING Mac OS X packages are currently as a beta release Support for running Sensu on Mac OS X will be provided on a besteffort basis until further notice Download and install Sensu using the Sensu Universal pkg file downloadandinstallsensucore 1 Download Sensu from the Sensu Downloads1 page NOTE the Universal pkg file supports OS X Mavericks 109 and newer Mountain Lion users please use this installer3 2 Install the package using the installer utility sudo installer pkg sensu1201pkg target 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section12 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition13 and client definition14 Configure Sensu By default all of the Sensu services on Mac OS X systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus launchd daemon configuration XML andor by starting the Sensu services with the corresponding CLI arguments For more information please see the configure the Sensu client launchd daemon4 section below The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name macosxclient address 127001 environment development subscriptions dev macosxhosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification15 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Configure the Sensu client launchd daemon The Sensu Core pkg package includes a Sensu client daemon configuration allowing Sensu to be run as a launchd job or daemon The OS X launchd service and launchctl utility use a plist file9 an XMLbased configuration file to configure the sensuclient daemon run arguments eg log varlogsensusensuclientlog 1 To configure the Sensu client service wrapper copy the default service definition file entitled orgsensuappsensuclientplist to LibraryLaunchDaemonsorgsensuappsensuclientplist and edit it with your favorite text editor sudo cp optsensuembeddedCellarsensu120LibraryLaunchDaemonsorgsensuappsensuclientplist LibraryLaunchDaemonsorgsensuappsensuclientplist 2 This XML configuration file allows you to set Sensu client CLI arguments10 The following example configuration file sets the Sensu client primary configuration file path to etcsensuconfigjson the Sensu configuration directory to etcsensuconfd and the log file path to etcsensusensuclientlog Labelorgsensuappsensuclient ProgramArguments optsensubinsensuclient cetcsensuconfigjson detcsensuconfd lvarlogsensusensuclientlog UserNamesensu GroupNamesensu RunAtLoad KeepAlive StandardOutPathvarlogsensusensuclientlog StandardErrorPathvarlogsensusensuclientlog Operating Sensu Managing the Sensu client process with launchctl servicemanagement Start or stop the Sensu client using the launchctl utility11 sudo launchctl load w LibraryLaunchDaemonsorgsensuappsensuclientplist sudo launchctl unload w LibraryLaunchDaemonsorgsensuappsensuclientplist Interacting with Sensu via CLI Interacting with the any of the installed Sensu processes eg sensuclient via CLI on Mac OS X requires running the processes as the sensu user which is installed by the Sensu OS X installer package EXAMPLE sudo u sensu optsensubinsensuclient V 120 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetosx 3 httpssensuglobalsslfastlynetosxsensu1201mountainlionpkg 4 configurethesensuclientlaunchddaemon 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 httpsdeveloperapplecomlibrarymacdocumentationDarwinReferenceManPagesman5plist5html 10 referenceconfigurationsensuservicecliarguments 11 httpsdeveloperapplecomlibrarymacdocumentationDarwinReferenceManPagesman1launchctl1html 12 configuresensu 13 exampletransportconfiguration 14 exampleclientconfiguration 15 referencetransporttransportdefinitionspecification"},{"title":"Solaris","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/platforms/sensu-on-oracle-solaris","display_name":"Sensu Core 1.2: Solaris","content":" Sensu on Solaris Reference documentation Installing Sensu Coresensucore Download and install Sensu on Solaris 10downloadandinstallsensucoreonsolaris10 Download and install Sensu on Solaris 11downloadandinstallsensucoreonsolaris11 Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Operating Sensuoperatingsensu Managing the Sensu client processservicemanagement Install Sensu sensucore Sensu Core is installed on Solaris systems via native system installer packages ie pkg or IPS13 p5p files which are available for download from the Sensu Downloads1 page and from these repositories Solaris 10 pkg2 and Solaris 11 IPS p5p3 Download and install Sensu on Solaris 10 downloadandinstallsensucoreonsolaris10 NOTE As of Sensu version 10 package repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 Install the sensu1201i386pkg package using the pkgadd utility su pkgadd d sensu1201i386pkg 3 Install the Sensu service init scripts using the svccfg utility svccfg import libsvcmanifestsitesensuclientxml 4 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Download and install Sensu on Solaris 11 downloadandinstallsensucoreonsolaris11 1 Download Sensu from the Sensu Downloads1 page or by using the wget utility wget httpssensuglobalsslfastlynetsolarisips511sensu1201i386p5p 2 Install the sensu1201i386p5p package using the pkg utility sudo pkg install g sensu1201i386p5p developerversioningsensu 3 Download and run the Sensu postinstall script12 wget httpssensuapporgdocs12filespostinstsh chmod x postinstsh sudo postinstsh NOTE all native system installer packages for Sensu contain this postinstall script which is used for setting up the sensu system user and group creating various configuration directories setting configuration directory permissions and creating service init scripts This step may will be included in future Solaris 11 packages however at this time it is necessary to perform these steps manually 4 Install the Sensu service init scripts using the svcadm utility sudo svcadm restart manifestimport 5 Configure the Sensu client No default configuration is provided with Sensu so the Sensu client will not run without the corresponding configuration Please refer to the Configure Sensu section9 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition10 and client definition11 Configure Sensu By default all of the Sensu services on Solaris systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name solarisclient address 127001 environment development subscriptions dev solarishosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Operating Sensu Managing the Sensu client process servicemanagement Manually start stop and restart the Sensu services using the svcadm utility svcadm enable sensuclient svcadm disable sensuclient svcadm restart sensuclient 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetsolarispkg 3 httpssensuglobalsslfastlynetsolarisips 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 configuresensu 10 exampletransportconfiguration 11 exampleclientconfiguration 12 filespostinstsh 13 httpwwworaclecomtechnetworkserverstoragesolaris11technologiesips323421html"},{"title":"RHEL/CentOS","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/platforms/sensu-on-rhel-centos","display_name":"Sensu Core 1.2: RHEL/CentOS","content":" Sensu on RHELCentOS Reference documentation Installing Sensu Coresensucore Install Sensu using YUMinstallsensucorerepository Installing Sensu Enterprisesensuenterprise Install the Sensu Enterprise repositoryinstallsensuenterpriserepository Install Sensu Enterprise server APIinstallsensuenterprise Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Example data store configurationexampledatastoreconfiguration Example API configurationsexampleapiconfigurations Standalone configurationapistandaloneconfiguration Distributed configurationapidistributedconfiguration Example Sensu Enterprise Dashboard configurationsexamplesensuenterprisedashboardconfigurations Standalone configurationdashboardstandaloneconfiguration Distributed configurationdashboarddistributedconfiguration Enable the Sensu services to start on bootenablethesensuservicestostartonboot Disable the Sensu services on bootdisablethesensuservicesonboot Operating Sensuoperatingsensu Managing the Sensu servicesprocessesservicemanagement Install Sensu Core sensucore Sensu Core is installed on RHEL and CentOS systems via a native system installer package ie a rpm file which is available for download from the Sensu Downloads1 page and from YUM package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Install Sensu using YUM recommended installsensucorerepository Sensu packages for Red Hat target currently supported versions of Red Hat Enterprise Linux and their Centos equivalents These packages are generally expected to be compatible with Red Hat derivatives like SuSE Amazon or Scientific Linux but packages are not tested on these platforms The following instructions describe configuring package repository definitions using Yum variables14 as components of the baseurl On Red Hat derivative platforms the value of the releasever variable will not typically align with the RHEL release versions eg 6 or 7 advertised in the Sensu Yum repository Please use 6 or 7 in lieu of releasever on RHEL derivatives depending on whether they use sysv init or systemd respectively NOTE As of Sensu version 027 the yum repository URL has changed to include the releasever variable To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Sensu sudo yum install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 3 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition11 The Sensu client will need a client definition12 and both the sensuserver and sensuapi will need a datastore Redis definition13 mdash all of which are explained below Install Sensu Enterprise sensuenterprise Sensu Enterprise2 is installed on RHEL and CentOS systems via a native system installer package ie a rpm file The Sensu Enterprise installer package is made available via the Sensu Enterprise YUM repository which requires access credentials to access The Sensu Enterprise packages install two processes sensuenterprise which provides the Sensu server and API from a single process and sensuenterprisedashboard which provides the dashboard API and web application WARNING Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server and API only Sensu Enterprise uses the same sensuclient process provided by the Sensu Core installer packages above As a result Sensu Enterprise does not need to be installed on every system being monitored by Sensu Install the Sensu Enterprise repository installsensuenterpriserepository 1 Set access credentials as environment variables SEUSER1234567890 SEPASSPASSWORD NOTE please replace 1234567890 and PASSWORD with the access credentials provided with your Sensu Enterprise subscription Confirm that you have correctly set your access credentials as environment variables echo SEUSERSEPASS 1234567890PASSWORD 2 Create a YUM repository configuration file for the Sensu Enterprise repository at etcyumreposdsensuenterpriserepo echo sensuenterprise namesensuenterprise baseurlhttpSEUSERSEPASSenterprisesensuappcomyumnoarch gpgcheck0 enabled1 sudo tee etcyumreposdsensuenterpriserepo 3 Create a YUM repository configuration file for the Sensu Enterprise Dashboard repository at etcyumreposdsensuenterprisedashboardrepo echo sensuenterprisedashboard namesensuenterprisedashboard baseurlhttpSEUSERSEPASSenterprisesensuappcomyumbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensuenterprisedashboardrepo 4 Install Sensu Enterprise sudo yum install sensuenterprise sensuenterprisedashboard 5 Configure Sensu Enterprise No default configuration is provided with Sensu Enterprise so Sensu Enterprise will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu Enterprise Configure Sensu By default all of the Sensu services on Ubuntu and Debian systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE Additional or alternative configuration file and directory locations may be used by modifying Sensus service scripts andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration3 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name rhelclient address 127001 environment development subscriptions dev rhelhosts socket bind 127001 port 3030 Example transport configuration At minimum all of the Sensu processes require configuration to tell them how to connect to the configured Sensu Transport4 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification11 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis5 or RabbitMQ6 reference documentation Example data store configuration The Sensu Core server and API processes and the Sensu Enterprise process all require configuration to tell them how to connect to Redis the Sensu data store Please refer to the Redis reference documentation5 for configuration file examples Example API configurations Standalone configuration apistandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensuconfdapijson api host localhost bind 0000 port 4567 Distributed configuration apidistributedconfiguration 1 Obtain the IP address of the system where the Sensu API is installed For the purpose of this guide we will use 10017 as our example IP address 1 Create a configuration file with the following contents at etcsensuconfdapijson on the Sensu server and API systems api host 10017 bind 10017 port 4567 Example Sensu Enterprise Dashboard configurations Standalone configuration dashboardstandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host localhost port 4567 dashboard host 0000 port 3000 Distributed configuration dashboarddistributedconfiguration 1 Obtain the IP address of the system where Sensu Enterprise is installed For the purpose of this guide we will use 10017 as our example IP address 2 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host 10017 port 4567 dashboard host 0000 port 3000 NOTE Multiple Sensu Enterprise Dashboard instances can be installed When load balancing across multiple Dashboard instances your load balancer should support sticky sessions 3 The Sensu Enterprise Dashboard process requires configuration to tell it how to connect to Redis the Sensu data store Please refer to the Redis installation instructions5 for configuration file examples Enable the Sensu services to start on boot By default the Sensu services are not configured to start automatically on system boot we recommend managing the Sensu services with a process supervisor such as runit7 To enable Sensu services on system boot use the chkconfig utility8 Enable the Sensu client on system boot sudo chkconfig sensuclient on Enable the Sensu server and API to start on system boot For Sensu Core users ie sensuserver and sensuapi sudo chkconfig sensuserver on sudo chkconfig sensuapi on For Sensu Enterprise users sudo chkconfig sensuenterprise on WARNING the sensuenterprise process is intended to be a dropin replacement for the Sensu Core sensuserver and sensuapi processes Please ensure that the Sensu Core processes are not configured to start on system8 boot before enabling Sensu Enterprise to start on system boot Enable Sensu Enterprise Dashboard on system boot sudo chkconfig sensuenterprisedashboard defaults WARNING the sensuenterprisedashboard process is intended to be a dropin replacement for the Uchiwa dashboard Please ensure that the Uchiwa processes are not configured to start on system boot before enabling the Sensu Enterprise Dashboard to start on system boot Disable the Sensu services on boot If you have enabled Sensu services on boot and now need to disable them this can also be accomplished using the chkconfig utility9 Disable the Sensu client on system boot sudo chkconfig sensuclient off Disable the Sensu Core server on system boot sudo chkconfig sensuserver off Disable the Sensu Core API on system boot sudo chkconfig sensuapi off Disable Sensu Enterprise on system boot sudo chkconfig sensuenterprise off Disable Sensu Enterprise Dashboard on system boot sudo chkconfig sensuenterprisedashboard remove Operating Sensu Managing the Sensu servicesprocesses servicemanagement To manually start and stop the Sensu services use the following commands NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdsensuclient start Start or stop the Sensu client sudo service sensuclient start sudo service sensuclient stop Start or stop the Sensu Core server sudo service sensuserver start sudo service sensuserver stop Start or stop the Sensu Core API sudo service sensuapi start sudo service sensuapi stop Start or stop Sensu Enterprise sudo service sensuenterprise start sudo service sensuenterprise stop Start or stop the Sensu Enterprise Dashboard sudo service sensuenterprisedashboard start sudo service sensuenterprisedashboard stop Verify the Sensu Enterprise Dashboard is running by visiting view the dashboard at httplocalhost3000 replace localhost with the hostname or IP address where the Sensu Enterprise Dashboard is running 1 httpssensuapporgdownload 2 httpssensuapporgenterprise 3 referenceconfiguration 4 referencetransport 5 referenceredissensuredisconfiguration 6 referencerabbitmqsensurabbitmqconfiguration 7 httpsmardenorgrunit 8 disablethesensuservicesonboot 9 httpsaccessredhatcomdocumentationenUSRedHatEnterpriseLinux6htmlDeploymentGuides2serviceschkconfightml 10 configuresensu 11 exampletransportconfiguration 12 exampleclientconfiguration 13 exampledatastoreconfiguration 14 httpsaccessredhatcomdocumentationenUSRedHatEnterpriseLinux6htmlDeploymentGuidesecUsingYumVariableshtml"},{"title":"Ubuntu/Debian","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/platforms/sensu-on-ubuntu-debian","display_name":"Sensu Core 1.2: Ubuntu/Debian","content":" Sensu on UbuntuDebian Reference documentation Installing Sensu Coresensucore Install Sensu using APTinstallsensucorerepository Installing Sensu Enterprisesensuenterprise Install the Sensu Enterprise repositoryinstallsensuenterpriserepository Install Sensu Enterprise server APIinstallsensuenterprise Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Example data store configurationexampledatastoreconfiguration Example API configurationsexampleapiconfigurations Standalone configurationapistandaloneconfiguration Distributed configurationapidistributedconfiguration Example Sensu Enterprise Dashboard configurationsexamplesensuenterprisedashboardconfigurations Standalone configurationdashboardstandaloneconfiguration Distributed configurationdashboarddistributedconfiguration Enable the Sensu services to start on bootenablethesensuservicestostartonboot Disable the Sensu services on bootdisablethesensuservicesonboot Operating Sensuoperatingsensu Managing the Sensu servicesprocessesservicemanagement Install Sensu Core sensucore Sensu Core is installed on Ubuntu and Debian systems via a native system installer package ie a deb file which is available for download from the Sensu Downloads1 page and from APT package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Sensu packages for Debian target current stable and oldstable releases15 Sensu packages for Ubuntu target current Long Term Support LTS releases16 If you wish to install Sensu packages on newer Debian or Ubuntu releases please try installing a package built for the most recent Debian stable or Ubuntu LTS release Install Sensu using APT recommended installsensucorerepository NOTE As of Sensu version 027 apt repository configuration has changed to include the codename of the UbuntuDebian release To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Install the GPG public key wget q httpssensuglobalsslfastlynetaptpubkeygpg O sudo aptkey add 2 Determine the codename of the UbuntuDebian release on your system etcosrelease echo VERSION 14044 LTS Trusty Tahr codename for this system is trusty 3 Create an APT configuration file at etcaptsourceslistdsensulist export CODENAMEyourreleasecodenamehere eg trusty echo deb httpssensuglobalsslfastlynetapt CODENAME main sudo tee etcaptsourceslistdsensulist 4 Update APT sudo aptget update 5 Install Sensu sudo aptget install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 6 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition12 The Sensu client will need a client definition13 and both the sensuserver and sensuapi will need a datastore Redis definition14 mdash all of which are explained below Install Sensu Enterprise sensuenterprise Sensu Enterprise2 is installed on Ubuntu and Debian systems via a native system installer package ie a deb file The Sensu Enterprise installer package is made available via the Sensu Enterprise APT repository which requires access credentials to access The Sensu Enterprise packages install two processes sensuenterprise which provides the Sensu server and API from a single process and sensuenterprisedashboard which provides the dashboard API and web application WARNING Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server and API only Sensu Enterprise uses the same sensuclient process provided by the Sensu Core installer packages above As a result Sensu Enterprise does not need to be installed on every system being monitored by Sensu Install the Sensu Enterprise repository installsensuenterpriserepository 1 Set access credentials as environment variables SEUSER1234567890 SEPASSPASSWORD NOTE please replace 1234567890 and PASSWORD with the access credentials provided with your Sensu Enterprise subscription Confirm that you have correctly set your access credentials as environment variables echo SEUSERSEPASS 1234567890PASSWORD 2 Install the GPG public key wget q httpSEUSERSEPASSenterprisesensuappcomaptpubkeygpg O sudo aptkey add 3 Create an APT configuration file at etcaptsourceslistdsensuenterpriselist echo deb httpSEUSERSEPASSenterprisesensuappcomapt sensuenterprise main sudo tee etcaptsourceslistdsensuenterpriselist 4 Update APT sudo aptget update 5 Install Sensu Enterprise sudo aptget install sensuenterprise sensuenterprisedashboard 6 Configure Sensu Enterprise No default configuration is provided with Sensu Enterprise so Sensu Enterprise will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu Enterprise Configure Sensu By default all of the Sensu services on Ubuntu and Debian systems will load configuration from the following locations etcsensuconfigjson etcsensuconfd NOTE Additional or alternative configuration file and directory locations may be used by modifying Sensus service scripts andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration3 reference documentation Create the Sensu configuration directory In some cases the default Sensu configuration directory ie etcsensuconfd is not created by the Sensu installer in which case it is necessary to create this directory manually sudo mkdir etcsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at etcsensuconfdclientjson client name ubuntuclient address 127001 environment development subscriptions dev ubuntuhosts socket bind 127001 port 3030 Example transport configuration At minimum all of the Sensu processes require configuration to tell them how to connect to the configured Sensu Transport4 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification10 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis5 or RabbitMQ6 reference documentation Example data store configuration The Sensu Core server and API processes and the Sensu Enterprise process all require configuration to tell them how to connect to Redis the Sensu data store Please refer to the Redis reference documentation5 for configuration file examples Example API configurations Standalone configuration apistandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensuconfdapijson api host localhost bind 0000 port 4567 Distributed configuration apidistributedconfiguration 1 Obtain the IP address of the system where the Sensu API is installed For the purpose of this guide we will use 10017 as our example IP address 2 Create a configuration file with the following contents at etcsensuconfdapijson on the Sensu server and API systems api host 10017 bind 10017 port 4567 Example Sensu Enterprise Dashboard configurations Standalone configuration dashboardstandaloneconfiguration 1 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host localhost port 4567 dashboard host 0000 port 3000 Distributed configuration dashboarddistributedconfiguration 1 Obtain the IP address of the system where Sensu Enterprise is installed For the purpose of this guide we will use 10017 as our example IP address 2 Copy the following contents to a configuration file located at etcsensudashboardjson sensu name Datacenter 1 host 10017 port 4567 dashboard host 0000 port 3000 NOTE Multiple Sensu Enterprise Dashboard instances can be installed When load balancing across multiple Dashboard instances your load balancer should support sticky sessions 3 The Sensu Enterprise Dashboard process requires configuration to tell it how to connect to Redis the Sensu data store Please refer to the Redis installation instructions5 for configuration file examples Enable the Sensu services to start on boot By default the Sensu services are not configured to start automatically on system boot we recommend managing the Sensu services with a process supervisor such as runit7 To enable Sensu services on system boot use the updatercd utility Enable the Sensu client on system boot sudo updatercd sensuclient enable Enable the Sensu server and API to start on system boot For Sensu Core users ie sensuserver and sensuapi sudo updatercd sensuserver enable sudo updatercd sensuapi enable For Sensu Enterprise users sudo updatercd sensuenterprise enable WARNING the sensuenterprise process is intended to be a dropin replacement for the Sensu Core sensuserver and sensuapi processes Please ensure that the Sensu Core processes are not configured to start on system boot8 before enabling Sensu Enterprise to start on system boot Enable Sensu Enterprise Dashboard on system boot sudo updatercd sensuenterprisedashboard enable WARNING the sensuenterprisedashboard process is intended to be a dropin replacement for the Uchiwa dashboard Please ensure that the Uchiwa processes are not configured to start on system boot before enabling the Sensu Enterprise Dashboard to start on system boot Disable the Sensu services on boot If you have enabled Sensu services on boot and now need to disable them this can also be accomplished using the updatercd utility9 Disable the Sensu client on system boot sudo updatercd sensuclient disable Disable the Sensu Core server on system boot sudo updatercd sensuserver disable Disable the Sensu Core API on system boot sudo updatercd sensuapi disable Disable Sensu Enterprise on system boot sudo updatercd sensuenterprise disable Disable Sensu Enterprise Dashboard on system boot sudo updatercd sensuenterprisedashboard disable Operating Sensu Managing the Sensu servicesprocesses servicemanagement To manually start and stop the Sensu services use the following commands Start or stop the Sensu client sudo service sensuclient start sudo service sensuclient stop Start or stop the Sensu Core server sudo service sensuserver start sudo service sensuserver stop Start or stop the Sensu Core API sudo service sensuapi start sudo service sensuapi stop Start or stop Sensu Enterprise sudo service sensuenterprise start sudo service sensuenterprise stop Start or stop the Sensu Enterprise Dashboard sudo service sensuenterprisedashboard start sudo service sensuenterprisedashboard stop Verify the Sensu Enterprise Dashboard is running by visiting view the dashboard at httplocalhost3000 replace localhost with the hostname or IP address where the Sensu Enterprise Dashboard is running 1 httpssensuapporgdownload 2 httpssensuapporgenterprise 3 referenceconfiguration 4 referencetransport 5 referenceredissensuredisconfiguration 6 referencerabbitmqsensurabbitmqconfiguration 7 httpsmardenorgrunit 8 disablethesensuservicesonboot 9 httpmanpagesubuntucommanpagespreciseman8updatercd8html 10 referencetransporttransportdefinitionspecification 11 configuresensu 12 exampletransportconfiguration 13 exampleclientconfiguration 14 exampledatastoreconfiguration 15 httpswikidebianorgDebianReleases 16 httpswikiubuntucomLTS"},{"title":"Microsoft Windows","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/platforms/sensu-on-windows","display_name":"Sensu Core 1.2: Microsoft Windows","content":" Sensu on Microsoft Windows Reference documentation Installing Sensu Coresensucore Download and install Sensu using the Sensu MSIdownloadandinstallsensucore Configure Sensuconfiguresensu Create the Sensu configuration directorycreatethesensuconfigurationdirectory Example client configurationexampleclientconfiguration Example transport configurationexampletransportconfiguration Configure the Sensu client Windows service wrapperconfigurethesensuclientwindowsservicewrapper Install the Sensu client Windows serviceinstallthesensuclientwindowsservice Operating Sensuoperatingsensu Managing the Sensu client Windows serviceservicemanagement Install Sensu Core sensucore Sensu Core is installed on Microsoft Windows systems via a native system installer package ie a msi file which is available for download from the Sensu Downloads1 page and from this repository2 Download and install Sensu using the Sensu MSI downloadandinstallsensucore NOTE As of Sensu version 10 repository URLs have changed To install or upgrade to the latest version of Sensu please ensure you have updated existing configurations to follow the repository URL format specified below 1 Download Sensu from the Sensu Downloads1 page 2 Doubleclick the sensu1201x64msi installer package to launch the installer accept the Sensu Core MIT License4 and install Sensu using the default settings eg install location etc WARNING changing the default installation path from Copt is strongly discouraged 3 Configure the Sensu client No default configuration is provided with Sensu so the Sensu Client will not start without the corresponding configuration Please refer to the Configure Sensu section12 below for more information on configuring Sensu At minimum the Sensu client will need a working transport definition13 and client definition14 Configure Sensu DANGER Many text editors on Windows including Notepad save text in a format that is not suitable for Sensu configuration While we require UTF8 there are similarlooking character sets that are not actually UTF8 such as UTF8 BOM A more modern text editor such as Atom or Notepad will allow you to do this easily fortunately For more about editor encodings see this discussion on StackOverflow16 If youre automating JSON creation with eg PowerShell make sure that youre speaking UTF8 in your shell too See here17 for more details By default all of the Sensu services on Microsoft Windows systems will load configuration from the following locations Coptsensuconfigjson Coptsensuconfd NOTE in general where references to configuration file locations found elsewhere in the Sensu documentation suggest paths beginning with etcsensu these will correspond to Coptsensu on Microsoft Windows systems Additional or alternative configuration file and directory locations may be used by modifying Sensus service configuration XML andor by starting the Sensu services with the corresponding CLI arguments For more information please consult the Sensu Configuration5 reference documentation The following Sensu configuration files are provided as examples Please review the Sensu configuration reference documentation5 for additional information on how Sensu is configured Create the Sensu configuration directory In some cases the default Sensu configuration directory ie Coptsensuconfd is not created by the Sensu MSI installer in which case it is necessary to create this directory manually mkdir Coptsensuconfd Example client configuration 1 Copy the following contents to a configuration file located at Coptsensuconfdclientjson client name windowsclient address 127001 environment development subscriptions dev windowshosts socket bind 127001 port 3030 Example Transport Configuration At minimum the Sensu client process requires configuration to tell it how to connect to the configured Sensu Transport6 1 Copy the following contents to a configuration file located at etcsensuconfdtransportjson transport name rabbitmq reconnectonerror true NOTE if you are using Redis as your transport please use name redis for your transport configuration For more information please visit the transport definition specification15 2 Please refer to the configuration instructions for the corresponding transport for configuration file examples see Redis7 or RabbitMQ8 reference documentation Configure the Sensu client Windows service wrapper The Sensu Core MSI package includes a Sensu client service wrapper allowing Sensu to be registered as a Windows service The Sensu client service wrapper uses an XML configuration file to configure the sensuclient run arguments eg log Coptsensusensuclientlog To configure the Sensu client service wrapper edit the service definition file at Coptsensubinsensuclientxml with your favorite text editor This XML configuration file allows you to set Sensu client CLI arguments9 The following example configuration file sets the Sensu client primary configuration file path to Coptsensuconfigjson the Sensu configuration directory to Coptsensuconfd and the log file path to Coptsensusensuclientlog sensuclient Sensu Client This service runs a Sensu client Coptsensuembeddedbinruby Coptsensuembeddedbinsensuclient c Coptsensuconfigjson d Coptsensuconfd l Coptsensusensuclientlog Install the Sensu client Windows service Open a Command Prompt and use the Windows SC10 utility to create the Windows service for the Sensu client sc create sensuclient start delayedauto binPath coptsensubinsensuclientexe DisplayName Sensu Client NOTE the space between the equals and the values is required Operating Sensu Managing the Sensu client Windows service servicemanagement To manually start and stop the Sensu client Windows service use the Servicesmsc11 utility or via the Command Prompt Start or stop the Sensu client sc start sensuclient sc stop sensuclient 1 httpssensuapporgdownload 2 httpssensuglobalsslfastlynetmsi 3 httpssensuglobalsslfastlynetmsi2012r2sensu1201x64msi 4 httpssensuapporgmitlicense 5 referenceconfiguration 6 referencetransport 7 referenceredissensuredisconfiguration 8 referencerabbitmqsensurabbitmqconfiguration 9 referenceconfigurationsensuservicecliarguments 10 httpstechnetmicrosoftcomenuslibrarybb490995aspx 11 httpstechnetmicrosoftcomenuslibrarycc755249aspx 12 configuresensu 13 exampletransportconfiguration 14 exampleclientconfiguration 15 referencetransporttransportdefinitionspecification 16 httpstackoverflowcomquestions2223882whatsdifferentbetweenutf8andutf8withoutbom 17 httpstackoverflowcomquestions5596982usingpowershelltowriteafileinutf8withoutthebom"},{"title":"Client Installation","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/quick-start/client-installation","display_name":"Sensu Core 1.2: Client Installation","content":" Install the Sensu Client Having successfully installed and configured a Sensu server and API Sensu Core or Sensu Enterprise lets now install andor configure a Sensu client The Sensu client is run on every system you need to monitor including those running the Sensu server and API and Sensus dependencies ie RabbitMQ andor Redis Both Sensu Core and Sensu Enterprise use the same Sensu client process ie sensuclient so upgrading from Sensu Core to Sensu Enterprise does not require you to install a difference Sensu client Included in Sensu Core The Sensu client process sensuclient is part of the open source Sensu project ie Sensu Core and it is included in the Sensu Core installer packages along with the Sensu Core server and API processes ie sensuserver and sensuapi This means that if you are following the instructions in this guide for a standalone1 installation your Sensu client is already installed Disabled by default The Sensu client process sensuclient is disabled by default on all platforms Please refer to the corresponding configuration and operation documentation corresponding to the platform where you have installed your Sensu clients for instructions on starting stopping the Sensu client process andor enabling the Sensu client process to start automatically on system boot Install Sensu Core sensucore UbuntuDebian Sensu Core is installed on Ubuntu and Debian systems via a native system installer package ie a deb file which is available for download from the Sensu Downloads1 page and from APT package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Sensu packages for Debian target current stable and oldstable releases15 Sensu packages for Ubuntu target current Long Term Support LTS releases16 If you wish to install Sensu packages on newer Debian or Ubuntu releases please try installing a package built for the most recent Debian stable or Ubuntu LTS release Install Sensu using APT recommended installsensucorerepository NOTE As of Sensu version 027 apt repository configuration has changed to include the codename of the UbuntuDebian release To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Install the GPG public key wget q httpssensuglobalsslfastlynetaptpubkeygpg O sudo aptkey add 2 Determine the codename of the UbuntuDebian release on your system etcosrelease echo VERSION 14044 LTS Trusty Tahr codename for this system is trusty 3 Create an APT configuration file at etcaptsourceslistdsensulist export CODENAMEyourreleasecodenamehere eg trusty echo deb httpssensuglobalsslfastlynetapt CODENAME main sudo tee etcaptsourceslistdsensulist 4 Update APT sudo aptget update 5 Install Sensu sudo aptget install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 6 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section11 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition12 The Sensu client will need a client definition13 and both the sensuserver and sensuapi will need a datastore Redis definition14 mdash all of which are explained below RHELCentOS Sensu Core is installed on RHEL and CentOS systems via a native system installer package ie a rpm file which is available for download from the Sensu Downloads1 page and from YUM package management repositories The Sensu Core package installs several processes including sensuserver sensuapi and sensuclient Install Sensu using YUM recommended installsensucorerepository Sensu packages for Red Hat target currently supported versions of Red Hat Enterprise Linux and their Centos equivalents These packages are generally expected to be compatible with Red Hat derivatives like SuSE Amazon or Scientific Linux but packages are not tested on these platforms The following instructions describe configuring package repository definitions using Yum variables14 as components of the baseurl On Red Hat derivative platforms the value of the releasever variable will not typically align with the RHEL release versions eg 6 or 7 advertised in the Sensu Yum repository Please use 6 or 7 in lieu of releasever on RHEL derivatives depending on whether they use sysv init or systemd respectively NOTE As of Sensu version 027 the yum repository URL has changed to include the releasever variable To install or upgrade to the latest version of Sensu please ensure you have updated existing repository configurations 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Sensu sudo yum install sensu NOTE as mentioned above the sensu package installs all of the Sensu Core processes including sensuclient sensuserver and sensuapi 3 Configure Sensu No default configuration is provided with Sensu so none of the Sensu processes will run without the corresponding configuration Please refer to the Configure Sensu section10 below for more information on configuring Sensu At minimum all of the Sensu processes will need a working transport definition11 The Sensu client will need a client definition12 and both the sensuserver and sensuapi will need a datastore Redis definition13 mdash all of which are explained below "},{"title":"The Five Minute Install","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/quick-start/five-minute-install","display_name":"Sensu Core 1.2: The Five Minute Install","content":" The Five Minute Install Objective Although Sensus architecture1 is one of its most compelling features and the complete installation guide2 can help you get Sensu installed and configured for a variety of operating environments3 you might not actually care about any of that until you can get Sensu up and running in a development environment for testing purposes This installation guide is intended to help you to install Sensu Core in five minutes or less or well give you your money back guaranteed After completing the steps in this guide you will have a fully functional Sensu Core installation in a standalone4 configuration Installation Requirements What will you need to complete this guide A virtual machine or physical computer running 64bit CentOS 75 with a minimum of 2GB of memory 4GB recommended Familiarity with a commandline interface Willingness to run a shell script downloaded from the internet6 or not7 The commitment to count to ten8 the number of steps in this guide 300 seconds the amount of time it should take to complete this installation Ready Lets get started Install Sensu in 5minutes or less installsensu The following installation steps will help you get Sensu Core installed in a standalone4 on a system running CentOS 75 only For installation on other platforms andor alternative installation configurations please consult the installation guide2 0 Install EPEL if not already done sudo yum install epelrelease y 1 Create the YUM repository configuration file for the Sensu Core repository at etcyumreposdsensurepo or see Sensu Enterprise repository instructions9 echo sensu namesensu baseurlhttpssensuglobalsslfastlynetyumreleaseverbasearch gpgcheck0 enabled1 sudo tee etcyumreposdsensurepo 2 Install Redis 1314 from EPEL sudo yum install redis y 3 Disable Redis protected mode When using Redis 320 or later you will need to edit etcredisconf in order to disable protected moderedissecurity Look for a line that reads protectedmode yes and change it to protectedmode no 4 Enable and start Redis sudo systemctl enable redis sudo systemctl start redis 5 Install Sensu sudo yum install sensu y and if youre using Sensu Enterprise9 lets go ahead and install Sensu Enterprise as well sudo yum install sensuenterprise sensuenterprisedashboard y 6 Configure Sensu server Run the following to set up a minimal client config echo transport name redis api host 127001 port 4567 sudo tee etcsensuconfigjson 7 Configure the Sensu client Run the following to set up a minimal client config echo client environment development subscriptions dev sudo tee etcsensuconfdclientjson 8 Configure a Sensu dashboard Run the following to set up a minimal dashboard config echo sensu name sensu host 127001 port 4567 dashboard host 0000 port 3000 sudo tee etcsensudashboardjson 9 Make sure that the sensu user owns all of the Sensu configuration files sudo chown R sensusensu etcsensu 10 Start the Sensu services Sensu Core users sudo systemctl enable sensuserverapiclient sudo systemctl start sensuserverapiclient Sensu Enterprise users sudo systemctl enable sensuenterpriseenterprisedashboardclient sudo systemctl start sensuenterpriseenterprisedashboardclient 11 Verify that your installation is ready to use by querying the Sensu API using the curl utility and piping the result to the jq utility10 sudo yum install jq curl y curl s http1270014567clients jq If the Sensu API returns a JSON array of Sensu clients similar to this curl s http1270014567clients jq timestamp 1458625739 version 0280 socket port 3030 bind 127001 subscriptions dev environment development address 127001 name client01 you have successfully installed and configured Sensu If you youre using Sensu Enterprise you should also be able to load the Sensu Enterprise Dashboard in your browser by visiting httphostname3000httphostname3000 replacing hostname with the hostname or IP address of the system where the dashboard is installed fiveminutedashboard1imagesfiveminutedashboard1png fiveminutedashboard2imagesfiveminutedashboard2png 1 overviewarchitecture 2 installationoverview 3 installationinstallationstrategies 4 installationinstallationstrategiesstandalone 5 httpswikicentosorgManualsReleaseNotesCentOS7 6 httpgithubcomsensusensubash 7 platformssensuonrhelcentosinstallsensucorerepository 8 httpswwwyoutubecomwatchvJ2D1XF40ok 9 platformssensuonrhelcentosinstallsensuenterpriserepository 10 httpsstedolangithubiojq redissecurity httpsredisiotopicssecurity"},{"title":"Learn Sensu in 15 Minutes","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/quick-start/learn-sensu-basics","display_name":"Sensu Core 1.2: Learn Sensu in 15 Minutes","content":" Learn Sensu in 15 Minutes Sensu was designed to provide a comprehensive monitoring platform for monitoring infrastructure servers services application health and business KPIs mdash and to collect and analyze custom metrics Although most Sensu Core and Sensu Enterprise users eventually end up replacing several other monitoring solutions and standardizing on Sensu ndash they didnt get there by learning about every feature Sensu has to offer ndash they started with the basics This Quick Start Guide is not intended to teach you everything there is to know about Sensu This guide is designed to introduce you to the some basic monitoring concepts using Sensu Core It is our hope that this guide will whet your appetite to learn more about Sensu and feel the monitoringlove1 Overview What will you learn how to do Exercise 1 Registering Sensu clientsexercise1 Exercise 2 Configuring your first Sensu checkexercise2 Exercise 3 Configuring your first Sensu handlerexercise3 Exercise 4 Use the Sensu client input socketexercise4 Exercise 5 Configuring pubsub checks using Sensu subscriptionsexercise5 Quick start requirements Familiarity with a commandline interface related tooling eg text editor curl A standalone Sensu installation preferably created using the five minute installthefiveminuteinstall Access to the Internet for downloading plugins and communicating with external services Access to an SMTP server for sending alerts via email 15 minutes the amount of time it should take to complete these exercises WARNING this guide assumes that you are using a standalone Sensu installation that was setup by following the instructions in the the five minute install2 Please proceed accordingly"},{"title":"Reference","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/_index","display_name":"Sensu Core 1.2: Reference","content":""},{"title":"Aggregates","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/aggregates","display_name":"Sensu Core 1.2: Aggregates","content":" Reference documentation What is a Sensu named aggregatewhatisacheckaggregate When should named aggregates be usedwhenshouldcheckaggregatesbeused How do named aggregates workhowdocheckaggregateswork Example aggregated check resultexampleaggregatedcheckresult Aggregate configurationaggregateconfiguration Example aggregate definitionexampleaggregatedefinition Aggregate definition specificationaggregatedefinitionspecification Aggregate check attributesaggregatecheckattributes What is a Sensu named aggregate whatisacheckaggregate Sensu named aggregates are collections of check results1 accessible via the Aggregates API2 Check aggregates make it possible to treat the results of multiple disparate check results ndash executed across multiple disparate systems ndash as a single result When should named aggregates be used whenshouldcheckaggregatesbeused Check aggregates are extremely useful in dynamic environments andor environments that have a reasonable tolerance for failure Check aggregates should be used when a service can be considered healthy as long as a minimum threshold is satisfied eg are at least 5 healthy web servers are at least 70 of N processes healthy How do named aggregates work howdocheckaggregateswork Check results are included in an aggregate when a check definition includes the aggregate definition attribute3 Check results that provide an aggregate exampleaggregate are aggregated under the corresponding name eg exampleaggregate effectively capturing multiple check results as a single aggregate Example aggregated check result Aggregated check results are available from the Aggregates API2 via the aggregatesname API endpoint An aggregate check result provides a set of counters indicating the total number of client members checks and check results collected with a breakdown of how many results were recorded per status ie ok warning critical and unknown clients 15 checks 2 results ok 18 warning 0 critical 1 unknown 0 total 19 stale 0 Additional aggregate data is available from the Aggregates API including Sensu client members of a named aggregate and the corresponding checks which are included in the aggregate curl s httplocalhost4567aggregateselasticsearchclients jq name i424242 checks elasticsearchservice elasticsearchclusterhealth name 1424243 checks elasticsearchservice Aggregate data may also be fetched per check that is a member of the named aggregate along with the corresponding clients that are producing results for said check curl s httplocalhost4567aggregateselasticsearchchecks jq name elasticsearchservice clients i424242 i424243 name elasticsearchclusterhealth clients i424242 Aggregate configuration Example aggregate definition The following is an example check definition6 a JSON configuration file located at etcsensuconfdcheckaggregateexamplejson checks examplecheckaggregate command dosomethingrb o option aggregate exampleaggregate handle false Aggregate definition specification NOTE aggregates are created via the aggregate Sensu check definition attribute4 The configuration examples provided above and the specification provided here are for clarification and convenience only ie this specification is just a subset of the check definition specification5 and not a definition of a distinct Sensu primitive Aggregate check attributes aggregate "},{"title":"Checks","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/checks","display_name":"Sensu Core 1.2: Checks","content":" Reference documentation What is a Sensu checkwhatisasensucheck Sensu check specificationsensucheckspecification Check commandscheckcommands What is a check commandwhatisacheckcommand Check command argumentscheckcommandarguments How and where are check commands executedhowandwherearecheckcommandsexecuted Check execution platformcheckexecutionplatform How are checks scheduledhowarechecksscheduled Subscription checkssubscriptionchecks Standalone checksstandalonechecks Check resultscheckresults What is a check resultwhatisacheckresult Example check result outputexamplecheckresultoutput Check token substitutionchecktokensubstitution What is check token substitutionwhatischecktokensubstitution Example check tokensexamplechecktokens Check token specificationchecktokenspecification Token substitution syntaxtokensubstitutionsyntax Token substitution default valuestokensubstitutiondefaultvalues Unmatched tokensunmatchedtokens Check hookscheckhooks What are check hookswhatarecheckhooks Example check hooksexamplecheckhooks Check configurationcheckconfiguration Example check definitionexamplecheckdefinition Check definition specificationcheckdefinitionspecification Check namingchecknames CHECK attributescheckattributes subdue attributessubdueattributes hooks attributeshooksattributes Custom attributescustomattributes Check result specificationcheckresultspecification check attributescheckresultcheckattributes client attributescheckresultclientattributes What is a Sensu check Sensu checks are commands executed by the Sensu client1 which monitor a condition eg is Nginx running or collect measurements eg how much disk space do I have left Although the Sensu client will attempt to execute any command defined for a check successful processing of check results requires adherence to a simple specification Sensu check specification Result data is output to STDOUT or STDERR2 For standard checks this output is typically a humanreadable message For metrics checks this output contains the measurements gathered by the check Exit status code indicates state 0 indicates OK 1 indicates WARNING 2 indicates CRITICAL exit status codes other than 0 1 or 2 indicate an UNKNOWN or custom status PRO TIP Those familiar with the Nagios3 monitoring system may recognize this specification as it is the same one used by Nagios plugins As a result Nagios plugins can be used with Sensu without any modification At every execution of a check command ndash regardless of success or failure ndash the Sensu client publishes the checks result4 for eventual handling by the event processor5 ie the Sensu server6 Check commands What is a check command Each Sensu check definition7 defines a command and the interval at which it should be executed Check commands are literally executable commands which will be executed on the Sensu client1 run as the sensu user Most check commands are provided by Sensu check plugins8 Check command arguments Sensu check command attributes may include command line arguments for controlling the behavior of the command executable Most Sensu check plugins8 provide support for command line arguments for reusability How and where are check commands executed As mentioned above all check commands are executed by Sensu clients1 as the sensu user Commands must be executable files that are discoverable on the Sensu client system ie installed in a system PATH directory9 NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commands eg command checkhttprb u httpssensuapporg Check execution platform How are checks scheduled Sensu offers two distinct check execution schedulers the Sensu serverserver and the Sensu client10 monitoring agent The Sensu server schedules and publishes check execution requests to client subscriptions via a PublishSubscribe model11 ie subscription checkssubscriptionchecks The Sensu client monitoring agent schedules and executes standalone checks12 on the local system only Because Sensus execution schedulers are not mutually exclusive any Sensu client may be configured to both schedule and execute its own standalone checks as well as execute subscription checks scheduled by the Sensu server Subscription checks Sensu checks which are centrally defined and scheduled by the Sensu server6 are called subscription checks Sensus use of a message bus transport13 for communication enables topicbased communication14 mdash where messages are published to a specific topic and consumers subscribe to one or more specific topics This form of communication is commonly referred to as the publishsubscribe pattern11 or pubsub for short Subscription checks have a defined set of subscribers15 a list of transport13 topics14 that check requests will be published to Sensu clients become subscribers to these topics ie subscriptions via their individual client definition16 subscriptions attribute In practice subscriptions will typically correspond to a specific role andor responsibility eg a webserver database etc Subscriptions are a powerful primitives in the monitoring context because they allow you to effectively monitor for specific behaviors or characteristics corresponding to the function being provided by a particular system For example disk capacity thresholds might be more important or at least different on a database server as opposed to a webserver conversely CPU andor memory usage thresholds might be more important on a caching system than on a file server Subscriptions also allow you to configure check requests for an entire group or subgroup of systems rather than require a traditional 11 mapping Standalone checks Sensu checks which are defined on a Sensu client1 with the check definition attribute17 standalone set to true are called standalone checks The Sensu client provides its own scheduler10 for scheduling standalone checks which ensures scheduling consistency between Sensu clients with identical check definitions assuming that system clocks are synchronized via NTP18 Standalone checks are an important complement to subscription checks19 because they provide a decentralized management alternative for Sensu Check results What is a check result A check result is a JSON20 document published as a message on the Sensu transport13 by the Sensu client upon completion of a check execution Sensu check results include the check definition attributes17 eg command subscribers interval name etc including custom attributes21 the client name the result was submitted from and the output of the check Example check result output check status 0 command checkhttprb u httpssensuapporg subscribers demo interval 60 name sensuwebsite issued 1458934742 executed 1458934742 duration 0637 output CheckHttp OK 200 78572 bytesn client sensudocs NOTE please refer to the check result specification38 below for more information about check results Check token substitution What is check token substitution Sensu check definitions17 may include attributes that you may wish to override on a clientbyclient basis For example check commands23 ndash which may include command line arguments23 for controlling the behavior of the check command ndash may benefit from clientspecific thresholds etc Sensu check tokens are check definition placeholders that will be replaced by the Sensu client with the corresponding client definition attribute16 values including custom attributes24 NOTE Sensu check tokens were formerly known as check command tokens which limited token substitution to the check command attribute command tokens were also sometimes referred to as Sensu client overrides a reference to the fact that command tokens allowed client attributes to override check command arguments23 NOTE Check tokens are processed before check execution therefore token substitution will not apply to check data delivered via the local client socket input46 Example check tokens The following is an example Sensu check definition17 using three check tokens for check command arguments23 In this example the checkdiskusagerb command accepts w warning and c critical arguments to indicate the thresholds as percentages for creating warning or critical events As configured this check will create a warning event at 80 disk capacity unless a different threshold is provided by the client definition ie diskwarning80 and a critical event will be created if disk capacity reaches 90 unless a different threshold is provided by the client definition ie diskcritical90 This example also creates a custom check definition attribute called environment which will default to a value of production unless a different value is provided by the client definition ie environmentproduction checks checkdiskusage command checkdiskusagerb w diskwarning80 c diskcritical90 subscribers production interval 60 environment environmentproduction The following example Sensu client definition16 would provide the necessary attributes to override the diskwarning diskcritical and environment tokens declared above client name i424242 address 1002100 subscriptions production webserver mysql disk warning 75 critical 85 environment development Check token specification Token substitution syntax Check tokens are invoked by wrapping references to client attributes with triple colons ie three colon characters ie Nested Sensu client definition attributes16 can be accessed via dot notation eg diskwarning address would be replaced with the client address attribute26 url would be replaced with a custom attribute24 called url diskwarning would be replaced with a custom attribute24 called warning nested inside of a JSON hash called disk Token substitution default values checktokendefaultvalues Check token default values can be used as a fallback in the event that an attribute is not provided by the client definition16 Check token default values are separated by a pipe character and can be used to provide a fallback value for clients that are missing the declared token attribute urlhttpssensuapporg would be replaced with a custom attribute24 called url If no such attribute called url is included in the client definition the default or fallback value of httpssensuapporg will be used Unmatched tokens If a token substitution default value25 is not provided ie as a fallback value and the Sensu client definition does not have a matching definition attribute a check result4 indicating unmatched tokens will be published for the check execution eg Unmatched check tokens diskwarning Check hooks What are check hooks whatarecheckhooks Check hooks are commands run by the Sensu client in response to the result of check command execution The Sensu client will execute the appropriate configured hook command depending on the check execution status eg 1 Valid hook names include in order of precedence 1255 ok warning critical unknown and nonzero The check hook command output status executed timestamp and duration are captured and published in the check result Check hook commands can optionally receive JSON serialized Sensu client and check definition data via STDIN Example check hooks Check hooks can be used for automated data gathering for incident triage for example a check hook could be used to capture the process tree when a process has been determined to be not running etc checks nginxprocess command checkprocessrb p nginx subscribers proxy interval 60 hooks nonzero command ps aux Check hooks can also be used for rudimentary autoremediation tasks for example starting a process that is no longer running checks nginxprocess command checkprocessrb p nginx subscribers proxy interval 60 hooks critical command sudo systemctl start nginx Check configuration Example check definition The following is an example Sensu check definition a JSON configuration file located at etcsensuconfdchecksensuwebsitejson This check definition uses a Sensu plugin27 named checkhttprb28 to ensure that the Sensu website is still available The check is named sensuwebsite and it runs on Sensu clients with the production subscription15 at an interval of 60 seconds checks sensuwebsite command checkhttprb u httpssensuapporg subscribers production interval 60 contact ops Check definition specification Check naming checknames Each check definition has a unique check name used for the definition key Every check definition is within the checks configuration scope29 A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex30 wmatchcheckname CHECK attributes The following attributes are configured within the checks CHECK configuration scope29 where CHECK is a valid check name41 type "},{"title":"Clients","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/clients","display_name":"Sensu Core 1.2: Clients","content":" Reference documentation What is a Sensu clientwhatisasensuclient Client keepalivesclientkeepalives What is a client keepalivewhatisaclientkeepalive Client registration the client registryregistrationandregistry Registration eventsregistrationevents Proxy clientsproxyclients How are keepalive events createdkeepaliveevents Client keepalive configurationclientkeepaliveconfiguration Client signatureclientsignature Client subscriptionsclientsubscriptions What is a client subscriptionwhatisasensusubscription Roundrobin client subscriptionsroundrobinclientsubscriptions Client subscription configurationclientsubscriptionconfiguration Client socket inputclientsocketinput What is the Sensu client socketwhatisthesensuclientsocket Example client socket usageexampleclientsocketusage Client socket configurationsocketattributes Standalone check execution schedulerstandalonecheckexecutionscheduler Client configurationclientconfiguration Example client definitionexampleclientdefinition Client definition specificationclientdefinitionspecification client attributesclientattributes socket attributessocketattributes httpsocket attributeshttpsocketattributes keepalive attributeskeepaliveattributes thresholds attributesthresholdsattributes registration attributesregistrationattributes deregistration attributesderegistrationattributes ec2 attributesec2attributes chef attributeschefattributes puppet attributespuppetattributes servicenow attributesservicenowattributes Custom attributescustomattributes What is a Sensu client Sensu clients are monitoring agents1 which are installed and run on every system eg server container etc that needs to be monitored The client is responsible for registering the system with Sensu sending client keepalive2 messages the Sensu heartbeat mechanism and executing monitoring checks Each client is a member of one or more subscriptions3 ndash a list of roles andor responsibilities assigned to the system eg a webserver database etc Sensu clients will subscribe to or watch for check requests4 published by the Sensu server5 via the Sensu Transport6 execute the corresponding requests locally and publish the results of the check back to the transport to be processed by a Sensu server Client keepalives What is a client keepalive Sensu Client keepalives are the heartbeat mechanism used by Sensu to ensure that all registered Sensu clients are still operational and able to reach the Sensu Transport6 Sensu clients publish keepalive messages containing client configuration data to the Sensu transport every 20 seconds If a Sensu client fails to send keepalive messages over a period of 120 seconds by default the Sensu server or Sensu Enterprise will create a keepalive event7 Keepalives can be used to identify unhealthy systems and network partitions among other things and keepalive events can trigger email notifications and other useful actions Client registration the client registry registrationandregistry In practice client registrations happens when a Sensu server processes a client keepalive message for a client that is not already registered in the Sensu client registry based on the configured client name or source attribute This client registry is stored in the Sensu data store8 and is accessible via the Sensu Clients API9 All Sensu client data provided in client keepalive messages gets stored in the client registry which data is used to add context to Sensu Events7 and to detect Sensu clients in an unhealthy state Registration events If a Sensu event handler30 named registration is configured or if a Sensu client definition includes a registration attribute31 the Sensu server5 will create and process a Sensu event7 for the client registration applying any configured filters26 and mutators32 before executing the configured handlers30 Registration events are useful for executing onetime handlers for new Sensu clients For example registration event handlers can be used to update external Configuration Management Databases CMDBs34 such as ServiceNow35 etc To configure a registration event handler please refer to the Sensu event handler documentation30 for instructions on creating a handler named registration Alternatively please see Client definition registration attributes31 below WARNING registration events are not stored in the event registry in the Sensu data store8 so they are not accessible via the Sensu API however all registration events are logged in the Sensu server5 log Proxy clients Sensu proxy clients formerly known as Justintime or JIT clients are dynamically created clients added to the client registry if a client does not already exist for a check result Proxy client registration differs from keepalivebased registration because the registration event happens while processing a check result not a keepalive message If a check result includes a source attribute a proxy client will be created for the source and the check result will be stored under the newly created client Sensu proxy clients allow Sensu to monitor external resources eg on systems andor devices where a sensuclient cannot be installed such a network switches using the defined check source to create a proxy clients for the external resource Once created proxy clients work much in the same way as any other Sensu client eg they are used to store check execution history and provide context within event data NOTE keepalive monitoring is not supported for proxy clients as they are inherently unable to run a sensuclient Proxy client example Proxy clients are created when a check result includes a source attribute as follows check status 0 command checkhttprb u httpssensuapporg subscribers demo interval 60 name sensuwebsite source sensuapporg issued 1458934742 executed 1458934742 duration 0637 output CheckHttp OK 200 78572 bytesn client sensudocs NOTE this source attribute can be provided in a check definition14 or included in a check result published to the Sensu client input socket36 By default proxy client data includes a minimal number of attributes The following is an example of proxy client data that is added to the registry name switchx address unknown subscriptions keepalives false The Sensu API can be used to update proxy client data in the client registry To update proxy client data please refer to the Client API reference documentation9 Create a proxy client via the client socket The following is an example of how to create a proxy client payload via the client socketclientsocketinput using netcat echo source mysql01 name app01 output could not connect to mysql status 1 nc localhost 3030 How are keepalive events created keepaliveevents Sensu servers including Sensu Enterprise monitor the Sensu client registry for stale client data detecting clients that have failed to send client keepalive messages10 for more than 120 seconds by default When a Sensu server detects that a client hasnt sent a keepalive message within the configured threshold the Sensu server or Sensu Enterprise will create an event this is different from how events are created for monitoring checks see How are Sensu events created11 Client keepalive configuration For more information on configuring client keepalives please see the client keepalive attribute reference documentation12 below Sensu client keepalives are published to the Sensu transport every 20 seconds Client keepalive behavior can be configured per Sensu client allowing each Sensu client to set its own alert thresholds and keepalive event handlers By default client data is considered stale if a keepalive hasnt be received in 120 seconds WARNING By default keepalive events will be sent to the Sensu handler named keepalive if defined or the default handler will be used To configure the keepalive check for a Sensu client please refer to the client keepalive attributes reference documentation12 Client signature Sensu client definitions may specify a unique string identifier as their signature which is included in each keepalive message Once a client advertises a signature via keepalives the server will expect that signature to be present in any keepalives or check results originating from the client Any keepalives or check results which do not contain a matching signature will be dropped with an invalid client signature warning in the log A client can begin to use a signature if one was not previously configured but removing a client signature requires deleting the client Providing a unique client signature prevents other clients from accidentally or maliciously submitting keepalives or check results using the same client name Client subscriptions What is a client subscription whatisasensusubscription Sensus use of the publishsubscribe pattern of communication13 allows for automated registration deregistration of ephemeral systems At the core of this model are Sensu client subscriptions Each Sensu client has a defined set of subscriptions a list of roles andor responsibilities assigned to the system eg a webserver database etc These subscriptions determine which monitoring checks are executed by the client Client subscriptions allow Sensu to request check executions on a group of systems at a time instead of a traditional 11 mapping of configured hosts to monitoring checks Sensu checks target Sensu client subscriptions using the check definition attribute subscribers14 Roundrobin client subscriptions Roundrobin client subscriptions allow checks to be executed on a single client within a subscription in a roundrobin fashion To create a roundrobin client subscription prepend the subscription name with roundrobin eg roundrobinelasticsearch Any check that targets the roundrobinelasticsearch subscription will have its check requests sent to clients in a roundrobin fashion meaning only one member client in the subscription will execute a roundrobin check each time it is published The following is a Sensu client definition that includes a roundrobin subscription client name i424242 address 8888 subscriptions production webserver roundrobinwebserver The following is a Sensu check definition that targets a roundrobin subscription checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers roundrobinwebserver interval 20 Client subscription configuration To configure Sensu client subscriptions for a client please refer to the client subscriptions attribute reference documentation15 In addition to the subscriptions defined in the client configuration Sensu clients also subscribe automatically to a subscription matching their client name For example a client named i424242 will subscribe to check requests for the subscription clienti424242 This makes it possible to generate adhoc check requests targeting specific clients via the request API49 Client socket input What is the Sensu client socket Every Sensu client has a TCP UDP and HTTP socket listening for external check result input The Sensu client sockets listen by default on localhost port 3030 for TCPUDP and 3031 for HTTP and expect JSON formatted check results allowing external sources eg your web application backup scripts etc to push check results without needing to know anything about Sensus internal implementation An excellent client socket use case example is a web application pushing check results to indicate database connectivity issues To configure the Sensu client socket for a client please refer to the client socket attributes16 HTTP Socket The HTTP socket just like the TCP and UDP sockets accepts check results but it requires a wellformed HTTP request and exposes other functionality that is not possible with the raw TCPUDP sockets In exchange for a bit more complexity the HTTP socket interface has the advantage of being more expressive than a raw TCPUDP socket both in the requests that it accepts and how it responds and so exposes more functionality The following endpoints are available for the HTTP socket GET info This endpoint returns 200 OK with some basic Sensu information like the version and transport metrics POST results This endpoint expects an applicationjson body with a check result GET settings This endpoint responds with 200 OK and the sensu configuration Due to the possible sensitive nature of the client settings eg passwords might be in the config this endpoint is protected using HTTP basic authentication and by default the information returned is redacted eg common config keys like password have their values replaced by REDACTED See the redact configuration option if you need control over what is redacted This endpoint accepts the optional query string redactedfalse to disable redaction Refer to the http client socket attributes50 for details on configuring the HTTP basic authentication details that this endpoint requires GET brew This endpoint gets you some fresh coffee Try it Any requests for unknown endpoints will get a 404 with some help information in the body At the moment only unsecure HTTP no HTTPS is supported To configure the Sensu HTTP client socket please refer to the http client socket attributes50 Example client socket usage The following is an example demonstrating external check result input via the Sensu client TCP socket The example uses Bashs builtin devtcp file to communicate with the Sensu client socket echo name app01 output could not connect to mysql status 1 devtcplocalhost3030 Netcat17 can also be used instead of the TCP file echo name app01 output could not connect to mysql status 1 nc localhost 3030 You can do the same using the HTTP socket curl v H ContentType applicationjson X POST d name app01 output could not connect to mysql status 1 localhost 3031 Creating a dead mans switch The Sensu client sockets in combination with check TTLs can be used to create whats commonly referred to as dead mans switches Outside of the software industry a dead mans switch is a switch that is automatically triggered if a human operator becomes incapacitated source Wikipedia18 Sensu is more interested in detecting silent failures than incapacited human operators By using Check TTLs Sensu is able to set an expectation that a Sensu client will continue to publish results for a check at a regular interval If a Sensu client fails to publish a check result and the check TTL expires Sensu will create an event to indicate the silent failure For more information on check TTLs please refer to the check attributes reference documentation14 A great use case for the Sensu client socket is to create a dead mans switch for backup scripts to ensure they continue to run successfully at regular intervals If an external source sends a Sensu check result with a check TTL to the Sensu client socket Sensu will expect another check result from the same external source before the TTL expires The following is an example of external check result input via the Sensu client TCP socket using a check TTL to create a dead mans switch for MySQL backups The example uses a check TTL of 25200 seconds or 7 hours A MySQL backup script using the following code would be expected to continue to send a check result at least once every 7 hours or Sensu will create an event7 to indicate the silent failure echo name backupmysql ttl 25200 output backed up mysql successfully sizemb568 status 0 nc localhost 3030 echo name backupmysql ttl 25200 output failed to backup mysql status 1 nc localhost 3030 Standalone check execution scheduler In addition to subscribing to client subscriptions3 and executing check requests published by the Sensu server19 the Sensu client is able to maintain its ownseparate schedule for standalone checks20 Because the Sensu client shares the same check scheduling algorithm21 as the Sensu server it is not only possible to have consistency between subscription checks22 and standalone checks mdash its also possible to maintain consistency between standalone checks across an entire infrastructure assuming that system clocks are synchronized via NTP23 Client configuration Example client definition The following is an example Sensu client definition a JSON configuration file located at etcsensuconfdclientjson This client definition provides Sensu with information about the system on which it resides This is a production system running a web server and a MySQL database The client name attribute is required in the definition and must be unique client name i424242 address 8888 subscriptions production webserver mysql socket bind 127001 port 3030 Client definition specification The client definition uses the client configuration scope24 client attributes name "},{"title":"Sensu Configuration","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/configuration","display_name":"Sensu Core 1.2: Sensu Configuration","content":" Reference documentation How does Sensu load configurationhowdoessensuloadconfiguration Sensu configuration sourcessensuconfigurationsources Configuration load orderconfigurationloadorder Configuration mergingconfigurationmerging Configuration loggingconfigurationlogging Configuration scopesconfigurationscopes Configuration scopes are relativeconfigurationscopesarerelative Configuration scope examplesconfigurationscopeexamples Sensu service init configurationsensuservicescriptconfiguration Sensu service init configuration variablessensuservicescriptconfigurationvariables Sensu command line interfaces and argumentssensucommandlineinterfacesandarguments Sensu environment variablessensuenvironmentvariables Sensu configuration specificationsensuconfigurationspecification Example sensu configurationexamplesensuconfiguration Toplevel configuration scopestoplevelconfigurationscopes How does Sensu load configuration Sensu configuration sources By default the main configuration file for the Sensu platform is located at etcsensuconfigjson However Sensu also provides support for loading configuration from a directory containing multipledisparate configuration files andor environment variables Sensu merges configuration parameters provided from these three distinct configuration sources environment variables configuration file and configuration directories into a single Hash This type of Hash merging is often called deep merging and is probably the most important concept to understand when learning how to configure Sensu Configuration load order As previously mentioned Sensu configuration can be provided via three distinct sources environment variables a configuration file and one or more directories containing configuration files Sensu loads configuration from these sources in the following order 1 The Sensu service scripts provide command line arguments1 for starting the Sensu services eg the location of the configuration file c the location of configuration directories d etc 2 Sensu will load configuration from environment variables2 3 Sensu loads configuration from the configuration file by default this is located at etcsensuconfigjson 3 Sensu loads configuration snippets from configuration files located in a Sensu configuration directory by default this is etcsensuconfd however it is possible to configure Sensu to load from multiple configuration directories see command line arguments1 below NOTE configuration file load order is dictated by a json glob of the configuration directory as such it is strongly recommended to avoid a dependency on configuration directory file load order eg if youre attempting to name configuration files in the configuration directory to control load order youre doing it wrong Configuration merging configurationmerging To explain how Sensu merges configuration parameters from the various disparate configuration sources please note the following example scenario 1 The Sensu runtime configuration is stored as an inmemory Hash object For the purposes of providing a visual example lets imagine that this Hash object is actually a JSON document which begins life as Sensu is started as an empty JSON document Initial Sensu configuration Hash in memory When Sensu is started it will begin to collect configuration from environment variables a configuration file and one ore more configuration directories which configuration parameters will be used to build up this configuration Hash 2 For the purposes of this example lets assume that the first configuration snippet that Sensu encounters is a configuration file located at etcsensuconfigjson with the following contents New config file on disk at etcsensuconfigjson rabbitmq host 100110 vhost sensu user sensu password secret redis host 100120 port 6379 password secret At this time the Sensu configuration Hash in memory will look like Updated Sensu configuration Hash in memory rabbitmq host localhost vhost sensu user sensu password secret redis host localhost port 6379 password secret 3 Now lets see what happens when Sensu encounters another configuration snippet eg a file located in a Sensu configuration directory such as etcsensuconfdrabbitmqjson New config file contents on disk at etcsensuconfdrabbitmqjson rabbitmq host 100110 user sensu01 password newsecret The second configuration snippet provided configuration for the rabbitmq scope some of which already exists in the Sensu configuration Hash in memory but also missing some attributes which already exist in the Sensu configuration Hash ie vhost The result of merging this configuration snippet into the Sensu configuration Hash in memory is as follows Updated Sensu configuration Hash in memory rabbitmq host 100110 vhost sensu user sensu01 password newsecret redis host localhost port 6379 password secret The result of the deep merge is that the configuration snippet provided by etcsensuconfdrabbitmqjson was overlaid on the Sensu configuration Hash in memory essentially overwriting the previously existing values provided by the configuration snippet while not discarding configuration attributes that already existed in the rabbitmq configuration scope even though they werent provided by the configuration snippet Configuration logging As configuration snippets are applied to the Sensu configuration Hash ie during deep merge all configuration changes are logged to the corresponding log file eg the Sensu server API or Client logs Configuration scopes Because Sensu configuration can be provided in so many different sources it is important to understand that ndash regardless of the physical location of the configuration data eg from the main configuration file or from a configuration file in a configuration directory ndash all configuration must be placed in the appropriate scope in the JSON file ie the named level that attributes should be defined in For example the root or scope of the Sensu configuration would be any attributes defined at the top level of a JSON configuration file such as the configuration attributes for rabbitmq redis or the api rabbitmq redis api Attributes defined in the root scope or top level provide the corresponding scopes for additional configuration settings eg the rabbitmq attribute defined above provides the rabbitmq scope a JSON Hash for the actual RabbitMQ configuration settings Configuration scopes are relative Throughout the Sensu documentation whenever a configuration scope is mentioned it is describing the named level that the corresponding configuration attributes should be defined within which may be relative to any potentially related scopes Please note the following examples Configuration scope examples The client scope client In the Sensu Client reference documentation3 it explains that The client definition uses the client definition scope Which means that regardless where you might store a configuration file containing Sensu client configuration on disk assuming it is in a location that will be loaded by Sensu the file should contain a top level attribute called client client The client socket scope socket The Sensu Client reference documentation3 continues to explain that Sensu clients may have a socket attribute and that there are additional Client Socket attributes4 which should be defined within the socket scope The following attributes are configured within the socket client definition attribute scope Which means that regardless where you might store a configuration file containing Sensu Client Socket configuration on disk assuming it is in a location that will be loaded by Sensu the file should contain a top level attribute called client and another attribute defined within the client scope or level called socket client socket Thus when the Client Socket reference documentation continues to explain that the bind and port attributes should be defined in the Client Socket scope it means they should live under the socket level of the JSON file regardless of where you might store a configuration file containing said configuration attributes on disk assuming it is in a location that will be loaded by Sensu client socket bind 0000 port 3031 Sensu service service configuration sensuservicescriptconfiguration The Sensu services are managed by service scripts that are provided in the Sensu packages The Sensu service scripts are able to startstoprestart the corresponding Sensu services eg the Sensu server API client etc The default Sensu service scripts and related configuration files containing configuration variables are located as follows etcdefaultsensu sourced by the init scripts to provide configuration variables5 etcinitdsensuservice shared init script used by the Sensu service init scripts etcinitdsensuserver etcinitdsensuapi etcinitdsensuclient etcinitdsensuenterprise etcinitdsensuenterprisedashboard Sensu service script configuration variables sensuservicescriptconfigurationvariables The following configuration variables can be set in the service scripts for the platform EMBEDDEDRUBY "},{"title":"Data Store","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/data-store","display_name":"Sensu Core 1.2: Data Store","content":" Reference documentation What is the Sensu data storewhatisthesensudatastore What is the Sensu data store Sensu services use a data store Redis1 to persist monitoring data including the Sensu client registry check results check execution history and current event data All Sensu Core server and API processes ie sensuserver and sensuapi or the Sensu Enterprise process ie sensuenterprise require access to the same instance of the defined data store ie a Redis server or cluster NOTE unlike the Sensu Transport2 ndash which is a Sensu library that allows Sensu to be used with different transport backends eg RabbitMQ or Redis etc ndash the Sensu Data Store is not abstracted andor extensible At this time Redis is the only data store supported by Sensu Having said that because this may change at some point in the future we are beginning to use the term data store in the Sensu documentation as an abstraction for the functions currently provided by Redis 1 redis 2 transport"},{"title":"Events","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/events","display_name":"Sensu Core 1.2: Events","content":" Reference documentation What are Sensu eventswhataresensuevents How are Sensu events createdhowaresensueventscreated Event actionseventactions Event dataeventdata Example eventexampleevent Event data specificationeventdataspecification EVENT attributeseventattributes check attributescheckattributes client attributesclientattributes What are Sensu events whataresensuevents Sensu events are created to acknowledge that something potentially noteworthy has occurred which events may then be processed by one or more event handlers1 to do things such as send an email or invoke an automated action Every Sensu event provides context called event data2 which contains information about the originating Sensu client3 and the corresponding check result4 How are Sensu events created A Sensu Event is created every time a check result10 is processed by the Sensu server regardless of the status indicated by the check result An Event is created by collating data from the check result the client registry22 and additional context added at the time of processing Event actions Sensu supports the following event actions create Indicates a check result status change from zero to nonzero resolve Indicates a check result status change from a nonzero to zero flapping Indicates a rapid change in check result status NOTE for more information on event actions please see the Sensu event data specification5 below Event data Example event The following is an example Sensu event By default event data is JSON formatted making it languageindependent and fairly human readable id ef6b87d21f89439f8bea33881436ab90 action create timestamp 1460172826 occurrences 2 check type standard totalstatechange 11 history 0 0 1 1 2 2 status 2 output No keepalive sent from client for 230 seconds 180 executed 1460172826 issued 1460172826 name keepalive thresholds critical 180 warning 120 client timestamp 1460172596 version 100 socket port 3030 bind 127001 subscriptions production environment development address 127001 name client01 Event data specification EVENT attributes The following attributes are available in the root scope of the event data JSON document id "},{"title":"Extensions","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/extensions","display_name":"Sensu Core 1.2: Extensions","content":" Reference documentation What is a Sensu extensionwhatisasensuextension Installing Sensu extensionsinstallingsensuextensions Installing Sensu legacy extensionsinstallingsensulegacyextensions Configuring Sensu extensionsconfiguringsensuextensions The Sensu Extension gemthesensuextensiongem The Sensu Extensions gem templatethesensuextensionsgemtemplate What is a Sensu extension Unlike Sensu plugins which spawn a new child process at every execution Sensu extensions execute directly inside the EventMachine reactor thread1 of a Sensu client or server process Because they avoid the overhead of spawning a new process at every invocation Sensu extensions can fulfill the same functions as plugins acting as checks filters mutators or handlers but with much greater efficiency WARNING While their performance characteristics are quite desirable Sensu extensions come with major caveats extensions have full access to Sensus internals and any extension which blocks the EventMachine reactor for any period of time eg blocking on disk IO or network request will have a very significant negative impact on Sensus performance and functionality The details of evented programming as implemented by EventMachine are outside the scope of this document but Javier Acero has helpfully written on the implications of blocking the reactor2 Installing Sensu extensions As of version 026 Sensu supports loading extensions from properly packaged gems This approach takes advantage of the existing RubyGems infrastructure and tools to make publishing and installing Sensu extensions easy Use sensuinstall to install Sensu Extensions The Sensu Core package provides a tool called sensuinstall a simple wrapper around the Ruby gem utility The Sensu Install tool sensuinstall simplifies installation of Rubybased extensions The sensuinstall tool can be run with one or more arguments that determine the actions to take sensuinstall h Usage sensuinstall options h help Display this message v verbose Enable verbose logging p plugin PLUGIN Install a Sensu PLUGIN P plugins PLUGINPLUGIN PLUGIN or commadelimited list of Sensu plugins to install e extension EXTENSION Install a Sensu EXTENSION E extensions EXTENSIONEXT EXTENSION or commadelimited list of Sensu extensions to install s source SOURCE Install Sensu plugins and extensions from a custom SOURCE c clean Clean up remove other installed versions of the plugins andor extensions x proxy PROXY Install Sensu plugins and extensions via a PROXY URL NOTE sensuinstall is only available in Sensu Core 0210 Sensu extensions can be installed using the sensuinstall executable EXAMPLE installingsensuextensionsfromgemsexample sensuinstall e sensuextensionssystemprofile Or sensuinstall can prepend sensuextensions automatically sensuinstall e systemprofile Configuring Sensu to load extensions Once an extension is installed via gem Sensu must be explicitly configured to load the extension This is accomplished by providing configuration under the top level extensions attribute EXAMPLE configuringextensionloadingfromgemsexample extensions systemprofile gem sensuextensionssystemprofile EXAMPLE configuringextensionloadingfromgemswversionexample Configuration may optionally include a version specification extensions systemprofile gem sensuextensionssystemprofile version 100 Once extensions have been explicitly enabled in Sensus configuration they will be loaded the next time Sensu processes are restarted Informational messages are printed to the log when extensions are loaded EXAMPLE configuringextensionloadingfromgemslogexample timestamp20160808T1637257112750000levelwarnmessageloading extension gemgemsensuextensionssystemprofileversion100 timestamp20160808T1637257114190000levelwarnmessagerequiring extension gemrequiresensuextensionssystemprofile timestamp20160808T1637257115790000levelwarnmessageloaded extensiontypechecknamesystemprofiledescriptioncollects system metrics using the graphite plaintext format NOTE Explicit extension loading does not apply to legacy extensionsinstallingsensulegacyextensions which are loaded by virtue of being placed in the extension directory Installing Sensu legacy extensions Sensu extensions which are not properly packaged as gems are considered legacy meaning they predate the new specification for loading Sensu Extensions from gems These legacy extensions are loaded from the directory specified by the extensiondir flag provided when Sensu processes are started8 On most systems this defaults to etcsensuextensions as specified by the command flags passed to the sensuclient or sensuserver process via the service supervision scheme in use eg init runit upstart systemd etc Extensions should be installed directly into the extensions directory When an legacy extension has dependencies on thirdparty Ruby gems or other external applications those dependencies must be installed into the Sensu embedded Ruby environment as well Configuring Sensu Extensions The configurability of Sensu extensions is entirely a function of the extension code For example filters and mutators cannot be applied to an extension via a standard handler definition Instead these aspects of the extensions configuration must be defined in code by overriding the SensuExtensionBase definition method10 EXAMPLE extensionconfigurationincodeexample def definition type extension name name filters occurrences mutator onlycheckoutput end The above code would configure the associated extension to apply the occurrences filter and then the onlycheckoutput mutator prior to executing the extensions custom run method By virtue of being loaded into the Sensu client or server process Sensu extensions have access to the running Sensu configuration As such an extension can make use of any available configuration scopes9 but the prevailing convention is for extensions to use unique toplevel configuration scopes The systemprofile4 extension installed in a previous example looks to the toplevel systemprofile configuration scope The following configuration added to etcsensuconfd would change the systemprofile extensions Graphite path prefix from a default value of system to profile EXAMPLE providingextensionconfigurationexample systemprofile pathprefix profile The sensuextension gem Unlike Sensu plugins which may be written in any programming language Sensu extensions must be written in Ruby The sensuextension5 gem provides SensuExtensionBase and other classes which Sensu extensions should subclass The sensuextensions gem template The sensuextensions gem template12 provides a starting point for those who wish to author their own Sensu extension as a Ruby gem It is recommended that your gem follow the naming pattern sensuextensionNAME in order to ensure it can be easily installed with sensuinstall NOTE if you choose not to use this template for your extension note the directory structure it demonstrates eg placing extension code under libsensuextensions are required to ensure the extension is properly loaded Example extensions For simple examples of Sensu extensions consider the onlycheckoutput mutator6 or the debug handler7 both of which ship with Sensu You can find other Sensu extensions some of which are packaged in the Sensu Core distribution by searching RubyGems11 1 httpsgithubcomeventmachineeventmachinewikiGeneralIntroduction 2 httpjavieracerocomblogstartingwitheventmachineiv 4 httpsrubygemsorggemssensuextensionssystemprofile 5 httpsgithubcomsensusensuextension 6 httpsgithubcomsensuextensionssensuextensionsonlycheckoutputblobmasterlibsensuextensionsonlycheckoutputrb 7 httpsgithubcomsensuextensionssensuextensionsdebugblobmasterlibsensuextensionsdebugrb 8 configurationsensuserviceinitconfiguration 9 configurationconfigurationscopes 10 httpsgithubcomsensusensuextensionblobv150libsensuextensionrbL42L50 11 httpsrubygemsorgsearchutf8E29C93querysensuextensions 12 httpsgithubcomsensuextensionstemplate"},{"title":"Filters","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/filters","display_name":"Sensu Core 1.2: Filters","content":" Reference documentation What are Sensu Filterswhataresensufilters When to use a filterwhentouseafilter How do Sensu filters workhowdosensufilterswork Inclusive and exclusive filteringinclusiveandexclusivefiltering Filter attribute comparisonfilterattributecomparison Filter attribute evaluationfilterattributeevaluation Filter attribute eval tokensfilterattributeevaltokens What are filter attribute eval tokenswhatarefilterattributeevaltokens Example filter attribute eval tokenexamplefilterattributeevaltoken Filter attribute eval token specificationfilterattributeevaltokenspecification Eval token interpolationfilterattributeevaltokenspecification Eval token default valuesevaltokendefaultvalues Filter configurationfilterconfiguration Filter definition specificationfilterdefinitionspecification Filter namingfilternaming Filter attributesfilterattributes when attributeswhenattributes What are Sensu filters Sensu Filters also called Event Filters allow you to filter events destined for one or more event Handlers1 Sensu filters inspect event data and match its keysvalues with filter definition attributes to determine if the event should be passed to an event handler Filters are commonly used to filter recurring events ie to eliminate notification noise and to filter events from systems in preproduction environments When to use a filter Sensu Filters allow you to configure conditional logic to be applied during the event processing flow Compared to executing an event handler evaluating event filters is an inexpensive operation which can provide overall monitoring performance gains by reducing the number of events that need to be handled Additionally by using Sensu Filters instead of building conditional logic into custom Handlers conditional logic can be applied to multiple Handlers and monitoring configuration stays DRY How do Sensu filters work Sensu Filters are applied when Event Handlers1 are configured to use one or more Filters Prior to executing a Handler the Sensu server will apply any Filters configured for the Handler to the Event Data If the Event is not removed by the Filters ie filtered out the Handler will be executed The filter analysis flow performs these steps When the Sensu server is processing an Event it will check for the definition of a handler or handlers Prior to executing each Handler the Sensu server will first apply any configured filter or filters for the Handler If multiple filters are configured for a Handler they are executed sequentially Filter attributes are compared with Event data Filters can be inclusive only matching events are handled or exclusive matching events are not handled As soon as a Filter removes an Event ie filters it out no further analysis is performed and the Event Handler will not be executed NOTE Filters specified in a handler set16 definition have no effect Filters must be specified in individual handler definitions Inclusive and Exclusive Filtering Filters can be inclusive negate false or exclusive negate true Configuring a handler to use multiple inclusive filters is the equivalent of using an AND query operator ie only handle events if they match inclusive filters x AND y AND z Configuring a handler to use multiple exclusive filters is the equivalent of using an OR operator ie only handle events if they dont match x OR y OR z Inclusive filtering by setting the filter definition attribute2 negate false only events that match the defined filter attributes are handled Exclusive filtering by setting the filter definition attribute2 negate true events are only handled if they do not match the defined filter attributes NOTE unless otherwise configured in the filter definition2 the default filtering behavior is inclusive filtering ie negate false Filter attribute comparison Filter attributes are compared directly with their event data3 counterparts For inclusive filter definitions4 ie negate false matching attributes will result in the filter returning a true value for exclusive filter definitions4 ie negate true matching attributes will result in the filter returning a false value ie the event does not pass through the filter Filters that return a true value will continue to be processed mdash via additional filters if defined mutators if defined and handlers EXAMPLE The following example filter definition entitled productionfilter will match event data3 with a custom client definition attribute5 environment production filters productionfilter negate false attributes client environment production Filter attribute evaluation When more complex conditional logic is needed than direct filter attribute comparison10 Sensu filters provide support for attribute evaluation using Ruby expressions When a Filter attribute value is a string beginning with eval the remainder is evaluated as a Ruby expression The Ruby expression is evaluated in a sandbox and provided a single variable value which is equal to the event data attribute value being compared If the evaluated expression returns true the attribute is a match Example Handling state change only Some teams migrating to Sensu have asked about reproducing the behavior of their old monitoring system which alerts only on state change This statechangeonly inclusive4 filter provides such filters statechangeonly negate false attributes occurrences eval value 1 action resolve This eval filter is effective because value of event occurrences is reset on each state change except when the event action is resolve The resolve action is set on an event when its check result status is 0 following one or more prior nonzero statuses Example Handling repeated events The following example filter definition entitled filterinterval60hourly will match event data3 with a check interval6 of 60 seconds and an occurrences value of 1 ie the first occurrence OR any occurrences value that is evenly divisible by 60 via a modulo operator7 calculation ie calculating the remainder after dividing occurrences by 60 Note that negate is true making this an exclusive filter4 if evaluation returns false the event will be handled filters filterinterval60hourly negate true attributes check interval 60 occurrences eval value 1 value 60 0 The next example will apply the same logic as the previous example but for checks with a 30 second interval filters filterinterval30hourly negate true attributes check interval 30 occurrences eval value 1 value 120 0 NOTE The effect of both of these filters is that they will only allow an events with 30second or 60second intervals to be handled1 on the first occurrence of the event and again every hour Previous examples in the older Sensu docs have not included the check interval 60 attribute which has confused some users because filtering based on occurrences alone assumes some understanding of the relationship between occurrences and interval which isnt always obvious Example Handling events during office hours only This filter evaluates the event timestamp to determine if the event occurred between 9 AM and 5 PM on a weekday Remember that negate defaults to false so this is an inclusive filter If evaluation returns false the event will not be filters ninetofiver negate false attributes timestamp eval 12345includeTimeatvaluewday Timeatvaluehourbetween917 Filter attribute eval tokens What are filter attribute eval tokens Sensu filters attributes may be evaluated using Ruby expressions10 which evaluations provide support for comparing a single event attribute variable against a basic logical statement eg is value greater than 60 When additional variables are needed beyond the single value variable provided by eval tokens may be used Eval tokens are filter attribute placeholders that can be replaced by Sensu check definition attributes6 and client definition attributes8 including custom attributes Example filter attribute eval token The following is an example Sensu filter definition2 which is using a token checkoccurrences60 as a secondary attribute in the Ruby eval expression The token will be replaced by the check definition attribute6 named occurrences if it is defined otherwise it will use the fallback value of 60 filters occurrences negate true attributes occurrences eval value checkoccurrences60 This example would be useful for filtering events that dont exceed a minimum number of occurrences as configured in the check definition Filter attribute eval token specification Eval token substitution syntax Eval tokens are invoked by wrapping event data attributes with triple colons ie three colon characters before and after the attribute ie Nested event data attributes3 may be accessed via dot notation eg checkoccurrences occurrences would be replaced with the event occurrences data11 checkmythreshold would be replaced with a custom check definition attribute12 called mythreshold Eval token default values Eval token default values can be used as a fallback in the event that an eval token attribute13 is not satisfied by event data3 Eval token default values are separated by a pipe character and can be used to provide a fallback value for events that are missing the declared token attribute checkoccurrences60 would be replaced with a check definition attribute6 called occurrences If occurrences is not defined in the check definition the default or fallback value of 60 will be used NOTE if an eval token default value is not provided ie as a fallback value and the event data does not contain a matching eval token attribute13 an log entry indicating an error called filter eval unmatched tokens will be published to the Sensu server log Filter configuration Example filter definition examplefilterdefinition The following is an example Sensu filter definition a JSON configuration file located at etcsensuconfdfilterproductionjson This is an inclusive filter definition called production The effect of this filter is that only events with the custom client attribute5 environment production will be handled filters production attributes client environment production negate false Filter definition specification Filter naming Each filter definition has a unique name used for the definition key Every filter definition is within the filters definition scope A unique string used to nameidentify the filter Cannot contain special characters or spaces Validated with Ruby regex9 wmatchfiltername Filter attributes negate "},{"title":"Handlers","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/handlers","display_name":"Sensu Core 1.2: Handlers","content":" Reference documentation What is a Sensu event handlerwhatisasensueventhandler Handler typeshandlertypes The default handlerthedefaulthandler Pipe handlerspipehandlers Pipe handler commandspipehandlercommands What is a pipe handler commandwhatisapipehandlercommand Pipe handler command argumentspipehandlercommandarguments How and where are pipe handler commands executedhowandwherearepipehandlercommandsexecuted TCPUDP handlerstcpudphandlers Transport handlerstransporthandlers Handler setshandlersets Handler configurationhandlerconfiguration Example handler definitionexamplehandlerdefinition Handler definition specificationhandlerdefinitionspecification Handler nameshandlernames HANDLER attributeshandlerattributes socket attributes TCPUDP handlerssocketattributes pipe attributes Transport handlerspipeattributess What is a Sensu event handler Sensu event handlers are actions executed by the Sensu server1 on events2 such as sending an email alert creating or resolving an incident eg in PagerDuty ServiceNow etc or storing metrics in a timeseries database eg Graphite Handler types There are several types of handlers The most common handler type is the pipe handler which works very similarly to how checks3 work enabling Sensu to interact with almost any computer program via standard streams4 Pipe handlers Pipe handlers pipe event data into arbitrary commands via STDIN TCPUDP handlers TCP and UDP handlers send event data to a remote socket eg external API Transport handlers Transport handlers publish event data to the Sensu transport5 Handler sets Handler sets also called set handlers are used to group event handlers making it easy to manage groups of actions that should be executed for certain types of events The default handler Sensu expects all events2 to have a corresponding handler Event handlers may be configured in check definitions16 however if no handler or handlers have been configured Sensu will attempt to handle the event using a handler named15 default The default handler is only a reference ie Sensu does not provide a builtin default handler so if no handler definition exists for a handler named default Sensu will log an error indicating that the event was not handled because a default handler definition does not exist To use one or more existing handlers as the default you can create a Set handler17 called default and include the existing handlers in the set Pipe handlers Pipe handlers are external commands that can consume event data6 via STDIN Example pipe handler definition handlers examplepipehandler type pipe command dosomethingawesomerb o options Pipe handler commands What is a pipe handler command Pipe handler definitions include a command attribute which are literally executable commands which will be executed on a Sensu server1 as the sensu user Pipe handler command arguments Pipe handler command attributes may include command line arguments for controlling the behavior of the command executable Most Sensu handler plugins11 provide support for command line arguments for reusability How and where are pipe handler commands executed As mentioned above all pipe handlers are executed by a Sensu server1 as the sensu user Commands must be executable files that are discoverable on the Sensu server system ie installed in a system PATH directory7 NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commands eg command handlerircrb TCPUDP handlers tcpudphandlers TCP and UDP handlers enable Sensu to forward event data to arbitrary TCP or UDP socketst for external services to consume eg thirdparty APIs Example TCP handler definition The following example TCP handler definition will forward event data6 to a TCP socket8 ie 1001994444 and will timeout if an acknowledgement ACK is not received within 30 seconds handlers exampletcphandler type tcp timeout 30 socket host 100199 port 4444 The following example UDP handler definition will forward event data6 to a UDP socket ie 100199444 handlers exampleudphandler type udp socket host 100199 port 4444 Transport handlers Transport handlers enable Sensu to publish event data to named queues on the Sensu transport5 for external services to consume Example transport handler definition The following example transport handler definition will publish event data6 to the Sensu transport on a pipe eg a queue or channel etc named examplehandlerqueue One or more instances of an external process or thirdparty application would need to subscribe to the named pipe to process the events handlers exampletransporthandler type transport pipe type direct name examplehandlerqueue Handler sets Handler set definitions allow groups of handlers ie individual collections of actions to take on event data to be referenced via a single named handler set NOTE Attributes defined on handler sets do not apply to the handlers they include For example filter filters and mutator attributes defined in a handler set will have no effect Example handler set definition The following example handler set definition will execute three handlers ie email slack and pagerduty for every event handlers notifyallthethings type set handlers email slack pagerduty Handler configuration Example handler definition The following is an example Sensu handler definition a JSON configuration file located at etcsensuconfdmailhandlerjson This handler definition uses the mailx unix command to email the event data to exampleaddresscom with the email subject sensu event The handler is named mail handlers mail type pipe command mailx s sensu event exampleaddresscom Handler definition specification Handler names handlernames Each handler definition has a unique handler name used for the definition key Every handler definition is within the handlers configuration scope9 A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex10 wmatchhandlername HANDLER attributes The following attributes are configured within the handlers HANDLER configuration scope9 where HANDLER is a valid handler name15 type "},{"title":"Mutators","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/mutators","display_name":"Sensu Core 1.2: Mutators","content":" Reference documentation What is a Sensu mutatorwhataresensumutators The Sensu mutator specificationthesensumutatorspecification When to use a mutatorwhentouseamutator How do Sensu mutators workhowdosensumutatorswork Mutator commandsmutatorcommands What is a mutator commandwhatisamutatorcommand Mutator command argumentsmutatorcommandarguments How and where are mutator commands executedhowandwherearemutatorcommandsexecuted Mutator configurationmutatorconfiguration Example mutator definitionexamplemutatordefinition Mutator definition specificationmutatordefinitionspecification Mutator namesmutatornames Mutator attributesmutatorattributes What are Sensu mutators whataresensumutators Sensu mutators are executable scripts or other programs that modify event data1 for Sensu event handlers2 which may expect additional or modified event data eg custom attributes that are not provided by the default event data specification3 The Sensu mutator specification Accept inputdata via STDIN Able to parse a JSON data payload ie a event data1 Output JSON data the modified event data to STDOUT or STDERR Produce an exit status code to indicate state 0 indicates OK exit status codes other than 0 indicates a failure When to use a mutator Many Sensu event handlers2 will modify event data1 in the course of processing an event9 and in many cases this is recommended because modifying the event data and performing some action in memory in the same process will result in better performance than executing a mutator5 and a handler two separate processes However when multiple handlers require similar event data modifications mutators provide the ability to avoid code duplication DRY and simplify event handler logic How do Sensu mutators work Sensu mutators are applied when event handlers2 are configured to use a mutator Prior to executing a Handler the Sensu server will execute the configured mutator If the mutator is successfully executed the modified event data is then provided to the handler and the handler will be executed If the mutator fails to execute for any reason an error will be logged and the handler will not be executed The complete process may be described as follows When the Sensu server is processing an event it will check for the definition of a mutator Prior to executing each handler the Sensu server will first execute the configured mutator if any for the handler If the mutator is successfully executed ie if it returns an exit status code of 0 the modified event data is provided to the handler and the handler will be executed If the mutator fails to execute ie returns a nonzero exit status code or does not complete execution within the configured timeout an error will be logged and the handler will not be executed Please refer to the Sensu event handler definition specification8 for more information about applying a mutator to an event handler see the mutator attribute Mutator commands What is a mutator command Each Sensu mutator definition6 defines a command to be executed Mutator commands are literally executable commands which will be executed on a Sensu server4 run as the sensu user Most mutator commands are provided by Sensu plugins7 Mutator command arguments Sensu mutator command attributes may include command line arguments for controlling the behavior of the command executable Many Sensu mutator plugins7 provide support for command line arguments for reusability How and where are mutator commands executed As mentioned above all mutator commands are executed by a Sensu server4 as the sensu user Commands must be executable files that are discoverable on the Sensu server system ie installed in a system PATH directory NOTE By default the Sensu installer packages will modify the system PATH for the Sensu processes to include etcsensuplugins As a result executable scripts eg plugins located in etcsensuplugins will be valid commands This allows command attributes to use relative paths for Sensu plugin commandseg command checkhttprb u httpssensuapporg Mutator configuration Example mutator definition The following is an example Sensu mutator definition a JSON configuration file located at etcsensuconfdexamplemutatorjson This mutator definition uses an imaginary Sensu plugin7 called examplemutatorrb to modify event data prior to handling the event mutators examplemutator command examplemutatorrb Mutator definition specification Mutator names mutatornames Each mutator definition has a unique mutator name used for the definition key Every mutator definition is within the mutators definition scope A unique string used to nameidentify the mutator Cannot contain special characters or spaces Validated with Ruby regex10 wmatchmutatorname Mutator attributes command "},{"title":"Plugins","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/plugins","display_name":"Sensu Core 1.2: Plugins","content":" What is a Sensu plugin Sensu plugins provide executable scripts or other programs that can be used as Sensu checks1 ie to monitor server resources services and application health or collect analyze metrics Sensu handlers2 ie to send notifications or perform other actions based on Sensu events3 or Sensu mutators3 ie to modify event data4 prior to handling For more about Sensu plugins please refer to the Plugins reference documentation5 1 checks 2 handlers 3 eventseventdata 4 mutators 5 plugins23reference"},{"title":"RabbitMQ Configuration","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/rabbitmq","display_name":"Sensu Core 1.2: RabbitMQ Configuration","content":" Reference documentation What is RabbitMQwhatisrabbitmq How does Sensu use RabbitMQhowdoessensuuserabbitmq Install RabbitMQinstallrabbitmq Configure Sensusensurabbitmqconfiguration Example configuraitonssensurabbitmqconfigurationexamples RabbitMQ definition specificaitonrabbitmqdefinitionspecification rabbitmq attributesrabbitmqattributes ssl attributessslattributes Configure RabbitMQconfigurerabbitmq Standalone configurationstandaloneconfiguration Distributed configurationdistributedconfiguration Highavailability configurationhighavailabilityconfiguration What is a RabbitMQ clusterwhatisarabbitmqcluster High availability hardware requirementshighavailabilityhardwarerequirements Install RabbitMQinstallrabbitmq Configure a RabbitMQ clusterconfigurearabbitmqcluster Configure Sensu to use the RabbitMQ clusterconfiguresensutousetherabbitmqcluster Securing RabbitMQsecuringrabbitmq RabbitMQ and SELinuxrabbitmqandselinux RabbitMQ SSLrabbitmqssl RabbitMQ SSL and Erlang 183rabbitmqsslanderlang183 What is RabbitMQ RabbitMQ is a message bus which describes itself1 as a messaging broker an intermediary for messaging It gives your applications a common platform to send and receive messages and your messages a safe place to live until received To learn more about RabbitmQ please visit the official RabbitMQ website2 How does Sensu use RabbitMQ Sensu services use RabbitMQ the default Sensu transport3 to communicate with one another Every Sensu service requires access to the same instance of RabbitMQ or a RabbitMQ cluster to function Sensu check requests and check results are sent over RabbitMQ to the approprate Sensu services Install RabbitMQ For more information about installing RabbitMQ for use with Sensu please visit the RabbitMQ installation guide5 Configure Sensu sensurabbitmqconfiguration Example configurations sensurabbitmqconfigurationexamples The following are an example RabbitMQ connection definitions each located at etcsensuconfdrabbitmqjson Example standalone configuration sensurabbitmqconfigurationexamplesstandalone rabbitmq host 127001 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem Example distributed configuration sensurabbitmqconfigurationexamplesdistributed rabbitmq host 10016 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem Example highavailability configuration sensurabbitmqconfigurationexampleshighavailability rabbitmq host 10006 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem host 10007 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem host 10008 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem RabbitMQ definition specification The RabbitMQ definition uses the rabbitmq definition scope rabbitmq attributes host "},{"title":"Redis Configuration","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/redis","display_name":"Sensu Core 1.2: Redis Configuration","content":" Reference documentation What is Rediswhatisredis How does Sensu use Redishowdoessensuuseredis Install Redisinstallredis Configure Sensuconfiguresensu Example configurationssensuredisconfigurationexamples Redis definition specificationredisdefinitionspecification redis attributesredisattributes sentinels attributessentinelsattributes Configure Redissensuredisconfiguration Standalone configurationredisstandaloneconfiguration Distributed configurationredisdistributedconfiguration High Availability configurationredishighavailabilityconfiguration What is Redis masterslave replicationwhatisredismasterslavereplication What is Redis Sentinelwhatisredissentinel High availability hardware requirementshighavailabilityhardwarerequirements Install Redisinstallredis Redis masterslave configurationredismasterslaveconfiguration Configure the Redis masterconfiguretheredismaster Configure the Redis slaveconfiguretheredisslave Verify masterslave replicationverifymasterslavereplication Redis Sentinel configurationredissentinelconfiguration Configure a Sentinelconfigureasentinel Verify Redis Sentinel operationverifyredissentineloperation Configure Sensu to use Redis Sentinelconfiguresensutouseredissentinel Securing Redissecuringredis What is Redis Redis1 is a keyvalue database which describes itself as an open source BSD licensed advanced keyvalue cache and store Learn more at httpredisio1 How does Sensu uses Redis howdoessensuuseredis Sensu uses Redis as a datastore2 for storing monitoring data eg a client registry3 current check results current monitoring events etc Only the Sensu server4 and API5 processes require access to Redis ie the sensuclient process does not require access to Redis All Sensu services in a cluster require access to the same instance or cluster of Redis consequently Redis does not need to be installed on every system where Sensu is installed Sensu also provides support for using Redis as a transport14 Please see the Sensu transport reference documentation14 for more information Installing Redis For more information about installing Redis for use with Sensu please visit the Redis installation guide6 Configure Sensu configuresensu Example configurations sensuredisconfigurationexamples The following are example Redis definitions at etcsensuconfdredisjson NOTE if you are using Redis as your Sensu transport14 additional configuration will need to be provided to tell Sensu to use Redis as the transport instead of RabbitMQ default please see transport configuration15 for more information Example standalone configuration sensuredisconfigurationexamplesstandalone redis host 127001 port 6379 password secret Example distributed configuration sensuredisconfigurationexamplesdistributed redis host 100123 port 6379 password secret Example highavailability configuration sensuredisconfigurationexampleshighavailability redis password yourredispassword master redis01 sentinels host 100123 port 26379 host 100124 port 26379 host 100125 port 26379 Redis DNS resolution redisdns The Sensu Redis client will resolve the provided hostname before making a connection attempt to the Redis host Resolving the DNS hostname prior to connecting allows Sensu to properly handle resolution failures log them and make further attempts to connect to the Redis host This also allows Sensu to use Amazon AWS ElastiCache multiaz automatic failover Redis definition specification The Redis definition uses the redis definition scope redis attributes host "},{"title":"Sensu Server","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/server","display_name":"Sensu Core 1.2: Sensu Server","content":" Reference documentation What is the Sensu serverwhatisthesensuserver Sensu Core vs Sensu Enterprisesensucorevssensuenterprise Check execution schedulingcheckexecutionscheduling Check scheduling algorithm synchronizationcheckschedulingalgorithmsynchronization Event processingeventprocessing Automated Sensu server task electionautomatedtaskelection Sensu server tasksservertasks Scaling Sensuscalingsensu What is the Sensu server The Sensu server schedules and publishes check execution requests1 to client subscriptions2 via a PublishSubscribe model3 and provides a scalable event processing platform4 for processing check results and monitoring events Sensu Core vs Sensu Enterprise The Sensu server comes in two flavors the opensource Sensu Core5 via the sensuserver process and Sensu Enterprise6 via the sensuenterprise process To learn more about the differences between Sensu Core and Sensu Enterprise please visit the Sensu website7 NOTE Sensu Enterprise ie the sensuenterprise process was designed to be a dropin replacement for the Sensu Core server and API ie the sensuserver and sensuapi As such any mention of the Sensu server in the Sensu documentation also applies to the sensuenterprise process for Sensu Enterprise users WARNING as noted above the sensuenterprise process is designed to replace both of the Sensu Core sensuserver and sensuapi processes Because Sensu Enterprise will load the same configuration as Sensu Core it is important that the Sensu Core processes are stopped before starting Sensu Enterprise to avoid known conflicts and processing errors such as attempting to bind on the same ports etc Check execution scheduling Check execution scheduling is performed by a Sensu server see Sensu server task election8 Checks are scheduled by querying Sensus configuration for defined checks ndash excluding check with the attributes standalone true or publish false ndash and calculating when executions should occur based on their defined intervals Check scheduling algorithm synchronization checkschedulingalgorithmsynchronization Sensu uses an internal algorithm for determining a unique cadence for Sensu checks which uniqueness is based on the check name and interval This algorithm outputs a value in milliseconds which the Sensu server will use as an offset before the next check request should be published In practice this means that ndash assuming system clocks are in sync between disparate Sensu servers ndash check requests for a given check based on the check name will be published at the exact same time The also means that in the event of a Sensu server restart andor Sensu server task reelection ie if a new Sensu server is elected to become reponsible for check execution scheduling check execution scheduling intervals will remain consistent In fact because this algorithm is also shared by the Sensu client ndash which provides decentralized check execution scheduling in the form of standalone checks22 ndash a check defined on the Sensu server and a matching standalone check defined on a Sensu client should also stay in sync with each other again assuming that system clocks are in sync and the check names and intervals are consistent Event processing The Sensu server provides a scalable event processor Event processing involves conversion of check results9 into Sensu events and then applying any defined event filters10 event data mutators11 and event handlers12 All event processing happens on a Sensu server system The event processing workflow happens in the following order Event Filter Mutator Handler NOTE events that are filtered out ie removed by Sensu event filtersfilters will not continue to be mutated by event data mutatorsmutators or event handlershandlers Sensus event processing capabilities can be distributed among multiple Sensu servers in a Sensu cluster For more information on configuring a Sensu cluster please see Scaling Sensu13 below Automated task election The Sensu server processes ie sensuserver and sensuenterprise are designed to scale horizontally14 ie by adding systems No additional configuration is required to run a cluster of Sensu servers other than the location of the transport15 and data store16 When Sensu servers start they participate in an election process to automatically distribute tasks A Sensu server may be elected for more than one task A server task can only run on one Sensu server at a time and will automatically failover to another Sensu server in the event of a service failure or restart All Sensu servers in a Sensu cluster monitor the state of task execution on a 10second interval automatically electing a new Sensu server for a task if the current one hasnt confirmed execution in more than 30 seconds Server tasks In a Sensu server cluster responsibility for a distinct set of tasks is distributed amongst members of the cluster The tasks only run on one Sensu server at a time and will automatically failover to another Sensu server in the event of a service failure or restart When adding Sensu servers to a cluster restarting the existing Sensu servers in the cluster will force a redistribution of tasks Check request publisher The Sensu server is responsible for publishing check requests to the transport for all configured checks See check execution scheduling18 for more information Client monitor The Sensu server is responsible for monitoring the client registry19 and creating client keepalive events20 for stale clients Check result monitor The Sensu server is responsible for monitoring check results and creating TTL events for check results with expired check TTLs21 Check result aggregation pruning The Sensu server is responsible for monitoring check aggregates and pruning stale aggregate results To observe which Sensu server is currently reponsible for one or more tasks see API info23 Scaling Sensu Coming soon 1 checkscheckrequests 2 clientsclientsubscriptions 3 checkspubsubchecks 4 overviewarchitectureeventprocessor 5 httpssensuapporg 6 httpssensuapporgenterprise 7 httpssensuapporgfeaturescompare 8 automatedtaskelection 9 checkscheckresults 10 filters 11 mutators 12 handlers 13 scalingsensu 14 httpsenwikipediaorgwikiScalabilityHorizontalandverticalscaling 15 transport 16 datastore 18 checkexecutionscheduling 19 clientsregistrationandregistry 20 clientskeepaliveevents 21 checkscheckttls 22 checksstandalonechecks 23 apihealthandinfo"},{"title":"Silencing","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/silencing","display_name":"Sensu Core 1.2: Silencing","content":" Reference documentation What is Sensu Silencingwhatissensusilencing When to use silencingwhentousesilencing How does silencing workhowdoessilencingwork Silencing entry specificationsilencingentryspecification Silencing entry attributessilencingentryattributes Examplesexamples Silence all checks on a specific clientsilenceallchecksonaspecificclient Silence a specific check on a specific clientsilenceaspecificcheckonaspecificclient Silence all checks on clients with a specific subscriptionsilenceallchecksonclientswithaspecificsubscription Silence a specific check on clients with a specific subscriptionsilenceaspecificcheckonclientswithaspecificsubscription Silence a specific check on every client regardless of subscriptionssilenceaspecificcheckoneveryclient Deleting silencing entriesdeletingsilencingentries Appendix Deprecated stashbased silencingappendixdeprecatedstashbasedsilencing Comparing stashbased and native silencingcomparingstashbasedandnativesilencing Migrating from stashbased silencingmigratingfromstashbasedsilencing What is Sensu Silencing As check results0 are processed by a Sensu server the server executes event handlers1 to send alerts to personnel or otherwise relay event data to external services Although event handlers can be directly configured with filters11 to improve overall signaltonoise ratio there are many scenarios in which operators receiving notifications from Sensu require an ondemand means to suppress alerts Sensus builtin silencing provides the means to suppress execution of event handlers on an adhoc basis By using a dashboard or other tool to interact with the silenced API2 operators can mute notifications onthefly The silenced API manipulates silencing entries in the Sensu data store These entries describe a combination of check name and subscription When the check name3 andor subscription4 described in a silencing entry match an event the handler will not be executed and an informational message will be logged Individual handlers may optout of silencing by configuring the handlesilenced attribute5 NOTE Silencing described in this reference document is implemented in Sensu version 026 or later and Sensu Enterprise 20 or later When to use silencing Silencing is used to prevent handlers from being triggered based on the check name present in a check result or the subscriptions associated with the client that published the check result This can be desirable in many scenarios giving operators the ability to quiet incoming alerts while coordinating their response Sensu silencing entries make it possible to Silence all checks on a specific clientsilenceallchecksonaspecificclient Silence a specific check on a specific clientsilenceaspecificcheckonaspecificclient Silence all checks on clients with a specific subscriptionsilenceallchecksonclientswithaspecificsubscription Silence a specific check on clients with a specific subscriptionsilenceaspecificcheckonclientswithaspecificsubscription Silence a specific check on every client regardless of subscriptionssilenceaspecificcheckoneveryclient In addition to the above combinations silencing entries support Expiration after a specified number of seconds Expiration after check returns to OK state resolves Describing the reason or rationale Describing the creator or entity responsible for an entry How does silencing work Silencing entries are created on an adhoc basis via the silenced API2 endpoint When silencing entries are successfully created via the API they are assigned an ID in the format SUBSCRIPTIONCHECK where SUBSCRIPTION is the name of a Sensu client subscription and CHECK is the name of a Sensu check Silencing entries can be used to silence checks on specific clients by by taking advantage of perclient subscriptions4 added in Sensu 026 eg clientCLIENTNAME These silencing entries are persisted to the silenced registry in the Sensu data store10 When the Sensu server processes subsequent check results it consults this registry to determine whether or not a matching silencing entry exists If one or more matching entries exist in the registry the event context for the check result is updated to indicate that the event is silenced and the ID of the entries which the check result matched When creating a silencing entry a combination of check and subscription can be specified but only one or the other is strictly required For example when a silencing entry is created specifying only a check its ID will contain an asterisk or wildcard in the SUBSCRIPTION position This indicates that any event with a matching check name will be marked as silenced regardless of the originating clients subscriptions Conversely a silencing entry which specifies only a subscription will have an ID with an asterisk in the CHECK position This indicates that any event where the originating clients subscriptions match the subscription specified in the entry will be marked as silenced regardless of the check name NOTE Starting with version 026 Sensu clients automatically add a subscription containing their client name prefixed with the string client For example client i424242 will automatically add subscription clienti424242 Silencing checks at the individual client level requires clients to run Sensu 026 or be manually configured with a client subscription Silencing entry specification Silencing entries are composed as a JSON document containing at least one of the required subscription or check attributes and additional optional attributes as desired Silencing entries are created updated and deleted by submitting JSON documents to endpoints on the silenced API2 via HTTP POST as shown in the examples below Silencing entry attributes check "},{"title":"SSL Configuration","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/ssl","display_name":"Sensu Core 1.2: SSL Configuration","content":" Reference documentation How does Sensu use SSLhowdoessensuusessl SSLsecured transportssslsecuredtransports Configuring Sensu RabbitMQ for SSL encryptionconfiguringsensurabbitmqforsslencryption Generate selfsigned OpenSSL certificates CAgenerateselfsignedopensslcertificatesandca Enable RabbitMQ SSL supportenablerabbitmqsslsupport Configure Sensuconfiguresensu Known limitationsknownlimitations How does Sensu use SSL All communication between Sensu services happens via the Sensu transport1 As such to secure a Sensu installation means to secure communication between all of the Sensu services and the Sensu transport via SSL encryption Sensu can operate without the use of SSL encryption however this practice is heavily discouraged SSLsecured Transports Although the Sensu transport1 library makes it possible for Sensu to leverage transport alternatives to RabbitMQ eg Redis not all transports offer SSL support eg Redis does not support SSL For this reason this reference document will focus on SSL security for Sensu with the RabbitMQ transport Configuring Sensu RabbitMQ for SSL encryption Generate selfsigned OpenSSL certificates and CA The following instructions will generate an OpenSSL certificate authority and selfsigned certificates Alternatively please refer to the official RabbitMQ SSL documentation2 for a detailed guide on configuring RabbitMQ with SSL 1 OpenSSL is required on the machine that will generate the SSL certificates Install OpenSSL on your platform UbuntuDebian sudo aptget update sudo aptget install openssl openssl version RHELCentOS sudo yum install openssl openssl version 2 Download the Sensu SSL tool wget httpsensuapporgdocs10filessensussltooltar tar xvf sensussltooltar 3 Generate an OpenSSL certificate authority and selfsigned certificates using the Sensu SSL tool cd sensussltool sslcertssh generate ls l NOTE the generated certificates will be valid for 5 years The Sensu SSL tool will generate a certificate authority SSL certificates for the RabbitMQ server and a shared SSL certificate for all of the Sensu services client certpem keycertp12 keypem reqpem sensuca cacertcer cacertpem certs 01pem 02pem indextxt indextxtattr indextxtattrold indextxtold opensslcnf private cakeypem serial serialold server certpem keycertp12 keypem reqpem sslcertssh Enable RabbitMQ SSL support 1 Stop RabbitMQ NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdrabbitmqserver stop sudo service rabbitmqserver stop 2 Please refer to the official RabbitMQ documentation for enabling SSL support3 for instructions on installing the certificate authority and SSL certificates and configuring the RabbitMQ ssllisteners and ssloptions directives NOTE the RabbitMQ documentation will direct you to provide the location of three certificate files cacertfile certfile and keyfile These files correspond to the sensucacacertpem servercertpem and serverkeypem files generated by the Sensu SSL tool above We recommend copying these files to the RabbitMQ server in a new etcrabbitmqssl directory When complete your etcrabbitmqrabbitmqconfig file should contain the following configuration block rabbit ssllisteners 5671 ssloptions cacertfileetcrabbitmqsslcacertpem certfileetcrabbitmqsslcertpem keyfileetcrabbitmqsslkeypem versions tlsv12 ciphers rsaaes256cbcsha256 verifyverifypeer failifnopeercerttrue 3 Start RabbitMQ NOTE The service command will not work on CentOS 5 the sysvinit script must be used eg sudo etcinitdrabbitmqserver start sudo service rabbitmqserver start Configure Sensu 1 Install the selfsigned SSL certificates generated above by copying the clientcertpem and clientkeypem files to the etcsensussl directory on all systems running Sensu processes eg the Sensu server4 API5 and clients6 2 Add ssl definition attributes7 to your Sensu RabbitMQ configuration8 Please note the following standalone configuration example9 a JSON configuration file located at etcsensuconfdrabbitmqjson Please see the ssl attributes7 section of the RabbitMQ reference documentation for more information host 127001 port 5671 vhost sensu user sensu password secret heartbeat 30 prefetch 50 ssl certchainfile etcsensusslcertpem privatekeyfile etcsensusslkeypem WARNING please note that by default RabbitMQ will listen for SSL connections on port 5671 instead of 5672 so if you are upgrading an existing configuration please ensure that all Sensu services are attempting to connect to RabbitMQ on port 5671 3 Restart the Sensu services Known limitations You may have noticed that the instructions above only generated a single client certificate Ideally every SSL connection would use a different certificate allowing them to be individually revoked There is currently no way to tell RabbitMQ to reject a certificate If the integrity of a certificate is compromised it is common practice to regenerate and redistribute the certificate authority and certificates This process is greatly simplified with the use of configuration management tools In the future the Sensu project hopes to be able to provide a better mechanism for distributing individual certificates and providing fastsimple revocation facilities 1 transport 2 httpwwwrabbitmqcomsslhtml 3 httpwwwrabbitmqcomsslhtmlenablingssl 4 server 5 apioverview 6 clients 7 rabbitmqsslattributes 8 rabbitmqrabbitmqdefinitionspecification 9 rabbitmqstandaloneconfiguration"},{"title":"Stashes","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/stashes","display_name":"Sensu Core 1.2: Stashes","content":" Reference documentation What is a Sensu stashwhatisasensustash The Sensu keyvalue storethesensukeyvaluestore The Sensu stash specificationthesensustashspecification Example Sensu stashexamplesensustash Stash definition specificationstashdefinitionspecification Stash attributesstashattributes content attributescontentattributes Direct access to stash content datadirectaccesstostashcontentdata What is a Sensu stash A Sensu stash is a JSON document containing arbitrary JSON Hash data which is accessible via the Stashes API1 The most common use of the Sensu Stashes are via Sensu handlers which may access the Stashes API to create andor read state information that persists between handler executions NOTE Prior to Sensu 026 the ability to silence notifications was implemented in external libraries like sensuplugin using specially crafted stashes Silencing via stashes is deprecated in favor of new native silencing Please see the silencing reference documentation7 for more details The Sensu keyvalue store thesensukeyvaluestore The Stashes API1 provides a keyvalue store1 for Sensu where arbitrary JSON data ie the values can be created accessed and deleted via an arbitrary path ie the keys The Sensu stash specification Example Sensu stash The following is an example Sensu stash path pathtomystash content message hello world foo bar expire 1 Stash definition specification Stash attributes path "},{"title":"Transport","product":"Sensu Core","version":"1.2","location":"/sensu-core/1.2/reference/transport","display_name":"Sensu Core 1.2: Transport","content":" Reference documentation What is the Sensu Transportwhatisthesensutransport Selecting a transportselectingatransport Transport configurationtransportconfiguration Example transport definitionexampletransportdefinition Transport definition specificationtransportdefinitionspecification Transport attributestransportattributes What is the Sensu Transport Sensu services use a message bus eg RabbitMQ1 for communication This message bus communication is provided by the Sensu Transport2 which is a library that makes it possible to leverage alternate transport solutions in place of RabbitMQ the default transport Sensu services requires access to the same instance of the defined transport eg a RabbitMQ server or cluster to function Sensu check requests and check results are published as messages to the Sensu Transport and the corresponding Sensu services receive these messages by subscribing to the appropriate subscriptions Selecting a Transport The Sensu Transport library makes it possible to replace Sensus recommended and default transport RabbitMQ with alternative solutions There are currently two 2 transports provided with the sensutransport library RabbitMQ and Redis mdash each presenting unique performance and functional characteristics The RabbitMQ Transport recommended The RabbitMQ Transport is the original Sensu transport and continues to be the recommended solution for running Sensu in production environments Pros rabbitmqtransportpros Native SSL support Pluggable authentication framework Support for ACLs Cons rabbitmqtransportcons Adds Erlang as a runtime dependency to the Sensu architecture only on systems where RabbitMQ is running The Redis Transport The Redis Transport was an obvious alternative to the original RabbitMQ Transport because Sensu already depends on Redis as a data store Using Redis as a transport greatly simplifies Sensus architecture by removing the need to installconfigure RabbitMQ and Erlanghttpswwwerlangorg RabbitMQs runtime Pros redistransportpros Simplifies Sensu architecture by removing need for dedicated transport by using Redis as the data store and transport Comparable or better throughputperformance than RabbitMQ Cons redistransportcons No native support for SSL No support for transport consumers metrics see Health Info API4 Transport configuration Example transport definition The following is an example transport definition a JSON configuration file located at etcsensuconfdtransportjson This example transport configuration indicates that Redis should be used as the Sensu transport transport name redis reconnectonerror true Transport DNS resolution transportdns The Sensu Transport will resolve provided hostnames before making connection attempts to the RabbitMQ Redis transports Resolving DNS hostnames prior to connecting allows Sensu to properly handle resolution failures log them and make further attempts to connect to the selected transport This also allows Sensu to use DNS as a transport failover mechanism Transport definition specification transportdefinitionspecification The Sensu Transport uses the transport definition scope3 Transport attributes transportattributes The following attributes are defined within the transport definition scopeconfigurationconfigurationscopes name "},{"title":"Sensu Core","tags":["sensu","core","sensu core","2.0","index"],"product":"Sensu Core","version":"2.0","location":"/sensu-core/2.0/_index","display_name":"Sensu Core 2.0: Sensu Core","content":" Overview Monitor servers services application health and business KPIs Collect and analyze custom metrics Get notified about failures before your users do Give your business the competitive advantage it deserves"},{"title":"Configuring sensuctl","product":"Sensu Core","version":"2.0","location":"/sensu-core/2.0/getting-started/configuring-sensuctl","display_name":"Sensu Core 2.0: Configuring sensuctl","content":" Sensu CLI sensuctl Sensu 20 can be configured and used with the sensuctl pronounced sensu cuddle command line utility Installation macOS Download the latest release curl LO httpsstoragegoogleapiscomsensubinariescurl s httpsstoragegoogleapiscomsensubinarieslatesttxtdarwinamd64sensuctl Optionally if you would like to download a specific release replace VERSION in the command below curl LO httpsstoragegoogleapiscomsensubinariesVERSIONdarwinamd64sensuctl Make the sensuctl binary executable chmod x sensuctl Move the executable into your PATH sudo mv sensuctl usrlocalbin Debian Ubuntu Add the Sensu nightly repository this step can be skipped if you previously added the repository on the backendagent installation page curl s httpspackagecloudioinstallrepositoriessensunightlyscriptdebsh sudo bash Install the Sensu CLI package sudo aptget install sensucli RHEL CentOS Add the Sensu nightly repository this step can be skipped if you previously added the repository on the backendagent installation page curl s httpspackagecloudioinstallrepositoriessensunightlyscriptrpmsh sudo bash Install the Sensu CLI package sudo yum install sensucli Configure Sensuctl must be configured before it can connect to your Sensu cluster Run the configure command to get started sensuctl configure Default User By default your Sensu installation comes with a single user named admin This user has the password Pssw0rd and it is strongly recommended that you change it immediately To do so youll first want to authenticate using the sensuctl tool sensuctl configure Sensu Base URL httpmysensuhost8080 Username admin Password Once authenticated you can use the changepassword command sensuctl user changepassword Current Password Password Confirm Tweak Values You can change individual values with the config subcommand sensuctl config setorganization default sensuctl config setenvironment prod Getting Help All Sensu subcommands have a help flag that returns more information on using the command and if applicable any subcommands it has sensuctl sensuctl help sensuctl controls Sensu instances Usage sensuctl COMMAND Options apiurl string host URL of Sensu installation cachedir string path to directory containing cache temporary files default UsersdeanlearnerLibraryCachessensusensuctl configdir string path to directory containing configuration files default Usersdeanlearnerconfigsensusensuctl h help help for sensuctl organization string organization in which we perform actions default default Commands completion Output shell completion code for the specified shell bash or zsh configure Initialize sensuctl configuration logout Logout from sensuctl version Show the sensuctl version information Management Commands asset Manage assets check Manage checks config Modify sensuctl configuration entity Manage entities environment Manage environments event Manage events handler Manage handlers organization Manage organizations role Manage roles user Manage users Import On top of being able to create new resources interactively and with flags sensuctl provides import commands for creating updating resources via STDIN name marketingsite command checkhttprb u httpsdeanlearnerbook subscriptions demo interval 15 handlers slack organization default environment default cat mycheckjson sensuctl check import OK Further API details including valid parameters forthcoming Output sensuctl can be configured to return JSON instead of the default humanreadable format sensuctl check info marketingsite format json name marketingsite interval 10 subscriptions web command checkhttprb u httpsdeanlearnerbook handlers slack runtimeassets environment default organization default If you do not want to explicitly use the format flag with each command you can set the global default sensuctl config setformat json OK Shell AutoCompletion Installation Bash Shell Make sure bash completion is installed If you use a current Linux in a nonminimal installation bash completion should be available On a Mac install with brew install bashcompletion Then add the following to your bashprofile if f brew prefixetcbashcompletion then brew prefixetcbashcompletion fi When bashcompletion is available we can add the following to your bashprofile source sensuctl completion bash You can now source your bashprofile or launch a new terminal to utilize completion source bashprofile Installation ZSH Add the following to your zshrc source sensuctl completion zsh You can now source your zshrc or launch a new terminal to utilize completion source zshrc Usage sensuctl sensuctl Tab check configure event user asset completion entity handler sensuctl sensuctl check Tab create delete import list "},{"title":"Installation and Configuration","product":"Sensu Core","version":"2.0","location":"/sensu-core/2.0/getting-started/installation-and-configuration","display_name":"Sensu Core 2.0: Installation and Configuration","content":" Installing and configuring Sensu 20 The Sensu 20 binaries are statically linked and can be deployed to any Linux or Windows operating system Backend The Sensu Backend sensubackend is a single statically linked binary that can be deployed via packages deb or rpm or Docker image Agent The Sensu Agent sensuagent is a single statically linked binary that can be deployed via packages deb or rpm or Docker image Linux Package Repositories Debian Ubuntu Add the Sensu nightly repository curl s httpspackagecloudioinstallrepositoriessensunightlyscriptdebsh sudo bash Install the packages from the Sensu nightly repository sudo aptget install sensubackend sensuagent RHEL CentOS Add the Sensu nightly repository curl s httpspackagecloudioinstallrepositoriessensunightlyscriptrpmsh sudo bash Install the Sensu backend and agent packages sudo yum install sensubackend sensuagent Linux Configuration The example config files list all of the configurable options for each service Sensu Backend Copy the example backend config file to the default config path sudo cp etcsensubackendymlexample etcsensubackendyml The backend config requires statedir to be set The example config sets statedir to varlibsensu by default Sensu Agent Copy the example agent config file to the default config path sudo cp etcsensuagentymlexample etcsensuagentyml In order for the agent to function it will need to have a list of one or more backends to point to This can be set by setting backendurl backendurl ws1270018081 Linux Starting the services Ubuntu 1404 CentOS 6 RHEL 6 Start the services using the sysvinit scripts sudo etcinitdsensubackend start sudo etcinitdsensuagent start Ubuntu 1604 CentOS 7 RHEL 7 Start the services using systemd sudo systemctl start sensubackend sudo systemctl start sensuagent Windows Coming soon Docker Sensu 20 can be run via Dockerhttpswwwdockercom or rkthttpscoreoscomrkt using the sensuappsensuhttpshubdockercomrsensuappsensugo image When running Sensu from Docker there are a couple of things to take into consideration The backend requires 3 exposed ports and persistent storage This example uses a shared filesystem Sensu 20 is backed by a distributed database and its storage should be provisioned accordingly We recommend local storage or something like Throughtput Optimized or Provisioned IOPS EBS if local storage is unavailable The 3 exposed ports are 2380 Sensu storage peer listener only other sensubackends need access to this port 3000 Sensu dashboard not yet complete 8080 Sensu API all users need access to this port 8081 Agent API all agents need access to this port We suggest but do not require persistent storage for sensuagents The Sensu Agent will cache runtime assets locally for each check This storage should be unique per sensuagent process How To 1 Start the sensubackend process docker run v varlibsensuvarlibsensu d name sensubackend p 23802380 p 30003000 p 80808080 p 80818081 sensuappsensugo200alpha sensubackend start 2 Start an agent In this case were starting an agent whose ID is the hostname with the webserver and system subscriptions This assumes that sensubackend is running on another host named sensuyourdomaincom If you are running these locally on the same system be sure to add link sensubackend to your Docker arguments and change the backend URL backendurl wssensubackend8081 docker run v varlibsensuvarlibsensu d name sensuagent sensuappsensugo200alpha sensuagent start backendurl wssensuyourdomaincom8081 subscriptions webserversystem cachedir varlibsensu A note about sensuctl and Docker Its best to run sensuctl locally and point it at the exposed API port for your sensubackend process The sensuctl utility stores configuration locally and youll likely want to persist it across uses While it can be run from the docker container doing so may be problematic"},{"title":"Intro to Checks","product":"Sensu Core","version":"2.0","location":"/sensu-core/2.0/overview/checks","display_name":"Sensu Core 2.0: Intro to Checks","content":" Checks Sensu checks are commands executed by the Sensu agent which monitor a condition eg is Nginx running or collect measurements eg how much disk space do I have left Although the Sensu agent will attempt to execute any command defined for a check successful processing of check results requires adherence to a simple specification Specification Result data is output to STDOUT or STDERR For standard checks this output is typically a humanreadable message For metrics checks this output contains the measurements gathered by the check Exit status code indicates state 0 indicates OK 1 indicates WARNING 2 indicates CRITICAL exit status codes other than 0 1 or 2 indicate an UNKNOWN or custom status Viewing To view all the checks that are currently configured for the cluster enter sensuctl check list If you want more details on a check the info subcommand can help you out sensuctl check info mycoolcheck marketingsite Name checkhttp Interval 10 Cron 0 30 Command checkhttprb u httpsdeanlearnerbook Subscriptions web Handlers slack Runtime Assets ruby42 Publish true Stdin true Source Organization default Environment default Management Checks can be configured both interactively binsensuctl check create interactive Check Name diskfull Organization default Environment default Command rm rf Interval 30 Cron Timeout TTL Subscriptions unixpostgresql Handlers slackpagerduty Runtime Assets Publish true Check Proxy Entity ID Check STDIN High Flap Threshold Low Flap Threshold OK or by using CLI flags sensuctl check create checkdisk c checkdisksh handlers slack i 5 subscriptions unix sensuctl check create checknginx c nginxstatussh handlers pagerdutyslack i 15 subscriptions unixwww To delete an existing check simply pass the name of the check to the delete command sensuctl check delete checkdisk SCHEDULING A check can be scheduled according to an interval integer in seconds or a cron string see GoDoc Cronhttpsgodocorggithubcomrobfigcron In the presence of both the cron schedule will take precedence over the interval schedule In addition to traditional CronhttpsenwikipediaorgwikiCron strings Go also accepts many forms of human readable strings for the cron schedule ex midnight daily and every 1h30m Please feel free to use these human readable strings with one caveat If the schedule can be described using either the interval or cron field ex interval 10 or cron every 10s we suggest you default to the interval This is because Sensu splays interval schedules to ensure a distributed load of checks STDIN set this to true when creating a check interactively or by passing stdin to tell the agent to pass the event to your check via STDIN at runtime NOTE Due to Etcd performance limitations see FAQhttpsgithubcomsensusensualphadocumentationblobmaster97FAQmd FAQ and general security features the maximum http request body size is 512K bytes Assets Assets are a way to provide your checks with runtime dependencies they require to execute These can be anything from scripts eg checkhaproxysh to full runtimes ruby python etc Most helpful in environments without a configuration management system where your systems images containers might not have everything required to run a execute a check At runtime the agent sequentially fetches assets and stores them in its local cache On subsequent check executions it checks for the presence of the asset in its cache and ensures that the contents matches its checksum Asset Structure The agent expects that an asset is a TAR archive that may optionally be GZipd Any scripts or executables should be within a bin folder within in the archive Further when the check is executed the following are injected into the execution context PATHTOASSETbin is injected into the PATH environment variable PATHTOASSETlib is injected into the LDLIBRARYPATH environment variable PATHTOASSETinclude is injected into the CPATH environment variable Storage At this time the Sensus backend does not provide any storage capabilities for assets The assets are expected to be retrieved over HTTP or HTTPS Basics To view all assets currently available in your configured Sensu instance Run sensuctl asset list If you want more in depth details on an asset you can use the info subcommand sensu asset info mygreatchecksh Assets can be created both interactively binsensuctl asset create interactive Name testasset Organization default URL https3examplecomtestassettgz SHA512 Checksum 0e3e75234abc68f4378a86b3f4b32a198ba301845b0cd6e50106e874345700cc6663a86c1ea125dc5e92be17c98f9a0f85ca9d5f595db2012f SHA512 Checksum 0e3e75234abc68f4378a86b3f4b32a198ba301845b0cd6e50106e874345700cc6663a86c1ea125dc5e92be17c98f9a0f85ca9d5f595db2012f7cc3571945c123 Filters OK or by using CLI flags sensuctl asset create curl url httpsacmes3amazonawscomcurl7521tar sha512 d940d3975051f7cb70c28bbf4b45cf4805b5113d44c96ed120e4a8a6206e55ed3fcdabb37158e3989d24267d9e185896e872ab7b10571edc90b62c0a20512346 Filters Filters are used to specify conditions inwhich your asset should be installed on an agent For example you have a check thats assets have to differ for each platform eg You create an asset name curllinux the filter associated with this asset are SystemOSlinux Next you create an asset for freebsd named curlfreebsd the filter would look like SystemOSfreebsd Finally to associate the assets with a check you can refer the group by its prefix Eg a check named checkwebsite with assets curl Sensu Query Language TODO Managing Asset Filters Creating a new asset with filters is as simple as sensuctl asset create curllinux64 url httpacmes3amazonawscomcurl7linuxtar sha512 XXX filter SystemOSlinux filter SystemArch amd64 NOTE At the moment there is no way to edit the filters associated with an existing asset However you can recreate the asset with the same name and the existing entity will be overwritten To create a new check associated with an asset run sensuctl create check checkmywebsite command curl httpsomething runtimeasset ruby24python31 Example using the assets prefix sensuctl asset create curllinux url httpacmes3amazonawscomcurl7linuxtar sha512 XXX filter SystemOSlinux filter SystemArch amd64 sensuctl asset create curlmacos url httpacmes3amazonawscomcurl7macostar sha512 XXX filter SystemOSmacos filter SystemArch amd64 sensuctl create check checkmywebsite command curl httpsomething runtimeasset curl by using prefix captures both assets "},{"title":"Intro to Silencing","product":"Sensu Core","version":null,"location":"/sensu-core/2.0/overview/silencing","display_name":"Sensu Core null: Intro to Silencing","content":" Silencing Silenced entries are used to suppress event handler execution effectively muting notifications for an event Check events can be silenced by subscription check name a combination of the two or by entity via check or subscription Viewing To view all current silenced entries enter sensuctl silenced list Managing Silenced Entries Create a silenced entry interactively sensuctl silenced create Organization default Environment default Subscription webserver Check checkstatus Begin time 1515526463 Expiry in Seconds 3600 Expire on Resolve No Reason rebooting the world Or with CLI flags sensuctl silenced create e 3600 c checkstatus s webserver r rebooting the world You must provide either a check name or subscription name in order to create a silenced entry If either value is not provided it is substituted with a wildcard To update delete or get more info on a silenced entry you will need to provide the ID which is the combination of the subscription name and the check name in the form subscriptioncheckname sensuctl silenced update webservercheckstatus Expiry in Seconds 1500 Expire on Resolve No Reason rebooting the world A silenced entry expiration time will default to 1 meaning the entry will persist in the store unless manually removed Setting an expiry time will create a TTL on the entry so that it is deleted when the TTL runs out To remove an entry manually you must provide the silenced entry ID To schedule a silenced entry for a later time provide a Begin time with a unix timestamp A begin provided with an expiry starts the TTL at the begin time and removes the silenced entry after the TTL expires sensuctl silenced delete webservercheckstatus Are you sure you would like to delete resource webservercheckstatus Enter WEBSERVERCHECKSTATUS to confirm WEBSERVERCHECKSTATUS OK "},{"title":"Events","product":"Sensu Core","version":"2.0","location":"/sensu-core/2.0/reference/events","display_name":"Sensu Core 2.0: Events","content":" Events Events Sensu events are created to acknowledge that a check result has been received Potentially noteworthy events may be processed by one or more event handlers to do things such as send an email or invoke an automated action Every Sensu event provides context called event data which contains information about the originating Sensu client and the corresponding check result How are Sensu events created A Sensu Event is created every time a check result is processed by the Sensu server regardless of the status indicated by the check result An Event is created by collating data from the check result the client registry and additional context added at the time of processing Event actions create Indicates a check result status change from zero to nonzero resolve Indicates a check result status change from a nonzero to zero flapping Indicates a rapid change in check result status Viewing To view all the events that are currently in history for a configuration enter sensuctl event list If you want more details on an event the info subcommand can help you out An event is identified by the entity ID and check name sensuctl event info apollo11 moonlanding Entity apollo11 Check moonlanding Output WARNING Unknown fuel status Status 1 History 01010 Timestamp 19690720 140726 0600 CST Manual Event Resolution In Sensu 1x we offer manual event resolution through the POST resolve endpoint In Sensu 2x POST events can do that and more If you want to use sensuctl to manually resolve an event the resolve subcommand will resolve the output and set the status to 0 sensuctl event resolve apollo11 moonlanding sensuctl event info apollo11 moonlanding Entity apollo11 Check moonlanding Output Resolved Manually by sensuctl Status 0 History 01010 Timestamp 19690720 141032 0600 CST "},{"title":"Sensu Core","product":"Sensu Core","version":"latest","location":"/sensu-core/_index","display_name":"Sensu Core latest: Sensu Core","content":""},{"title":"Sensu Enterprise","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/_index","display_name":"Sensu Enterprise 2.6: Sensu Enterprise","content":" Overview What is Sensu Enterprisewhatissensuenterprise Upgrading to Sensu Enterpriseupgradingtosensuenterprise Reference documentationreferencedocumentation What is Sensu Enterprise Sensu Enterprise1 is a dropin replacement for Sensu Core the FREE open source version of Sensu that provides addedvalue features like contact routing2 several builtin thirdparty integrations3 and more Sensu Enterprise also includes FREE annual training4 and enterpriseclass support5 We like to think of the distinction between Sensu Core and Sensu Enterprise as the difference between a framework and a product The purpose of this documentation is to help Sensu Enterprise users configure their installation making use of the many thirdparty integrations and features Sensu Enterprise has to offer Sensu Enterprise integrates with thirdparty tools services to provide support for creatingresolving incidents oncall rotation scheduling storing time series data metrics relaying events deregistering sensuclients for terminated nodes andor notifying contacts via various media Upgrading to Sensu Enterprise Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server6 and API7 so for users who are upgrading to Sensu Enterprise from Sensu Core no configuration changes are required to resume simply terminate the sensuserver and sensuapi processes and start the sensuenterprise process to resume operation of Sensu see the Sensu Server and API installation guide8 for additional details However some configuration changes may be required to take advantage of certain thirdparty integrations or addedvalue features eg contact routing Please refer to the Sensu Enterprise reference documentation side bar for more information 1 sensuenterprise 2 contactrouting 3 builtinhandlers 4 training 5 httpssensuapporgsupport 6 sensucore10referenceserver 7 sensucore10apioverview 8 installationinstallsensuserverapisensuenterprise"},{"title":"Enterprise API","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/api","display_name":"Sensu Enterprise 2.6: Enterprise API","content":" Reference documentation What is the Sensu Enterprise APIwhatisthesensuenterpriseapi Enterprise API Configurationenterpriseapiconfiguration Examplesexamples API specificationapispecification api attributesapiattributes ssl attributessslattributes Create an SSL keystorecreateansslkeystore Configure the Enterprise API for SSLconfiguretheenterpriseapiforssl"},{"title":"Built-in Filters","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/built-in-filters","display_name":"Sensu Enterprise 2.6: Built-in Filters","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation What are builtin filterswhatarebuiltinfilters Using builtin filtersusingbuiltinfilters Using multiple builtin filtersusingmultiplebuiltinfilters What are builtin filters Sensu Enterprise has several builtin event filters used by many of the thirdparty integrations and made available to standard Sensu event handlers These enterprise filters can be used to combat alert fatigue Builtin filters usingbuiltinfilters Please refer to the reference documentation for each of the following builtin filters for more information on how to use them handlewhenfiltershandlewhen silencestashesfilterssilencestashes checkdependenciesfilterscheckdependencies Using multiple builtin filters Multiple enterprise filters can be applied to standard Sensu event handlers The following example event handler uses the handlewhen and silencestashes event filters handlers custommailer type pipe command custommailerrb filters handlewhen silencestashes 0 sensuenterprise"},{"title":"Built-in Handlers","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/built-in-handlers","display_name":"Sensu Enterprise 2.6: Built-in Handlers","content":"ENTERPRISE Builtin handlers are available for Sensu Enterprise0 users only Reference documentation What are builtin handlerswhatarebuiltinhandlers How to use builtin handlershowtousebuiltinhandlers Examplesexampleintegrationconfigurations List of builtin handlerslistofbuiltinhandlers What are builtin Handlers Sensu Enterprise ships with several builtin thirdparty integrations which provide Sensu event handlers1 These builtin handlers can be used to handle events for any check2 The Enterprise integrations use their own global configuration namespaces in combination with enterprise contact routing3 to provide granular controls over how events should be handled in a variety of circumstances How to use builtin handlers After configuring one or more enterprise handlers4 you can specify which ones are used per check or create a default handler set to specify those used by default Examples exampleintegrationconfigurations The following is an example of how to configure a Sensu check to use the builtin email integration ie Enterprise handler etcsensuconfdchecksloadbalancerlistenersjson checks loadbalancerlisteners command checkhaproxyrb s varrunhaproxysock A subscribers loadbalancer interval 20 handler email The following is an example of how to configure the Sensu default handler in order to specify one or more builtin enterprise handlers The default handler is used when a check definition does not specify one or more event handlers This example specifies the builtin email and slack enterprise handlers etcsensuconfdhandlersdefaultjson handlers default type set handlers email slack List of builtin handlers Builtin event handlers Emailintegrationsemail send email notifications for events PagerDutyintegrationspagerduty create and resolve PagerDuty incidents for events ServiceNowintegrationsservicenow create ServiceNow CMDB configuration items and incidents JIRAintegrationsjira create and resolve JIRA issues for Sensu events VictorOpsintegrationsvictorops create and resolve VictorOps messages for events OpsGenieintegrationsopsgenie create and close OpsGenie alerts for events Slackintegrationsslack send notifications to a Slack channel for events HipChatintegrationshipchat send notifications to a HipChat room for events IRCintegrationsirc send notifications to an IRC channel for events SNMPintegrationssnmp send SNMP traps to a SNMP manager Graylogintegrationsgraylog send Sensu events to Graylog Flapjackintegrationsflapjack relay Sensu check results to Flapjack Puppetintegrationspuppet deregister Sensu clients without an associated Puppet node Chefintegrationschef deregister Sensu clients without an associated Chef node EC2integrationsec2 deregister Sensu clients without an allowed EC2 instance state Event Streamintegrationseventstream send all Sensu events to a remote TCP socket InfluxDBintegrationsinfluxdb send metrics to InfluxDB Graphiteintegrationsgraphite send metrics to Graphite Wavefrontintegrationswavefront send metrics to Wavefront Libratointegrationslibrato send metrics to Librato Metrics OpenTSDBintegrationsopentsdb send metrics to OpenTSDB DataDogintegrationsdatadog create Datadog events 0 sensuenterprise 1 sensucore10referencehandlers 2 sensucore10referencechecks 3 contactrouting 4 listofbuiltinhandlers"},{"title":"Built-in Mutators","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/built-in-mutators","display_name":"Sensu Enterprise 2.6: Built-in Mutators","content":"ENTERPRISE Builtin mutators are available for Sensu Enterprise0 users only Sensu Core ships with a set of builtin mutators1 for transforming event data into JSON Ruby Hash or extracting check output Sensu Enterprise comes with additional mutators enabling thirdparty integrations and providing event handler authors with a set of supported tools with well defined specifications Enterprise mutators The outputformat mutator outputformat Sensu Enterprise simplifies the process of gaining insightful metrics from complex distributed systems The outputformat enterprise mutator makes it possible to mutate collected metrics in various formats from disparate data sources into a proprietary intermediate format2 that has been optimized for portability The outputformat enterprise mutator extracts metrics from check result output Users can specify an output format per check enabling the use of various check plugins Nagios plugins etc and data sources The outputformat mutator currently supports several popular specifications InfluxDB line protocol8 Graphite Plaintext3 Nagios PerfData4 OpenTSDB5 Wavefront Data Format9 Metrics 20 as a wire format6 Wizardvan JSON7 Example outputformat filter configuration sensumetricformat The following is an example of how to configure an output format for a metric collection check one that is making use of a Nagios plugin This example check not only monitors NTP but also collects several metrics Note the multiple event handlers one for notifications pagerduty another for metric storage graphite checks ntp command usrlibnagiospluginscheckntp H timenrcca subscribers production interval 20 outputformat nagiosperfdata handlers pagerduty graphite Definition attributes outputformat "},{"title":"CHANGELOG","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/changelog","display_name":"Sensu Enterprise 2.6: CHANGELOG","content":"NOTE Sensu Enterprise is built on Sensu Core Sensu Core changes are documented in the Sensu Core changelogcorechangelog Releases Enterprise 266 Release Notesenterprisev266 Enterprise 265 Release Notesenterprisev265 Enterprise 264 Release Notesenterprisev264 Enterprise 263 Release Notesenterprisev263 Enterprise 262 Release Notesenterprisev262 Enterprise 261 Release Notesenterprisev261 Enterprise 260 Release Notesenterprisev260 Enterprise 252 Release Notesenterprisev252 Enterprise 251 Release Notesenterprisev251 Enterprise 250 Release Notesenterprisev250 Enterprise 240 Release Notesenterprisev240 Enterprise 231 Release Notesenterprisev231 Enterprise 230 Release Notesenterprisev230 Enterprise 220 Release Notesenterprisev220 Enterprise 210 Release Notesenterprisev210 Enterprise 200 Release Notesenterprisev200 Enterprise 1147 Release Notesenterprisev1147 Enterprise 1146 Release Notesenterprisev1146 Enterprise 1145 Release Notesenterprisev1145 Enterprise 1144 Release Notesenterprisev1144 Enterprise 1143 Release Notesenterprisev1143 Enterprise 1142 Release Notesenterprisev1142 Enterprise 1141 Release Notesenterprisev1141 Enterprise 1140 Release Notesenterprisev1140 Enterprise 1130 Release Notesenterprisev1130 Enterprise 266 Release Notes enterprisev266 October 27 2017 mdash Sensu Enterprise version 266 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev266changes BUGFIX API metrics endpoint no longer returns a 404 for missing metrics instead responding with an empty set Enterprise 265 Release Notes enterprisev265 October 17 2017 mdash Sensu Enterprise version 265 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev265changes IMPROVEMENT Now built on Sensu Core 104corev104 IMPROVEMENT Service scripts now honor SENSUOPTS environment variable for appending Sensu command line arguments when running Sensu Enterprise Enterprise 264 Release Notes enterprisev264 October 15 2017 mdash Sensu Enterprise version 264 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev264changes IMPROVEMENT General performance improvements Enterprise 263 Release Notes enterprisev263 September 29 2017 mdash Sensu Enterprise version 263 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev263changes IMPROVEMENT JIRA issue type is now configurable See JIRA integration documentation9 for details Enterprise 262 Release Notes enterprisev262 September 20 2017 mdash Sensu Enterprise version 262 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev262changes IMPROVEMENT Now using JRuby 91130 for bug fixes and performance improvements IMPROVEMENT The SNMP integration trap varbind value trim length is now configurable via the SNMP integration definition attribute varbindtrim eg varbindtrim 300 The default value is still 100 characters The networks UDP MTU dictates the maximum trap payload size Enterprise 261 Release Notes enterprisev261 September 12 2017 mdash Sensu Enterprise version 261 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev261changes IMPROVEMENT The Hipchat integration can now send notifications directly to a user To send notifications to a specific user instead of a room use the hipchat definition attribute user eg user portertech IMPROVEMENT Contact routing now supports disabling specific integrations per contact disabling the global configuration fallback To disable an integration for a contact set its value to false eg contacts ops email false Enterprise 260 Release Notes enterprisev260 July 27 2017 mdash Sensu Enterprise version 260 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev260changes IMPROVEMENT Built on Sensu Core 102corev102 IMPROVEMENT Added support for contact routing to every metric integration eg InfluxDB Graphite OpenTSDB etc IMPROVEMENT Sensu Enterprise now loads configuration and validates it prior to reloading SIGHUP If configuration is determined to be invalid prior to reloading Sensu will report invalid configuration definitions and it will continue to run with its existing working configuration IMPROVEMENT Using JRuby 91120 for performance enhancements and bug fixes IMPROVEMENT Wavefront integration prefix option supporting a custom metric name prefix IMPROVEMENT Added Enterprise version to API info Enterprise 252 Release Notes enterprisev252 March 24 2017 mdash Sensu Enterprise version 252 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev252changes IMPROVEMENT Built on Sensu Core 0285corev0285 IMPROVEMENT Improved OpsGenie integration API request debug logging Enterprise 251 Release Notes enterprisev251 March 13 2017 mdash Sensu Enterprise version 251 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev251changes IMPROVEMENT Built on Sensu Core 0284corev0284 Enterprise 250 Release Notes enterprisev250 February 24 2017 mdash Sensu Enterprise version 250 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev250changes IMPROVEMENT Built on Sensu Core 0280corev0280 IMPROVEMENT Added OpenTSDB integration prefixsource and prefix options BUGFIX Contact routing array values now properly override the configured defaultglobal integration values Enterprise 240 Release Notes enterprisev240 February 17 2017 mdash Sensu Enterprise version 240 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev240changes IMPROVEMENT Built on Sensu Core 0271corev0271 Enterprise 231 Release Notes enterprisev231 January 31 2017 mdash Sensu Enterprise version 231 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev231changes IMPROVEMENT The Slack integration now supports messages with up to 8000 characters Enterprise 230 Release Notes enterprisev230 January 25 2017 mdash Sensu Enterprise version 230 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev230changes NEW Added Wavefront integration send metrics to Wavefront in the Wavefront Data Format NEW The Hipchat integration now adds a notify attribute to trigger HipChat user notifications NEW The Email integration now supports custom templates for email subject and body NEW The Sensu Enterprise outputformat mutator now supports two additional metric formats InfluxDB Line Protocol and the Wavefront Data Format IMPROVEMENT Now using JRuby 9170 for bugfixes and improved performance Enterprise 220 Release Notes enterprisev220 January 12 2017 mdash Sensu Enterprise version 220 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev220changes NEW Added JIRA integration create and resolve issues for Sensu events NEW Added Rollbar integration create and resolve messagesitems for Sensu events NEW The Slack integration now adds a notification field to attachments when one is provided in the event check definition IMPROVEMENT Metric integration metric format mutation performance improvements IMPROVEMENT Opsgenie integration now uses a differentimproved HTTP client BUGFIX Opsgenie integration now uses a string for alert tags multiple tags are comma delimited Enterprise 210 Release Notes enterprisev210 November 17 2016 mdash Sensu Enterprise version 210 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev210changes NEW ServiceNow Event Management support create ServiceNow events for Sensu events Enterprise 200 Release Notes enterprisev200 October 25 2016 mdash Sensu Enterprise version 200 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev200important This Enterprise release is built upon Sensu Core 026corev0260 which includes potentially breaking backwardsincompatible changes For more information please refer to the Sensu Core 0260 Important Changescorev0260important CHANGES enterprisev200changes NEW Built on Sensu Core version 0265corev0265 Enterprise 1147 Release Notes enterprisev1147 July 28 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1147changes NEW Built on Sensu Core version 0256corev0256 Enterprise 1146 Release Notes enterprisev1146 July 26 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1146changes BUGFIX Added newline event delimiter to event stream integration Enterprise 1145 Release Notes enterprisev1145 July 20 2016 mdash Sensu Enterprise version 1145 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1145changes NEW Built on Sensu Core version 0255corev0255 Enterprise 1144 Release Notes enterprisev1144 June 30 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1144changes BUGFIX Use Java SecureRandom in lieu of JRuby SecureRandom to ensure UUID generation is nonblocking BUGFIX Catch unexpected exceptions thrown by API HTTPHandler respond method Enterprise 1143 Release Notes enterprisev1143 June 17 2016 mdash Sensu Enterprise version 1143 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1143changes NEW Built on Sensu Core version 0253corev0253 Enterprise 1142 Release Notes enterprisev1142 June 16 2016 mdash Sensu Enterprise version 1142 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1142changes IMPROVEMENT The Enterprise Email integration now uses TLSv12 for STARTTLS and supports additional SSL ciphers Enterprise 1141 Release Notes enterprisev1141 June 16 2016 mdash Sensu Enterprise version 1141 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1141changes NEW Built on Sensu Core version 0252corev0252 Enterprise 1140 Release Notes enterprisev1140 June 15 2016 mdash Sensu Enterprise version 1140 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev1140important This release includes potentially breaking backwardsincompatible changes This is the first Sensu Enterprise release based on Sensu Core version 025x Please refer to the Sensu Core version 0250 release notescorev0250 below for additional information on potentially breaking changes CHANGES enterprisev1140changes NEW Built on Sensu Core version 0251corev0251 IMPROVEMENT Significant Enterprise metric API route performance improvements reducing network IO CPU and memory utilization IMPROVEMENT Reduced Enterprise metric retention from 4 hours to 1 hour as the Enterprise Console HUD currently only displays 30 minutes of data Enterprise 1130 Release Notes enterprisev1130 June 9 2016 mdash Sensu Enterprise version 1130 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev1130important This release includes potentially breaking backwardsincompatible changes This is the first Sensu Enterprise release based on Sensu Core version 024x Please refer to the Sensu Core version 0240corev0240 release notes for additional information on potentially breaking changes This release requires Sensu Enterprise Dashboard 198 or higher CHANGES enterprisev1130changes NEW Built on Sensu Core 0241corev0241 NEW Event Stream integrationeventstreamintegration The Sensu Enterprise event stream integration sends all Sensu events to a remote TCP socket for complex event processing eg stream processing andor longterm storage Please refer to the Event Stream integration reference documentation39 for additional information NEW Graylog integrationgraylogintegration The Sensu Enterprise Graylog integration sends Sensu events to a a Graylog RawPlaintext TCP input Please refer to the Graylog integration reference documentation40 for additional information IMPROVEMENT ServiceNow integrationservicenowintegration adds support for configurable incident table name previously hardcoded to incident for organizations with customized ServiceNow configurations IMMPROVEMENT Built on JRuby 9K corechangelog sensucore12changelog corev0240 sensucore10changelogcorev0240 corev0241 sensucore10changelogcorev0241 eventstreamintegration integrationseventstream graylogintegration integrationsgraylog servicenowintegration integrationsservicenow corev0250 sensucore10changelogcorev0250 corev0251 sensucore10changelogcorev0251 corev0252 sensucore10changelogcorev0252 corev0253 sensucore10changelogcorev0253 corev0254 sensucore10changelogcorev0254 corev0255 sensucore10changelogcorev0255 corev0256 sensucore10changelogcorev0256 corev0260 sensucore10changelogcorev0260 corev0265 sensucore10changelogcorev0265 corev0271 sensucore10changelogcorev0271 corev0280 sensucore10changelogcorev0280 corev0284 sensucore10changelogcorev0284 corev0285 sensucore10changelogcorev0285 corev102 sensucore10changelogcorev102 corev104 sensucore10changelogcorev104 corev0260important sensucore12changelogcorev0260important"},{"title":"Collections","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/collections","display_name":"Sensu Enterprise 2.6: Collections","content":"Collections are a grouping of items returned by a collection query This query acts like a global search and it persists between the different views Collections can be easily shared and saved collectionsimagesenterprisedashboardcollectionspng Collection Query The most basic query is composed of a field and its value in the form of fieldvalue A query can use any field visible or not to match a value such as dcuswest1 subscriberrabbitmq subscriptionlinux teamwebops Regular Expressions The match method of Javascripts String object is used to retrieve the matches thus the following special characters are available to use exclusively in the values of a query Matches any single character For example dcastria matches the datacenter austria Matches the preceding character 0 or more times For example dccan matches the datacenters canada and vatican but not cameroon Matches the preceding character 1 or more times For example dcira matches the datacenters iran and iraq but not ireland Matches the preceding character 0 or 1 time For example dcoco matches the datacenter cameroon but not morocco Matches beginning of input For example dcpor matches the datacenter portugal but not singapore Matches end of input For example dcnea matches the datacenter guinea but not guineabissau Operators The familiar operators AND OR and NOT are supported You may use multiple operators within a single query Be aware that the use of many operators may cause higher than normal resource usage dcuseast1 AND namecentos Includes all items from the datacenter useast1 that have centos in their name dcuseast1 OR dcuswest1 Includes all items from the datacenters useast1 or uswest1 dcuseast1 NOT namecentos Includes all items from the datacenter useast1 that do not have centos in their name NOT dcuseast1 Includes all items that are not part of the datacenter useast1 dcuseast1 OR dcuswest1 NOT namecentos Includes all items from the datacenters useast1 or uswest1 that dont have centos in their name"},{"title":"Enterprise Configuration","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/configuration","display_name":"Sensu Enterprise 2.6: Enterprise Configuration","content":"Sensu Enterprise service scripts make use of certain environment variable values to configure the Java runtime environment These settings take effect prior to Sensu Enterprise loading configuration files from disk as described in Sensu Configuration1 reference documentation Values for the environment variables described in this document should be set by editing etcdefaultsensuenterprise After changing values in this file the sensuenterprise service must be restarted before the new values can take effect Sensu Enterprise environment variables The Sensu Enterprise honors the following environment variables For configuration honored by both Sensu Enterprise and Sensu Core see the Sensu configuration reference documentation1 HEAPSIZE "},{"title":"Contact Routing","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/contact-routing","display_name":"Sensu Enterprise 2.6: Contact Routing","content":" Reference documentation What is contact routingwhatiscontactrouting How does contact routing workhowdoescontactroutingwork Contact Routing configurationcontactroutingconfiguration Example Contact Routing definitionexamplecontactroutingdefinition Contact Routing definition specificationcontactroutingdefinitionspecification CONTACT attributescontactattributes What is contact routing Every incident or outage has an ideal first responder a team or individual with the knowledge to triage and address the issue Sensu Enterprise contact routing makes it possible to assign checks to specific teams andor individuals reducing mean time to response and recovery MTTR Contact routing works with all of the Sensu Enterprise thirdparty notification and metric integrations How does contact routing work Sensu Enterprise contacts are defined in JSON configuration files which we recommend to store in the etcsensuconfdcontacts directory A contact is composed of a name and configuration overrides for one or more of Sensu Enterprises builtin integrations A contact in Sensu Enterprise is not too dissimilar from a contact on your phone which usually have a name and one or more identifiers for various communication channels eg a phone number email address Twitter username etc The following example contact definition provides overrides for the Sensu Enterprise email and Slack integration default configuration settings contacts support email to supportsensuappcom slack channel support Once defined Sensu Enterprise contacts are used the same way in which you use contacts on your phone ndash by selecting a communication channel eg phone call SMS email etc ndash and then selecting the contact With Sensu Enterprise contact routing the communication channels are builtin handlers integrations1 and the selection of which channel to use is managed by a check definition or client definition The following example check definition will use the builtin Sensu Enterprise email integration event handler notifying the support contact for any corresponding events checks examplecheck command dosomethingrb interval 30 handler email contact support Contact routing configuration Example contact routing definition The following is an example contact routing definition ie a contact a JSON configuration file located at etcsensuconfdcontactsopsjson contacts support pagerduty servicekey r3FPuDvNOTEDyQYCc7trBkymIFcy2NkE slack channel support username sensu Contact Routing definition specification Contact names Each contact routing definition has a unique contact name used for the definition key All contacts must be defined within the contacts configuration scope2 and comply with the following requirements A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex3 wmatchcheckname CONTACT attributes Contact routing attributes are configured within the contacts CONTACT configuration scope where CONTACT is a valid contact name3 Contact definition attributes are configuration overrides for builtin integrations eg Email4 Slack5 PagerDuty6 ServiceNow7 etc see the builtin handlers reference documentation1 for a complete listing EXAMPLES contactattributesexamples In most cases contact definitions are used to provide partial integration handler attribute overrides The following example only provides a to recipient attribute to override the default email integration configuration contacts support email to supportexamplecom However contact definitions are not limited to providing a single attribute mdash they can be used to provide multiple attributes or even complete integration handler definitions potentially overriding the entire default definition For example a contact could be used to provide an email integration definition to use an alternate SMTP server from the default configuration contacts support email smtp address smtpsupportexamplecom port 587 opensslverifymode none enablestarttlsauto true authentication plain username postmastersupportexamplecom password SECRET to supportsupportexamplecom from noreplysupportexamplecom 1 builtinhandlers 2 sensucore10referenceconfigurationconfigurationscopes 3 contactnames 4 integrationsemail 5 integrationsslack 6 integrationspagerduty 7 integrationsservicenow"},{"title":"Filters","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/filters/_index","display_name":"Sensu Enterprise 2.6: Filters","content":""},{"title":"check_dependencies","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/filters/check-dependencies","display_name":"Sensu Enterprise 2.6: check_dependencies","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification CHECK attributescheckattributes Overview The checkdependencies enterprise filter is used to filter events when an event already exists for a defined check dependency enabling the user to reduce notification noise and only be notified for the root cause of a given failure Check dependencies can be defined in the check definition using dependencies an array of checks eg checkapp or Sensu clientcheck pairs eg db01checkmysql Configuration Examples examples The following is an example of how to configure a check dependency for a check The example check monitors a web application API and has a dependency on another check that monitors the local MySQL database checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers webapplication interval 20 dependencies mysql The webapplicationapi check could depend on a check executed by another Sensu client in this example a Sensu client named db01 checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers webapplication interval 20 dependencies db01mysql The following is an example of how to apply the checkdependencies enterprise filter to a standard Sensu pipe handler handlers custommailer type pipe command custommailerrb filter checkdependencies Filter specification CHECK attributes The following attributes are configured within the checks CHECK configuration scope1 dependencies "},{"title":"handle_when","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/filters/handle-when","display_name":"Sensu Enterprise 2.6: handle_when","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification handlewhen attributeshandlewhenattributes Overview The handlewhen enterprise filter is used to reduce notification noise Users can define a minimum number of event occurrences before notifications will be sent Users can also specify a reset time in seconds to reset where recurrences are counted from to control when reminderupdate notifications are sent By default occurrences is set to 1 and reset is 1800 30 minutes The handlewhen filter is used by all of the enterprise thirdparty integrations1 Configuration Examples examples The following is an example of how to configure a check to only notify after 2 occurrences and send reminderupdate notifications every 20 minutes Sensu Enterprise integrations and standard event handlers using the handlewhen enterprise filter will have events filtered unless these conditions are met checks loadbalancerlisteners command checkhaproxyrb s varrunhaproxysock A subscribers loadbalancer interval 20 handlewhen occurrences 2 reset 1200 The following is an example of how to apply the handlewhen enterprise filter to a standard Sensu pipe handler handlers custommailer type pipe command custommailerrb filter handlewhen Filter specification handlewhen attributes handlewhenattributes The following attributes are configured within the handlewhen configuration scope2 occurrences "},{"title":"silence_stashes","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/filters/silence-stashes","display_name":"Sensu Enterprise 2.6: silence_stashes","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification"},{"title":"Integrations","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/_index","display_name":"Sensu Enterprise 2.6: Integrations","content":""},{"title":"Chef","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/chef","display_name":"Sensu Enterprise 2.6: Chef","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification chef attributeschefattributes Overview Deregister Sensu clients from the client registry if they no longer have associated Chef2 node data3 This integration can only work if Sensu clients are named using the Chef node name for the machine on which they reside The chef enterprise handler requires Chef Server API credentials the local chefclient configuration can be used as a reference Configuration Examples examples The following is an example global configuration for the chef enterprise handler integration chef endpoint httpsapichefioorganizationsexample flavor enterprise client i424242 key etcchefi424242pem sslpemfile etcchefsslpem sslverify true proxyaddress proxyexamplecom proxyport 8080 proxyusername chef proxypassword secret timeout 10 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition chef attributes4 which are included in event data5 chef attributes The following attributes are configured within the chef configuration scope6 endpoint "},{"title":"DataDog","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/datadog","display_name":"Sensu Enterprise 2.6: DataDog","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification datadog attributesdatadogattributes Overview Create Datadog2 events for Sensu events After managing your Datadog account API key3 configure the handler integration with your API key Configuration Examples examples The following is an example global configuration for the datadog enterprise event handler integration datadog apikey 9775a026f1ca7d1c6c5af9d94d9595a4 timeout 10 Integration Specification datadog attributes The following attributes are configured within the datadog configuration scope4 apikey "},{"title":"EC2","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/ec2","display_name":"Sensu Enterprise 2.6: EC2","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification ec2 attributesec2attributes Overview Deregister Sensu clients from the client registry if they no longer have an associated Amazon Web Services AWS2 EC2 instance in the allowed states This enterprise handler integration will only work if Sensu clients are named using the EC2 instance ID for the instance on which they reside The ec2 enterprise handler requires valid AWS IAM user credentials3 with the EC2 describe instances action in a policy eg ec2DescribeInstances Configuration Examples examples The following is an example global configuration for the ec2 enterprise handler integration ec2 region uswest2 accesskeyid AlygD0X6Z4Xr2m3gl70J secretaccesskey y9Jt5OqNOqdy5NCFjhcUsHMb6YqSbReLAJsy4d6obSZIWySv allowedinstancestates running timeout 10 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition ec2 attributes4 which are included in event data5 ec2 attributes The following attributes are configured within the ec2 configuration scope6 region "},{"title":"Email","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/email","display_name":"Sensu Enterprise 2.6: Email","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Custom email templatescustomemailtemplates Examplescustomemailtemplatesexample Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification email attributesemailattributes smtp attributessmtpattributes templates attributestemplatesattributes Overview Send email notifications for events using SMTP Custom email templates As of Sensu Enterprise version 23 the Sensu Enterprise email integration provides support for creating custom email templates using ERB a templating language based on Ruby Sensu Enterprise make an event variable available to the ERB template containing the complete event data payload4 NOTE the Puppet reference documentation provides a helpful introduction to ERB templating syntax5 Examples customemailtemplatesexample The following example demonstrates how to access the Sensu event variable from a custom ERB template Hi there Sensu has detected a monitoring event Please note the following details Client Check Output For more information please consult the Sensu Enterprise dashboard httpssensuexamplecomclientcheck monitoringlove Team Sensu Configuration Examples examples The following is an example configuration for the email enterprise event handler integration email smtp address smtpexamplecom port 587 opensslverifymode none enablestarttlsauto true authentication plain username postmasterexamplecom password SECRET to supportexamplecom from noreplyexamplecom timeout 10 Integration specification email attributes The following attributes are configured within the email configuration scope2 smtp "},{"title":"Event Stream","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/event_stream","display_name":"Sensu Enterprise 2.6: Event Stream","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification eventstream attributeseventstreamattributes Overview The event stream integrations sends all Sensu events2 to a remote TCP socket for complex event processing3 or stream processing andor longterm storage Configuration Examples examples The following is an example configuration for the eventstream enterprise event handler integration eventstream host 127001 port 3000 filtermetrics false Integration specification eventstream attributes eventstreamattributes host "},{"title":"Flapjack","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/flapjack","display_name":"Sensu Enterprise 2.6: Flapjack","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification flapjack attributesflapjackattributes Overview Relay Sensu results to Flapjack2 a monitoring notification routing and event processing system Flapjack uses Redis for event queuing this integration sends event data to Flapjack through Redis using the Flapjack event format NOTE checks DO NOT need to specify flapjack as an event handler as every check result will be relayed to Flapjack if the integration is configured Configuration Examples examples The following is an example global configuration for the flapjack enterprise integration flapjack host redisexamplecom port 6379 db 0 channel events filtermetrics false Integration Specification flapjack attributes The following attributes are configured within the flapjack configuration scope3 host "},{"title":"Graphite","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/graphite","display_name":"Sensu Enterprise 2.6: Graphite","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification graphite attributesgraphiteattributes Overview Send metrics to Graphite2 using the plaintext protocol over TCP The graphite enterprise handler is also capable of sending metrics to Hosted Graphite3 using the prefix attribute to prefix metric names with the Hosted Graphite API key This handler uses the outputformat mutator Configuration Examples examples The following is an example global configuration for the graphite enterprise handler integration graphite host graphiteexamplecom port 2003 prefixsource false prefix production Integration Specification graphite attributes The following attributes are configured within the graphite configuration scope4 host "},{"title":"Graylog","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/graylog","display_name":"Sensu Enterprise 2.6: Graylog","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification graylog attributesgraylogattributes Overview The integration sends event data to a Graylog2 RawPlaintext TCP input3 This integration requires a Graylog JSON extractor4 Configuration Examples examples The following is an example configuration for the graylog enterprise event handler integration graylog host 127001 port 5555 timeout 10 Integration specification graylog attributes host "},{"title":"HipChat","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/hipchat","display_name":"Sensu Enterprise 2.6: HipChat","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification hipchat attributeshipchatattributes Overview Send notifications to a HipChat2 room for events After creating a HipChat API token3 configure the handler integration with the provided API token Configuration Examples examples The following is an example global configuration for the hipchat enterprise event handler integration hipchat apitoken L7kVQzXF7c5eUMYUon6INaSVRDU8mP apiversion v2 username sensu room Operations timeout 10 Integration Specification hipchat attributes The following attributes are configured within the hipchat configuration scope4 apitoken "},{"title":"InfluxDB","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/influxdb","display_name":"Sensu Enterprise 2.6: InfluxDB","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification influxdb attributesinfluxdbattributes Overview Send metrics to InfluxDB2 using the InfluxDB HTTP API Configuration Examples examples The following is an example global configuration for the influxdb enterprise handler integration influxdb host 8888 port 8086 username root password Bfw3Bdrn5WfqvOl1 apiversion 09 Integration specification influxdb attributes The following attributes are configured within the influxdb configuration scope3 host "},{"title":"IRC","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/irc","display_name":"Sensu Enterprise 2.6: IRC","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification irc attributesircattributes Overview Send notifications to an Internet Relay Chat IRC channel for events Configuration Examples examples The following is an example global configuration for the irc enterprise event handler integration irc uri ircnickpassexamplecom6697ops ssl true nickservpassword NICKSERVPASSWORD channelpassword CHANNELPASSWORD join false timeout 10 Integration Specification irc attributes The following attributes are configured within the irc configuration scope2 url "},{"title":"JIRA","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/jira","display_name":"Sensu Enterprise 2.6: JIRA","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification jira attributesjiraattributes Overview Create and resolve Jira2 issues for Sensu events3 Configuration Examples examples The following is an example global configuration for the jira enterprise event handler integration jira host jiraexamplecom user admin password secret project Sensu timeout 10 Integration Specification jira attributes The following attributes are configured within the jira configuration scope4 host "},{"title":"Librato","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/librato","display_name":"Sensu Enterprise 2.6: Librato","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification librato attributeslibratoattributes Overview Send metrics to Librato2 Metrics using the HTTP API Configuration Examples examples The following is an example global configuration for the librato enterprise handler integration librato email supportexamplecom apikey 90SHpjPOFqd2YJFIX9rzDq7ik6CiDmqu2AvqcXJAX3buIwcOGqIOgNilwKMjpStO Integration Specification librato attributes The following attributes are configured within the librato configuration scope3 email "},{"title":"OpenTSDB","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/opentsdb","display_name":"Sensu Enterprise 2.6: OpenTSDB","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification opentsdb attributesopentsdbattributes Overview Send metrics to OpenTSDB2 using the telnet protocol over TCP This handler uses the outputformatmutator Configuration Examples examples The following is an example global configuration for the opentsdb enterprise handler integration opentsdb host opentsdbexamplecom port 4242 taghost true Integration Specification opentsdb attributes The following attributes are configured within the opentsdb configuration scope3 host "},{"title":"OpsGenie","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/opsgenie","display_name":"Sensu Enterprise 2.6: OpsGenie","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification opsgenie attributesopsgenieattributes Overview Create and close OpsGenie2 alerts for events Configuration Examples examples The following is an example global configuration for the opsgenie enterprise event handler integration opsgenie apikey eed02a0d85a4427b851a18dd8fd80d93 source Sensu Enterprise AWS teams ops web recipients afterhours tags production overwritesquiethours true timeout 10 Integration Specification opsgenie attributes The following attributes are configured within the opsgenie configuration scope3 apikey "},{"title":"PagerDuty","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/pagerduty","display_name":"Sensu Enterprise 2.6: PagerDuty","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification pagerduty attributespagerdutyattributes Overview Create and resolve PagerDuty2 incidents for events After configuring a service in PagerDuty3 configure the handler integration with the provided service key Configuration Examples examples The following is an example global configuration for the pagerduty enterprise event handler integration pagerduty servicekey r3FPuDvNOTEDyQYCc7trBkymIFcy2NkE timeout 10 Integration Specification pagerduty attributes The following attributes are configured within the pagerduty configuration scope4 servicekey "},{"title":"Puppet","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/puppet","display_name":"Sensu Enterprise 2.6: Puppet","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification puppet attributespuppetattributes ssl attributessslattributes Overview Deregister Sensu clients from the client registry if they no longer have an associated Puppet2 node The puppet enterprise handler requires access to a SSL truststore and keystore containing a valid and whitelisted Puppet certificate private key and CA The local Puppet agent certificate private key and CA can be used Configuration Examples examples The following is an example global configuration for the puppet enterprise handler integration puppet endpoint https1001128081pdbqueryv4nodes ssl keystorefile etcsensusslpuppetkeystorejks keystorepassword secret truststorefile etcsensusslpuppettruststorejks truststorepassword secret timeout 10 The Puppet enterprise handler is most commonly used as part of the keepalive set handler For example handlers keepalive type set handlers pagerduty puppet When querying PuppetDB for a node by default Sensu will use the Sensu clients name for the Puppet node name Individual Sensu clients can override the name of their corresponding Puppet node using specific client definition attributes The following is an example client definition specifying its Puppet node name client name i424242 address 8888 subscriptions production webserver puppet nodename webserver01examplecom Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition puppet attributes3 which are included in event data4 puppet attributes The following attributes are configured within the puppet configuration scope5 endpoint "},{"title":"Rollbar","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/rollbar","display_name":"Sensu Enterprise 2.6: Rollbar","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification rollbar attributesrollbarattributes Overview Create and resolve Rollbar2 messagesitems for Sensu events3 Configuration Examples examples The following is an example global configuration for the rollbar enterprise event handler integration rollbar accesstokenread 2ae6bccccf534b9c8749a4327671e711 accesstokenwrite 944872fdbfba40c48305fc8cd73707b5 accesstokenpatch f34948101a714661a83dcd8dbe6a167a timeout 30 Integration Specification rollbar attributes The following attributes are configured within the rollbar configuration scope4 accesstokenread "},{"title":"ServiceNow","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/servicenow","display_name":"Sensu Enterprise 2.6: ServiceNow","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification servicenow attributesservicenowattributes Overview Create ServiceNow2 configuration items3 upon Sensu client registration4 createresolve ServiceNow incidents andor create ServiceNow events for Sensu events5 Configuration Examples examples The following is an example global configuration for the servicenow enterprise event handler integration servicenow host dev42servicenowcom user admin password secret createcmdbci true cmdbcitable cmdbciserver incidentmanagement true incidenttable incident timeout 10 When creating ServiceNow configuration items6 by default Sensu will use the clients name for the item name Individual Sensu clients can override the name of their corresponding configuration item using specific client definition attributes In addition to specifying a item name any valid CMDB table attributes fields values may also be set eg osversion The following is an example client definition7 specifying its ServiceNow configuration item attributes client name i424242 address 8888 subscriptions production webserver servicenow configurationitem name webserver01examplecom osversion 1404 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition servicenow attributes8 which are included in event data9 servicenow attributes The following attributes are configured within the servicenow configuration scope10 host "},{"title":"Slack","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/slack","display_name":"Sensu Enterprise 2.6: Slack","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification slack attributesslackattributes Overview Send notifications to a Slack2 channel for events After configuring an incoming webhook in Slack3 configure the handler integration with the provided webhook url Configuration Examples examples The following is an example global configuration for the slack enterprise event handler integration slack webhookurl httpshooksslackcomservicesIB6JgRmRJeL7Hgo6kFCckJm8E4Yt8X3i6QRKHWBekc username sensu channel ops timeout 10 Integration Specification slack attributes The following attributes are configured within the slack configuration scope4 webhookurl "},{"title":"SNMP","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/snmp","display_name":"Sensu Enterprise 2.6: SNMP","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Sensu Enterprise MIBssensuenterprisemibs Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification snmp attributessnmpattributes Overview Send SNMP traps to a SNMP manager Sensu Enterprise provides two SNMP MIB management information base modules for this integration The SNMP integration is capable of creating either SNMPv1 or SNMPv2 traps for Sensu events By default SNMPv2 traps are created unless the integration is configured for SNMPv1 eg version 1 The SNMP manager that will be receiving SNMP traps from Sensu Enterprise should load the appropriate provided MIBs The Sensu Enterprise SNMP MIB files can be altered to better fit certain environments and SNMP configurations Sensu Enterprise MIBs SNMPv1 MIBs RFC1212MIBtxtfilesRFC1212MIBtxt RFC1215MIBtxtfilesRFC1215MIBtxt SENSUENTERPRISEV1MIBtxtfilesSENSUENTERPRISEV1MIBtxt SNMPv2 MIBs SENSUENTERPRISEROOTMIBtxtfilesSENSUENTERPRISEROOTMIBtxt SENSUENTERPRISENOTIFYMIBtxtfilesSENSUENTERPRISENOTIFYMIBtxt Configuration Examples examples The following is an example global configuration for the snmp enterprise event handler integration snmp host 8888 port 162 community public version 2 varbindtrim 200 Integration Specification snmp attributes The following attributes are configured within the snmp configuration scope2 host "},{"title":"VictorOps","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/victorops","display_name":"Sensu Enterprise 2.6: VictorOps","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification victorops attributesvictoropsattributes Overview Create VictorOps2 messages for events Configuration Examples examples The following is an example global configuration for the victorops enterprise event handler integration victorops apikey a53265cdd2effa32fc54de52659a routingkey everyone timeout 10 Integration Specification victorops attributes The following attributes are configured within the victorops configuration scope3 apikey "},{"title":"Wavefront","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/integrations/wavefront","display_name":"Sensu Enterprise 2.6: Wavefront","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configuring a Wavefront Proxyconfiguringawavefrontproxy Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification wavefront attributeswavefrontattributes Overview Send metrics to Wavefront2 using the Wavefront Data Format4 This handler uses the outputformat mutator Configuring a Wavefront Proxy To install and configure a Wavefront Proxy to receive metrics from Sensu Enterprise please refer to the Wavefront Proxy setup documentation5 Configuration Examples examples The following is an example global configuration for the wavefront enterprise handler integration wavefront host wavefrontexamplecom port 2878 Integration Specification wavefront attributes The following attributes are configured within the wavefront configuration scope3 host "},{"title":"RBAC","product":"Sensu Enterprise","version":"2.6","location":"/sensu-enterprise/2.6/rbac/_index","display_name":"Sensu Enterprise 2.6: RBAC","content":""},{"title":"Sensu Enterprise","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/_index","display_name":"Sensu Enterprise 2.7: Sensu Enterprise","content":" Overview What is Sensu Enterprisewhatissensuenterprise Upgrading to Sensu Enterpriseupgradingtosensuenterprise Reference documentationreferencedocumentation What is Sensu Enterprise Sensu Enterprise1 is a dropin replacement for Sensu Core the FREE open source version of Sensu that provides addedvalue features like contact routing2 several builtin thirdparty integrations3 and more Sensu Enterprise also includes FREE annual training4 and enterpriseclass support5 We like to think of the distinction between Sensu Core and Sensu Enterprise as the difference between a framework and a product The purpose of this documentation is to help Sensu Enterprise users configure their installation making use of the many thirdparty integrations and features Sensu Enterprise has to offer Sensu Enterprise integrates with thirdparty tools services to provide support for creatingresolving incidents oncall rotation scheduling storing time series data metrics relaying events deregistering sensuclients for terminated nodes andor notifying contacts via various media Upgrading to Sensu Enterprise Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server6 and API7 so for users who are upgrading to Sensu Enterprise from Sensu Core no configuration changes are required to resume simply terminate the sensuserver and sensuapi processes and start the sensuenterprise process to resume operation of Sensu see the Sensu Server and API installation guide8 for additional details However some configuration changes may be required to take advantage of certain thirdparty integrations or addedvalue features eg contact routing Please refer to the Sensu Enterprise reference documentation sidebar for more information 1 sensuenterprise 2 contactrouting 3 builtinhandlers 4 training 5 httpssensuapporgsupport 6 sensucore10referenceserver 7 sensucore10apioverview 8 installationinstallsensuserverapisensuenterprise"},{"title":"Enterprise API","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/api","display_name":"Sensu Enterprise 2.7: Enterprise API","content":" Reference documentation What is the Sensu Enterprise APIwhatisthesensuenterpriseapi Enterprise API Configurationenterpriseapiconfiguration Examplesexamples API specificationapispecification api attributesapiattributes ssl attributessslattributes Create an SSL keystorecreateansslkeystore Configure the Enterprise API for SSLconfiguretheenterpriseapiforssl"},{"title":"Built-in Filters","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/built-in-filters","display_name":"Sensu Enterprise 2.7: Built-in Filters","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation What are builtin filterswhatarebuiltinfilters Using builtin filtersusingbuiltinfilters Using multiple builtin filtersusingmultiplebuiltinfilters What are builtin filters Sensu Enterprise has several builtin event filters used by many of the thirdparty integrations and made available to standard Sensu event handlers These enterprise filters can be used to combat alert fatigue Builtin filters usingbuiltinfilters Please refer to the reference documentation for each of the following builtin filters for more information on how to use them handlewhenfiltershandlewhen silencestashesfilterssilencestashes checkdependenciesfilterscheckdependencies Using multiple builtin filters Multiple enterprise filters can be applied to standard Sensu event handlers The following example event handler uses the handlewhen and silencestashes event filters handlers custommailer type pipe command custommailerrb filters handlewhen silencestashes 0 sensuenterprise"},{"title":"Built-in Handlers","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/built-in-handlers","display_name":"Sensu Enterprise 2.7: Built-in Handlers","content":"ENTERPRISE Builtin handlers are available for Sensu Enterprise0 users only Reference documentation What are builtin handlerswhatarebuiltinhandlers How to use builtin handlershowtousebuiltinhandlers Examplesexampleintegrationconfigurations List of builtin handlerslistofbuiltinhandlers What are builtin Handlers Sensu Enterprise ships with several builtin thirdparty integrations which provide Sensu event handlers1 These builtin handlers can be used to handle events for any check2 The Enterprise integrations use their own global configuration namespaces in combination with enterprise contact routing3 to provide granular controls over how events should be handled in a variety of circumstances How to use builtin handlers After configuring one or more enterprise handlers4 you can specify which ones are used per check or create a default handler set to specify those used by default Examples exampleintegrationconfigurations The following is an example of how to configure a Sensu check to use the builtin email integration ie Enterprise handler etcsensuconfdchecksloadbalancerlistenersjson checks loadbalancerlisteners command checkhaproxyrb s varrunhaproxysock A subscribers loadbalancer interval 20 handler email The following is an example of how to configure the Sensu default handler in order to specify one or more builtin enterprise handlers The default handler is used when a check definition does not specify one or more event handlers This example specifies the builtin email and slack enterprise handlers etcsensuconfdhandlersdefaultjson handlers default type set handlers email slack List of builtin handlers Builtin event handlers Emailintegrationsemail send email notifications for events PagerDutyintegrationspagerduty create and resolve PagerDuty incidents for events ServiceNowintegrationsservicenow create ServiceNow CMDB configuration items and incidents JIRAintegrationsjira create and resolve JIRA issues for Sensu events VictorOpsintegrationsvictorops create and resolve VictorOps messages for events OpsGenieintegrationsopsgenie create and close OpsGenie alerts for events Slackintegrationsslack send notifications to a Slack channel for events HipChatintegrationshipchat send notifications to a HipChat room for events IRCintegrationsirc send notifications to an IRC channel for events SNMPintegrationssnmp send SNMP traps to a SNMP manager Graylogintegrationsgraylog send Sensu events to Graylog Flapjackintegrationsflapjack relay Sensu check results to Flapjack Puppetintegrationspuppet deregister Sensu clients without an associated Puppet node Chefintegrationschef deregister Sensu clients without an associated Chef node EC2integrationsec2 deregister Sensu clients without an allowed EC2 instance state Event Streamintegrationseventstream send all Sensu events to a remote TCP socket InfluxDBintegrationsinfluxdb send metrics to InfluxDB Graphiteintegrationsgraphite send metrics to Graphite Wavefrontintegrationswavefront send metrics to Wavefront Libratointegrationslibrato send metrics to Librato Metrics OpenTSDBintegrationsopentsdb send metrics to OpenTSDB DataDogintegrationsdatadog create Datadog events 0 sensuenterprise 1 sensucore10referencehandlers 2 sensucore10referencechecks 3 contactrouting 4 listofbuiltinhandlers"},{"title":"Built-in Mutators","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/built-in-mutators","display_name":"Sensu Enterprise 2.7: Built-in Mutators","content":"ENTERPRISE Builtin mutators are available for Sensu Enterprise0 users only Sensu Core ships with a set of builtin mutators1 for transforming event data into JSON Ruby Hash or extracting check output Sensu Enterprise comes with additional mutators enabling thirdparty integrations and providing event handler authors with a set of supported tools with well defined specifications Enterprise mutators The outputformat mutator outputformat Sensu Enterprise simplifies the process of gaining insightful metrics from complex distributed systems The outputformat enterprise mutator makes it possible to mutate collected metrics in various formats from disparate data sources into a proprietary intermediate format2 that has been optimized for portability The outputformat enterprise mutator extracts metrics from check result output Users can specify an output format per check enabling the use of various check plugins Nagios plugins etc and data sources The outputformat mutator currently supports several popular specifications InfluxDB line protocol8 Graphite Plaintext3 Nagios PerfData4 OpenTSDB5 Wavefront Data Format9 Metrics 20 as a wire format6 Wizardvan JSON7 Example outputformat filter configuration The following is an example of how to configure an output format for a metric collection check one that is making use of a Nagios plugin This example check not only monitors NTP but also collects several metrics Note the multiple event handlers one for notifications pagerduty another for metric storage graphite checks ntp command usrlibnagiospluginscheckntp H timenrcca subscribers production interval 20 outputformat nagiosperfdata handlers pagerduty graphite Definition attributes sensumetricformat outputformat "},{"title":"CHANGELOG","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/changelog","display_name":"Sensu Enterprise 2.7: CHANGELOG","content":"NOTE Sensu Enterprise is built on Sensu Core Sensu Core changes are documented in the Sensu Core changelogcorechangelog Releases Enterprise 270 Release Notesenterprisev270 Enterprise 266 Release Notesenterprisev266 Enterprise 265 Release Notesenterprisev265 Enterprise 264 Release Notesenterprisev264 Enterprise 263 Release Notesenterprisev263 Enterprise 262 Release Notesenterprisev262 Enterprise 261 Release Notesenterprisev261 Enterprise 260 Release Notesenterprisev260 Enterprise 252 Release Notesenterprisev252 Enterprise 251 Release Notesenterprisev251 Enterprise 250 Release Notesenterprisev250 Enterprise 240 Release Notesenterprisev240 Enterprise 231 Release Notesenterprisev231 Enterprise 230 Release Notesenterprisev230 Enterprise 220 Release Notesenterprisev220 Enterprise 210 Release Notesenterprisev210 Enterprise 200 Release Notesenterprisev200 Enterprise 1147 Release Notesenterprisev1147 Enterprise 1146 Release Notesenterprisev1146 Enterprise 1145 Release Notesenterprisev1145 Enterprise 1144 Release Notesenterprisev1144 Enterprise 1143 Release Notesenterprisev1143 Enterprise 1142 Release Notesenterprisev1142 Enterprise 1141 Release Notesenterprisev1141 Enterprise 1140 Release Notesenterprisev1140 Enterprise 1130 Release Notesenterprisev1130 Enterprise 270 Release Notes enterprisev270 November 20 2017 mdash Sensu Enterprise version 270 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev270changes IMPROVEMENT Now built on Sensu Core 112corev112 IMPROVEMENT Integrations now include event data in logged error messages BUGFIX Integrations now use the configured value for apibind setting when using the API Enterprise 266 Release Notes enterprisev266 October 27 2017 mdash Sensu Enterprise version 266 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev266changes BUGFIX API metrics endpoint no longer returns a 404 for missing metrics instead responding with an empty set Enterprise 265 Release Notes enterprisev265 October 17 2017 mdash Sensu Enterprise version 265 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev265changes IMPROVEMENT Now built on Sensu Core 104corev104 IMPROVEMENT Service scripts now honor SENSUOPTS environment variable for appending Sensu command line arguments when running Sensu Enterprise Enterprise 264 Release Notes enterprisev264 October 15 2017 mdash Sensu Enterprise version 264 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev264changes IMPROVEMENT General performance improvements Enterprise 263 Release Notes enterprisev263 September 29 2017 mdash Sensu Enterprise version 263 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev263changes IMPROVEMENT JIRA issue type is now configurable See JIRA integration documentation9 for details Enterprise 262 Release Notes enterprisev262 September 20 2017 mdash Sensu Enterprise version 262 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev262changes IMPROVEMENT Now using JRuby 91130 for bug fixes and performance improvements IMPROVEMENT The SNMP integration trap varbind value trim length is now configurable via the SNMP integration definition attribute varbindtrim eg varbindtrim 300 The default value is still 100 characters The networks UDP MTU dictates the maximum trap payload size Enterprise 261 Release Notes enterprisev261 September 12 2017 mdash Sensu Enterprise version 261 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev261changes IMPROVEMENT The Hipchat integration can now send notifications directly to a user To send notifications to a specific user instead of a room use the hipchat definition attribute user eg user portertech IMPROVEMENT Contact routing now supports disabling specific integrations per contact disabling the global configuration fallback To disable an integration for a contact set its value to false eg contacts ops email false Enterprise 260 Release Notes enterprisev260 July 27 2017 mdash Sensu Enterprise version 260 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev260changes IMPROVEMENT Built on Sensu Core 102corev102 IMPROVEMENT Added support for contact routing to every metric integration eg InfluxDB Graphite OpenTSDB etc IMPROVEMENT Sensu Enterprise now loads configuration and validates it prior to reloading SIGHUP If configuration is determined to be invalid prior to reloading Sensu will report invalid configuration definitions and it will continue to run with its existing working configuration IMPROVEMENT Using JRuby 91120 for performance enhancements and bug fixes IMPROVEMENT Wavefront integration prefix option supporting a custom metric name prefix IMPROVEMENT Added Enterprise version to API info Enterprise 252 Release Notes enterprisev252 March 24 2017 mdash Sensu Enterprise version 252 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev252changes IMPROVEMENT Built on Sensu Core 0285corev0285 IMPROVEMENT Improved OpsGenie integration API request debug logging Enterprise 251 Release Notes enterprisev251 March 13 2017 mdash Sensu Enterprise version 251 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev251changes IMPROVEMENT Built on Sensu Core 0284corev0284 Enterprise 250 Release Notes enterprisev250 February 24 2017 mdash Sensu Enterprise version 250 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev250changes IMPROVEMENT Built on Sensu Core 0280corev0280 IMPROVEMENT Added OpenTSDB integration prefixsource and prefix options BUGFIX Contact routing array values now properly override the configured defaultglobal integration values Enterprise 240 Release Notes enterprisev240 February 17 2017 mdash Sensu Enterprise version 240 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev240changes IMPROVEMENT Built on Sensu Core 0271corev0271 Enterprise 231 Release Notes enterprisev231 January 31 2017 mdash Sensu Enterprise version 231 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev231changes IMPROVEMENT The Slack integration now supports messages with up to 8000 characters Enterprise 230 Release Notes enterprisev230 January 25 2017 mdash Sensu Enterprise version 230 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev230changes NEW Added Wavefront integration send metrics to Wavefront in the Wavefront Data Format NEW The Hipchat integration now adds a notify attribute to trigger HipChat user notifications NEW The Email integration now supports custom templates for email subject and body NEW The Sensu Enterprise outputformat mutator now supports two additional metric formats InfluxDB Line Protocol and the Wavefront Data Format IMPROVEMENT Now using JRuby 9170 for bugfixes and improved performance Enterprise 220 Release Notes enterprisev220 January 12 2017 mdash Sensu Enterprise version 220 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev220changes NEW Added JIRA integration create and resolve issues for Sensu events NEW Added Rollbar integration create and resolve messagesitems for Sensu events NEW The Slack integration now adds a notification field to attachments when one is provided in the event check definition IMPROVEMENT Metric integration metric format mutation performance improvements IMPROVEMENT Opsgenie integration now uses a differentimproved HTTP client BUGFIX Opsgenie integration now uses a string for alert tags multiple tags are comma delimited Enterprise 210 Release Notes enterprisev210 November 17 2016 mdash Sensu Enterprise version 210 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev210changes NEW ServiceNow Event Management support create ServiceNow events for Sensu events Enterprise 200 Release Notes enterprisev200 October 25 2016 mdash Sensu Enterprise version 200 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev200important This Enterprise release is built upon Sensu Core 026corev0260 which includes potentially breaking backwardsincompatible changes For more information please refer to the Sensu Core 0260 Important Changescorev0260important CHANGES enterprisev200changes NEW Built on Sensu Core version 0265corev0265 Enterprise 1147 Release Notes enterprisev1147 July 28 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1147changes NEW Built on Sensu Core version 0256corev0256 Enterprise 1146 Release Notes enterprisev1146 July 26 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1146changes BUGFIX Added newline event delimiter to event stream integration Enterprise 1145 Release Notes enterprisev1145 July 20 2016 mdash Sensu Enterprise version 1145 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1145changes NEW Built on Sensu Core version 0255corev0255 Enterprise 1144 Release Notes enterprisev1144 June 30 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1144changes BUGFIX Use Java SecureRandom in lieu of JRuby SecureRandom to ensure UUID generation is nonblocking BUGFIX Catch unexpected exceptions thrown by API HTTPHandler respond method Enterprise 1143 Release Notes enterprisev1143 June 17 2016 mdash Sensu Enterprise version 1143 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1143changes NEW Built on Sensu Core version 0253corev0253 Enterprise 1142 Release Notes enterprisev1142 June 16 2016 mdash Sensu Enterprise version 1142 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1142changes IMPROVEMENT The Enterprise Email integration now uses TLSv12 for STARTTLS and supports additional SSL ciphers Enterprise 1141 Release Notes enterprisev1141 June 16 2016 mdash Sensu Enterprise version 1141 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1141changes NEW Built on Sensu Core version 0252corev0252 Enterprise 1140 Release Notes enterprisev1140 June 15 2016 mdash Sensu Enterprise version 1140 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev1140important This release includes potentially breaking backwardsincompatible changes This is the first Sensu Enterprise release based on Sensu Core version 025x Please refer to the Sensu Core version 0250 release notescorev0250 below for additional information on potentially breaking changes CHANGES enterprisev1140changes NEW Built on Sensu Core version 0251corev0251 IMPROVEMENT Significant Enterprise metric API route performance improvements reducing network IO CPU and memory utilization IMPROVEMENT Reduced Enterprise metric retention from 4 hours to 1 hour as the Enterprise Console HUD currently only displays 30 minutes of data Enterprise 1130 Release Notes enterprisev1130 June 9 2016 mdash Sensu Enterprise version 1130 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev1130important This release includes potentially breaking backwardsincompatible changes This is the first Sensu Enterprise release based on Sensu Core version 024x Please refer to the Sensu Core version 0240corev0240 release notes for additional information on potentially breaking changes This release requires Sensu Enterprise Dashboard 198 or higher CHANGES enterprisev1130changes NEW Built on Sensu Core 0241corev0241 NEW Event Stream integrationeventstreamintegration The Sensu Enterprise event stream integration sends all Sensu events to a remote TCP socket for complex event processing eg stream processing andor longterm storage Please refer to the Event Stream integration reference documentation39 for additional information NEW Graylog integrationgraylogintegration The Sensu Enterprise Graylog integration sends Sensu events to a a Graylog RawPlaintext TCP input Please refer to the Graylog integration reference documentation40 for additional information IMPROVEMENT ServiceNow integrationservicenowintegration adds support for configurable incident table name previously hardcoded to incident for organizations with customized ServiceNow configurations IMMPROVEMENT Built on JRuby 9K corechangelog sensucore12changelog corev0240 sensucore10changelogcorev0240 corev0241 sensucore10changelogcorev0241 eventstreamintegration integrationseventstream graylogintegration integrationsgraylog servicenowintegration integrationsservicenow corev0250 sensucore10changelogcorev0250 corev0251 sensucore10changelogcorev0251 corev0252 sensucore10changelogcorev0252 corev0253 sensucore10changelogcorev0253 corev0254 sensucore10changelogcorev0254 corev0255 sensucore10changelogcorev0255 corev0256 sensucore10changelogcorev0256 corev0260 sensucore10changelogcorev0260 corev0265 sensucore10changelogcorev0265 corev0271 sensucore10changelogcorev0271 corev0280 sensucore10changelogcorev0280 corev0284 sensucore10changelogcorev0284 corev0285 sensucore10changelogcorev0285 corev102 sensucore10changelogcorev102 corev104 sensucore10changelogcorev104 corev112 sensucore11changelogcorev112 corev0260important sensucore12changelogcorev0260important"},{"title":"Enterprise Configuration","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/configuration","display_name":"Sensu Enterprise 2.7: Enterprise Configuration","content":"Sensu Enterprise service scripts make use of certain environment variable values to configure the Java runtime environment These settings take effect prior to Sensu Enterprise loading configuration files from disk as described in Sensu Configuration1 reference documentation Values for the environment variables described in this document should be set by editing etcdefaultsensuenterprise After changing values in this file the sensuenterprise service must be restarted before the new values can take effect Sensu Enterprise environment variables The Sensu Enterprise honors the following environment variables For configuration honored by both Sensu Enterprise and Sensu Core see the Sensu configuration reference documentation1 HEAPSIZE "},{"title":"Contact Routing","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/contact-routing","display_name":"Sensu Enterprise 2.7: Contact Routing","content":" Reference documentation What is contact routingwhatiscontactrouting How does contact routing workhowdoescontactroutingwork Contact Routing configurationcontactroutingconfiguration Example Contact Routing definitionexamplecontactroutingdefinition Contact Routing definition specificationcontactroutingdefinitionspecification CONTACT attributescontactattributes What is contact routing Every incident or outage has an ideal first responder a team or individual with the knowledge to triage and address the issue Sensu Enterprise contact routing makes it possible to assign checks to specific teams andor individuals reducing mean time to response and recovery MTTR Contact routing works with all of the Sensu Enterprise thirdparty notification and metric integrations How does contact routing work Sensu Enterprise contacts are defined in JSON configuration files which we recommend to store in the etcsensuconfdcontacts directory A contact is composed of a name and configuration overrides for one or more of Sensu Enterprises builtin integrations A contact in Sensu Enterprise is not too dissimilar from a contact on your phone which usually have a name and one or more identifiers for various communication channels eg a phone number email address Twitter username etc The following example contact definition provides overrides for the Sensu Enterprise email and Slack integration default configuration settings contacts support email to supportsensuappcom slack channel support Once defined Sensu Enterprise contacts are used the same way in which you use contacts on your phone ndash by selecting a communication channel eg phone call SMS email etc ndash and then selecting the contact With Sensu Enterprise contact routing the communication channels are builtin handlers integrations1 and the selection of which channel to use is managed by a check definition or client definition The following example check definition will use the builtin Sensu Enterprise email integration event handler notifying the support contact for any corresponding events checks examplecheck command dosomethingrb interval 30 handler email contact support Contact routing configuration Example contact routing definition The following is an example contact routing definition ie a contact a JSON configuration file located at etcsensuconfdcontactsopsjson contacts support pagerduty servicekey r3FPuDvNOTEDyQYCc7trBkymIFcy2NkE slack channel support username sensu Contact Routing definition specification Contact names Each contact routing definition has a unique contact name used for the definition key All contacts must be defined within the contacts configuration scope2 and comply with the following requirements A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex3 wmatchcheckname CONTACT attributes Contact routing attributes are configured within the contacts CONTACT configuration scope where CONTACT is a valid contact name3 Contact definition attributes are configuration overrides for builtin integrations eg Email4 Slack5 PagerDuty6 ServiceNow7 etc see the builtin handlers reference documentation1 for a complete listing EXAMPLES contactattributesexamples In most cases contact definitions are used to provide partial integration handler attribute overrides The following example only provides a to recipient attribute to override the default email integration configuration contacts support email to supportexamplecom However contact definitions are not limited to providing a single attribute mdash they can be used to provide multiple attributes or even complete integration handler definitions potentially overriding the entire default definition For example a contact could be used to provide an email integration definition to use an alternate SMTP server from the default configuration contacts support email smtp address smtpsupportexamplecom port 587 opensslverifymode none enablestarttlsauto true authentication plain username postmastersupportexamplecom password SECRET to supportsupportexamplecom from noreplysupportexamplecom 1 builtinhandlers 2 sensucore10referenceconfigurationconfigurationscopes 3 contactnames 4 integrationsemail 5 integrationsslack 6 integrationspagerduty 7 integrationsservicenow"},{"title":"Filters","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/filters/_index","display_name":"Sensu Enterprise 2.7: Filters","content":""},{"title":"check_dependencies","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/filters/check-dependencies","display_name":"Sensu Enterprise 2.7: check_dependencies","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification CHECK attributescheckattributes Overview The checkdependencies enterprise filter is used to filter events when an event already exists for a defined check dependency enabling the user to reduce notification noise and only be notified for the root cause of a given failure Check dependencies can be defined in the check definition using dependencies an array of checks eg checkapp or Sensu clientcheck pairs eg db01checkmysql Configuration Examples examples The following is an example of how to configure a check dependency for a check The example check monitors a web application API and has a dependency on another check that monitors the local MySQL database checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers webapplication interval 20 dependencies mysql The webapplicationapi check could depend on a check executed by another Sensu client in this example a Sensu client named db01 checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers webapplication interval 20 dependencies db01mysql The following is an example of how to apply the checkdependencies enterprise filter to a standard Sensu pipe handler handlers custommailer type pipe command custommailerrb filter checkdependencies Filter specification CHECK attributes The following attributes are configured within the checks CHECK configuration scope1 dependencies "},{"title":"handle_when","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/filters/handle-when","display_name":"Sensu Enterprise 2.7: handle_when","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification handlewhen attributeshandlewhenattributes Overview The handlewhen enterprise filter is used to reduce notification noise Users can define a minimum number of event occurrences before notifications will be sent Users can also specify a reset time in seconds to reset where recurrences are counted from to control when reminderupdate notifications are sent By default occurrences is set to 1 and reset is 1800 30 minutes The handlewhen filter is used by all of the enterprise thirdparty integrations1 Configuration Examples examples The following is an example of how to configure a check to only notify after 2 occurrences and send reminderupdate notifications every 20 minutes Sensu Enterprise integrations and standard event handlers using the handlewhen enterprise filter will have events filtered unless these conditions are met checks loadbalancerlisteners command checkhaproxyrb s varrunhaproxysock A subscribers loadbalancer interval 20 handlewhen occurrences 2 reset 1200 The following is an example of how to apply the handlewhen enterprise filter to a standard Sensu pipe handler handlers custommailer type pipe command custommailerrb filter handlewhen Filter specification handlewhen attributes handlewhenattributes The following attributes are configured within the handlewhen configuration scope2 occurrences "},{"title":"silence_stashes","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/filters/silence-stashes","display_name":"Sensu Enterprise 2.7: silence_stashes","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification"},{"title":"Integrations","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/_index","display_name":"Sensu Enterprise 2.7: Integrations","content":""},{"title":"Chef","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/chef","display_name":"Sensu Enterprise 2.7: Chef","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification chef attributeschefattributes Overview Deregister Sensu clients from the client registry if they no longer have associated Chef2 node data3 This integration can only work if Sensu clients are named using the Chef node name for the machine on which they reside The chef enterprise handler requires Chef Server API credentials the local chefclient configuration can be used as a reference Configuration Examples examples The following is an example global configuration for the chef enterprise handler integration chef endpoint httpsapichefioorganizationsexample flavor enterprise client i424242 key etcchefi424242pem sslpemfile etcchefsslpem sslverify true proxyaddress proxyexamplecom proxyport 8080 proxyusername chef proxypassword secret timeout 10 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition chef attributes4 which are included in event data5 chef attributes The following attributes are configured within the chef configuration scope6 endpoint "},{"title":"DataDog","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/datadog","display_name":"Sensu Enterprise 2.7: DataDog","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification datadog attributesdatadogattributes Overview Create Datadog2 events for Sensu events After managing your Datadog account API key3 configure the handler integration with your API key Configuration Examples examples The following is an example global configuration for the datadog enterprise event handler integration datadog apikey 9775a026f1ca7d1c6c5af9d94d9595a4 timeout 10 Integration Specification datadog attributes The following attributes are configured within the datadog configuration scope4 apikey "},{"title":"EC2","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/ec2","display_name":"Sensu Enterprise 2.7: EC2","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification ec2 attributesec2attributes Overview Deregister Sensu clients from the client registry if they no longer have an associated Amazon Web Services AWS2 EC2 instance in the allowed states This enterprise handler integration will only work if Sensu clients are named using the EC2 instance ID for the instance on which they reside The ec2 enterprise handler requires valid AWS IAM user credentials3 with the EC2 describe instances action in a policy eg ec2DescribeInstances Configuration Examples examples The following is an example global configuration for the ec2 enterprise handler integration ec2 region uswest2 accesskeyid AlygD0X6Z4Xr2m3gl70J secretaccesskey y9Jt5OqNOqdy5NCFjhcUsHMb6YqSbReLAJsy4d6obSZIWySv allowedinstancestates running timeout 10 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition ec2 attributes4 which are included in event data5 ec2 attributes The following attributes are configured within the ec2 configuration scope6 region "},{"title":"Email","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/email","display_name":"Sensu Enterprise 2.7: Email","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Custom email templatescustomemailtemplates Examplescustomemailtemplatesexample Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification email attributesemailattributes smtp attributessmtpattributes templates attributestemplatesattributes Overview Send email notifications for events using SMTP Custom email templates As of Sensu Enterprise version 23 the Sensu Enterprise email integration provides support for creating custom email templates using ERB a templating language based on Ruby Sensu Enterprise make an event variable available to the ERB template containing the complete event data payload4 NOTE the Puppet reference documentation provides a helpful introduction to ERB templating syntax5 Examples customemailtemplatesexample The following example demonstrates how to access the Sensu event variable from a custom ERB template Hi there Sensu has detected a monitoring event Please note the following details Client Check Output For more information please consult the Sensu Enterprise dashboard httpssensuexamplecomclientcheck monitoringlove Team Sensu Configuration Examples examples The following is an example configuration for the email enterprise event handler integration email smtp address smtpexamplecom port 587 opensslverifymode none enablestarttlsauto true authentication plain username postmasterexamplecom password SECRET to supportexamplecom from noreplyexamplecom timeout 10 Integration specification email attributes The following attributes are configured within the email configuration scope2 smtp "},{"title":"Event Stream","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/event_stream","display_name":"Sensu Enterprise 2.7: Event Stream","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification eventstream attributeseventstreamattributes Overview The event stream integrations sends all Sensu events2 to a remote TCP socket for complex event processing3 or stream processing andor longterm storage Configuration Examples examples The following is an example configuration for the eventstream enterprise event handler integration eventstream host 127001 port 3000 filtermetrics false Integration specification eventstream attributes eventstreamattributes host "},{"title":"Flapjack","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/flapjack","display_name":"Sensu Enterprise 2.7: Flapjack","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification flapjack attributesflapjackattributes Overview Relay Sensu results to Flapjack2 a monitoring notification routing and event processing system Flapjack uses Redis for event queuing this integration sends event data to Flapjack through Redis using the Flapjack event format NOTE checks DO NOT need to specify flapjack as an event handler as every check result will be relayed to Flapjack if the integration is configured Configuration Examples examples The following is an example global configuration for the flapjack enterprise integration flapjack host redisexamplecom port 6379 db 0 channel events filtermetrics false Integration Specification flapjack attributes The following attributes are configured within the flapjack configuration scope3 host "},{"title":"Graphite","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/graphite","display_name":"Sensu Enterprise 2.7: Graphite","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification graphite attributesgraphiteattributes Overview Send metrics to Graphite2 using the plaintext protocol over TCP The graphite enterprise handler is also capable of sending metrics to Hosted Graphite3 using the prefix attribute to prefix metric names with the Hosted Graphite API key This handler uses the outputformat mutator Configuration Examples examples The following is an example global configuration for the graphite enterprise handler integration graphite host graphiteexamplecom port 2003 prefixsource false prefix production Integration Specification graphite attributes The following attributes are configured within the graphite configuration scope4 host "},{"title":"Graylog","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/graylog","display_name":"Sensu Enterprise 2.7: Graylog","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification graylog attributesgraylogattributes Overview The integration sends event data to a Graylog2 RawPlaintext TCP input3 This integration requires a Graylog JSON extractor4 Configuration Examples examples The following is an example configuration for the graylog enterprise event handler integration graylog host 127001 port 5555 timeout 10 Integration specification graylog attributes host "},{"title":"HipChat","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/hipchat","display_name":"Sensu Enterprise 2.7: HipChat","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification hipchat attributeshipchatattributes Overview Send notifications to a HipChat2 room for events After creating a HipChat API token3 configure the handler integration with the provided API token Configuration Examples examples The following is an example global configuration for the hipchat enterprise event handler integration hipchat apitoken L7kVQzXF7c5eUMYUon6INaSVRDU8mP apiversion v2 username sensu room Operations timeout 10 Integration Specification hipchat attributes The following attributes are configured within the hipchat configuration scope4 apitoken "},{"title":"InfluxDB","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/influxdb","display_name":"Sensu Enterprise 2.7: InfluxDB","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification influxdb attributesinfluxdbattributes Overview Send metrics to InfluxDB2 using the InfluxDB HTTP API Configuration Examples examples The following is an example global configuration for the influxdb enterprise handler integration influxdb host 8888 port 8086 username root password Bfw3Bdrn5WfqvOl1 apiversion 09 Integration specification influxdb attributes The following attributes are configured within the influxdb configuration scope3 host "},{"title":"IRC","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/irc","display_name":"Sensu Enterprise 2.7: IRC","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification irc attributesircattributes Overview Send notifications to an Internet Relay Chat IRC channel for events Configuration Examples examples The following is an example global configuration for the irc enterprise event handler integration irc uri ircnickpassexamplecom6697ops ssl true nickservpassword NICKSERVPASSWORD channelpassword CHANNELPASSWORD join false timeout 10 Integration Specification irc attributes The following attributes are configured within the irc configuration scope2 url "},{"title":"JIRA","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/jira","display_name":"Sensu Enterprise 2.7: JIRA","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification jira attributesjiraattributes Overview Create and resolve Jira2 issues for Sensu events3 Configuration Examples examples The following is an example global configuration for the jira enterprise event handler integration jira host jiraexamplecom user admin password secret project Sensu timeout 10 Integration Specification jira attributes The following attributes are configured within the jira configuration scope4 host "},{"title":"Librato","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/librato","display_name":"Sensu Enterprise 2.7: Librato","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification librato attributeslibratoattributes Overview Send metrics to Librato2 Metrics using the HTTP API Configuration Examples examples The following is an example global configuration for the librato enterprise handler integration librato email supportexamplecom apikey 90SHpjPOFqd2YJFIX9rzDq7ik6CiDmqu2AvqcXJAX3buIwcOGqIOgNilwKMjpStO Integration Specification librato attributes The following attributes are configured within the librato configuration scope3 email "},{"title":"OpenTSDB","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/opentsdb","display_name":"Sensu Enterprise 2.7: OpenTSDB","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification opentsdb attributesopentsdbattributes Overview Send metrics to OpenTSDB2 using the telnet protocol over TCP This handler uses the outputformatmutator Configuration Examples examples The following is an example global configuration for the opentsdb enterprise handler integration opentsdb host opentsdbexamplecom port 4242 taghost true Integration Specification opentsdb attributes The following attributes are configured within the opentsdb configuration scope3 host "},{"title":"OpsGenie","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/opsgenie","display_name":"Sensu Enterprise 2.7: OpsGenie","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification opsgenie attributesopsgenieattributes Overview Create and close OpsGenie2 alerts for events Configuration Examples examples The following is an example global configuration for the opsgenie enterprise event handler integration opsgenie apikey eed02a0d85a4427b851a18dd8fd80d93 source Sensu Enterprise AWS teams ops web recipients afterhours tags production overwritesquiethours true timeout 10 Integration Specification opsgenie attributes The following attributes are configured within the opsgenie configuration scope3 apikey "},{"title":"PagerDuty","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/pagerduty","display_name":"Sensu Enterprise 2.7: PagerDuty","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification pagerduty attributespagerdutyattributes Overview Create and resolve PagerDuty2 incidents for events After configuring a service in PagerDuty3 configure the handler integration with the provided service key Configuration Examples examples The following is an example global configuration for the pagerduty enterprise event handler integration pagerduty servicekey r3FPuDvNOTEDyQYCc7trBkymIFcy2NkE timeout 10 Integration Specification pagerduty attributes The following attributes are configured within the pagerduty configuration scope4 servicekey "},{"title":"Puppet","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/puppet","display_name":"Sensu Enterprise 2.7: Puppet","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification puppet attributespuppetattributes ssl attributessslattributes Overview Deregister Sensu clients from the client registry if they no longer have an associated Puppet2 node The puppet enterprise handler requires access to a SSL truststore and keystore containing a valid and whitelisted Puppet certificate private key and CA The local Puppet agent certificate private key and CA can be used Configuration Examples examples The following is an example global configuration for the puppet enterprise handler integration puppet endpoint https1001128081pdbqueryv4nodes ssl keystorefile etcsensusslpuppetkeystorejks keystorepassword secret truststorefile etcsensusslpuppettruststorejks truststorepassword secret timeout 10 The Puppet enterprise handler is most commonly used as part of the keepalive set handler For example handlers keepalive type set handlers pagerduty puppet When querying PuppetDB for a node by default Sensu will use the Sensu clients name for the Puppet node name Individual Sensu clients can override the name of their corresponding Puppet node using specific client definition attributes The following is an example client definition specifying its Puppet node name client name i424242 address 8888 subscriptions production webserver puppet nodename webserver01examplecom Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition puppet attributes3 which are included in event data4 puppet attributes The following attributes are configured within the puppet configuration scope5 endpoint "},{"title":"Rollbar","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/rollbar","display_name":"Sensu Enterprise 2.7: Rollbar","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification rollbar attributesrollbarattributes Overview Create and resolve Rollbar2 messagesitems for Sensu events3 Configuration Examples examples The following is an example global configuration for the rollbar enterprise event handler integration rollbar accesstokenread 2ae6bccccf534b9c8749a4327671e711 accesstokenwrite 944872fdbfba40c48305fc8cd73707b5 accesstokenpatch f34948101a714661a83dcd8dbe6a167a timeout 30 Integration Specification rollbar attributes The following attributes are configured within the rollbar configuration scope4 accesstokenread "},{"title":"ServiceNow","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/servicenow","display_name":"Sensu Enterprise 2.7: ServiceNow","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification servicenow attributesservicenowattributes Overview Create ServiceNow2 configuration items3 upon Sensu client registration4 createresolve ServiceNow incidents andor create ServiceNow events for Sensu events5 Configuration Examples examples The following is an example global configuration for the servicenow enterprise event handler integration servicenow host dev42servicenowcom user admin password secret createcmdbci true cmdbcitable cmdbciserver incidentmanagement true incidenttable incident timeout 10 When creating ServiceNow configuration items6 by default Sensu will use the clients name for the item name Individual Sensu clients can override the name of their corresponding configuration item using specific client definition attributes In addition to specifying a item name any valid CMDB table attributes fields values may also be set eg osversion The following is an example client definition7 specifying its ServiceNow configuration item attributes client name i424242 address 8888 subscriptions production webserver servicenow configurationitem name webserver01examplecom osversion 1404 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition servicenow attributes8 which are included in event data9 servicenow attributes The following attributes are configured within the servicenow configuration scope10 host "},{"title":"Slack","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/slack","display_name":"Sensu Enterprise 2.7: Slack","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification slack attributesslackattributes Overview Send notifications to a Slack2 channel for events After configuring an incoming webhook in Slack3 configure the handler integration with the provided webhook url Configuration Examples examples The following is an example global configuration for the slack enterprise event handler integration slack webhookurl httpshooksslackcomservicesIB6JgRmRJeL7Hgo6kFCckJm8E4Yt8X3i6QRKHWBekc username sensu channel ops timeout 10 Integration Specification slack attributes The following attributes are configured within the slack configuration scope4 webhookurl "},{"title":"SNMP","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/snmp","display_name":"Sensu Enterprise 2.7: SNMP","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Sensu Enterprise MIBssensuenterprisemibs Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification snmp attributessnmpattributes Overview Send SNMP traps to a SNMP manager Sensu Enterprise provides two SNMP MIB management information base modules for this integration The SNMP integration is capable of creating either SNMPv1 or SNMPv2 traps for Sensu events By default SNMPv2 traps are created unless the integration is configured for SNMPv1 eg version 1 The SNMP manager that will be receiving SNMP traps from Sensu Enterprise should load the appropriate provided MIBs The Sensu Enterprise SNMP MIB files can be altered to better fit certain environments and SNMP configurations Sensu Enterprise MIBs SNMPv1 MIBs RFC1212MIBtxtfilesRFC1212MIBtxt RFC1215MIBtxtfilesRFC1215MIBtxt SENSUENTERPRISEV1MIBtxtfilesSENSUENTERPRISEV1MIBtxt SNMPv2 MIBs SENSUENTERPRISEROOTMIBtxtfilesSENSUENTERPRISEROOTMIBtxt SENSUENTERPRISENOTIFYMIBtxtfilesSENSUENTERPRISENOTIFYMIBtxt Configuration Examples examples The following is an example global configuration for the snmp enterprise event handler integration snmp host 8888 port 162 community public version 2 varbindtrim 200 Integration Specification snmp attributes The following attributes are configured within the snmp configuration scope2 host "},{"title":"VictorOps","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/victorops","display_name":"Sensu Enterprise 2.7: VictorOps","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification victorops attributesvictoropsattributes Overview Create VictorOps2 messages for events Configuration Examples examples The following is an example global configuration for the victorops enterprise event handler integration victorops apikey a53265cdd2effa32fc54de52659a routingkey everyone timeout 10 Integration Specification victorops attributes The following attributes are configured within the victorops configuration scope3 apikey "},{"title":"Wavefront","product":"Sensu Enterprise","version":"2.7","location":"/sensu-enterprise/2.7/integrations/wavefront","display_name":"Sensu Enterprise 2.7: Wavefront","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configuring a Wavefront Proxyconfiguringawavefrontproxy Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification wavefront attributeswavefrontattributes Overview Send metrics to Wavefront2 using the Wavefront Data Format4 This handler uses the outputformat mutator Configuring a Wavefront Proxy To install and configure a Wavefront Proxy to receive metrics from Sensu Enterprise please refer to the Wavefront Proxy setup documentation5 Configuration Examples examples The following is an example global configuration for the wavefront enterprise handler integration wavefront host wavefrontexamplecom port 2878 Integration Specification wavefront attributes The following attributes are configured within the wavefront configuration scope3 host "},{"title":"Sensu Enterprise","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/_index","display_name":"Sensu Enterprise 2.8: Sensu Enterprise","content":" Overview What is Sensu Enterprisewhatissensuenterprise Upgrading to Sensu Enterpriseupgradingtosensuenterprise What is Sensu Enterprise Sensu Enterprise1 is a dropin replacement for Sensu Core the FREE open source version of Sensu that provides addedvalue features like contact routing2 several builtin thirdparty integrations3 and more Sensu Enterprise also includes FREE annual training4 and enterpriseclass support5 We like to think of the distinction between Sensu Core and Sensu Enterprise as the difference between a framework and a product The purpose of this documentation is to help Sensu Enterprise users configure their installation making use of the many thirdparty integrations and features Sensu Enterprise has to offer Sensu Enterprise integrates with thirdparty tools services to provide support for creatingresolving incidents oncall rotation scheduling storing time series data metrics relaying events deregistering sensuclients for terminated nodes andor notifying contacts via various media Upgrading to Sensu Enterprise Sensu Enterprise is designed to be a dropin replacement for the Sensu Core server6 and API7 so for users who are upgrading to Sensu Enterprise from Sensu Core no configuration changes are required to resume simply terminate the sensuserver and sensuapi processes and start the sensuenterprise process to resume operation of Sensu see the Sensu Server and API installation guide8 for additional details However some configuration changes may be required to take advantage of certain thirdparty integrations or addedvalue features eg contact routing Please refer to the Sensu Enterprise reference documentation9 below for more information 1 sensuenterprise 2 contactrouting 3 builtinhandlers 4 training 5 httpssensuapporgsupport 6 sensucore12referenceserver 7 sensucore12apioverview 8 installationinstallsensuserverapisensuenterprise"},{"title":"Enterprise API","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/api","display_name":"Sensu Enterprise 2.8: Enterprise API","content":" Reference documentation What is the Sensu Enterprise APIwhatisthesensuenterpriseapi Enterprise API Configurationenterpriseapiconfiguration Examplesexamples API specificationapispecification api attributesapiattributes ssl attributessslattributes Create an SSL keystorecreateansslkeystore Configure the Enterprise API for SSLconfiguretheenterpriseapiforssl"},{"title":"Built-in Filters","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/built-in-filters","display_name":"Sensu Enterprise 2.8: Built-in Filters","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation What are builtin filterswhatarebuiltinfilters Using builtin filtersusingbuiltinfilters Using multiple builtin filtersusingmultiplebuiltinfilters What are builtin filters Sensu Enterprise has several builtin event filters used by many of the thirdparty integrations and made available to standard Sensu event handlers These enterprise filters can be used to combat alert fatigue Builtin filters usingbuiltinfilters Please refer to the reference documentation for each of the following builtin filters for more information on how to use them handlewhenfiltershandlewhen silencestashesfilterssilencestashes checkdependenciesfilterscheckdependencies Using multiple builtin filters Multiple enterprise filters can be applied to standard Sensu event handlers The following example event handler uses the handlewhen and silencestashes event filters handlers custommailer type pipe command custommailerrb filters handlewhen silencestashes 0 sensuenterprise"},{"title":"Built-in Handlers","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/built-in-handlers","display_name":"Sensu Enterprise 2.8: Built-in Handlers","content":"ENTERPRISE Builtin handlers are available for Sensu Enterprise0 users only Reference documentation What are builtin handlerswhatarebuiltinhandlers How to use builtin handlershowtousebuiltinhandlers Examplesexampleintegrationconfigurations List of builtin handlerslistofbuiltinhandlers What are builtin Handlers Sensu Enterprise ships with several builtin thirdparty integrations which provide Sensu event handlers1 These builtin handlers can be used to handle events for any check2 The Enterprise integrations use their own global configuration namespaces in combination with enterprise contact routing3 to provide granular controls over how events should be handled in a variety of circumstances How to use builtin handlers After configuring one or more enterprise handlers4 you can specify which ones are used per check or create a default handler set to specify those used by default Examples exampleintegrationconfigurations The following is an example of how to configure a Sensu check to use the builtin email integration ie Enterprise handler etcsensuconfdchecksloadbalancerlistenersjson checks loadbalancerlisteners command checkhaproxyrb s varrunhaproxysock A subscribers loadbalancer interval 20 handler email The following is an example of how to configure the Sensu default handler in order to specify one or more builtin enterprise handlers The default handler is used when a check definition does not specify one or more event handlers This example specifies the builtin email and slack enterprise handlers etcsensuconfdhandlersdefaultjson handlers default type set handlers email slack List of builtin handlers Builtin event handlers Emailintegrationsemail send email notifications for events PagerDutyintegrationspagerduty create and resolve PagerDuty incidents for events ServiceNowintegrationsservicenow create ServiceNow CMDB configuration items and incidents JIRAintegrationsjira create and resolve JIRA issues for Sensu events VictorOpsintegrationsvictorops create and resolve VictorOps messages for events OpsGenieintegrationsopsgenie create and close OpsGenie alerts for events Slackintegrationsslack send notifications to a Slack channel for events HipChatintegrationshipchat send notifications to a HipChat room for events IRCintegrationsirc send notifications to an IRC channel for events SNMPintegrationssnmp send SNMP traps to a SNMP manager Graylogintegrationsgraylog send Sensu events to Graylog Flapjackintegrationsflapjack relay Sensu check results to Flapjack Puppetintegrationspuppet deregister Sensu clients without an associated Puppet node Chefintegrationschef deregister Sensu clients without an associated Chef node EC2integrationsec2 deregister Sensu clients without an allowed EC2 instance state Event Streamintegrationseventstream send all Sensu events to a remote TCP socket InfluxDBintegrationsinfluxdb send metrics to InfluxDB Graphiteintegrationsgraphite send metrics to Graphite Wavefrontintegrationswavefront send metrics to Wavefront Libratointegrationslibrato send metrics to Librato Metrics OpenTSDBintegrationsopentsdb send metrics to OpenTSDB DataDogintegrationsdatadog create Datadog events 0 sensuenterprise 1 sensucore12referencehandlers 2 sensucore12referencechecks 3 contactrouting 4 listofbuiltinhandlers"},{"title":"Built-in Mutators","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/built-in-mutators","display_name":"Sensu Enterprise 2.8: Built-in Mutators","content":"ENTERPRISE Builtin mutators are available for Sensu Enterprise0 users only Sensu Core ships with a set of builtin mutators1 for transforming event data into JSON Ruby Hash or extracting check output Sensu Enterprise comes with additional mutators enabling thirdparty integrations and providing event handler authors with a set of supported tools with well defined specifications Enterprise mutators The outputformat mutator outputformat Sensu Enterprise simplifies the process of gaining insightful metrics from complex distributed systems The outputformat enterprise mutator makes it possible to mutate collected metrics in various formats from disparate data sources into a proprietary intermediate format2 that has been optimized for portability The outputformat enterprise mutator extracts metrics from check result output Users can specify an output format per check enabling the use of various check plugins Nagios plugins etc and data sources The outputformat mutator currently supports several popular specifications InfluxDB line protocol8 Graphite Plaintext3 Nagios PerfData4 OpenTSDB5 Wavefront Data Format9 Metrics 20 as a wire format6 Wizardvan JSON7 Example outputformat filter configuration The following is an example of how to configure an output format for a metric collection check one that is making use of a Nagios plugin This example check not only monitors NTP but also collects several metrics Note the multiple event handlers one for notifications pagerduty another for metric storage graphite checks ntp command usrlibnagiospluginscheckntp H timenrcca subscribers production interval 20 outputformat nagiosperfdata handlers pagerduty graphite Definition attributes sensumetricformat outputformat "},{"title":"CHANGELOG","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/changelog","display_name":"Sensu Enterprise 2.8: CHANGELOG","content":"NOTE Sensu Enterprise is built on Sensu Core Sensu Core changes are documented in the Sensu Core changelogcorechangelog Releases Enterprise 280 Release Notesenterprisev280 Enterprise 270 Release Notesenterprisev270 Enterprise 266 Release Notesenterprisev266 Enterprise 265 Release Notesenterprisev265 Enterprise 264 Release Notesenterprisev264 Enterprise 263 Release Notesenterprisev263 Enterprise 262 Release Notesenterprisev262 Enterprise 261 Release Notesenterprisev261 Enterprise 260 Release Notesenterprisev260 Enterprise 252 Release Notesenterprisev252 Enterprise 251 Release Notesenterprisev251 Enterprise 250 Release Notesenterprisev250 Enterprise 240 Release Notesenterprisev240 Enterprise 231 Release Notesenterprisev231 Enterprise 230 Release Notesenterprisev230 Enterprise 220 Release Notesenterprisev220 Enterprise 210 Release Notesenterprisev210 Enterprise 200 Release Notesenterprisev200 Enterprise 1147 Release Notesenterprisev1147 Enterprise 1146 Release Notesenterprisev1146 Enterprise 1145 Release Notesenterprisev1145 Enterprise 1144 Release Notesenterprisev1144 Enterprise 1143 Release Notesenterprisev1143 Enterprise 1142 Release Notesenterprisev1142 Enterprise 1141 Release Notesenterprisev1141 Enterprise 1140 Release Notesenterprisev1140 Enterprise 1130 Release Notesenterprisev1130 Enterprise 280 Release Notes enterprisev280 December 18 2017 mdash Sensu Enterprise version 280 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev280changes IMPROVEMENT Built on Sensu Core 120corev120 IMPROVEMENT The InfluxDB and Graphite integrations now support event annotations for adding Sensu event context to graphs Any check even those that do not produce metrics can now use the influxdb and graphite event handlers to record their events in the respective timeseries database IMPROVEMENT The Slack integration now supports using an ERB template for notification Slack attachment text eg filters text etcsensuslacktexterb IMPROVEMENT The Email integration now supports HTML body content with a configurable email content type eg contenttype texthtml IMPROVEMENT The InfluxDB OpenTSDB and Wavefront integrations now support configurable tags which get added to every metric point eg tags dc uscentral1 IMPROVEMENT The Event Stream integration now supports filtering OK keepalives eg filterokkeepalives true Enterprise 270 Release Notes enterprisev270 November 20 2017 mdash Sensu Enterprise version 270 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev270changes IMPROVEMENT Now built on Sensu Core 112corev112 IMPROVEMENT Integrations now include event data in logged error messages BUGFIX Integrations now use the configured value for apibind setting when using the API Enterprise 266 Release Notes enterprisev266 October 27 2017 mdash Sensu Enterprise version 266 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev266changes BUGFIX API metrics endpoint no longer returns a 404 for missing metrics instead responding with an empty set Enterprise 265 Release Notes enterprisev265 October 17 2017 mdash Sensu Enterprise version 265 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev265changes IMPROVEMENT Now built on Sensu Core 104corev104 IMPROVEMENT Service scripts now honor SENSUOPTS environment variable for appending Sensu command line arguments when running Sensu Enterprise Enterprise 264 Release Notes enterprisev264 October 15 2017 mdash Sensu Enterprise version 264 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev264changes IMPROVEMENT General performance improvements Enterprise 263 Release Notes enterprisev263 September 29 2017 mdash Sensu Enterprise version 263 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev263changes IMPROVEMENT JIRA issue type is now configurable See JIRA integration documentation9 for details Enterprise 262 Release Notes enterprisev262 September 20 2017 mdash Sensu Enterprise version 262 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev262changes IMPROVEMENT Now using JRuby 91130 for bug fixes and performance improvements IMPROVEMENT The SNMP integration trap varbind value trim length is now configurable via the SNMP integration definition attribute varbindtrim eg varbindtrim 300 The default value is still 100 characters The networks UDP MTU dictates the maximum trap payload size Enterprise 261 Release Notes enterprisev261 September 12 2017 mdash Sensu Enterprise version 261 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev261changes IMPROVEMENT The Hipchat integration can now send notifications directly to a user To send notifications to a specific user instead of a room use the hipchat definition attribute user eg user portertech IMPROVEMENT Contact routing now supports disabling specific integrations per contact disabling the global configuration fallback To disable an integration for a contact set its value to false eg contacts ops email false Enterprise 260 Release Notes enterprisev260 July 27 2017 mdash Sensu Enterprise version 260 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev260changes IMPROVEMENT Built on Sensu Core 102corev102 IMPROVEMENT Added support for contact routing to every metric integration eg InfluxDB Graphite OpenTSDB etc IMPROVEMENT Sensu Enterprise now loads configuration and validates it prior to reloading SIGHUP If configuration is determined to be invalid prior to reloading Sensu will report invalid configuration definitions and it will continue to run with its existing working configuration IMPROVEMENT Using JRuby 91120 for performance enhancements and bug fixes IMPROVEMENT Wavefront integration prefix option supporting a custom metric name prefix IMPROVEMENT Added Enterprise version to API info Enterprise 252 Release Notes enterprisev252 March 24 2017 mdash Sensu Enterprise version 252 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev252changes IMPROVEMENT Built on Sensu Core 0285corev0285 IMPROVEMENT Improved OpsGenie integration API request debug logging Enterprise 251 Release Notes enterprisev251 March 13 2017 mdash Sensu Enterprise version 251 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev251changes IMPROVEMENT Built on Sensu Core 0284corev0284 Enterprise 250 Release Notes enterprisev250 February 24 2017 mdash Sensu Enterprise version 250 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev250changes IMPROVEMENT Built on Sensu Core 0280corev0280 IMPROVEMENT Added OpenTSDB integration prefixsource and prefix options BUGFIX Contact routing array values now properly override the configured defaultglobal integration values Enterprise 240 Release Notes enterprisev240 February 17 2017 mdash Sensu Enterprise version 240 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev240changes IMPROVEMENT Built on Sensu Core 0271corev0271 Enterprise 231 Release Notes enterprisev231 January 31 2017 mdash Sensu Enterprise version 231 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev231changes IMPROVEMENT The Slack integration now supports messages with up to 8000 characters Enterprise 230 Release Notes enterprisev230 January 25 2017 mdash Sensu Enterprise version 230 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev230changes NEW Added Wavefront integration send metrics to Wavefront in the Wavefront Data Format NEW The Hipchat integration now adds a notify attribute to trigger HipChat user notifications NEW The Email integration now supports custom templates for email subject and body NEW The Sensu Enterprise outputformat mutator now supports two additional metric formats InfluxDB Line Protocol and the Wavefront Data Format IMPROVEMENT Now using JRuby 9170 for bugfixes and improved performance Enterprise 220 Release Notes enterprisev220 January 12 2017 mdash Sensu Enterprise version 220 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev220changes NEW Added JIRA integration create and resolve issues for Sensu events NEW Added Rollbar integration create and resolve messagesitems for Sensu events NEW The Slack integration now adds a notification field to attachments when one is provided in the event check definition IMPROVEMENT Metric integration metric format mutation performance improvements IMPROVEMENT Opsgenie integration now uses a differentimproved HTTP client BUGFIX Opsgenie integration now uses a string for alert tags multiple tags are comma delimited Enterprise 210 Release Notes enterprisev210 November 17 2016 mdash Sensu Enterprise version 210 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev210changes NEW ServiceNow Event Management support create ServiceNow events for Sensu events Enterprise 200 Release Notes enterprisev200 October 25 2016 mdash Sensu Enterprise version 200 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev200important This Enterprise release is built upon Sensu Core 026corev0260 which includes potentially breaking backwardsincompatible changes For more information please refer to the Sensu Core 0260 Important Changescorev0260important CHANGES enterprisev200changes NEW Built on Sensu Core version 0265corev0265 Enterprise 1147 Release Notes enterprisev1147 July 28 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1147changes NEW Built on Sensu Core version 0256corev0256 Enterprise 1146 Release Notes enterprisev1146 July 26 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1146changes BUGFIX Added newline event delimiter to event stream integration Enterprise 1145 Release Notes enterprisev1145 July 20 2016 mdash Sensu Enterprise version 1145 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1145changes NEW Built on Sensu Core version 0255corev0255 Enterprise 1144 Release Notes enterprisev1144 June 30 2016 mdash Sensu Enterprise version 1144 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1144changes BUGFIX Use Java SecureRandom in lieu of JRuby SecureRandom to ensure UUID generation is nonblocking BUGFIX Catch unexpected exceptions thrown by API HTTPHandler respond method Enterprise 1143 Release Notes enterprisev1143 June 17 2016 mdash Sensu Enterprise version 1143 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1143changes NEW Built on Sensu Core version 0253corev0253 Enterprise 1142 Release Notes enterprisev1142 June 16 2016 mdash Sensu Enterprise version 1142 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1142changes IMPROVEMENT The Enterprise Email integration now uses TLSv12 for STARTTLS and supports additional SSL ciphers Enterprise 1141 Release Notes enterprisev1141 June 16 2016 mdash Sensu Enterprise version 1141 has been released and is available for immediate download Please note the following improvements CHANGES enterprisev1141changes NEW Built on Sensu Core version 0252corev0252 Enterprise 1140 Release Notes enterprisev1140 June 15 2016 mdash Sensu Enterprise version 1140 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev1140important This release includes potentially breaking backwardsincompatible changes This is the first Sensu Enterprise release based on Sensu Core version 025x Please refer to the Sensu Core version 0250 release notescorev0250 below for additional information on potentially breaking changes CHANGES enterprisev1140changes NEW Built on Sensu Core version 0251corev0251 IMPROVEMENT Significant Enterprise metric API route performance improvements reducing network IO CPU and memory utilization IMPROVEMENT Reduced Enterprise metric retention from 4 hours to 1 hour as the Enterprise Console HUD currently only displays 30 minutes of data Enterprise 1130 Release Notes enterprisev1130 June 9 2016 mdash Sensu Enterprise version 1130 has been released and is available for immediate download Please note the following improvements IMPORTANT enterprisev1130important This release includes potentially breaking backwardsincompatible changes This is the first Sensu Enterprise release based on Sensu Core version 024x Please refer to the Sensu Core version 0240corev0240 release notes for additional information on potentially breaking changes This release requires Sensu Enterprise Dashboard 198 or higher CHANGES enterprisev1130changes NEW Built on Sensu Core 0241corev0241 NEW Event Stream integrationeventstreamintegration The Sensu Enterprise event stream integration sends all Sensu events to a remote TCP socket for complex event processing eg stream processing andor longterm storage Please refer to the Event Stream integration reference documentation39 for additional information NEW Graylog integrationgraylogintegration The Sensu Enterprise Graylog integration sends Sensu events to a a Graylog RawPlaintext TCP input Please refer to the Graylog integration reference documentation40 for additional information IMPROVEMENT ServiceNow integrationservicenowintegration adds support for configurable incident table name previously hardcoded to incident for organizations with customized ServiceNow configurations IMMPROVEMENT Built on JRuby 9K corechangelog sensucore12changelog corev0240 sensucore10changelogcorev0240 corev0241 sensucore10changelogcorev0241 eventstreamintegration integrationseventstream graylogintegration integrationsgraylog servicenowintegration integrationsservicenow corev0250 sensucore10changelogcorev0250 corev0251 sensucore10changelogcorev0251 corev0252 sensucore10changelogcorev0252 corev0253 sensucore10changelogcorev0253 corev0254 sensucore10changelogcorev0254 corev0255 sensucore10changelogcorev0255 corev0256 sensucore10changelogcorev0256 corev0260 sensucore10changelogcorev0260 corev0265 sensucore10changelogcorev0265 corev0271 sensucore10changelogcorev0271 corev0280 sensucore10changelogcorev0280 corev0284 sensucore10changelogcorev0284 corev0285 sensucore10changelogcorev0285 corev102 sensucore10changelogcorev102 corev104 sensucore10changelogcorev104 corev112 sensucore11changelogcorev112 corev120 sensucore12changelogcorev120 corev0260important sensucore12changelogcorev0260important"},{"title":"Enterprise Configuration","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/configuration","display_name":"Sensu Enterprise 2.8: Enterprise Configuration","content":"Sensu Enterprise service scripts make use of certain environment variable values to configure the Java runtime environment These settings take effect prior to Sensu Enterprise loading configuration files from disk as described in Sensu Configuration1 reference documentation Values for the environment variables described in this document should be set by editing etcdefaultsensuenterprise After changing values in this file the sensuenterprise service must be restarted before the new values can take effect Sensu Enterprise environment variables The Sensu Enterprise honors the following environment variables For configuration honored by both Sensu Enterprise and Sensu Core see the Sensu configuration reference documentation1 HEAPSIZE "},{"title":"Contact Routing","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/contact-routing","display_name":"Sensu Enterprise 2.8: Contact Routing","content":" Reference documentation What is contact routingwhatiscontactrouting How does contact routing workhowdoescontactroutingwork Contact Routing configurationcontactroutingconfiguration Example Contact Routing definitionexamplecontactroutingdefinition Contact Routing definition specificationcontactroutingdefinitionspecification CONTACT attributescontactattributes What is contact routing Every incident or outage has an ideal first responder a team or individual with the knowledge to triage and address the issue Sensu Enterprise contact routing makes it possible to assign checks to specific teams andor individuals reducing mean time to response and recovery MTTR Contact routing works with all of the Sensu Enterprise thirdparty notification and metric integrations How does contact routing work Sensu Enterprise contacts are defined in JSON configuration files which we recommend to store in the etcsensuconfdcontacts directory A contact is composed of a name and configuration overrides for one or more of Sensu Enterprises builtin integrations A contact in Sensu Enterprise is not too dissimilar from a contact on your phone which usually have a name and one or more identifiers for various communication channels eg a phone number email address Twitter username etc The following example contact definition provides overrides for the Sensu Enterprise email and Slack integration default configuration settings contacts support email to supportsensuappcom slack channel support Once defined Sensu Enterprise contacts are used the same way in which you use contacts on your phone ndash by selecting a communication channel eg phone call SMS email etc ndash and then selecting the contact With Sensu Enterprise contact routing the communication channels are builtin handlers integrations1 and the selection of which channel to use is managed by a check definition or client definition The following example check definition will use the builtin Sensu Enterprise email integration event handler notifying the support contact for any corresponding events checks examplecheck command dosomethingrb interval 30 handler email contact support Contact routing configuration Example contact routing definition The following is an example contact routing definition ie a contact a JSON configuration file located at etcsensuconfdcontactsopsjson contacts support pagerduty servicekey r3FPuDvNOTEDyQYCc7trBkymIFcy2NkE slack channel support username sensu Contact Routing definition specification Contact names Each contact routing definition has a unique contact name used for the definition key All contacts must be defined within the contacts configuration scope2 and comply with the following requirements A unique string used to nameidentify the check Cannot contain special characters or spaces Validated with Ruby regex3 wmatchcheckname CONTACT attributes Contact routing attributes are configured within the contacts CONTACT configuration scope where CONTACT is a valid contact name3 Contact definition attributes are configuration overrides for builtin integrations eg Email4 Slack5 PagerDuty6 ServiceNow7 etc see the builtin handlers reference documentation1 for a complete listing EXAMPLES contactattributesexamples In most cases contact definitions are used to provide partial integration handler attribute overrides The following example only provides a to recipient attribute to override the default email integration configuration contacts support email to supportexamplecom However contact definitions are not limited to providing a single attribute mdash they can be used to provide multiple attributes or even complete integration handler definitions potentially overriding the entire default definition For example a contact could be used to provide an email integration definition to use an alternate SMTP server from the default configuration contacts support email smtp address smtpsupportexamplecom port 587 opensslverifymode none enablestarttlsauto true authentication plain username postmastersupportexamplecom password SECRET to supportsupportexamplecom from noreplysupportexamplecom 1 builtinhandlers 2 sensucore12referenceconfigurationconfigurationscopes 3 contactnames 4 integrationsemail 5 integrationsslack 6 integrationspagerduty 7 integrationsservicenow"},{"title":"Filters","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/filters/_index","display_name":"Sensu Enterprise 2.8: Filters","content":""},{"title":"check_dependencies","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/filters/check-dependencies","display_name":"Sensu Enterprise 2.8: check_dependencies","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification CHECK attributescheckattributes Overview The checkdependencies enterprise filter is used to filter events when an event already exists for a defined check dependency enabling the user to reduce notification noise and only be notified for the root cause of a given failure Check dependencies can be defined in the check definition using dependencies an array of checks eg checkapp or Sensu clientcheck pairs eg db01checkmysql Configuration Examples examples The following is an example of how to configure a check dependency for a check The example check monitors a web application API and has a dependency on another check that monitors the local MySQL database checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers webapplication interval 20 dependencies mysql The webapplicationapi check could depend on a check executed by another Sensu client in this example a Sensu client named db01 checks webapplicationapi command checkhttprb u httpslocalhost8080apiv1health subscribers webapplication interval 20 dependencies db01mysql The following is an example of how to apply the checkdependencies enterprise filter to a standard Sensu pipe handler handlers custommailer type pipe command custommailerrb filter checkdependencies Filter specification CHECK attributes The following attributes are configured within the checks CHECK configuration scope1 dependencies "},{"title":"handle_when","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/filters/handle-when","display_name":"Sensu Enterprise 2.8: handle_when","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification handlewhen attributeshandlewhenattributes Overview The handlewhen enterprise filter is used to reduce notification noise Users can define a minimum number of event occurrences before notifications will be sent Users can also specify a reset time in seconds to reset where recurrences are counted from to control when reminderupdate notifications are sent By default occurrences is set to 1 and reset is 1800 30 minutes The handlewhen filter is used by all of the enterprise thirdparty integrations1 Configuration Examples examples The following is an example of how to configure a check to only notify after 2 occurrences and send reminderupdate notifications every 20 minutes Sensu Enterprise integrations and standard event handlers using the handlewhen enterprise filter will have events filtered unless these conditions are met checks loadbalancerlisteners command checkhaproxyrb s varrunhaproxysock A subscribers loadbalancer interval 20 handlewhen occurrences 2 reset 1200 The following is an example of how to apply the handlewhen enterprise filter to a standard Sensu pipe handler handlers custommailer type pipe command custommailerrb filter handlewhen Filter specification handlewhen attributes handlewhenattributes The following attributes are configured within the handlewhen configuration scope2 occurrences "},{"title":"silence_stashes","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/filters/silence-stashes","display_name":"Sensu Enterprise 2.8: silence_stashes","content":"ENTERPRISE Builtin filters are available for Sensu Enterprise0 users only Reference documentation Overviewoverview Configurationconfiguration Examplesexamples Filter specificationfilterspecification"},{"title":"Integrations","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/_index","display_name":"Sensu Enterprise 2.8: Integrations","content":""},{"title":"Chef","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/chef","display_name":"Sensu Enterprise 2.8: Chef","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification chef attributeschefattributes Overview Deregister Sensu clients from the client registry if they no longer have associated Chef2 node data3 This integration can only work if Sensu clients are named using the Chef node name for the machine on which they reside The chef enterprise handler requires Chef Server API credentials the local chefclient configuration can be used as a reference Configuration Examples examples The following is an example global configuration for the chef enterprise handler integration chef endpoint httpsapichefioorganizationsexample flavor enterprise client i424242 key etcchefi424242pem sslpemfile etcchefsslpem sslverify true proxyaddress proxyexamplecom proxyport 8080 proxyusername chef proxypassword secret timeout 10 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition chef attributes4 which are included in event data5 chef attributes The following attributes are configured within the chef configuration scope6 endpoint "},{"title":"DataDog","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/datadog","display_name":"Sensu Enterprise 2.8: DataDog","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification datadog attributesdatadogattributes Overview Create Datadog2 events for Sensu events After managing your Datadog account API key3 configure the handler integration with your API key Configuration Examples examples The following is an example global configuration for the datadog enterprise event handler integration datadog apikey 9775a026f1ca7d1c6c5af9d94d9595a4 timeout 10 Integration Specification datadog attributes The following attributes are configured within the datadog configuration scope4 apikey "},{"title":"EC2","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/ec2","display_name":"Sensu Enterprise 2.8: EC2","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification ec2 attributesec2attributes Overview Deregister Sensu clients from the client registry if they no longer have an associated Amazon Web Services AWS2 EC2 instance in the allowed states This enterprise handler integration will only work if Sensu clients are named using the EC2 instance ID for the instance on which they reside The ec2 enterprise handler requires valid AWS IAM user credentials3 with the EC2 describe instances action in a policy eg ec2DescribeInstances Configuration Examples examples The following is an example global configuration for the ec2 enterprise handler integration ec2 region uswest2 accesskeyid AlygD0X6Z4Xr2m3gl70J secretaccesskey y9Jt5OqNOqdy5NCFjhcUsHMb6YqSbReLAJsy4d6obSZIWySv allowedinstancestates running timeout 10 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition ec2 attributes4 which are included in event data5 ec2 attributes The following attributes are configured within the ec2 configuration scope6 region "},{"title":"Email","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/email","display_name":"Sensu Enterprise 2.8: Email","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Custom email templatescustomemailtemplates Examplescustomemailtemplatesexample Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification email attributesemailattributes smtp attributessmtpattributes templates attributestemplatesattributes Overview Send email notifications for events using SMTP Custom email templates As of Sensu Enterprise version 23 the Sensu Enterprise email integration provides support for creating custom email templates using ERB a templating language based on Ruby Sensu Enterprise make an event variable available to the ERB template containing the complete event data payload4 NOTE the Puppet reference documentation provides a helpful introduction to ERB templating syntax5 Examples customemailtemplatesexample The following example demonstrates how to access the Sensu event variable from a custom ERB template Hi there Sensu has detected a monitoring event Please note the following details Client Check Output For more information please consult the Sensu Enterprise dashboard httpssensuexamplecomclientcheck monitoringlove Team Sensu Configuration Examples examples The following is an example configuration for the email enterprise event handler integration email smtp address smtpexamplecom port 587 opensslverifymode none enablestarttlsauto true authentication plain username postmasterexamplecom password SECRET to supportexamplecom from noreplyexamplecom contenttype textplain timeout 10 Integration specification email attributes The following attributes are configured within the email configuration scope2 smtp "},{"title":"Event Stream","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/event_stream","display_name":"Sensu Enterprise 2.8: Event Stream","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification eventstream attributeseventstreamattributes Overview The event stream integrations sends all Sensu events2 to a remote TCP socket for complex event processing3 or stream processing andor longterm storage Configuration Examples examples The following is an example configuration for the eventstream enterprise event handler integration eventstream host 127001 port 3000 filtermetrics true filterokkeepalives true Integration specification eventstream attributes eventstreamattributes host "},{"title":"Flapjack","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/flapjack","display_name":"Sensu Enterprise 2.8: Flapjack","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification flapjack attributesflapjackattributes Overview Relay Sensu results to Flapjack2 a monitoring notification routing and event processing system Flapjack uses Redis for event queuing this integration sends event data to Flapjack through Redis using the Flapjack event format NOTE checks DO NOT need to specify flapjack as an event handler as every check result will be relayed to Flapjack if the integration is configured Configuration Examples examples The following is an example global configuration for the flapjack enterprise integration flapjack host redisexamplecom port 6379 db 0 channel events filtermetrics false Integration Specification flapjack attributes The following attributes are configured within the flapjack configuration scope3 host "},{"title":"Graphite","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/graphite","display_name":"Sensu Enterprise 2.8: Graphite","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification graphite attributesgraphiteattributes Overview Send metrics to Graphite2 using the plaintext protocol over TCP The graphite enterprise handler is also capable of sending metrics to Hosted Graphite3 using the prefix attribute to prefix metric names with the Hosted Graphite API key This handler uses the outputformat mutator Configuration Examples examples The following is an example global configuration for the graphite enterprise handler integration graphite host graphiteexamplecom port 2003 prefixsource false prefix production Integration Specification graphite attributes The following attributes are configured within the graphite configuration scope4 host "},{"title":"Graylog","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/graylog","display_name":"Sensu Enterprise 2.8: Graylog","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification graylog attributesgraylogattributes Overview The integration sends event data to a Graylog2 RawPlaintext TCP input3 This integration requires a Graylog JSON extractor4 Configuration Examples examples The following is an example configuration for the graylog enterprise event handler integration graylog host 127001 port 5555 timeout 10 Integration specification graylog attributes host "},{"title":"HipChat","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/hipchat","display_name":"Sensu Enterprise 2.8: HipChat","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification hipchat attributeshipchatattributes Overview Send notifications to a HipChat2 room for events After creating a HipChat API token3 configure the handler integration with the provided API token Configuration Examples examples The following is an example global configuration for the hipchat enterprise event handler integration hipchat apitoken L7kVQzXF7c5eUMYUon6INaSVRDU8mP apiversion v2 username sensu room Operations timeout 10 Integration Specification hipchat attributes The following attributes are configured within the hipchat configuration scope4 apitoken "},{"title":"InfluxDB","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/influxdb","display_name":"Sensu Enterprise 2.8: InfluxDB","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification influxdb attributesinfluxdbattributes Overview Send metrics to InfluxDB2 using the InfluxDB HTTP API Configuration Examples examples The following is an example global configuration for the influxdb enterprise handler integration influxdb host 8888 port 8086 username root password Bfw3Bdrn5WfqvOl1 apiversion 09 tags dc uscentral1 Integration specification influxdb attributes The following attributes are configured within the influxdb configuration scope3 host "},{"title":"IRC","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/irc","display_name":"Sensu Enterprise 2.8: IRC","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification irc attributesircattributes Overview Send notifications to an Internet Relay Chat IRC channel for events Configuration Examples examples The following is an example global configuration for the irc enterprise event handler integration irc uri ircnickpassexamplecom6697ops ssl true nickservpassword NICKSERVPASSWORD channelpassword CHANNELPASSWORD join false timeout 10 Integration Specification irc attributes The following attributes are configured within the irc configuration scope2 url "},{"title":"JIRA","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/jira","display_name":"Sensu Enterprise 2.8: JIRA","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification jira attributesjiraattributes Overview Create and resolve Jira2 issues for Sensu events3 Configuration Examples examples The following is an example global configuration for the jira enterprise event handler integration jira host jiraexamplecom user admin password secret project Sensu timeout 10 Integration Specification jira attributes The following attributes are configured within the jira configuration scope4 host "},{"title":"Librato","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/librato","display_name":"Sensu Enterprise 2.8: Librato","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification librato attributeslibratoattributes Overview Send metrics to Librato2 Metrics using the HTTP API Configuration Examples examples The following is an example global configuration for the librato enterprise handler integration librato email supportexamplecom apikey 90SHpjPOFqd2YJFIX9rzDq7ik6CiDmqu2AvqcXJAX3buIwcOGqIOgNilwKMjpStO Integration Specification librato attributes The following attributes are configured within the librato configuration scope3 email "},{"title":"OpenTSDB","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/opentsdb","display_name":"Sensu Enterprise 2.8: OpenTSDB","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification opentsdb attributesopentsdbattributes Overview Send metrics to OpenTSDB2 using the telnet protocol over TCP This handler uses the outputformatmutator Configuration Examples examples The following is an example global configuration for the opentsdb enterprise handler integration opentsdb host opentsdbexamplecom port 4242 taghost true tags dc uscentral1 Integration Specification opentsdb attributes The following attributes are configured within the opentsdb configuration scope3 host "},{"title":"OpsGenie","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/opsgenie","display_name":"Sensu Enterprise 2.8: OpsGenie","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification opsgenie attributesopsgenieattributes Overview Create and close OpsGenie2 alerts for events Configuration Examples examples The following is an example global configuration for the opsgenie enterprise event handler integration opsgenie apikey eed02a0d85a4427b851a18dd8fd80d93 source Sensu Enterprise AWS teams ops web recipients afterhours tags production overwritesquiethours true timeout 10 Integration Specification opsgenie attributes The following attributes are configured within the opsgenie configuration scope3 apikey "},{"title":"PagerDuty","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/pagerduty","display_name":"Sensu Enterprise 2.8: PagerDuty","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification pagerduty attributespagerdutyattributes Overview Create and resolve PagerDuty2 incidents for events After configuring a service in PagerDuty3 configure the handler integration with the provided service key Configuration Examples examples The following is an example global configuration for the pagerduty enterprise event handler integration pagerduty servicekey r3FPuDvNOTEDyQYCc7trBkymIFcy2NkE timeout 10 Integration Specification pagerduty attributes The following attributes are configured within the pagerduty configuration scope4 servicekey "},{"title":"Puppet","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/puppet","display_name":"Sensu Enterprise 2.8: Puppet","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification puppet attributespuppetattributes ssl attributessslattributes Overview Deregister Sensu clients from the client registry if they no longer have an associated Puppet2 node The puppet enterprise handler requires access to a SSL truststore and keystore containing a valid and whitelisted Puppet certificate private key and CA The local Puppet agent certificate private key and CA can be used Configuration Examples examples The following is an example global configuration for the puppet enterprise handler integration puppet endpoint https1001128081pdbqueryv4nodes ssl keystorefile etcsensusslpuppetkeystorejks keystorepassword secret truststorefile etcsensusslpuppettruststorejks truststorepassword secret timeout 10 The Puppet enterprise handler is most commonly used as part of the keepalive set handler For example handlers keepalive type set handlers pagerduty puppet When querying PuppetDB for a node by default Sensu will use the Sensu clients name for the Puppet node name Individual Sensu clients can override the name of their corresponding Puppet node using specific client definition attributes The following is an example client definition specifying its Puppet node name client name i424242 address 8888 subscriptions production webserver puppet nodename webserver01examplecom Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition puppet attributes3 which are included in event data4 puppet attributes The following attributes are configured within the puppet configuration scope5 endpoint "},{"title":"Rollbar","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/rollbar","display_name":"Sensu Enterprise 2.8: Rollbar","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration specificationintegrationspecification rollbar attributesrollbarattributes Overview Create and resolve Rollbar2 messagesitems for Sensu events3 Configuration Examples examples The following is an example global configuration for the rollbar enterprise event handler integration rollbar accesstokenread 2ae6bccccf534b9c8749a4327671e711 accesstokenwrite 944872fdbfba40c48305fc8cd73707b5 accesstokenpatch f34948101a714661a83dcd8dbe6a167a timeout 30 Integration Specification rollbar attributes The following attributes are configured within the rollbar configuration scope4 accesstokenread "},{"title":"ServiceNow","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/servicenow","display_name":"Sensu Enterprise 2.8: ServiceNow","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification servicenow attributesservicenowattributes Overview Create ServiceNow2 configuration items3 upon Sensu client registration4 createresolve ServiceNow incidents andor create ServiceNow events for Sensu events5 Configuration Examples examples The following is an example global configuration for the servicenow enterprise event handler integration servicenow host dev42servicenowcom user admin password secret createcmdbci true cmdbcitable cmdbciserver incidentmanagement true incidenttable incident timeout 10 When creating ServiceNow configuration items6 by default Sensu will use the clients name for the item name Individual Sensu clients can override the name of their corresponding configuration item using specific client definition attributes In addition to specifying a item name any valid CMDB table attributes fields values may also be set eg osversion The following is an example client definition7 specifying its ServiceNow configuration item attributes client name i424242 address 8888 subscriptions production webserver servicenow configurationitem name webserver01examplecom osversion 1404 Integration Specification NOTE the following integration definition attributes may be overwritten by the corresponding Sensu client definition servicenow attributes8 which are included in event data9 servicenow attributes The following attributes are configured within the servicenow configuration scope10 host "},{"title":"Slack","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/slack","display_name":"Sensu Enterprise 2.8: Slack","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification slack attributesslackattributes Overview Send notifications to a Slack2 channel for events After configuring an incoming webhook in Slack3 configure the handler integration with the provided webhook url Configuration Examples examples The following is an example global configuration for the slack enterprise event handler integration slack webhookurl httpshooksslackcomservicesIB6JgRmRJeL7Hgo6kFCckJm8E4Yt8X3i6QRKHWBekc username sensu channel ops timeout 10 Integration Specification slack attributes The following attributes are configured within the slack configuration scope4 webhookurl "},{"title":"SNMP","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/snmp","display_name":"Sensu Enterprise 2.8: SNMP","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Sensu Enterprise MIBssensuenterprisemibs Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification snmp attributessnmpattributes Overview Send SNMP traps to a SNMP manager Sensu Enterprise provides two SNMP MIB management information base modules for this integration The SNMP integration is capable of creating either SNMPv1 or SNMPv2 traps for Sensu events By default SNMPv2 traps are created unless the integration is configured for SNMPv1 eg version 1 The SNMP manager that will be receiving SNMP traps from Sensu Enterprise should load the appropriate provided MIBs The Sensu Enterprise SNMP MIB files can be altered to better fit certain environments and SNMP configurations Sensu Enterprise MIBs SNMPv1 MIBs RFC1212MIBtxtfilesRFC1212MIBtxt RFC1215MIBtxtfilesRFC1215MIBtxt SENSUENTERPRISEV1MIBtxtfilesSENSUENTERPRISEV1MIBtxt SNMPv2 MIBs SENSUENTERPRISEROOTMIBtxtfilesSENSUENTERPRISEROOTMIBtxt SENSUENTERPRISENOTIFYMIBtxtfilesSENSUENTERPRISENOTIFYMIBtxt Configuration Examples examples The following is an example global configuration for the snmp enterprise event handler integration snmp host 8888 port 162 community public version 2 varbindtrim 200 Integration Specification snmp attributes The following attributes are configured within the snmp configuration scope2 host "},{"title":"VictorOps","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/victorops","display_name":"Sensu Enterprise 2.8: VictorOps","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification victorops attributesvictoropsattributes Overview Create VictorOps2 messages for events Configuration Examples examples The following is an example global configuration for the victorops enterprise event handler integration victorops apikey a53265cdd2effa32fc54de52659a routingkey everyone timeout 10 Integration Specification victorops attributes The following attributes are configured within the victorops configuration scope3 apikey "},{"title":"Wavefront","product":"Sensu Enterprise","version":"2.8","location":"/sensu-enterprise/2.8/integrations/wavefront","display_name":"Sensu Enterprise 2.8: Wavefront","content":"ENTERPRISE Builtin integrations are available for Sensu Enterprise1 users only Overviewoverview Configuring a Wavefront Proxyconfiguringawavefrontproxy Configurationconfiguration Examplesexamples Integration Specificationintegrationspecification wavefront attributeswavefrontattributes Overview Send metrics to Wavefront2 using the Wavefront Data Format4 This handler uses the outputformat mutator Configuring a Wavefront Proxy To install and configure a Wavefront Proxy to receive metrics from Sensu Enterprise please refer to the Wavefront Proxy setup documentation5 Configuration Examples examples The following is an example global configuration for the wavefront enterprise handler integration wavefront host wavefrontexamplecom port 2878 tags dc uscentral1 Integration Specification wavefront attributes The following attributes are configured within the wavefront configuration scope3 host "},{"title":"Enterprise","product":"Sensu Enterprise","version":"latest","location":"/sensu-enterprise/_index","display_name":"Sensu Enterprise latest: Enterprise","content":""},{"title":"Sensu Enterprise Dashboard","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/_index","display_name":"Sensu Enterprise Dashboard 2.10: Sensu Enterprise Dashboard","content":" Reference Documentation What is the Sensu Enterprise Dashboardwhatisthesensuenterprisedashboard What is Uchiwawhatisuchiwa What is the Sensu Enterprise Consolewhatisthesensuenterpriseconsole What is a Sensu datacenterwhatisasensudatacenter What is the Sensu Enterprise Dashboard The Sensu Enterprise Dashboard is a simple webbased application that provides realtime visibility into Sensu monitoring data with dedicated views for monitoring events clients checks aggregates data centers and more The dashboard provides powerful global search features for filtering views so users can focus on the data thats important to them The dashboard also provides basic operational controls to acknowledge or otherwise silence monitoring events request ad hoc execution of monitoring checks and much more What is Uchiwa The Sensu Enterprise Dashboard is based on the opensource ndash and community developed ndash Uchiwa2 dashboard Very much like the relationship between Sensu Core and Sensu Enterprise the Sensu Enterprise Dashboard builds on top of Uchiwa via a number of addedvalue extensions eg Role Based Access Controls3 LDAP4 GitHub5 and GitLab6 authentication Audit Logging7 etc which development also results in many contributions to the opensource Uchiwa dashboard project What is the Sensu Enterprise Console The Sensu Enterprise Console is a federated API endpoint provided by the Sensu Enterprise Dashboard for API access to multiple Sensu datacenters1 available in Sensu Enterprise Dashboard version 110 and newer This API provides addedvalue features including tokenbased authentication and granular rolebased access controls16 NOTE the Sensu Enterprise Dashboard is comprised of two components a backend service API for aggregating monitoring data from one or more Sensu datacenters5 and a web application for displaying this information As of Sensu Enterprise Dashboard version 110 this Sensu Enterprise Dashboard backend has been updated so that it provides the same API endpoints as the Sensu API1 Prior to version 110 the Sensu Enterprise Dashboard backend used different API routes for accessing data from specific datacenters for example client data was accessible via clientsuswest1client instead of clientsclientdcuswest1 Version 111 introduced access tokenbased authentication and version 112 introduced RBAC for the Console API What is a Sensu datacenter The Sensu Enterprise Dashboard provides access to monitoring data from one or more Sensu datacenters A Sensu datacenter is simply a Sensu API endpoint which corresponds to a Sensu installation consisting of one or more Sensu servers in cluster multiple API endpoints may be provided by a single Sensu installation or cluster 1 whatisasensudatacenter 2 httpwwwuchiwaio 3 sensuenterprisedashboard210rbacoverview 4 sensuenterprisedashboard210rbacrbacforldap 5 sensuenterprisedashboard210rbacrbacforgithub 6 sensuenterprisedashboard210rbacrbacforgitlab 7 sensuenterprisedashboard210rbacauditlogging 8 dashboarddefinitionspecification 9 sensucore12referenceconfigurationconfigurationscopes 10 sensucore12referenceconfigurationconfigurationmerging 11 authattributes 12 auditattributes 13 ldapattributes 14 githubattributes 15 gitlabattributes 16 sensuenterprisedashboard210rbacoverviewrbacforthesensuenterpriseconsoleapi 17 sensuenterprisedashboard210rbacrbacforoidc 18 oidcattributes"},{"title":"CHANGELOG","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/changelog","display_name":"Sensu Enterprise Dashboard 2.10: CHANGELOG","content":"NOTE Sensu Enterprise Dashboard is built on Uchiwa Uchiwa changes are documented in the Uchiwa changeloguchiwachangelog Releases Enterprise Dashboard 2101 Release Notesenterprisedashboardv2101 Enterprise Dashboard 2100 Release Notesenterprisedashboardv2100 Enterprise Dashboard 290 Release Notesenterprisedashboardv290 Enterprise Dashboard 281 Release Notesenterprisedashboardv281 Enterprise Dashboard 280 Release Notesenterprisedashboardv280 Enterprise Dashboard 270 Release Notesenterprisedashboardv270 Enterprise Dashboard 260 Release Notesenterprisedashboardv260 Enterprise Dashboard 250 Release Notesenterprisedashboardv250 Enterprise Dashboard 240 Release Notesenterprisedashboardv240 Enterprise Dashboard 230 Release Notesenterprisedashboardv230 Enterprise Dashboard 221 Release Notesenterprisedashboardv221 Enterprise Dashboard 220 Release Notesenterprisedashboardv220 Enterprise Dashboard 211 Release Notesenterprisedashboardv211 Enterprise Dashboard 210 Release Notesenterprisedashboardv210 Enterprise Dashboard 200 Release Notesenterprisedashboardv200 Enterprise Dashboard 1120 Release Notesenterprisedashboardv1120 Enterprise Dashboard 1110 Release Notesenterprisedashboardv1110 Enterprise Dashboard 1101 Release Notesenterprisedashboardv1101 Enterprise Dashboard 1100 Release Notesenterprisedashboardv1100 Enterprise Dashboard 198 Release Notesenterprisedashboardv198 Enterprise Dashboard 197 Release Notesenterprisedashboardv197 Enterprise Dashboard 196 Release Notesenterprisedashboardv196 Enterprise Dashboard 195 Release Notesenterprisedashboardv195 Enterprise Dashboard 194 Release Notesenterprisedashboardv194 Enterprise Dashboard 193 Release Notesenterprisedashboardv193 Enterprise Dashboard 192 Release Notesenterprisedashboardv192 Enterprise Dashboard 191 Release Notesenterprisedashboardv191 Enterprise Dashboard 190 Release Notesenterprisedashboardv190 Enterprise Dashboard 180 Release Notesenterprisedashboardv180 Enterprise Dashboard 170 Release Notesenterprisedashboardv170 Enterprise Dashboard 162 Release Notesenterprisedashboardv162 Enterprise Dashboard 161 Release Notesenterprisedashboardv161 Enterprise Dashboard 160 Release Notesenterprisedashboardv160 Enterprise Dashboard 151 Release Notesenterprisedashboardv151 Enterprise Dashboard 150 Release Notesenterprisedashboardv150 Enterprise Dashboard 146 Release Notesenterprisedashboardv146 Enterprise Dashboard 145 Release Notesenterprisedashboardv145 Enterprise Dashboard 144 Release Notesenterprisedashboardv144 Enterprise Dashboard 143 Release Notesenterprisedashboardv143 Enterprise Dashboard 142 Release Notesenterprisedashboardv142 Enterprise Dashboard 141 Release Notesenterprisedashboardv141 Enterprise Dashboard 140 Release Notesenterprisedashboardv140 Enterprise Dashboard 130 Release Notesenterprisedashboardv130 Enterprise Dashboard 121 Release Notesenterprisedashboardv121 Enterprise Dashboard 120 Release Notesenterprisedashboardv120 Enterprise Dashboard 111 Release Notesenterprisedashboardv111 Enterprise Dashboard 110 Release Notesenterprisedashboardv110 Enterprise Dashboard 100 Release Notesenterprisedashboardv100 Enterprise Dashboard 015 Release Notesenterprisedashboardv015 Enterprise Dashboard 013 Release Notesenterprisedashboardv013 Enterprise Dashboard 012 Release Notesenterprisedashboardv012 Enterprise Dashboard 011 Release Notesenterprisedashboardv011 Enterprise Dashboard 010 Release Notesenterprisedashboardv010 Enterprise Dashboard 2102 Release Notes enterprisedashboardv2102 October 5 2017 mdash Sensu Enterprise Dashboard version 2102 has been released and is available for immediate download CHANGES enterprisedashboardv2102changes IMPROVEMENT Built on Uchiwa 0263uchiwav0263 Enterprise Dashboard 2101 Release Notes enterprisedashboardv2101 September 29 2017 mdash Sensu Enterprise Dashboard version 2101 has been released and is available for immediate download CHANGES enterprisedashboardv2101changes IMPROVEMENT Built on Uchiwa 0262uchiwav0262 Enterprise Dashboard 2100 Release Notes enterprisedashboardv2100 September 29 2017 mdash Sensu Enterprise Dashboard version 2100 has been released and is available for immediate download CHANGES enterprisedashboardv2100changes IMPROVEMENT Built on Uchiwa 0261uchiwav0261 FIX Properly display keepalives events with RBAC Uses the clients subscriptions if a checks subscribers is empty eg keepalive event Enterprise Dashboard 290 Release Notes enterprisedashboardv290 July 26 2017 mdash Sensu Enterprise Dashboard version 290 has been released and is available for immediate download CHANGES enterprisedashboardv290changes IMPROVEMENT Built on Uchiwa 0253uchiwav0253 IMPROVEMENT Added RBAC intergration for Okta oauth2 IMPROVEMENT Added regex support for arrays in collections FIX Changed RBAC intergration for GitHub from repo to org Enterprise Dashboard 281 Release Notes enterprisedashboardv281 May 16 2017 mdash Sensu Enterprise Dashboard version 281 has been released and is available for immediate download CHANGES enterprisedashboardv281changes IMPROVEMENT Built on Uchiwa 0252uchiwav0252 IMPROVEMENT Properly display keepalives events with RBAC Uses the clients subscriptions if a checks subscribers is empty eg keepalive event Enterprise Dashboard 280 Release Notes enterprisedashboardv280 May 10 2017 mdash Sensu Enterprise Dashboard version 280 has been released and is available for immediate download CHANGES enterprisedashboardv280changes IMPROVEMENT Built on Uchiwa 0251uchiwav0251 FIX Fix RBAC subscription filtering Enterprise Dashboard 270 Release Notes enterprisedashboardv270 April 13 2017 mdash Sensu Enterprise Dashboard version 270 has been released and is available for immediate download CHANGES enterprisedashboardv270changes IMPROVEMENT Built on Uchiwa 0240uchiwav0240 Enterprise Dashboard 260 Release Notes enterprisedashboardv260 April 4 2017 mdash Sensu Enterprise Dashboard version 260 has been released and is available for immediate download CHANGES enterprisedashboardv260changes IMPROVEMENT Built on Uchiwa 0231uchiwav0231 IMPROVEMENT Added support for authentication against multiple LDAP servers Enterprise Dashboard 250 Release Notes enterprisedashboardv250 April 4 2017 mdash Sensu Enterprise Dashboard version 250 has been released and is available for immediate download CHANGES enterprisedashboardv250changes IMPROVEMENT Built on Uchiwa 0230uchiwav0230 IMPROVEMENT Added support for boolean values in collections queries Enterprise Dashboard 240 Release Notes enterprisedashboardv240 March 13 2017 mdash Sensu Enterprise Dashboard version 240 has been released and is available for immediate download CHANGES enterprisedashboardv240changes IMPROVEMENT Built on Uchiwa 0222uchiwav0222 BUGFIX Fix issue with HUD results graph BUGFIX Fix issue with audit logging not writing to file IMPROVEMENT Added OpenID Connect authentication IMPROVEMENT Switched CI from Drone to Travis CI Enterprise Dashboard 230 Release Notes enterprisedashboardv230 February 13 2017 mdash Sensu Enterprise Dashboard version 230 has been released and is available for immediate download CHANGES enterprisedashboardv230changes IMPROVEMENT Built on Uchiwa 0221uchiwav0221 IMPROVEMENT Added DisableNestedGroups attribute to LDAP driver Enterprise Dashboard 221 Release Notes enterprisedashboardv221 December 15 2016 mdash Sensu Enterprise Dashboard version 221 has been released and is available for immediate download CHANGES enterprisedashboardv221changes IMPROVEMENT Properly escape values in search queries for the LDAP authentication driver Enterprise Dashboard 220 Release Notes enterprisedashboardv220 December 8 2016 mdash Sensu Enterprise Dashboard version 220 has been released and is available for immediate download CHANGES enterprisedashboardv220changes IMPROVEMENT Built on Uchiwa 0210uchiwav0210 Enterprise Dashboard 211 Release Notes enterprisedashboardv211 November 30 2016 mdash Sensu Enterprise Dashboard version 211 has been released and is available for immediate download CHANGES enterprisedashboardv211changes FIX Fixed OAuth authentication providers Enterprise Dashboard 210 Release Notes enterprisedashboardv210 November 22 2016 mdash Sensu Enterprise Dashboard version 210 has been released and is available for immediate download CHANGES enterprisedashboardv210changes IMPROVEMENT Built on Uchiwa 0202uchiwav0202 IMPROVEMENT Add diagnostic information to the authentication drivers when a role has no members Enterprise Dashboard 200 Release Notes enterprisedashboardv200 October 17 2016 mdash Sensu Enterprise Dashboard version 200 has been released and is available for immediate download CHANGES enterprisedashboardv200changes IMPROVEMENT Built on Uchiwa 0190uchiwav0190 IMPROVEMENT Add support for Sensu Enterprise 200 FIX Fix the clear button for collections Enterprise Dashboard 1120 Release Notes enterprisedashboardv1120 August 3 2016 mdash Sensu Enterprise Dashboard version 1120 has been released and is available for immediate download CHANGES enterprisedashboardv1120changes IMPROVEMENT Built on Uchiwa 0171uchiwav0171 IMPROVEMENT Upgraded to Go 16 IMPROVEMENT Added finer RBAC granularity Enterprise Dashboard 1110 Release Notes enterprisedashboardv1110 July 26 2016 mdash Sensu Enterprise Dashboard version 1110 has been released and is available for immediate download CHANGES enterprisedashboardv1110changes IMPROVEMENT Built on Uchiwa 0170uchiwav0170 IMPROVEMENT Added API tokenbased authentication Enterprise Dashboard 1101 Release Notes enterprisedashboardv1101 July 15 2016 mdash Sensu Enterprise Dashboard version 1101 has been released and is available for immediate download CHANGES enterprisedashboardv1101changes FIX Fixed graphs scaling issues on back button to the HUD Enterprise Dashboard 1100 Release Notes enterprisedashboardv1100 July 6 2016 mdash Sensu Enterprise Dashboard version 1100 has been released and is available for immediate download CHANGES enterprisedashboardv1100changes IMPROVEMENT Built on Uchiwa 0160uchiwav0160 IMPROVEMENT Added additional debug option for LDAP driver FIX Fixed graphs display issues on back button to the HUD Enterprise Dashboard 198 Release Notes enterprisedashboardv198 June 7 2016 mdash Sensu Enterprise Dashboard version 198 has been released and is available for immediate download CHANGES enterprisedashboardv198changes IMPROVEMENT Built on Uchiwa 0150uchiwav0150 IMPROVEMENT Added support for LDAP dialects IMPROVEMENT Added support for aggregates in SE 113 Enterprise Dashboard 197 Release Notes enterprisedashboardv197 May 25 2016 mdash Sensu Enterprise Dashboard version 197 has been released and is available for immediate download CHANGES enterprisedashboardv197changes FIX Prevented exceptions on the HUD when metric series are empty Enterprise Dashboard 196 Release Notes enterprisedashboardv196 May 25 2016 mdash Sensu Enterprise Dashboard version 196 has been released and is available for immediate download CHANGES enterprisedashboardv196changes FIX Prevent exceptions on the HUD when metric series are invalid Enterprise Dashboard 195 Release Notes enterprisedashboardv195 April 21 2016 mdash Sensu Enterprise Dashboard version 195 has been released and is available for immediate download CHANGES enterprisedashboardv195changes IMPROVEMENT Added support for IPv6 addresses in LDAP driver Enterprise Dashboard 194 Release Notes enterprisedashboardv194 March 3 2016 mdash Sensu Enterprise Dashboard version 194 has been released and is available for immediate download CHANGES enterprisedashboardv194changes IMPROVEMENT Built on Uchiwa 0143uchiwav0143 Enterprise Dashboard 193 Release Notes enterprisedashboardv193 February 23 2016 mdash Sensu Enterprise Dashboard version 193 has been released and is available for immediate download CHANGES enterprisedashboardv193changes BUGFIX Better handling of an empty recursive group search result in LDAP authentication driver Enterprise Dashboard 192 Release Notes enterprisedashboardv192 February 19 2016 mdash Sensu Enterprise Dashboard version 192 has been released and is available for immediate download CHANGES enterprisedashboardv192changes IMPROVEMENT Use the memberOf attribute in AD for role assignation in addition to the recursive query Enterprise Dashboard 191 Release Notes enterprisedashboardv191 February 8 2016 mdash Sensu Enterprise Dashboard version 191 has been released and is available for immediate download CHANGES enterprisedashboardv191changes BUGFIX Prevent a fatal panic when one of the SE metrics is empty Enterprise Dashboard 190 Release Notes enterprisedashboardv190 February 2 2016 mdash Sensu Enterprise Dashboard version 190 has been released and is available for immediate download CHANGES enterprisedashboardv190changes IMPROVEMENT Built on Uchiwa 0142uchiwav0142 IMPROVEMENT Added support for nested groups in AD Enterprise Dashboard 180 Release Notes enterprisedashboardv180 January 19 2016 mdash Sensu Enterprise Dashboard version 180 has been released and is available for immediate download CHANGES enterprisedashboardv180changes IMPROVEMENT Built on Uchiwa 0141uchiwav0141 IMPROVEMENT Added support for a fallback RBAC role IMPROVEMENT Added HUD styling tweaks IMPROVEMENT Added the Gitlab RBAC authentication driver IMPROVEMENT Improved debug mode Enterprise Dashboard 170 Release Notes enterprisedashboardv170 November 30 2015 mdash Sensu Enterprise Dashboard version 170 has been released and is available for immediate download CHANGES enterprisedashboardv170changes IMPROVEMENT Built on Uchiwa 0130uchiwav0130 IMPROVEMENT HUD now uses the new SE metrics IMPROVEMENT LDAP driver is caseinsensitive but casepreserving Enterprise Dashboard 162 Release Notes enterprisedashboardv162 November 6 2015 mdash Sensu Enterprise Dashboard version 162 has been released and is available for immediate download CHANGES enterprisedashboardv162changes IMPROVEMENT Removed asyncjs dependency IMPROVEMENT Updated sensuenterprise theme CSS files Enterprise Dashboard 161 Release Notes enterprisedashboardv161 November 6 2015 mdash Sensu Enterprise Dashboard version 161 has been released and is available for immediate download CHANGES enterprisedashboardv161changes IMPROVEMENT Upgraded uchiwaweb bower package Enterprise Dashboard 160 Release Notes enterprisedashboardv160 November 6 2015 mdash Sensu Enterprise Dashboard version 160 has been released and is available for immediate download CHANGES enterprisedashboardv160changes IMPROVEMENT Built on Uchiwa 0121uchiwav0121 IMPROVEMENT Rename the dashboard view to HUD Enterprise Dashboard 151 Release Notes enterprisedashboardv151 October 6 2015 mdash Sensu Enterprise Dashboard version 151 has been released and is available for immediate download CHANGES enterprisedashboardv151changes FIX Use proper uchiwaweb bocker package Enterprise Dashboard 150 Release Notes enterprisedashboardv150 October 6 2015 mdash Sensu Enterprise Dashboard version 150 has been released and is available for immediate download CHANGES enterprisedashboardv150changes IMPROVEMENT Built on Uchiwa 0112uchiwav0112 IMPROVEMENT Deprecate use of results Sensu API endpoint Enterprise Dashboard 146 Release Notes enterprisedashboardv146 September 29 2015 mdash Sensu Enterprise Dashboard version 146 has been released and is available for immediate download CHANGES enterprisedashboardv146changes FIX Revert change until uchiwa is upgraded Enterprise Dashboard 145 Release Notes enterprisedashboardv145 September 29 2015 mdash Sensu Enterprise Dashboard version 145 has been released and is available for immediate download CHANGES enterprisedashboardv145changes IMPROVEMENT Use enterprise filters for the dashboard Enterprise Dashboard 144 Release Notes enterprisedashboardv144 September 11 2015 mdash Sensu Enterprise Dashboard version 144 has been released and is available for immediate download CHANGES enterprisedashboardv144changes FIX Hide sensitive LDAP information bindpass in dashboard IMPROVEMENT Updated dashboard widgets text FIX Stepped Y axis max value in dashboard graphs Enterprise Dashboard 143 Release Notes enterprisedashboardv143 September 10 2015 mdash Sensu Enterprise Dashboard version 143 has been released and is available for immediate download CHANGES enterprisedashboardv143changes IMPROVEMENT Allow customizable group and user BaseDN for LDAP driver Enterprise Dashboard 142 Release Notes enterprisedashboardv142 September 10 2015 mdash Sensu Enterprise Dashboard version 142 has been released and is available for immediate download CHANGES enterprisedashboardv142changes IMPROVEMENT Allow customizable Group Membership Attribute for LDAP driver Enterprise Dashboard 141 Release Notes enterprisedashboardv141 September 8 2015 mdash Sensu Enterprise Dashboard version 141 has been released and is available for immediate download CHANGES enterprisedashboardv141changes IMPROVEMENT Allow customizable group and user object class for LDAP driver Enterprise Dashboard 140 Release Notes enterprisedashboardv140 September 1 2015 mdash Sensu Enterprise Dashboard version 140 has been released and is available for immediate download CHANGES enterprisedashboardv140changes IMPROVEMENT Built on Uchiwa 0104uchiwav0104 IMPROVEMENT Added support for OpenLDAP IMPROVEMENT Send failed logon to audit logging IMPROVEMENT Update dashboard widgets text Enterprise Dashboard 130 Release Notes enterprisedashboardv130 August 3 2015 mdash Sensu Enterprise Dashboard version 130 has been released and is available for immediate download CHANGES enterprisedashboardv130changes IMPROVEMENT Built on Uchiwa 0103uchiwav0103 IMPROVEMENT Added audit logging IMPROVEMENT Added dashboard Enterprise Dashboard 121 Release Notes enterprisedashboardv121 June 19 2015 mdash Sensu Enterprise Dashboard version 121 has been released and is available for immediate download CHANGES enterprisedashboardv121changes IMPROVEMENT Built on Uchiwa 091uchiwav091 FIX Use proper path for godep when building binaries Enterprise Dashboard 120 Release Notes enterprisedashboardv120 June 12 2015 mdash Sensu Enterprise Dashboard version 120 has been released and is available for immediate download CHANGES enterprisedashboardv120changes IMPROVEMENT Use godep for dependencies vendoring IMPROVEMENT Add support for userdefined roles IMPROVEMENT Add support for Github Enterprise IMPROVEMENT LDAP driver support for disabling SSL verification Enterprise Dashboard 111 Release Notes enterprisedashboardv111 May 7 2015 mdash Sensu Enterprise Dashboard version 111 has been released and is available for immediate download CHANGES enterprisedashboardv111changes IMPROVEMENT Collections now use the new backendServicepostStash service Enterprise Dashboard 110 Release Notes enterprisedashboardv110 May 5 2015 mdash Sensu Enterprise Dashboard version 110 has been released and is available for immediate download CHANGES enterprisedashboardv110changes IMPROVEMENT Built on Uchiwa 081uchiwav081 IMPROVEMENT Add GitHub auth driver IMPROVEMENT Add LDAP auth driver IMPROVEMENT Remove dashboard authentication by default Enterprise Dashboard 100 Release Notes enterprisedashboardv100 April 8 2015 mdash Sensu Enterprise Dashboard version 100 has been released and is available for immediate download CHANGES enterprisedashboardv110changes IMPROVEMENT Built on Uchiwa 071uchiwav071 IMPROVEMENT Google fonts with Sensu Enterprise Dashboard IMPROVEMENT Set default SQL password to sensu Enterprise Dashboard 015 Release Notes enterprisedashboardv015 March 5 2015 mdash Sensu Enterprise Dashboard version 015 has been released and is available for immediate download CHANGES enterprisedashboardv015changes IMPROVEMENT New Dockerfile with CentOS 6 base for compatibility Enterprise Dashboard 013 Release Notes enterprisedashboardv013 March 4 2015 mdash Sensu Enterprise Dashboard version 013 has been released and is available for immediate download CHANGES enterprisedashboardv013changes IMPROVEMENT Config hash now supports dashboard instead of uchiwa IMPROVEMENT Dashboard version constant now available Enterprise Dashboard 012 Release Notes enterprisedashboardv012 February 27 2015 mdash Sensu Enterprise Dashboard version 012 has been released and is available for immediate download CHANGES enterprisedashboardv012changes IMPROVEMENT Renamed uchiwaenterprise theme to sensuenterprise IMPROVEMENT Changed favicon to Sensu logo FIX Fixed prepost install and remove package scripts Enterprise Dashboard 011 Release Notes enterprisedashboardv011 February 27 2015 mdash Sensu Enterprise Dashboard version 011 has been released and is available for immediate download CHANGES enterprisedashboardv011changes FIX Fixed dashboard src content directory structure Enterprise Dashboard 010 Release Notes enterprisedashboardv010 February 27 2015 mdash Sensu Enterprise Dashboard version 010 has been released and is available for immediate download CHANGES enterprisedashboardv010changes IMPROVEMENT Building unstable packages for testing purposes uchiwachangelog httpsgithubcomsensuuchiwablobmasterCHANGELOGmd uchiwav0263 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd026320171005 uchiwav0262 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd026220171002 uchiwav0261 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd026120170929 uchiwav0253 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025320170725 uchiwav0252 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025220170516 uchiwav0251 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025120170510 uchiwav0240 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd024020170413 uchiwav0231 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd023120170329 uchiwav0231 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd023020170324 uchiwav0222 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd022220170310 uchiwav0221 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd022120170206 uchiwav0210 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd021020161208 uchiwav0202 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd020220161121 uchiwav0190 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd019020161016 uchiwav0171 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd017120160802 uchiwav0170 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd017020160720 uchiwav0160 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd016020160623 uchiwav0150 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd015020160602 uchiwav0143 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014320160303 uchiwav0142 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014220160202 uchiwav0141 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014120160115 uchiwav0130 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd013020151122 uchiwav0121 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd012120151105 uchiwav0112 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd011220151004 uchiwav0104 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd010420150901 uchiwav0103 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd010320150803 uchiwav091 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd09120150610 uchiwav081 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd08120150505 uchiwav071 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd07120150401"},{"title":"Collections","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/collections","display_name":"Sensu Enterprise Dashboard 2.10: Collections","content":"Collections are a grouping of items returned by a collection query This query acts like a global search and it persists between the different views Collections can be easily shared and saved collectionsimagesenterprisedashboardcollectionspng Collection Query The most basic query is composed of a field and its value in the form of fieldvalue A query can use any field visible or not to match a value such as dcuswest1 subscriberrabbitmq subscriptionlinux teamwebops Regular Expressions The match method of Javascripts String object is used to retrieve the matches thus the following special characters are available to use exclusively in the values of a query Matches any single character For example dcastria matches the datacenter austria Matches the preceding character 0 or more times For example dccan matches the datacenters canada and vatican but not cameroon Matches the preceding character 1 or more times For example dcira matches the datacenters iran and iraq but not ireland Matches the preceding character 0 or 1 time For example dcoco matches the datacenter cameroon but not morocco Matches beginning of input For example dcpor matches the datacenter portugal but not singapore Matches end of input For example dcnea matches the datacenter guinea but not guineabissau Operators The familiar operators AND OR and NOT are supported You may use multiple operators within a single query Be aware that the use of many operators may cause higher than normal resource usage dcuseast1 AND namecentos Includes all items from the datacenter useast1 that have centos in their name dcuseast1 OR dcuswest1 Includes all items from the datacenters useast1 or uswest1 dcuseast1 NOT namecentos Includes all items from the datacenter useast1 that do not have centos in their name NOT dcuseast1 Includes all items that are not part of the datacenter useast1 dcuseast1 OR dcuswest1 NOT namecentos Includes all items from the datacenters useast1 or uswest1 that dont have centos in their name"},{"title":"Configuration","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/configuration","display_name":"Sensu Enterprise Dashboard 2.10: Configuration","content":" Dashboard configuration Example dashboard configuration The following is the bare minimum that should be included in your Sensu Enterprise Dashboard configuration sensu name sensuserver1 host api1examplecom port 4567 dashboard host 0000 port 3000 NOTE the Sensu Enterprise Dashboard requires two configuration scopes sensu and dashboard see Dashboard definition specification8 below Dashboard definition specification dashboardconfigurationattributes The Sensu Enterprise dashboard uses two configuration scopes9 the sensu configuration scope provides connection details for one or more Sensu API endpoints ie datacenters1 and the dashboard configuration scope is used to configure the behavior of the dashboard itself NOTE by default the Sensu Enterprise Dashboard will load configuration from etcsensudashboardjson andor from JSON configuration files located in etcsensudashboarddjson with the same configuration merging behavior as described here2 sensu attributes sensuattributes name "},{"title":"Overview","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/dashboard","display_name":"Sensu Enterprise Dashboard 2.10: Overview","content":" Reference Documentation What is the Sensu Enterprise Dashboardwhatisthesensuenterprisedashboard What is Uchiwawhatisuchiwa What is the Sensu Enterprise Consolewhatisthesensuenterpriseconsole What is a Sensu datacenterwhatisasensudatacenter Dashboard configurationdashboardconfiguration Example dashboard configurationexampledashboardconfiguration Dashboard configuration attributesdashboardconfigurationattributes sensu attributessensuattributes dashboard attributesdashboardattributes auth attributesauthattributes audit attributesauditattributes github attributesgithubattributes gitlab attributesgitlabattributes ldap attributesldapattributes oidc attributesoidcattributes What is the Sensu Enterprise Dashboard The Sensu Enterprise Dashboard is a simple webbased application that provides realtime visibility into Sensu monitoring data with dedicated views for monitoring events clients checks aggregates data centers and more The dashboard provides powerful global search features for filtering views so users can focus on the data thats important to them The dashboard also provides basic operational controls to acknowledge or otherwise silence monitoring events request ad hoc execution of monitoring checks and much more What is Uchiwa The Sensu Enterprise Dashboard is based on the opensource ndash and community developed ndash Uchiwa2 dashboard Very much like the relationship between Sensu Core and Sensu Enterprise the Sensu Enterprise Dashboard builds on top of Uchiwa via a number of addedvalue extensions eg Role Based Access Controls3 LDAP4 GitHub5 and GitLab6 authentication Audit Logging7 etc which development also results in many contributions to the opensource Uchiwa dashboard project What is the Sensu Enterprise Console The Sensu Enterprise Console is a federated API endpoint provided by the Sensu Enterprise Dashboard for API access to multiple Sensu datacenters1 available in Sensu Enterprise Dashboard version 110 and newer This API provides addedvalue features including tokenbased authentication and granular rolebased access controls16 NOTE the Sensu Enterprise Dashboard is comprised of two components a backend service API for aggregating monitoring data from one or more Sensu datacenters5 and a web application for displaying this information As of Sensu Enterprise Dashboard version 110 this Sensu Enterprise Dashboard backend has been updated so that it provides the same API endpoints as the Sensu API1 Prior to version 110 the Sensu Enterprise Dashboard backend used different API routes for accessing data from specific datacenters for example client data was accessible via clientsuswest1client instead of clientsclientdcuswest1 Version 111 introduced access tokenbased authentication and version 112 introduced RBAC for the Console API What is a Sensu datacenter whatisasensudatacenter The Sensu Enterprise Dashboard provides access to monitoring data from one or more Sensu datacenters A Sensu datacenter is simply a Sensu API endpoint which corresponds to a Sensu installation consisting of one or more Sensu servers in cluster multiple API endpoints may be provided by a single Sensu installation or cluster Dashboard configuration Example dashboard configuration The following is the bare minimum that should be included in your Sensu Enterprise Dashboard configuration sensu name sensuserver1 host api1examplecom port 4567 dashboard host 0000 port 3000 NOTE the Sensu Enterprise Dashboard requires two configuration scopes sensu and dashboard see Dashboard definition specification8 below Dashboard definition specification dashboardconfigurationattributes The Sensu Enterprise dashboard uses two configuration scopes9 the sensu configuration scope provides connection details for one or more Sensu API endpoints ie datacenters1 and the dashboard configuration scope is used to configure the behavior of the dashboard itself NOTE by default the Sensu Enterprise Dashboard will load configuration from etcsensudashboardjson andor from JSON configuration files located in etcsensudashboarddjson with the same configuration merging behavior as described here10 sensu attributes sensuattributes name "},{"title":"Heads-Up Display","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/hud","display_name":"Sensu Enterprise Dashboard 2.10: Heads-Up Display","content":"As of version 13 a new Heads Up Display HUD has been added to the Sensu Enterprise Dashboard which provides an ataglance view into the overall health of your infrastructure via a set of builtin graphs and status widgets headsup display screenshotimagesenterprisedashboardhudpng HUD RBAC Support The HUD is scoped according to any existing Sensu Enterprise Dashboard RBAC1 controls For example if a user is a member of a role with limited access to Sensu data they will only see history graphs and status widgets corresponding to the Sensu Subscriptions andor Datacenters they have access to NOTE At this time history graph data is stored in local storage via the browser which means that history graph data will only be available for as long as the user has the Sensu Enterprise Dashboard open An upcoming release of Sensu Enterprise will be providing this data via a new metrics API at which point history graph data will not be stored in the browser and a full 8hours of history will be available at all times Features History Graphs The Sensu Enterprise Dashboard HUD includes two history graphs which provide ataglance visibility for up to 8hours of monitoring system history captured in 10second intervals Event History Graph The Event History Graph records the state of Sensu events every 10 seconds The graph will display the total count of critical red warning yellow silenced gray and unknown black events The Event History Graph retains the last 8hours of event history Client History Graph The Client History Graph records the state of Sensu clients every 10 seconds The graph will display the total count of critical red warning yellow silenced gray and healthy green clients The Client History Graph retains the last 8hours of client history Status Summary Widgets The Sensu Enterprise Dashboard HUD includes three columns of status widgets which provide ataglance visibility into the status of Sensu Checks Events and Datacenters Each column will only display widgets corresponding to the current state of the monitoring system eg if there are no Critical events the Critical event count widget will not be displayed Check Status Summary Widgets The Check Status Summary widgets provide realtime counts for the current state of Sensu Checks ie critical red warning yellow silenced gray unknown black and healthy green Client Status Summary Widgets The Client Status Summary widgets provide realtime counts for the current state of Sensu Clients ie critical red warning yellow silenced gray unknown black and healthy green Datacenter Status Summary Widgets The Datacenter Status Summary widgets provide realtime counts for the current state of the datacenters ie Sensu Enterprise servers 1 sensuenterprisedashboard211configurationwhatisasensudatacenter"},{"title":"RBAC","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/rbac/_index","display_name":"Sensu Enterprise Dashboard 2.10: RBAC","content":""},{"title":"Audit Logging","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/rbac/audit-logging","display_name":"Sensu Enterprise Dashboard 2.10: Audit Logging","content":"As of Sensu Enterprise Dashboard version 13 Audit Logging is enabled by default Audit Logging captures user events in the dashboard such as user loginlogout and any user write actions in the dashboard ie silencing checks deleting clients deleting stashes Optionally it is also possible to log all HTTP GET requests ie every view requested by the user and every search query performed by the user NOTE Audit Logging requires authentication to be enabled Example configuration audit logfile varlogsensusensuenterprisedashboardauditlog level default Audit Logging attributes logfile "},{"title":"Role Based Access Controls","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/rbac/overview","display_name":"Sensu Enterprise Dashboard 2.10: Role Based Access Controls","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise0 users only Reference Documentation What are Role Based Access Controls for Sensu Enterprisewhatarerolebasedaccesscontrols How does Sensu provide RBAChowdoessensuproviderbac Supported RBAC driverssupportedrbacdrivers RBAC for the Sensu Enterprise Console APIrbacforthesensuenterpriseconsoleapi RBAC configurationrbacconfiguration Example RBAC definitionexamplerbacdefinition RBAC definition specificationrbacdefinitionspecification DRIVER attributesdriverattributes roles attributesrolesattributes methods attributesmethodsattributes What are Role Based Access Controls for Sensu Enterprise whatarerolebasedaccesscontrols Rolebased access controls RBAC are a system for restricting access to authorized users according to a role or job function RBAC for Sensu Enterprise enables administrators to grant the correct level access to many different development and operations teams without requiring them to maintain yet another user registry How does Sensu provide RBAC The Sensu Enterprise Dashboard provides comprehensive and granular RoleBased Access Controls RBAC with support for using a Lightweight Access Directory Provider LDAP GitHubcom1 GitHub Enterprise2 andor GitLab3 for authentication Roles can be defined to grant or restrict access to monitoring data based on datacenters4 Sensu subscriptions5 and even specific API endpoints see the Enterprise API reference documentation6 for more information Supported RBAC drivers Sensu Enterprise currently includes the following authentication drivers for RBAC LDAPrbacforldap GitHubrbacforgithub GitLabrbacforgitlab OIDCrbacforoidc RBAC for the Sensu Enterprise Console API As of Sensu Enterprise Dashboard version 112 RBAC configurations may be applied to the Sensu Enterprise Console API14 Access to the Sensu Enterprise Console API is controlled by access tokens which correspond to a role definition see the roles specification accessToken attribute below15 RBAC for the Console API provides granular controls for restricting access to specific API endpoints and HTTP methods eg it is possible to allow HTTP GET access to the Clients API16 but not DELETE access see the roles specification methods attribute below15 Providing an access token In a header curl H Authorization token TOKEN httpslocalhost3000events As a parameter curl httpslocalhost3000eventstokenTOKEN RBAC configuration Example RBAC definition The following is an example RBAC configuration using the RBAC for LDAP7 authentication driver a JSON configuration file located at etcsensudashboardjson dashboard host 0000 port 3000 ldap server localhost port 389 basedn cnusersdcdomaindctld binduser cnbindercnusersdcdomaindctld bindpass secret roles name guests members guestsgroup datacenters uswest1 subscriptions webserver readonly true name operators members operatorsgroup datacenters subscriptions readonly false RBAC definition specification DRIVER attributes Role based access controls for Sensu Enterprise are configured within the dashboard DRIVER configuration scope where DRIVER is one of the following ldap see RBAC for LDAP7 github see RBAC for GitHub8 gitlab see RBAC for GitLab9 roles attributes Role attributes are defined within the corresponding RBAC DRIVER10 configuration scope17 eg dashboard DRIVER roles The roles attribute is always a JSON array ie roles containing JSON hashes of role definitions The following role definition specification is common across all RBAC drivers EXAMPLE rolesattributesexample dashboard ldap roles name examplerole members examplegroup datacenters subscriptions exampleapplication readonly false ATTRIBUTES rolesattributesspecification name "},{"title":"RBAC for GitHub","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/rbac/rbac-for-github","display_name":"Sensu Enterprise Dashboard 2.10: RBAC for GitHub","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise6 users only Reference Documentation What is RBAC for GitHubwhatisrbacforgithub RBAC for GitHub configurationrbacforgithubconfiguration Example RBAC for GitHub definitionexamplerbacforgithubdefinition RBAC for GitHub definition specificationrbacforgithubdefinitionspecification github attributesgithubattributes roles attributesrolesattributes Register an OAuth Application in GitHubregisteranoauthapplicationingithub What is RBAC for GitHub The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for GitHub driver provides support for using GitHubcom1 or a GitHub Enterprise2 installation for RBAC authentication RBAC for GitHub configuration Example RBAC for GitHub definition dashboard host 0000 port 3000 github clientId a8e43af034e7f2608780 clientSecret b63968394be6ed2edb61c93847ee792f31bf6216 server httpsgithubcom roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for GitHub definition specification github attributes clientId "},{"title":"RBAC for GitLab","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/rbac/rbac-for-gitlab","display_name":"Sensu Enterprise Dashboard 2.10: RBAC for GitLab","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise5 users only Reference Documentation What is RBAC for GitLabwhatisrbacforgitlab RBAC for GitLab configurationrbacforgitlabconfiguration Example RBAC for GitLab definitionexamplerbacforgitlabdefinition RBAC for GitLab definition specificationrbacforgitlabdefinitionspecification gitlab attributesgitlabattributes roles attributesrolesattributes Register an OAuth Application in GitLabregisteranoauthapplicationingitlab What is RBAC for GitLab The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for GitHub driver provides support for using GitLab1 for RBAC authentication RBAC for GitLab configuration Example RBAC for GitLab definition dashboard host 0000 port 3000 gitlab applicationId 6141d36e5ea48103bc39bb3eb5eede8735f0dd8f9788d8b30255dbf4d218628f secret 7d419a3b2f7b92edab30f963d7c0a4d1841f0dc46b4403b11146b4f1d5cb3a4e server httpsgitlabcom redirecturl httpssensuexampleorglogincallback roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for GitLab definition specification gitlab attributes applicationid "},{"title":"RBAC for LDAP","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/rbac/rbac-for-ldap","display_name":"Sensu Enterprise Dashboard 2.10: RBAC for LDAP","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise5 users only Reference Documentation What is RBAC for LDAPwhatisrbacforldap LDAP provider compatibilityldapprovidercompatibility RBAC for LDAP configurationrbacforldapconfiguration Example RBAC for LDAP definitionexamplerbacforldapdefinition RBAC for LDAP definition specificationrbacforldapdefinitionspecification ldap attributesldapattributes servers attributesserversattributes roles attributesrolesattributes What is RBAC for LDAP The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for LDAP driver provides support for using a Lightweight Directory Access Protocol LDAP provider eg Microsoft Active Directory1 OpenLDAP2 etc for RBAC authentication LDAP provider compatibility This driver is tested with Microsoft Active Directory AD and should be compatible with any standardscompliant LDAP provider RBAC for LDAP configuration Example RBAC for LDAP definition dashboard host 0000 port 3000 ldap debug false servers server localhost port 389 basedn cnusersdcdomaindctld binduser cnbindercnusersdcdomaindctld bindpass secret insecure false security starttls userattribute sAMAccountName roles name guests members guestsgroup datacenters uswest1 subscriptions webserver readonly true name operators members operatorsgroup datacenters subscriptions readonly false RBAC for LDAP definition specification ldap attributes debug "},{"title":"RBAC for OpenID Connect (OIDC)","product":"Sensu Enterprise Dashboard","version":"2.10","location":"/sensu-enterprise-dashboard/2.10/rbac/rbac-for-oidc","display_name":"Sensu Enterprise Dashboard 2.10: RBAC for OpenID Connect (OIDC)","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise3 users only Reference Documentation What is RBAC for OIDCwhatisrbacforoidc RBAC for OIDC configurationrbacforoidcconfiguration Example RBAC for OIDC definitionexamplerbacforoidcdefinition RBAC for OIDC definition specificationrbacforoidcdefinitionspecification oidc attributesoidcattributes roles attributesrolesattributes Register an OIDC Applicationregisteranoidcapplication Oktaokta PingFederatepingfederate What is RBAC for OIDC The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for OIDC driver provides support for using the OpenID Connect 10 protocol OIDC on top of the OAuth 20 protocol for RBAC authentication RBAC for OIDC configuration Example RBAC for OIDC definition dashboard host 0000 port 3000 oidc additionalScopes groups clientId a8e43af034e7f2608780 clientSecret b63968394be6ed2edb61c93847ee792f31bf6216 insecure false redirectURL http1270014000logincallback server httpslocalhost9031 roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for OIDC definition specification oidc attributes additionalScopes "},{"title":"Sensu Enterprise Dashboard","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/_index","display_name":"Sensu Enterprise Dashboard 2.11: Sensu Enterprise Dashboard","content":" Reference Documentation What is the Sensu Enterprise Dashboardwhatisthesensuenterprisedashboard What is Uchiwawhatisuchiwa What is the Sensu Enterprise Consolewhatisthesensuenterpriseconsole What is a Sensu datacenterwhatisasensudatacenter What is the Sensu Enterprise Dashboard The Sensu Enterprise Dashboard is a simple webbased application that provides realtime visibility into Sensu monitoring data with dedicated views for monitoring events clients checks aggregates data centers and more The dashboard provides powerful global search features for filtering views so users can focus on the data thats important to them The dashboard also provides basic operational controls to acknowledge or otherwise silence monitoring events request ad hoc execution of monitoring checks and much more What is Uchiwa The Sensu Enterprise Dashboard is based on the opensource ndash and community developed ndash Uchiwa2 dashboard Very much like the relationship between Sensu Core and Sensu Enterprise the Sensu Enterprise Dashboard builds on top of Uchiwa via a number of addedvalue extensions eg Role Based Access Controls3 LDAP4 GitHub5 and GitLab6 authentication Audit Logging7 etc which development also results in many contributions to the opensource Uchiwa dashboard project What is the Sensu Enterprise Console The Sensu Enterprise Console is a federated API endpoint provided by the Sensu Enterprise Dashboard for API access to multiple Sensu datacenters1 available in Sensu Enterprise Dashboard version 110 and newer This API provides addedvalue features including tokenbased authentication and granular rolebased access controls16 NOTE the Sensu Enterprise Dashboard is comprised of two components a backend service API for aggregating monitoring data from one or more Sensu datacenters5 and a web application for displaying this information As of Sensu Enterprise Dashboard version 110 this Sensu Enterprise Dashboard backend has been updated so that it provides the same API endpoints as the Sensu API1 Prior to version 110 the Sensu Enterprise Dashboard backend used different API routes for accessing data from specific datacenters for example client data was accessible via clientsuswest1client instead of clientsclientdcuswest1 Version 111 introduced access tokenbased authentication and version 112 introduced RBAC for the Console API What is a Sensu datacenter The Sensu Enterprise Dashboard provides access to monitoring data from one or more Sensu datacenters A Sensu datacenter is simply a Sensu API endpoint which corresponds to a Sensu installation consisting of one or more Sensu servers in cluster multiple API endpoints may be provided by a single Sensu installation or cluster 1 whatisasensudatacenter 2 httpwwwuchiwaio 3 sensuenterprisedashboard211rbacoverview 4 sensuenterprisedashboard211rbacrbacforldap 5 sensuenterprisedashboard211rbacrbacforgithub 6 sensuenterprisedashboard211rbacrbacforgitlab 7 sensuenterprisedashboard211rbacauditlogging 8 dashboarddefinitionspecification 9 sensucore12referenceconfigurationconfigurationscopes 10 sensucore12referenceconfigurationconfigurationmerging 11 authattributes 12 auditattributes 13 ldapattributes 14 githubattributes 15 gitlabattributes 16 sensuenterprisedashboard211rbacoverviewrbacforthesensuenterpriseconsoleapi 17 sensuenterprisedashboard211rbacrbacforoidc 18 oidcattributes"},{"title":"CHANGELOG","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/changelog","display_name":"Sensu Enterprise Dashboard 2.11: CHANGELOG","content":"NOTE Sensu Enterprise Dashboard is built on Uchiwa Uchiwa changes are documented in the Uchiwa changeloguchiwachangelog Releases Enterprise Dashboard 2112 Release Notesenterprisedashboardv2112 Enterprise Dashboard 2111 Release Notesenterprisedashboardv2111 Enterprise Dashboard 2110 Release Notesenterprisedashboardv2110 Enterprise Dashboard 2101 Release Notesenterprisedashboardv2101 Enterprise Dashboard 2100 Release Notesenterprisedashboardv2100 Enterprise Dashboard 290 Release Notesenterprisedashboardv290 Enterprise Dashboard 281 Release Notesenterprisedashboardv281 Enterprise Dashboard 280 Release Notesenterprisedashboardv280 Enterprise Dashboard 270 Release Notesenterprisedashboardv270 Enterprise Dashboard 260 Release Notesenterprisedashboardv260 Enterprise Dashboard 250 Release Notesenterprisedashboardv250 Enterprise Dashboard 240 Release Notesenterprisedashboardv240 Enterprise Dashboard 230 Release Notesenterprisedashboardv230 Enterprise Dashboard 221 Release Notesenterprisedashboardv221 Enterprise Dashboard 220 Release Notesenterprisedashboardv220 Enterprise Dashboard 211 Release Notesenterprisedashboardv211 Enterprise Dashboard 210 Release Notesenterprisedashboardv210 Enterprise Dashboard 200 Release Notesenterprisedashboardv200 Enterprise Dashboard 1120 Release Notesenterprisedashboardv1120 Enterprise Dashboard 1110 Release Notesenterprisedashboardv1110 Enterprise Dashboard 1101 Release Notesenterprisedashboardv1101 Enterprise Dashboard 1100 Release Notesenterprisedashboardv1100 Enterprise Dashboard 198 Release Notesenterprisedashboardv198 Enterprise Dashboard 197 Release Notesenterprisedashboardv197 Enterprise Dashboard 196 Release Notesenterprisedashboardv196 Enterprise Dashboard 195 Release Notesenterprisedashboardv195 Enterprise Dashboard 194 Release Notesenterprisedashboardv194 Enterprise Dashboard 193 Release Notesenterprisedashboardv193 Enterprise Dashboard 192 Release Notesenterprisedashboardv192 Enterprise Dashboard 191 Release Notesenterprisedashboardv191 Enterprise Dashboard 190 Release Notesenterprisedashboardv190 Enterprise Dashboard 180 Release Notesenterprisedashboardv180 Enterprise Dashboard 170 Release Notesenterprisedashboardv170 Enterprise Dashboard 162 Release Notesenterprisedashboardv162 Enterprise Dashboard 161 Release Notesenterprisedashboardv161 Enterprise Dashboard 160 Release Notesenterprisedashboardv160 Enterprise Dashboard 151 Release Notesenterprisedashboardv151 Enterprise Dashboard 150 Release Notesenterprisedashboardv150 Enterprise Dashboard 146 Release Notesenterprisedashboardv146 Enterprise Dashboard 145 Release Notesenterprisedashboardv145 Enterprise Dashboard 144 Release Notesenterprisedashboardv144 Enterprise Dashboard 143 Release Notesenterprisedashboardv143 Enterprise Dashboard 142 Release Notesenterprisedashboardv142 Enterprise Dashboard 141 Release Notesenterprisedashboardv141 Enterprise Dashboard 140 Release Notesenterprisedashboardv140 Enterprise Dashboard 130 Release Notesenterprisedashboardv130 Enterprise Dashboard 121 Release Notesenterprisedashboardv121 Enterprise Dashboard 120 Release Notesenterprisedashboardv120 Enterprise Dashboard 111 Release Notesenterprisedashboardv111 Enterprise Dashboard 110 Release Notesenterprisedashboardv110 Enterprise Dashboard 100 Release Notesenterprisedashboardv100 Enterprise Dashboard 015 Release Notesenterprisedashboardv015 Enterprise Dashboard 013 Release Notesenterprisedashboardv013 Enterprise Dashboard 012 Release Notesenterprisedashboardv012 Enterprise Dashboard 011 Release Notesenterprisedashboardv011 Enterprise Dashboard 010 Release Notesenterprisedashboardv010 Enterprise Dashboard 2112 Release Notes enterprisedashboardv2112 January 10 2018 mdash Sensu Enterprise Dashboard version 2112 has been released and is available for immediate download CHANGES enterprisedashboardv2112changes IMPROVEMENT Built on Uchiwa 111uchiwav111 Enterprise Dashboard 2111 Release Notes enterprisedashboardv2111 January 9 2018 mdash Sensu Enterprise Dashboard version 2111 has been released and is available for immediate download CHANGES enterprisedashboardv2111changes FIX Properly display Sensu Enterprise version in the info view Enterprise Dashboard 2110 Release Notes enterprisedashboardv2110 December 18 2017 mdash Sensu Enterprise Dashboard version 2110 has been released and is available for immediate download CHANGES enterprisedashboardv2110changes IMPROVEMENT Built on Uchiwa 110uchiwav110 Enterprise Dashboard 2102 Release Notes enterprisedashboardv2102 October 5 2017 mdash Sensu Enterprise Dashboard version 2102 has been released and is available for immediate download CHANGES enterprisedashboardv2102changes IMPROVEMENT Built on Uchiwa 0263uchiwav0263 Enterprise Dashboard 2101 Release Notes enterprisedashboardv2101 September 29 2017 mdash Sensu Enterprise Dashboard version 2101 has been released and is available for immediate download CHANGES enterprisedashboardv2101changes IMPROVEMENT Built on Uchiwa 0262uchiwav0262 Enterprise Dashboard 2100 Release Notes enterprisedashboardv2100 September 29 2017 mdash Sensu Enterprise Dashboard version 2100 has been released and is available for immediate download CHANGES enterprisedashboardv2100changes IMPROVEMENT Built on Uchiwa 0261uchiwav0261 FIX Properly display keepalives events with RBAC Uses the clients subscriptions if a checks subscribers is empty eg keepalive event Enterprise Dashboard 290 Release Notes enterprisedashboardv290 July 26 2017 mdash Sensu Enterprise Dashboard version 290 has been released and is available for immediate download CHANGES enterprisedashboardv290changes IMPROVEMENT Built on Uchiwa 0253uchiwav0253 IMPROVEMENT Added RBAC intergration for Okta oauth2 IMPROVEMENT Added regex support for arrays in collections FIX Changed RBAC intergration for GitHub from repo to org Enterprise Dashboard 281 Release Notes enterprisedashboardv281 May 16 2017 mdash Sensu Enterprise Dashboard version 281 has been released and is available for immediate download CHANGES enterprisedashboardv281changes IMPROVEMENT Built on Uchiwa 0252uchiwav0252 IMPROVEMENT Properly display keepalives events with RBAC Uses the clients subscriptions if a checks subscribers is empty eg keepalive event Enterprise Dashboard 280 Release Notes enterprisedashboardv280 May 10 2017 mdash Sensu Enterprise Dashboard version 280 has been released and is available for immediate download CHANGES enterprisedashboardv280changes IMPROVEMENT Built on Uchiwa 0251uchiwav0251 FIX Fix RBAC subscription filtering Enterprise Dashboard 270 Release Notes enterprisedashboardv270 April 13 2017 mdash Sensu Enterprise Dashboard version 270 has been released and is available for immediate download CHANGES enterprisedashboardv270changes IMPROVEMENT Built on Uchiwa 0240uchiwav0240 Enterprise Dashboard 260 Release Notes enterprisedashboardv260 April 4 2017 mdash Sensu Enterprise Dashboard version 260 has been released and is available for immediate download CHANGES enterprisedashboardv260changes IMPROVEMENT Built on Uchiwa 0231uchiwav0231 IMPROVEMENT Added support for authentication against multiple LDAP servers Enterprise Dashboard 250 Release Notes enterprisedashboardv250 April 4 2017 mdash Sensu Enterprise Dashboard version 250 has been released and is available for immediate download CHANGES enterprisedashboardv250changes IMPROVEMENT Built on Uchiwa 0230uchiwav0230 IMPROVEMENT Added support for boolean values in collections queries Enterprise Dashboard 240 Release Notes enterprisedashboardv240 March 13 2017 mdash Sensu Enterprise Dashboard version 240 has been released and is available for immediate download CHANGES enterprisedashboardv240changes IMPROVEMENT Built on Uchiwa 0222uchiwav0222 BUGFIX Fix issue with HUD results graph BUGFIX Fix issue with audit logging not writing to file IMPROVEMENT Added OpenID Connect authentication IMPROVEMENT Switched CI from Drone to Travis CI Enterprise Dashboard 230 Release Notes enterprisedashboardv230 February 13 2017 mdash Sensu Enterprise Dashboard version 230 has been released and is available for immediate download CHANGES enterprisedashboardv230changes IMPROVEMENT Built on Uchiwa 0221uchiwav0221 IMPROVEMENT Added DisableNestedGroups attribute to LDAP driver Enterprise Dashboard 221 Release Notes enterprisedashboardv221 December 15 2016 mdash Sensu Enterprise Dashboard version 221 has been released and is available for immediate download CHANGES enterprisedashboardv221changes IMPROVEMENT Properly escape values in search queries for the LDAP authentication driver Enterprise Dashboard 220 Release Notes enterprisedashboardv220 December 8 2016 mdash Sensu Enterprise Dashboard version 220 has been released and is available for immediate download CHANGES enterprisedashboardv220changes IMPROVEMENT Built on Uchiwa 0210uchiwav0210 Enterprise Dashboard 211 Release Notes enterprisedashboardv211 November 30 2016 mdash Sensu Enterprise Dashboard version 211 has been released and is available for immediate download CHANGES enterprisedashboardv211changes FIX Fixed OAuth authentication providers Enterprise Dashboard 210 Release Notes enterprisedashboardv210 November 22 2016 mdash Sensu Enterprise Dashboard version 210 has been released and is available for immediate download CHANGES enterprisedashboardv210changes IMPROVEMENT Built on Uchiwa 0202uchiwav0202 IMPROVEMENT Add diagnostic information to the authentication drivers when a role has no members Enterprise Dashboard 200 Release Notes enterprisedashboardv200 October 17 2016 mdash Sensu Enterprise Dashboard version 200 has been released and is available for immediate download CHANGES enterprisedashboardv200changes IMPROVEMENT Built on Uchiwa 0190uchiwav0190 IMPROVEMENT Add support for Sensu Enterprise 200 FIX Fix the clear button for collections Enterprise Dashboard 1120 Release Notes enterprisedashboardv1120 August 3 2016 mdash Sensu Enterprise Dashboard version 1120 has been released and is available for immediate download CHANGES enterprisedashboardv1120changes IMPROVEMENT Built on Uchiwa 0171uchiwav0171 IMPROVEMENT Upgraded to Go 16 IMPROVEMENT Added finer RBAC granularity Enterprise Dashboard 1110 Release Notes enterprisedashboardv1110 July 26 2016 mdash Sensu Enterprise Dashboard version 1110 has been released and is available for immediate download CHANGES enterprisedashboardv1110changes IMPROVEMENT Built on Uchiwa 0170uchiwav0170 IMPROVEMENT Added API tokenbased authentication Enterprise Dashboard 1101 Release Notes enterprisedashboardv1101 July 15 2016 mdash Sensu Enterprise Dashboard version 1101 has been released and is available for immediate download CHANGES enterprisedashboardv1101changes FIX Fixed graphs scaling issues on back button to the HUD Enterprise Dashboard 1100 Release Notes enterprisedashboardv1100 July 6 2016 mdash Sensu Enterprise Dashboard version 1100 has been released and is available for immediate download CHANGES enterprisedashboardv1100changes IMPROVEMENT Built on Uchiwa 0160uchiwav0160 IMPROVEMENT Added additional debug option for LDAP driver FIX Fixed graphs display issues on back button to the HUD Enterprise Dashboard 198 Release Notes enterprisedashboardv198 June 7 2016 mdash Sensu Enterprise Dashboard version 198 has been released and is available for immediate download CHANGES enterprisedashboardv198changes IMPROVEMENT Built on Uchiwa 0150uchiwav0150 IMPROVEMENT Added support for LDAP dialects IMPROVEMENT Added support for aggregates in SE 113 Enterprise Dashboard 197 Release Notes enterprisedashboardv197 May 25 2016 mdash Sensu Enterprise Dashboard version 197 has been released and is available for immediate download CHANGES enterprisedashboardv197changes FIX Prevented exceptions on the HUD when metric series are empty Enterprise Dashboard 196 Release Notes enterprisedashboardv196 May 25 2016 mdash Sensu Enterprise Dashboard version 196 has been released and is available for immediate download CHANGES enterprisedashboardv196changes FIX Prevent exceptions on the HUD when metric series are invalid Enterprise Dashboard 195 Release Notes enterprisedashboardv195 April 21 2016 mdash Sensu Enterprise Dashboard version 195 has been released and is available for immediate download CHANGES enterprisedashboardv195changes IMPROVEMENT Added support for IPv6 addresses in LDAP driver Enterprise Dashboard 194 Release Notes enterprisedashboardv194 March 3 2016 mdash Sensu Enterprise Dashboard version 194 has been released and is available for immediate download CHANGES enterprisedashboardv194changes IMPROVEMENT Built on Uchiwa 0143uchiwav0143 Enterprise Dashboard 193 Release Notes enterprisedashboardv193 February 23 2016 mdash Sensu Enterprise Dashboard version 193 has been released and is available for immediate download CHANGES enterprisedashboardv193changes BUGFIX Better handling of an empty recursive group search result in LDAP authentication driver Enterprise Dashboard 192 Release Notes enterprisedashboardv192 February 19 2016 mdash Sensu Enterprise Dashboard version 192 has been released and is available for immediate download CHANGES enterprisedashboardv192changes IMPROVEMENT Use the memberOf attribute in AD for role assignation in addition to the recursive query Enterprise Dashboard 191 Release Notes enterprisedashboardv191 February 8 2016 mdash Sensu Enterprise Dashboard version 191 has been released and is available for immediate download CHANGES enterprisedashboardv191changes BUGFIX Prevent a fatal panic when one of the SE metrics is empty Enterprise Dashboard 190 Release Notes enterprisedashboardv190 February 2 2016 mdash Sensu Enterprise Dashboard version 190 has been released and is available for immediate download CHANGES enterprisedashboardv190changes IMPROVEMENT Built on Uchiwa 0142uchiwav0142 IMPROVEMENT Added support for nested groups in AD Enterprise Dashboard 180 Release Notes enterprisedashboardv180 January 19 2016 mdash Sensu Enterprise Dashboard version 180 has been released and is available for immediate download CHANGES enterprisedashboardv180changes IMPROVEMENT Built on Uchiwa 0141uchiwav0141 IMPROVEMENT Added support for a fallback RBAC role IMPROVEMENT Added HUD styling tweaks IMPROVEMENT Added the Gitlab RBAC authentication driver IMPROVEMENT Improved debug mode Enterprise Dashboard 170 Release Notes enterprisedashboardv170 November 30 2015 mdash Sensu Enterprise Dashboard version 170 has been released and is available for immediate download CHANGES enterprisedashboardv170changes IMPROVEMENT Built on Uchiwa 0130uchiwav0130 IMPROVEMENT HUD now uses the new SE metrics IMPROVEMENT LDAP driver is caseinsensitive but casepreserving Enterprise Dashboard 162 Release Notes enterprisedashboardv162 November 6 2015 mdash Sensu Enterprise Dashboard version 162 has been released and is available for immediate download CHANGES enterprisedashboardv162changes IMPROVEMENT Removed asyncjs dependency IMPROVEMENT Updated sensuenterprise theme CSS files Enterprise Dashboard 161 Release Notes enterprisedashboardv161 November 6 2015 mdash Sensu Enterprise Dashboard version 161 has been released and is available for immediate download CHANGES enterprisedashboardv161changes IMPROVEMENT Upgraded uchiwaweb bower package Enterprise Dashboard 160 Release Notes enterprisedashboardv160 November 6 2015 mdash Sensu Enterprise Dashboard version 160 has been released and is available for immediate download CHANGES enterprisedashboardv160changes IMPROVEMENT Built on Uchiwa 0121uchiwav0121 IMPROVEMENT Rename the dashboard view to HUD Enterprise Dashboard 151 Release Notes enterprisedashboardv151 October 6 2015 mdash Sensu Enterprise Dashboard version 151 has been released and is available for immediate download CHANGES enterprisedashboardv151changes FIX Use proper uchiwaweb bocker package Enterprise Dashboard 150 Release Notes enterprisedashboardv150 October 6 2015 mdash Sensu Enterprise Dashboard version 150 has been released and is available for immediate download CHANGES enterprisedashboardv150changes IMPROVEMENT Built on Uchiwa 0112uchiwav0112 IMPROVEMENT Deprecate use of results Sensu API endpoint Enterprise Dashboard 146 Release Notes enterprisedashboardv146 September 29 2015 mdash Sensu Enterprise Dashboard version 146 has been released and is available for immediate download CHANGES enterprisedashboardv146changes FIX Revert change until uchiwa is upgraded Enterprise Dashboard 145 Release Notes enterprisedashboardv145 September 29 2015 mdash Sensu Enterprise Dashboard version 145 has been released and is available for immediate download CHANGES enterprisedashboardv145changes IMPROVEMENT Use enterprise filters for the dashboard Enterprise Dashboard 144 Release Notes enterprisedashboardv144 September 11 2015 mdash Sensu Enterprise Dashboard version 144 has been released and is available for immediate download CHANGES enterprisedashboardv144changes FIX Hide sensitive LDAP information bindpass in dashboard IMPROVEMENT Updated dashboard widgets text FIX Stepped Y axis max value in dashboard graphs Enterprise Dashboard 143 Release Notes enterprisedashboardv143 September 10 2015 mdash Sensu Enterprise Dashboard version 143 has been released and is available for immediate download CHANGES enterprisedashboardv143changes IMPROVEMENT Allow customizable group and user BaseDN for LDAP driver Enterprise Dashboard 142 Release Notes enterprisedashboardv142 September 10 2015 mdash Sensu Enterprise Dashboard version 142 has been released and is available for immediate download CHANGES enterprisedashboardv142changes IMPROVEMENT Allow customizable Group Membership Attribute for LDAP driver Enterprise Dashboard 141 Release Notes enterprisedashboardv141 September 8 2015 mdash Sensu Enterprise Dashboard version 141 has been released and is available for immediate download CHANGES enterprisedashboardv141changes IMPROVEMENT Allow customizable group and user object class for LDAP driver Enterprise Dashboard 140 Release Notes enterprisedashboardv140 September 1 2015 mdash Sensu Enterprise Dashboard version 140 has been released and is available for immediate download CHANGES enterprisedashboardv140changes IMPROVEMENT Built on Uchiwa 0104uchiwav0104 IMPROVEMENT Added support for OpenLDAP IMPROVEMENT Send failed logon to audit logging IMPROVEMENT Update dashboard widgets text Enterprise Dashboard 130 Release Notes enterprisedashboardv130 August 3 2015 mdash Sensu Enterprise Dashboard version 130 has been released and is available for immediate download CHANGES enterprisedashboardv130changes IMPROVEMENT Built on Uchiwa 0103uchiwav0103 IMPROVEMENT Added audit logging IMPROVEMENT Added dashboard Enterprise Dashboard 121 Release Notes enterprisedashboardv121 June 19 2015 mdash Sensu Enterprise Dashboard version 121 has been released and is available for immediate download CHANGES enterprisedashboardv121changes IMPROVEMENT Built on Uchiwa 091uchiwav091 FIX Use proper path for godep when building binaries Enterprise Dashboard 120 Release Notes enterprisedashboardv120 June 12 2015 mdash Sensu Enterprise Dashboard version 120 has been released and is available for immediate download CHANGES enterprisedashboardv120changes IMPROVEMENT Use godep for dependencies vendoring IMPROVEMENT Add support for userdefined roles IMPROVEMENT Add support for Github Enterprise IMPROVEMENT LDAP driver support for disabling SSL verification Enterprise Dashboard 111 Release Notes enterprisedashboardv111 May 7 2015 mdash Sensu Enterprise Dashboard version 111 has been released and is available for immediate download CHANGES enterprisedashboardv111changes IMPROVEMENT Collections now use the new backendServicepostStash service Enterprise Dashboard 110 Release Notes enterprisedashboardv110 May 5 2015 mdash Sensu Enterprise Dashboard version 110 has been released and is available for immediate download CHANGES enterprisedashboardv110changes IMPROVEMENT Built on Uchiwa 081uchiwav081 IMPROVEMENT Add GitHub auth driver IMPROVEMENT Add LDAP auth driver IMPROVEMENT Remove dashboard authentication by default Enterprise Dashboard 100 Release Notes enterprisedashboardv100 April 8 2015 mdash Sensu Enterprise Dashboard version 100 has been released and is available for immediate download CHANGES enterprisedashboardv110changes IMPROVEMENT Built on Uchiwa 071uchiwav071 IMPROVEMENT Google fonts with Sensu Enterprise Dashboard IMPROVEMENT Set default SQL password to sensu Enterprise Dashboard 015 Release Notes enterprisedashboardv015 March 5 2015 mdash Sensu Enterprise Dashboard version 015 has been released and is available for immediate download CHANGES enterprisedashboardv015changes IMPROVEMENT New Dockerfile with CentOS 6 base for compatibility Enterprise Dashboard 013 Release Notes enterprisedashboardv013 March 4 2015 mdash Sensu Enterprise Dashboard version 013 has been released and is available for immediate download CHANGES enterprisedashboardv013changes IMPROVEMENT Config hash now supports dashboard instead of uchiwa IMPROVEMENT Dashboard version constant now available Enterprise Dashboard 012 Release Notes enterprisedashboardv012 February 27 2015 mdash Sensu Enterprise Dashboard version 012 has been released and is available for immediate download CHANGES enterprisedashboardv012changes IMPROVEMENT Renamed uchiwaenterprise theme to sensuenterprise IMPROVEMENT Changed favicon to Sensu logo FIX Fixed prepost install and remove package scripts Enterprise Dashboard 011 Release Notes enterprisedashboardv011 February 27 2015 mdash Sensu Enterprise Dashboard version 011 has been released and is available for immediate download CHANGES enterprisedashboardv011changes FIX Fixed dashboard src content directory structure Enterprise Dashboard 010 Release Notes enterprisedashboardv010 February 27 2015 mdash Sensu Enterprise Dashboard version 010 has been released and is available for immediate download CHANGES enterprisedashboardv010changes IMPROVEMENT Building unstable packages for testing purposes uchiwachangelog httpsgithubcomsensuuchiwablobmasterCHANGELOGmd uchiwav111 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd11120180110 uchiwav110 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd11020171215 uchiwav0263 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd026320171005 uchiwav0262 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd026220171002 uchiwav0261 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd026120170929 uchiwav0253 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025320170725 uchiwav0252 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025220170516 uchiwav0251 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025120170510 uchiwav0240 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd024020170413 uchiwav0231 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd023120170329 uchiwav0231 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd023020170324 uchiwav0222 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd022220170310 uchiwav0221 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd022120170206 uchiwav0210 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd021020161208 uchiwav0202 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd020220161121 uchiwav0190 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd019020161016 uchiwav0171 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd017120160802 uchiwav0170 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd017020160720 uchiwav0160 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd016020160623 uchiwav0150 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd015020160602 uchiwav0143 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014320160303 uchiwav0142 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014220160202 uchiwav0141 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014120160115 uchiwav0130 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd013020151122 uchiwav0121 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd012120151105 uchiwav0112 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd011220151004 uchiwav0104 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd010420150901 uchiwav0103 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd010320150803 uchiwav091 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd09120150610 uchiwav081 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd08120150505 uchiwav071 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd07120150401"},{"title":"Collections","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/collections","display_name":"Sensu Enterprise Dashboard 2.11: Collections","content":"Collections are a grouping of items returned by a collection query This query acts like a global search and it persists between the different views Collections can be easily shared and saved collectionsimagesenterprisedashboardcollectionspng Collection Query The most basic query is composed of a field and its value in the form of fieldvalue A query can use any field visible or not to match a value such as dcuswest1 subscriberrabbitmq subscriptionlinux teamwebops Regular Expressions The match method of Javascripts String object is used to retrieve the matches thus the following special characters are available to use exclusively in the values of a query Matches any single character For example dcastria matches the datacenter austria Matches the preceding character 0 or more times For example dccan matches the datacenters canada and vatican but not cameroon Matches the preceding character 1 or more times For example dcira matches the datacenters iran and iraq but not ireland Matches the preceding character 0 or 1 time For example dcoco matches the datacenter cameroon but not morocco Matches beginning of input For example dcpor matches the datacenter portugal but not singapore Matches end of input For example dcnea matches the datacenter guinea but not guineabissau Operators The familiar operators AND OR and NOT are supported You may use multiple operators within a single query Be aware that the use of many operators may cause higher than normal resource usage dcuseast1 AND namecentos Includes all items from the datacenter useast1 that have centos in their name dcuseast1 OR dcuswest1 Includes all items from the datacenters useast1 or uswest1 dcuseast1 NOT namecentos Includes all items from the datacenter useast1 that do not have centos in their name NOT dcuseast1 Includes all items that are not part of the datacenter useast1 dcuseast1 OR dcuswest1 NOT namecentos Includes all items from the datacenters useast1 or uswest1 that dont have centos in their name"},{"title":"Configuration","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/configuration","display_name":"Sensu Enterprise Dashboard 2.11: Configuration","content":" Dashboard configuration Example dashboard configuration The following is the bare minimum that should be included in your Sensu Enterprise Dashboard configuration sensu name sensuserver1 host api1examplecom port 4567 dashboard host 0000 port 3000 NOTE the Sensu Enterprise Dashboard requires two configuration scopes sensu and dashboard see Dashboard definition specification8 below Dashboard definition specification dashboardconfigurationattributes The Sensu Enterprise dashboard uses two configuration scopes9 the sensu configuration scope provides connection details for one or more Sensu API endpoints ie datacenters1 and the dashboard configuration scope is used to configure the behavior of the dashboard itself NOTE by default the Sensu Enterprise Dashboard will load configuration from etcsensudashboardjson andor from JSON configuration files located in etcsensudashboarddjson with the same configuration merging behavior as described here2 sensu attributes sensuattributes name "},{"title":"Overview","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/dashboard","display_name":"Sensu Enterprise Dashboard 2.11: Overview","content":" Reference Documentation What is the Sensu Enterprise Dashboardwhatisthesensuenterprisedashboard What is Uchiwawhatisuchiwa What is the Sensu Enterprise Consolewhatisthesensuenterpriseconsole What is a Sensu datacenterwhatisasensudatacenter Dashboard configurationdashboardconfiguration Example dashboard configurationexampledashboardconfiguration Dashboard configuration attributesdashboardconfigurationattributes sensu attributessensuattributes dashboard attributesdashboardattributes auth attributesauthattributes audit attributesauditattributes github attributesgithubattributes gitlab attributesgitlabattributes ldap attributesldapattributes oidc attributesoidcattributes What is the Sensu Enterprise Dashboard The Sensu Enterprise Dashboard is a simple webbased application that provides realtime visibility into Sensu monitoring data with dedicated views for monitoring events clients checks aggregates data centers and more The dashboard provides powerful global search features for filtering views so users can focus on the data thats important to them The dashboard also provides basic operational controls to acknowledge or otherwise silence monitoring events request ad hoc execution of monitoring checks and much more What is Uchiwa The Sensu Enterprise Dashboard is based on the opensource ndash and community developed ndash Uchiwa2 dashboard Very much like the relationship between Sensu Core and Sensu Enterprise the Sensu Enterprise Dashboard builds on top of Uchiwa via a number of addedvalue extensions eg Role Based Access Controls3 LDAP4 GitHub5 and GitLab6 authentication Audit Logging7 etc which development also results in many contributions to the opensource Uchiwa dashboard project What is the Sensu Enterprise Console The Sensu Enterprise Console is a federated API endpoint provided by the Sensu Enterprise Dashboard for API access to multiple Sensu datacenters1 available in Sensu Enterprise Dashboard version 110 and newer This API provides addedvalue features including tokenbased authentication and granular rolebased access controls16 NOTE the Sensu Enterprise Dashboard is comprised of two components a backend service API for aggregating monitoring data from one or more Sensu datacenters5 and a web application for displaying this information As of Sensu Enterprise Dashboard version 110 this Sensu Enterprise Dashboard backend has been updated so that it provides the same API endpoints as the Sensu API1 Prior to version 110 the Sensu Enterprise Dashboard backend used different API routes for accessing data from specific datacenters for example client data was accessible via clientsuswest1client instead of clientsclientdcuswest1 Version 111 introduced access tokenbased authentication and version 112 introduced RBAC for the Console API What is a Sensu datacenter The Sensu Enterprise Dashboard provides access to monitoring data from one or more Sensu datacenters A Sensu datacenter is simply a Sensu API endpoint which corresponds to a Sensu installation consisting of one or more Sensu servers in cluster multiple API endpoints may be provided by a single Sensu installation or cluster Dashboard configuration Example dashboard configuration The following is the bare minimum that should be included in your Sensu Enterprise Dashboard configuration sensu name sensuserver1 host api1examplecom port 4567 dashboard host 0000 port 3000 NOTE the Sensu Enterprise Dashboard requires two configuration scopes sensu and dashboard see Dashboard definition specification8 below Dashboard definition specification dashboardconfigurationattributes The Sensu Enterprise dashboard uses two configuration scopes9 the sensu configuration scope provides connection details for one or more Sensu API endpoints ie datacenters1 and the dashboard configuration scope is used to configure the behavior of the dashboard itself NOTE by default the Sensu Enterprise Dashboard will load configuration from etcsensudashboardjson andor from JSON configuration files located in etcsensudashboarddjson with the same configuration merging behavior as described here10 sensu attributes sensuattributes name "},{"title":"Heads-Up Display","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/hud","display_name":"Sensu Enterprise Dashboard 2.11: Heads-Up Display","content":"As of version 13 a new Heads Up Display HUD has been added to the Sensu Enterprise Dashboard which provides an ataglance view into the overall health of your infrastructure via a set of builtin graphs and status widgets headsup display screenshotimagesenterprisedashboardhudpng HUD RBAC Support The HUD is scoped according to any existing Sensu Enterprise Dashboard RBAC1 controls For example if a user is a member of a role with limited access to Sensu data they will only see history graphs and status widgets corresponding to the Sensu Subscriptions andor Datacenters they have access to NOTE At this time history graph data is stored in local storage via the browser which means that history graph data will only be available for as long as the user has the Sensu Enterprise Dashboard open An upcoming release of Sensu Enterprise will be providing this data via a new metrics API at which point history graph data will not be stored in the browser and a full 8hours of history will be available at all times Features History Graphs The Sensu Enterprise Dashboard HUD includes two history graphs which provide ataglance visibility for up to 8hours of monitoring system history captured in 10second intervals Event History Graph The Event History Graph records the state of Sensu events every 10 seconds The graph will display the total count of critical red warning yellow silenced gray and unknown black events The Event History Graph retains the last 8hours of event history Client History Graph The Client History Graph records the state of Sensu clients every 10 seconds The graph will display the total count of critical red warning yellow silenced gray and healthy green clients The Client History Graph retains the last 8hours of client history Status Summary Widgets The Sensu Enterprise Dashboard HUD includes three columns of status widgets which provide ataglance visibility into the status of Sensu Checks Events and Datacenters Each column will only display widgets corresponding to the current state of the monitoring system eg if there are no Critical events the Critical event count widget will not be displayed Check Status Summary Widgets The Check Status Summary widgets provide realtime counts for the current state of Sensu Checks ie critical red warning yellow silenced gray unknown black and healthy green Client Status Summary Widgets The Client Status Summary widgets provide realtime counts for the current state of Sensu Clients ie critical red warning yellow silenced gray unknown black and healthy green Datacenter Status Summary Widgets The Datacenter Status Summary widgets provide realtime counts for the current state of the datacenters ie Sensu Enterprise servers 1 sensuenterprisedashboard211configurationwhatisasensudatacenter"},{"title":"RBAC","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/rbac/_index","display_name":"Sensu Enterprise Dashboard 2.11: RBAC","content":""},{"title":"Audit Logging","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/rbac/audit-logging","display_name":"Sensu Enterprise Dashboard 2.11: Audit Logging","content":"As of Sensu Enterprise Dashboard version 13 Audit Logging is enabled by default Audit Logging captures user events in the dashboard such as user loginlogout and any user write actions in the dashboard ie silencing checks deleting clients deleting stashes Optionally it is also possible to log all HTTP GET requests ie every view requested by the user and every search query performed by the user NOTE Audit Logging requires authentication to be enabled Example configuration audit logfile varlogsensusensuenterprisedashboardauditlog level default Audit Logging attributes logfile "},{"title":"Role Based Access Controls","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/rbac/overview","display_name":"Sensu Enterprise Dashboard 2.11: Role Based Access Controls","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise0 users only Reference Documentation What are Role Based Access Controls for Sensu Enterprisewhatarerolebasedaccesscontrols How does Sensu provide RBAChowdoessensuproviderbac Supported RBAC driverssupportedrbacdrivers RBAC for the Sensu Enterprise Console APIrbacforthesensuenterpriseconsoleapi RBAC configurationrbacconfiguration Example RBAC definitionexamplerbacdefinition RBAC definition specificationrbacdefinitionspecification DRIVER attributesdriverattributes roles attributesrolesattributes methods attributesmethodsattributes What are Role Based Access Controls for Sensu Enterprise whatarerolebasedaccesscontrols Rolebased access controls RBAC are a system for restricting access to authorized users according to a role or job function RBAC for Sensu Enterprise enables administrators to grant the correct level access to many different development and operations teams without requiring them to maintain yet another user registry How does Sensu provide RBAC The Sensu Enterprise Dashboard provides comprehensive and granular RoleBased Access Controls RBAC with support for using a Lightweight Access Directory Provider LDAP GitHubcom1 GitHub Enterprise2 andor GitLab3 for authentication Roles can be defined to grant or restrict access to monitoring data based on datacenters4 Sensu subscriptions5 and even specific API endpoints see the Enterprise API reference documentation6 for more information Supported RBAC drivers Sensu Enterprise currently includes the following authentication drivers for RBAC LDAPrbacforldap GitHubrbacforgithub GitLabrbacforgitlab OIDCrbacforoidc RBAC for the Sensu Enterprise Console API As of Sensu Enterprise Dashboard version 112 RBAC configurations may be applied to the Sensu Enterprise Console API14 Access to the Sensu Enterprise Console API is controlled by access tokens which correspond to a role definition see the roles specification accessToken attribute below15 RBAC for the Console API provides granular controls for restricting access to specific API endpoints and HTTP methods eg it is possible to allow HTTP GET access to the Clients API16 but not DELETE access see the roles specification methods attribute below15 Providing an access token In a header curl H Authorization token TOKEN httpslocalhost3000events As a parameter curl httpslocalhost3000eventstokenTOKEN RBAC configuration Example RBAC definition The following is an example RBAC configuration using the RBAC for LDAP7 authentication driver a JSON configuration file located at etcsensudashboardjson dashboard host 0000 port 3000 ldap server localhost port 389 basedn cnusersdcdomaindctld binduser cnbindercnusersdcdomaindctld bindpass secret roles name guests members guestsgroup datacenters uswest1 subscriptions webserver readonly true name operators members operatorsgroup datacenters subscriptions readonly false RBAC definition specification DRIVER attributes Role based access controls for Sensu Enterprise are configured within the dashboard DRIVER configuration scope where DRIVER is one of the following ldap see RBAC for LDAP7 github see RBAC for GitHub8 gitlab see RBAC for GitLab9 roles attributes Role attributes are defined within the corresponding RBAC DRIVER10 configuration scope17 eg dashboard DRIVER roles The roles attribute is always a JSON array ie roles containing JSON hashes of role definitions The following role definition specification is common across all RBAC drivers EXAMPLE rolesattributesexample dashboard ldap roles name examplerole members examplegroup datacenters subscriptions exampleapplication readonly false ATTRIBUTES rolesattributesspecification name "},{"title":"RBAC for GitHub","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/rbac/rbac-for-github","display_name":"Sensu Enterprise Dashboard 2.11: RBAC for GitHub","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise6 users only Reference Documentation What is RBAC for GitHubwhatisrbacforgithub RBAC for GitHub configurationrbacforgithubconfiguration Example RBAC for GitHub definitionexamplerbacforgithubdefinition RBAC for GitHub definition specificationrbacforgithubdefinitionspecification github attributesgithubattributes roles attributesrolesattributes Register an OAuth Application in GitHubregisteranoauthapplicationingithub What is RBAC for GitHub The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for GitHub driver provides support for using GitHubcom1 or a GitHub Enterprise2 installation for RBAC authentication RBAC for GitHub configuration Example RBAC for GitHub definition dashboard host 0000 port 3000 github clientId a8e43af034e7f2608780 clientSecret b63968394be6ed2edb61c93847ee792f31bf6216 server httpsgithubcom roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for GitHub definition specification github attributes clientId "},{"title":"RBAC for GitLab","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/rbac/rbac-for-gitlab","display_name":"Sensu Enterprise Dashboard 2.11: RBAC for GitLab","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise5 users only Reference Documentation What is RBAC for GitLabwhatisrbacforgitlab RBAC for GitLab configurationrbacforgitlabconfiguration Example RBAC for GitLab definitionexamplerbacforgitlabdefinition RBAC for GitLab definition specificationrbacforgitlabdefinitionspecification gitlab attributesgitlabattributes roles attributesrolesattributes Register an OAuth Application in GitLabregisteranoauthapplicationingitlab What is RBAC for GitLab The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for GitHub driver provides support for using GitLab1 for RBAC authentication RBAC for GitLab configuration Example RBAC for GitLab definition dashboard host 0000 port 3000 gitlab applicationId 6141d36e5ea48103bc39bb3eb5eede8735f0dd8f9788d8b30255dbf4d218628f secret 7d419a3b2f7b92edab30f963d7c0a4d1841f0dc46b4403b11146b4f1d5cb3a4e server httpsgitlabcom redirecturl httpssensuexampleorglogincallback roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for GitLab definition specification gitlab attributes applicationid "},{"title":"RBAC for LDAP","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/rbac/rbac-for-ldap","display_name":"Sensu Enterprise Dashboard 2.11: RBAC for LDAP","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise5 users only Reference Documentation What is RBAC for LDAPwhatisrbacforldap LDAP provider compatibilityldapprovidercompatibility RBAC for LDAP configurationrbacforldapconfiguration Example RBAC for LDAP definitionexamplerbacforldapdefinition RBAC for LDAP definition specificationrbacforldapdefinitionspecification ldap attributesldapattributes servers attributesserversattributes roles attributesrolesattributes What is RBAC for LDAP The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for LDAP driver provides support for using a Lightweight Directory Access Protocol LDAP provider eg Microsoft Active Directory1 OpenLDAP2 etc for RBAC authentication LDAP provider compatibility This driver is tested with Microsoft Active Directory AD and should be compatible with any standardscompliant LDAP provider RBAC for LDAP configuration Example RBAC for LDAP definition dashboard host 0000 port 3000 ldap debug false servers server localhost port 389 basedn cnusersdcdomaindctld binduser cnbindercnusersdcdomaindctld bindpass secret insecure false security starttls userattribute sAMAccountName roles name guests members guestsgroup datacenters uswest1 subscriptions webserver readonly true name operators members operatorsgroup datacenters subscriptions readonly false RBAC for LDAP definition specification ldap attributes debug "},{"title":"RBAC for OpenID Connect (OIDC)","product":"Sensu Enterprise Dashboard","version":"2.11","location":"/sensu-enterprise-dashboard/2.11/rbac/rbac-for-oidc","display_name":"Sensu Enterprise Dashboard 2.11: RBAC for OpenID Connect (OIDC)","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise3 users only Reference Documentation What is RBAC for OIDCwhatisrbacforoidc RBAC for OIDC configurationrbacforoidcconfiguration Example RBAC for OIDC definitionexamplerbacforoidcdefinition RBAC for OIDC definition specificationrbacforoidcdefinitionspecification oidc attributesoidcattributes roles attributesrolesattributes Register an OIDC Applicationregisteranoidcapplication Oktaokta PingFederatepingfederate What is RBAC for OIDC The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for OIDC driver provides support for using the OpenID Connect 10 protocol OIDC on top of the OAuth 20 protocol for RBAC authentication RBAC for OIDC configuration Example RBAC for OIDC definition dashboard host 0000 port 3000 oidc additionalScopes groups clientId a8e43af034e7f2608780 clientSecret b63968394be6ed2edb61c93847ee792f31bf6216 insecure false redirectURL http1270014000logincallback server httpslocalhost9031 roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for OIDC definition specification oidc attributes additionalScopes "},{"title":"Sensu Enterprise Dashboard","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/_index","display_name":"Sensu Enterprise Dashboard 2.9: Sensu Enterprise Dashboard","content":" Reference Documentation What is the Sensu Enterprise Dashboardwhatisthesensuenterprisedashboard What is Uchiwawhatisuchiwa What is the Sensu Enterprise Consolewhatisthesensuenterpriseconsole What is a Sensu datacenterwhatisasensudatacenter What is the Sensu Enterprise Dashboard The Sensu Enterprise Dashboard is a simple webbased application that provides realtime visibility into Sensu monitoring data with dedicated views for monitoring events clients checks aggregates data centers and more The dashboard provides powerful global search features for filtering views so users can focus on the data thats important to them The dashboard also provides basic operational controls to acknowledge or otherwise silence monitoring events request ad hoc execution of monitoring checks and much more What is Uchiwa The Sensu Enterprise Dashboard is based on the opensource ndash and community developed ndash Uchiwa2 dashboard Very much like the relationship between Sensu Core and Sensu Enterprise the Sensu Enterprise Dashboard builds on top of Uchiwa via a number of addedvalue extensions eg Role Based Access Controls3 LDAP4 GitHub5 and GitLab6 authentication Audit Logging7 etc which development also results in many contributions to the opensource Uchiwa dashboard project What is the Sensu Enterprise Console The Sensu Enterprise Console is a federated API endpoint provided by the Sensu Enterprise Dashboard for API access to multiple Sensu datacenters1 available in Sensu Enterprise Dashboard version 110 and newer This API provides addedvalue features including tokenbased authentication and granular rolebased access controls16 NOTE the Sensu Enterprise Dashboard is comprised of two components a backend service API for aggregating monitoring data from one or more Sensu datacenters5 and a web application for displaying this information As of Sensu Enterprise Dashboard version 110 this Sensu Enterprise Dashboard backend has been updated so that it provides the same API endpoints as the Sensu API1 Prior to version 110 the Sensu Enterprise Dashboard backend used different API routes for accessing data from specific datacenters for example client data was accessible via clientsuswest1client instead of clientsclientdcuswest1 Version 111 introduced access tokenbased authentication and version 112 introduced RBAC for the Console API What is a Sensu datacenter The Sensu Enterprise Dashboard provides access to monitoring data from one or more Sensu datacenters A Sensu datacenter is simply a Sensu API endpoint which corresponds to a Sensu installation consisting of one or more Sensu servers in cluster multiple API endpoints may be provided by a single Sensu installation or cluster 1 whatisasensudatacenter 2 httpwwwuchiwaio 3 sensuenterprisedashboard29rbacoverview 4 sensuenterprisedashboard29rbacrbacforldap 5 sensuenterprisedashboard29rbacrbacforgithub 6 sensuenterprisedashboard29rbacrbacforgitlab 7 sensuenterprisedashboard29rbacauditlogging 8 dashboarddefinitionspecification 9 sensucore12referenceconfigurationconfigurationscopes 10 sensucore12referenceconfigurationconfigurationmerging 11 authattributes 12 auditattributes 13 ldapattributes 14 githubattributes 15 gitlabattributes 16 sensuenterprisedashboard29rbacoverviewrbacforthesensuenterpriseconsoleapi 17 sensuenterprisedashboard29rbacrbacforoidc 18 oidcattributes"},{"title":"CHANGELOG","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/changelog","display_name":"Sensu Enterprise Dashboard 2.9: CHANGELOG","content":"NOTE Sensu Enterprise Dashboard is built on Uchiwa Uchiwa changes are documented in the Uchiwa changeloguchiwachangelog Releases Enterprise Dashboard 290 Release Notesenterprisedashboardv290 Enterprise Dashboard 281 Release Notesenterprisedashboardv281 Enterprise Dashboard 280 Release Notesenterprisedashboardv280 Enterprise Dashboard 270 Release Notesenterprisedashboardv270 Enterprise Dashboard 260 Release Notesenterprisedashboardv260 Enterprise Dashboard 250 Release Notesenterprisedashboardv250 Enterprise Dashboard 240 Release Notesenterprisedashboardv240 Enterprise Dashboard 230 Release Notesenterprisedashboardv230 Enterprise Dashboard 221 Release Notesenterprisedashboardv221 Enterprise Dashboard 220 Release Notesenterprisedashboardv220 Enterprise Dashboard 211 Release Notesenterprisedashboardv211 Enterprise Dashboard 210 Release Notesenterprisedashboardv210 Enterprise Dashboard 200 Release Notesenterprisedashboardv200 Enterprise Dashboard 1120 Release Notesenterprisedashboardv1120 Enterprise Dashboard 1110 Release Notesenterprisedashboardv1110 Enterprise Dashboard 1101 Release Notesenterprisedashboardv1101 Enterprise Dashboard 1100 Release Notesenterprisedashboardv1100 Enterprise Dashboard 198 Release Notesenterprisedashboardv198 Enterprise Dashboard 197 Release Notesenterprisedashboardv197 Enterprise Dashboard 196 Release Notesenterprisedashboardv196 Enterprise Dashboard 195 Release Notesenterprisedashboardv195 Enterprise Dashboard 194 Release Notesenterprisedashboardv194 Enterprise Dashboard 193 Release Notesenterprisedashboardv193 Enterprise Dashboard 192 Release Notesenterprisedashboardv192 Enterprise Dashboard 191 Release Notesenterprisedashboardv191 Enterprise Dashboard 190 Release Notesenterprisedashboardv190 Enterprise Dashboard 180 Release Notesenterprisedashboardv180 Enterprise Dashboard 170 Release Notesenterprisedashboardv170 Enterprise Dashboard 162 Release Notesenterprisedashboardv162 Enterprise Dashboard 161 Release Notesenterprisedashboardv161 Enterprise Dashboard 160 Release Notesenterprisedashboardv160 Enterprise Dashboard 151 Release Notesenterprisedashboardv151 Enterprise Dashboard 150 Release Notesenterprisedashboardv150 Enterprise Dashboard 146 Release Notesenterprisedashboardv146 Enterprise Dashboard 145 Release Notesenterprisedashboardv145 Enterprise Dashboard 144 Release Notesenterprisedashboardv144 Enterprise Dashboard 143 Release Notesenterprisedashboardv143 Enterprise Dashboard 142 Release Notesenterprisedashboardv142 Enterprise Dashboard 141 Release Notesenterprisedashboardv141 Enterprise Dashboard 140 Release Notesenterprisedashboardv140 Enterprise Dashboard 130 Release Notesenterprisedashboardv130 Enterprise Dashboard 121 Release Notesenterprisedashboardv121 Enterprise Dashboard 120 Release Notesenterprisedashboardv120 Enterprise Dashboard 111 Release Notesenterprisedashboardv111 Enterprise Dashboard 110 Release Notesenterprisedashboardv110 Enterprise Dashboard 100 Release Notesenterprisedashboardv100 Enterprise Dashboard 015 Release Notesenterprisedashboardv015 Enterprise Dashboard 013 Release Notesenterprisedashboardv013 Enterprise Dashboard 012 Release Notesenterprisedashboardv012 Enterprise Dashboard 011 Release Notesenterprisedashboardv011 Enterprise Dashboard 010 Release Notesenterprisedashboardv010 Enterprise Dashboard 290 Release Notes enterprisedashboardv290 July 26 2017 mdash Sensu Enterprise Dashboard version 290 has been released and is available for immediate download CHANGES enterprisedashboardv290changes IMPROVEMENT Built on Uchiwa 0253uchiwav0253 IMPROVEMENT Added RBAC intergration for Okta oauth2 IMPROVEMENT Added regex support for arrays in collections FIX Changed RBAC intergration for GitHub from repo to org Enterprise Dashboard 281 Release Notes enterprisedashboardv281 May 16 2017 mdash Sensu Enterprise Dashboard version 281 has been released and is available for immediate download CHANGES enterprisedashboardv281changes IMPROVEMENT Built on Uchiwa 0252uchiwav0252 IMPROVEMENT Properly display keepalives events with RBAC Uses the clients subscriptions if a checks subscribers is empty eg keepalive event Enterprise Dashboard 280 Release Notes enterprisedashboardv280 May 10 2017 mdash Sensu Enterprise Dashboard version 280 has been released and is available for immediate download CHANGES enterprisedashboardv280changes IMPROVEMENT Built on Uchiwa 0251uchiwav0251 FIX Fix RBAC subscription filtering Enterprise Dashboard 270 Release Notes enterprisedashboardv270 April 13 2017 mdash Sensu Enterprise Dashboard version 270 has been released and is available for immediate download CHANGES enterprisedashboardv270changes IMPROVEMENT Built on Uchiwa 0240uchiwav0240 Enterprise Dashboard 260 Release Notes enterprisedashboardv260 April 4 2017 mdash Sensu Enterprise Dashboard version 260 has been released and is available for immediate download CHANGES enterprisedashboardv260changes IMPROVEMENT Built on Uchiwa 0231uchiwav0231 IMPROVEMENT Added support for authentication against multiple LDAP servers Enterprise Dashboard 250 Release Notes enterprisedashboardv250 April 4 2017 mdash Sensu Enterprise Dashboard version 250 has been released and is available for immediate download CHANGES enterprisedashboardv250changes IMPROVEMENT Built on Uchiwa 0230uchiwav0230 IMPROVEMENT Added support for boolean values in collections queries Enterprise Dashboard 240 Release Notes enterprisedashboardv240 March 13 2017 mdash Sensu Enterprise Dashboard version 240 has been released and is available for immediate download CHANGES enterprisedashboardv240changes IMPROVEMENT Built on Uchiwa 0222uchiwav0222 BUGFIX Fix issue with HUD results graph BUGFIX Fix issue with audit logging not writing to file IMPROVEMENT Added OpenID Connect authentication IMPROVEMENT Switched CI from Drone to Travis CI Enterprise Dashboard 230 Release Notes enterprisedashboardv230 February 13 2017 mdash Sensu Enterprise Dashboard version 230 has been released and is available for immediate download CHANGES enterprisedashboardv230changes IMPROVEMENT Built on Uchiwa 0221uchiwav0221 IMPROVEMENT Added DisableNestedGroups attribute to LDAP driver Enterprise Dashboard 221 Release Notes enterprisedashboardv221 December 15 2016 mdash Sensu Enterprise Dashboard version 221 has been released and is available for immediate download CHANGES enterprisedashboardv221changes IMPROVEMENT Properly escape values in search queries for the LDAP authentication driver Enterprise Dashboard 220 Release Notes enterprisedashboardv220 December 8 2016 mdash Sensu Enterprise Dashboard version 220 has been released and is available for immediate download CHANGES enterprisedashboardv220changes IMPROVEMENT Built on Uchiwa 0210uchiwav0210 Enterprise Dashboard 211 Release Notes enterprisedashboardv211 November 30 2016 mdash Sensu Enterprise Dashboard version 211 has been released and is available for immediate download CHANGES enterprisedashboardv211changes FIX Fixed OAuth authentication providers Enterprise Dashboard 210 Release Notes enterprisedashboardv210 November 22 2016 mdash Sensu Enterprise Dashboard version 210 has been released and is available for immediate download CHANGES enterprisedashboardv210changes IMPROVEMENT Built on Uchiwa 0202uchiwav0202 IMPROVEMENT Add diagnostic information to the authentication drivers when a role has no members Enterprise Dashboard 200 Release Notes enterprisedashboardv200 October 17 2016 mdash Sensu Enterprise Dashboard version 200 has been released and is available for immediate download CHANGES enterprisedashboardv200changes IMPROVEMENT Built on Uchiwa 0190uchiwav0190 IMPROVEMENT Add support for Sensu Enterprise 200 FIX Fix the clear button for collections Enterprise Dashboard 1120 Release Notes enterprisedashboardv1120 August 3 2016 mdash Sensu Enterprise Dashboard version 1120 has been released and is available for immediate download CHANGES enterprisedashboardv1120changes IMPROVEMENT Built on Uchiwa 0171uchiwav0171 IMPROVEMENT Upgraded to Go 16 IMPROVEMENT Added finer RBAC granularity Enterprise Dashboard 1110 Release Notes enterprisedashboardv1110 July 26 2016 mdash Sensu Enterprise Dashboard version 1110 has been released and is available for immediate download CHANGES enterprisedashboardv1110changes IMPROVEMENT Built on Uchiwa 0170uchiwav0170 IMPROVEMENT Added API tokenbased authentication Enterprise Dashboard 1101 Release Notes enterprisedashboardv1101 July 15 2016 mdash Sensu Enterprise Dashboard version 1101 has been released and is available for immediate download CHANGES enterprisedashboardv1101changes FIX Fixed graphs scaling issues on back button to the HUD Enterprise Dashboard 1100 Release Notes enterprisedashboardv1100 July 6 2016 mdash Sensu Enterprise Dashboard version 1100 has been released and is available for immediate download CHANGES enterprisedashboardv1100changes IMPROVEMENT Built on Uchiwa 0160uchiwav0160 IMPROVEMENT Added additional debug option for LDAP driver FIX Fixed graphs display issues on back button to the HUD Enterprise Dashboard 198 Release Notes enterprisedashboardv198 June 7 2016 mdash Sensu Enterprise Dashboard version 198 has been released and is available for immediate download CHANGES enterprisedashboardv198changes IMPROVEMENT Built on Uchiwa 0150uchiwav0150 IMPROVEMENT Added support for LDAP dialects IMPROVEMENT Added support for aggregates in SE 113 Enterprise Dashboard 197 Release Notes enterprisedashboardv197 May 25 2016 mdash Sensu Enterprise Dashboard version 197 has been released and is available for immediate download CHANGES enterprisedashboardv197changes FIX Prevented exceptions on the HUD when metric series are empty Enterprise Dashboard 196 Release Notes enterprisedashboardv196 May 25 2016 mdash Sensu Enterprise Dashboard version 196 has been released and is available for immediate download CHANGES enterprisedashboardv196changes FIX Prevent exceptions on the HUD when metric series are invalid Enterprise Dashboard 195 Release Notes enterprisedashboardv195 April 21 2016 mdash Sensu Enterprise Dashboard version 195 has been released and is available for immediate download CHANGES enterprisedashboardv195changes IMPROVEMENT Added support for IPv6 addresses in LDAP driver Enterprise Dashboard 194 Release Notes enterprisedashboardv194 March 3 2016 mdash Sensu Enterprise Dashboard version 194 has been released and is available for immediate download CHANGES enterprisedashboardv194changes IMPROVEMENT Built on Uchiwa 0143uchiwav0143 Enterprise Dashboard 193 Release Notes enterprisedashboardv193 February 23 2016 mdash Sensu Enterprise Dashboard version 193 has been released and is available for immediate download CHANGES enterprisedashboardv193changes BUGFIX Better handling of an empty recursive group search result in LDAP authentication driver Enterprise Dashboard 192 Release Notes enterprisedashboardv192 February 19 2016 mdash Sensu Enterprise Dashboard version 192 has been released and is available for immediate download CHANGES enterprisedashboardv192changes IMPROVEMENT Use the memberOf attribute in AD for role assignation in addition to the recursive query Enterprise Dashboard 191 Release Notes enterprisedashboardv191 February 8 2016 mdash Sensu Enterprise Dashboard version 191 has been released and is available for immediate download CHANGES enterprisedashboardv191changes BUGFIX Prevent a fatal panic when one of the SE metrics is empty Enterprise Dashboard 190 Release Notes enterprisedashboardv190 February 2 2016 mdash Sensu Enterprise Dashboard version 190 has been released and is available for immediate download CHANGES enterprisedashboardv190changes IMPROVEMENT Built on Uchiwa 0142uchiwav0142 IMPROVEMENT Added support for nested groups in AD Enterprise Dashboard 180 Release Notes enterprisedashboardv180 January 19 2016 mdash Sensu Enterprise Dashboard version 180 has been released and is available for immediate download CHANGES enterprisedashboardv180changes IMPROVEMENT Built on Uchiwa 0141uchiwav0141 IMPROVEMENT Added support for a fallback RBAC role IMPROVEMENT Added HUD styling tweaks IMPROVEMENT Added the Gitlab RBAC authentication driver IMPROVEMENT Improved debug mode Enterprise Dashboard 170 Release Notes enterprisedashboardv170 November 30 2015 mdash Sensu Enterprise Dashboard version 170 has been released and is available for immediate download CHANGES enterprisedashboardv170changes IMPROVEMENT Built on Uchiwa 0130uchiwav0130 IMPROVEMENT HUD now uses the new SE metrics IMPROVEMENT LDAP driver is caseinsensitive but casepreserving Enterprise Dashboard 162 Release Notes enterprisedashboardv162 November 6 2015 mdash Sensu Enterprise Dashboard version 162 has been released and is available for immediate download CHANGES enterprisedashboardv162changes IMPROVEMENT Removed asyncjs dependency IMPROVEMENT Updated sensuenterprise theme CSS files Enterprise Dashboard 161 Release Notes enterprisedashboardv161 November 6 2015 mdash Sensu Enterprise Dashboard version 161 has been released and is available for immediate download CHANGES enterprisedashboardv161changes IMPROVEMENT Upgraded uchiwaweb bower package Enterprise Dashboard 160 Release Notes enterprisedashboardv160 November 6 2015 mdash Sensu Enterprise Dashboard version 160 has been released and is available for immediate download CHANGES enterprisedashboardv160changes IMPROVEMENT Built on Uchiwa 0121uchiwav0121 IMPROVEMENT Rename the dashboard view to HUD Enterprise Dashboard 151 Release Notes enterprisedashboardv151 October 6 2015 mdash Sensu Enterprise Dashboard version 151 has been released and is available for immediate download CHANGES enterprisedashboardv151changes FIX Use proper uchiwaweb bocker package Enterprise Dashboard 150 Release Notes enterprisedashboardv150 October 6 2015 mdash Sensu Enterprise Dashboard version 150 has been released and is available for immediate download CHANGES enterprisedashboardv150changes IMPROVEMENT Built on Uchiwa 0112uchiwav0112 IMPROVEMENT Deprecate use of results Sensu API endpoint Enterprise Dashboard 146 Release Notes enterprisedashboardv146 September 29 2015 mdash Sensu Enterprise Dashboard version 146 has been released and is available for immediate download CHANGES enterprisedashboardv146changes FIX Revert change until uchiwa is upgraded Enterprise Dashboard 145 Release Notes enterprisedashboardv145 September 29 2015 mdash Sensu Enterprise Dashboard version 145 has been released and is available for immediate download CHANGES enterprisedashboardv145changes IMPROVEMENT Use enterprise filters for the dashboard Enterprise Dashboard 144 Release Notes enterprisedashboardv144 September 11 2015 mdash Sensu Enterprise Dashboard version 144 has been released and is available for immediate download CHANGES enterprisedashboardv144changes FIX Hide sensitive LDAP information bindpass in dashboard IMPROVEMENT Updated dashboard widgets text FIX Stepped Y axis max value in dashboard graphs Enterprise Dashboard 143 Release Notes enterprisedashboardv143 September 10 2015 mdash Sensu Enterprise Dashboard version 143 has been released and is available for immediate download CHANGES enterprisedashboardv143changes IMPROVEMENT Allow customizable group and user BaseDN for LDAP driver Enterprise Dashboard 142 Release Notes enterprisedashboardv142 September 10 2015 mdash Sensu Enterprise Dashboard version 142 has been released and is available for immediate download CHANGES enterprisedashboardv142changes IMPROVEMENT Allow customizable Group Membership Attribute for LDAP driver Enterprise Dashboard 141 Release Notes enterprisedashboardv141 September 8 2015 mdash Sensu Enterprise Dashboard version 141 has been released and is available for immediate download CHANGES enterprisedashboardv141changes IMPROVEMENT Allow customizable group and user object class for LDAP driver Enterprise Dashboard 140 Release Notes enterprisedashboardv140 September 1 2015 mdash Sensu Enterprise Dashboard version 140 has been released and is available for immediate download CHANGES enterprisedashboardv140changes IMPROVEMENT Built on Uchiwa 0104uchiwav0104 IMPROVEMENT Added support for OpenLDAP IMPROVEMENT Send failed logon to audit logging IMPROVEMENT Update dashboard widgets text Enterprise Dashboard 130 Release Notes enterprisedashboardv130 August 3 2015 mdash Sensu Enterprise Dashboard version 130 has been released and is available for immediate download CHANGES enterprisedashboardv130changes IMPROVEMENT Built on Uchiwa 0103uchiwav0103 IMPROVEMENT Added audit logging IMPROVEMENT Added dashboard Enterprise Dashboard 121 Release Notes enterprisedashboardv121 June 19 2015 mdash Sensu Enterprise Dashboard version 121 has been released and is available for immediate download CHANGES enterprisedashboardv121changes IMPROVEMENT Built on Uchiwa 091uchiwav091 FIX Use proper path for godep when building binaries Enterprise Dashboard 120 Release Notes enterprisedashboardv120 June 12 2015 mdash Sensu Enterprise Dashboard version 120 has been released and is available for immediate download CHANGES enterprisedashboardv120changes IMPROVEMENT Use godep for dependencies vendoring IMPROVEMENT Add support for userdefined roles IMPROVEMENT Add support for Github Enterprise IMPROVEMENT LDAP driver support for disabling SSL verification Enterprise Dashboard 111 Release Notes enterprisedashboardv111 May 7 2015 mdash Sensu Enterprise Dashboard version 111 has been released and is available for immediate download CHANGES enterprisedashboardv111changes IMPROVEMENT Collections now use the new backendServicepostStash service Enterprise Dashboard 110 Release Notes enterprisedashboardv110 May 5 2015 mdash Sensu Enterprise Dashboard version 110 has been released and is available for immediate download CHANGES enterprisedashboardv110changes IMPROVEMENT Built on Uchiwa 081uchiwav081 IMPROVEMENT Add GitHub auth driver IMPROVEMENT Add LDAP auth driver IMPROVEMENT Remove dashboard authentication by default Enterprise Dashboard 100 Release Notes enterprisedashboardv100 April 8 2015 mdash Sensu Enterprise Dashboard version 100 has been released and is available for immediate download CHANGES enterprisedashboardv110changes IMPROVEMENT Built on Uchiwa 071uchiwav071 IMPROVEMENT Google fonts with Sensu Enterprise Dashboard IMPROVEMENT Set default SQL password to sensu Enterprise Dashboard 015 Release Notes enterprisedashboardv015 March 5 2015 mdash Sensu Enterprise Dashboard version 015 has been released and is available for immediate download CHANGES enterprisedashboardv015changes IMPROVEMENT New Dockerfile with CentOS 6 base for compatibility Enterprise Dashboard 013 Release Notes enterprisedashboardv013 March 4 2015 mdash Sensu Enterprise Dashboard version 013 has been released and is available for immediate download CHANGES enterprisedashboardv013changes IMPROVEMENT Config hash now supports dashboard instead of uchiwa IMPROVEMENT Dashboard version constant now available Enterprise Dashboard 012 Release Notes enterprisedashboardv012 February 27 2015 mdash Sensu Enterprise Dashboard version 012 has been released and is available for immediate download CHANGES enterprisedashboardv012changes IMPROVEMENT Renamed uchiwaenterprise theme to sensuenterprise IMPROVEMENT Changed favicon to Sensu logo FIX Fixed prepost install and remove package scripts Enterprise Dashboard 011 Release Notes enterprisedashboardv011 February 27 2015 mdash Sensu Enterprise Dashboard version 011 has been released and is available for immediate download CHANGES enterprisedashboardv011changes FIX Fixed dashboard src content directory structure Enterprise Dashboard 010 Release Notes enterprisedashboardv010 February 27 2015 mdash Sensu Enterprise Dashboard version 010 has been released and is available for immediate download CHANGES enterprisedashboardv010changes IMPROVEMENT Building unstable packages for testing purposes uchiwachangelog httpsgithubcomsensuuchiwablobmasterCHANGELOGmd uchiwav0253 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025320170725 uchiwav0252 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025220170516 uchiwav0251 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd025120170510 uchiwav0240 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd024020170413 uchiwav0231 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd023120170329 uchiwav0231 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd023020170324 uchiwav0222 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd022220170310 uchiwav0221 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd022120170206 uchiwav0210 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd021020161208 uchiwav0202 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd020220161121 uchiwav0190 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd019020161016 uchiwav0171 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd017120160802 uchiwav0170 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd017020160720 uchiwav0160 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd016020160623 uchiwav0150 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd015020160602 uchiwav0143 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014320160303 uchiwav0142 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014220160202 uchiwav0141 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd014120160115 uchiwav0130 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd013020151122 uchiwav0121 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd012120151105 uchiwav0112 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd011220151004 uchiwav0104 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd010420150901 uchiwav0103 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd010320150803 uchiwav091 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd09120150610 uchiwav081 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd08120150505 uchiwav071 httpsgithubcomsensuuchiwablobmasterCHANGELOGmd07120150401"},{"title":"Collections","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/collections","display_name":"Sensu Enterprise Dashboard 2.9: Collections","content":"Collections are a grouping of items returned by a collection query This query acts like a global search and it persists between the different views Collections can be easily shared and saved collectionsimagesenterprisedashboardcollectionspng Collection Query The most basic query is composed of a field and its value in the form of fieldvalue A query can use any field visible or not to match a value such as dcuswest1 subscriberrabbitmq subscriptionlinux teamwebops Regular Expressions The match method of Javascripts String object is used to retrieve the matches thus the following special characters are available to use exclusively in the values of a query Matches any single character For example dcastria matches the datacenter austria Matches the preceding character 0 or more times For example dccan matches the datacenters canada and vatican but not cameroon Matches the preceding character 1 or more times For example dcira matches the datacenters iran and iraq but not ireland Matches the preceding character 0 or 1 time For example dcoco matches the datacenter cameroon but not morocco Matches beginning of input For example dcpor matches the datacenter portugal but not singapore Matches end of input For example dcnea matches the datacenter guinea but not guineabissau Operators The familiar operators AND OR and NOT are supported You may use multiple operators within a single query Be aware that the use of many operators may cause higher than normal resource usage dcuseast1 AND namecentos Includes all items from the datacenter useast1 that have centos in their name dcuseast1 OR dcuswest1 Includes all items from the datacenters useast1 or uswest1 dcuseast1 NOT namecentos Includes all items from the datacenter useast1 that do not have centos in their name NOT dcuseast1 Includes all items that are not part of the datacenter useast1 dcuseast1 OR dcuswest1 NOT namecentos Includes all items from the datacenters useast1 or uswest1 that dont have centos in their name"},{"title":"Configuration","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/configuration","display_name":"Sensu Enterprise Dashboard 2.9: Configuration","content":" Dashboard configuration Example dashboard configuration The following is the bare minimum that should be included in your Sensu Enterprise Dashboard configuration sensu name sensuserver1 host api1examplecom port 4567 dashboard host 0000 port 3000 NOTE the Sensu Enterprise Dashboard requires two configuration scopes sensu and dashboard see Dashboard definition specification8 below Dashboard definition specification dashboardconfigurationattributes The Sensu Enterprise dashboard uses two configuration scopes9 the sensu configuration scope provides connection details for one or more Sensu API endpoints ie datacenters1 and the dashboard configuration scope is used to configure the behavior of the dashboard itself NOTE by default the Sensu Enterprise Dashboard will load configuration from etcsensudashboardjson andor from JSON configuration files located in etcsensudashboarddjson with the same configuration merging behavior as described here2 sensu attributes sensuattributes name "},{"title":"Overview","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/dashboard","display_name":"Sensu Enterprise Dashboard 2.9: Overview","content":" Reference Documentation What is the Sensu Enterprise Dashboardwhatisthesensuenterprisedashboard What is Uchiwawhatisuchiwa What is the Sensu Enterprise Consolewhatisthesensuenterpriseconsole What is a Sensu datacenterwhatisasensudatacenter Dashboard configurationdashboardconfiguration Example dashboard configurationexampledashboardconfiguration Dashboard configuration attributesdashboardconfigurationattributes sensu attributessensuattributes dashboard attributesdashboardattributes auth attributesauthattributes audit attributesauditattributes github attributesgithubattributes gitlab attributesgitlabattributes ldap attributesldapattributes oidc attributesoidcattributes What is the Sensu Enterprise Dashboard The Sensu Enterprise Dashboard is a simple webbased application that provides realtime visibility into Sensu monitoring data with dedicated views for monitoring events clients checks aggregates data centers and more The dashboard provides powerful global search features for filtering views so users can focus on the data thats important to them The dashboard also provides basic operational controls to acknowledge or otherwise silence monitoring events request ad hoc execution of monitoring checks and much more What is Uchiwa The Sensu Enterprise Dashboard is based on the opensource ndash and community developed ndash Uchiwa2 dashboard Very much like the relationship between Sensu Core and Sensu Enterprise the Sensu Enterprise Dashboard builds on top of Uchiwa via a number of addedvalue extensions eg Role Based Access Controls3 LDAP4 GitHub5 and GitLab6 authentication Audit Logging7 etc which development also results in many contributions to the opensource Uchiwa dashboard project What is the Sensu Enterprise Console The Sensu Enterprise Console is a federated API endpoint provided by the Sensu Enterprise Dashboard for API access to multiple Sensu datacenters1 available in Sensu Enterprise Dashboard version 110 and newer This API provides addedvalue features including tokenbased authentication and granular rolebased access controls16 NOTE the Sensu Enterprise Dashboard is comprised of two components a backend service API for aggregating monitoring data from one or more Sensu datacenters5 and a web application for displaying this information As of Sensu Enterprise Dashboard version 110 this Sensu Enterprise Dashboard backend has been updated so that it provides the same API endpoints as the Sensu API1 Prior to version 110 the Sensu Enterprise Dashboard backend used different API routes for accessing data from specific datacenters for example client data was accessible via clientsuswest1client instead of clientsclientdcuswest1 Version 111 introduced access tokenbased authentication and version 112 introduced RBAC for the Console API What is a Sensu datacenter The Sensu Enterprise Dashboard provides access to monitoring data from one or more Sensu datacenters A Sensu datacenter is simply a Sensu API endpoint which corresponds to a Sensu installation consisting of one or more Sensu servers in cluster multiple API endpoints may be provided by a single Sensu installation or cluster Dashboard configuration Example dashboard configuration The following is the bare minimum that should be included in your Sensu Enterprise Dashboard configuration sensu name sensuserver1 host api1examplecom port 4567 dashboard host 0000 port 3000 NOTE the Sensu Enterprise Dashboard requires two configuration scopes sensu and dashboard see Dashboard definition specification8 below Dashboard definition specification dashboardconfigurationattributes The Sensu Enterprise dashboard uses two configuration scopes9 the sensu configuration scope provides connection details for one or more Sensu API endpoints ie datacenters1 and the dashboard configuration scope is used to configure the behavior of the dashboard itself NOTE by default the Sensu Enterprise Dashboard will load configuration from etcsensudashboardjson andor from JSON configuration files located in etcsensudashboarddjson with the same configuration merging behavior as described here10 sensu attributes sensuattributes name "},{"title":"Heads-Up Display","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/hud","display_name":"Sensu Enterprise Dashboard 2.9: Heads-Up Display","content":"As of version 13 a new Heads Up Display HUD has been added to the Sensu Enterprise Dashboard which provides an ataglance view into the overall health of your infrastructure via a set of builtin graphs and status widgets headsup display screenshotimagesenterprisedashboardhudpng HUD RBAC Support The HUD is scoped according to any existing Sensu Enterprise Dashboard RBAC1 controls For example if a user is a member of a role with limited access to Sensu data they will only see history graphs and status widgets corresponding to the Sensu Subscriptions andor Datacenters they have access to NOTE At this time history graph data is stored in local storage via the browser which means that history graph data will only be available for as long as the user has the Sensu Enterprise Dashboard open An upcoming release of Sensu Enterprise will be providing this data via a new metrics API at which point history graph data will not be stored in the browser and a full 8hours of history will be available at all times Features History Graphs The Sensu Enterprise Dashboard HUD includes two history graphs which provide ataglance visibility for up to 8hours of monitoring system history captured in 10second intervals Event History Graph The Event History Graph records the state of Sensu events every 10 seconds The graph will display the total count of critical red warning yellow silenced gray and unknown black events The Event History Graph retains the last 8hours of event history Client History Graph The Client History Graph records the state of Sensu clients every 10 seconds The graph will display the total count of critical red warning yellow silenced gray and healthy green clients The Client History Graph retains the last 8hours of client history Status Summary Widgets The Sensu Enterprise Dashboard HUD includes three columns of status widgets which provide ataglance visibility into the status of Sensu Checks Events and Datacenters Each column will only display widgets corresponding to the current state of the monitoring system eg if there are no Critical events the Critical event count widget will not be displayed Check Status Summary Widgets The Check Status Summary widgets provide realtime counts for the current state of Sensu Checks ie critical red warning yellow silenced gray unknown black and healthy green Client Status Summary Widgets The Client Status Summary widgets provide realtime counts for the current state of Sensu Clients ie critical red warning yellow silenced gray unknown black and healthy green Datacenter Status Summary Widgets The Datacenter Status Summary widgets provide realtime counts for the current state of the datacenters ie Sensu Enterprise servers 1 sensuenterprisedashboard29configurationwhatisasensudatacenter"},{"title":"RBAC","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/rbac/_index","display_name":"Sensu Enterprise Dashboard 2.9: RBAC","content":""},{"title":"Audit Logging","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/rbac/audit-logging","display_name":"Sensu Enterprise Dashboard 2.9: Audit Logging","content":"As of Sensu Enterprise Dashboard version 13 Audit Logging is enabled by default Audit Logging captures user events in the dashboard such as user loginlogout and any user write actions in the dashboard ie silencing checks deleting clients deleting stashes Optionally it is also possible to log all HTTP GET requests ie every view requested by the user and every search query performed by the user NOTE Audit Logging requires authentication to be enabled Example configuration audit logfile varlogsensusensuenterprisedashboardauditlog level default Audit Logging attributes logfile "},{"title":"Role Based Access Controls","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/rbac/overview","display_name":"Sensu Enterprise Dashboard 2.9: Role Based Access Controls","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise0 users only Reference Documentation What are Role Based Access Controls for Sensu Enterprisewhatarerolebasedaccesscontrols How does Sensu provide RBAChowdoessensuproviderbac Supported RBAC driverssupportedrbacdrivers RBAC for the Sensu Enterprise Console APIrbacforthesensuenterpriseconsoleapi RBAC configurationrbacconfiguration Example RBAC definitionexamplerbacdefinition RBAC definition specificationrbacdefinitionspecification DRIVER attributesdriverattributes roles attributesrolesattributes methods attributesmethodsattributes What are Role Based Access Controls for Sensu Enterprise whatarerolebasedaccesscontrols Rolebased access controls RBAC are a system for restricting access to authorized users according to a role or job function RBAC for Sensu Enterprise enables administrators to grant the correct level access to many different development and operations teams without requiring them to maintain yet another user registry How does Sensu provide RBAC The Sensu Enterprise Dashboard provides comprehensive and granular RoleBased Access Controls RBAC with support for using a Lightweight Access Directory Provider LDAP GitHubcom1 GitHub Enterprise2 andor GitLab3 for authentication Roles can be defined to grant or restrict access to monitoring data based on datacenters4 Sensu subscriptions5 and even specific API endpoints see the Enterprise API reference documentation6 for more information Supported RBAC drivers Sensu Enterprise currently includes the following authentication drivers for RBAC LDAPrbacforldap GitHubrbacforgithub GitLabrbacforgitlab OIDCrbacforoidc RBAC for the Sensu Enterprise Console API As of Sensu Enterprise Dashboard version 112 RBAC configurations may be applied to the Sensu Enterprise Console API14 Access to the Sensu Enterprise Console API is controlled by access tokens which correspond to a role definition see the roles specification accessToken attribute below15 RBAC for the Console API provides granular controls for restricting access to specific API endpoints and HTTP methods eg it is possible to allow HTTP GET access to the Clients API16 but not DELETE access see the roles specification methods attribute below15 Providing an access token In a header curl H Authorization token TOKEN httpslocalhost3000events As a parameter curl httpslocalhost3000eventstokenTOKEN RBAC configuration Example RBAC definition The following is an example RBAC configuration using the RBAC for LDAP7 authentication driver a JSON configuration file located at etcsensudashboardjson dashboard host 0000 port 3000 ldap server localhost port 389 basedn cnusersdcdomaindctld binduser cnbindercnusersdcdomaindctld bindpass secret roles name guests members guestsgroup datacenters uswest1 subscriptions webserver readonly true name operators members operatorsgroup datacenters subscriptions readonly false RBAC definition specification DRIVER attributes Role based access controls for Sensu Enterprise are configured within the dashboard DRIVER configuration scope where DRIVER is one of the following ldap see RBAC for LDAP7 github see RBAC for GitHub8 gitlab see RBAC for GitLab9 roles attributes Role attributes are defined within the corresponding RBAC DRIVER10 configuration scope17 eg dashboard DRIVER roles The roles attribute is always a JSON array ie roles containing JSON hashes of role definitions The following role definition specification is common across all RBAC drivers EXAMPLE rolesattributesexample dashboard ldap roles name examplerole members examplegroup datacenters subscriptions exampleapplication readonly false ATTRIBUTES rolesattributesspecification name "},{"title":"RBAC for GitHub","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/rbac/rbac-for-github","display_name":"Sensu Enterprise Dashboard 2.9: RBAC for GitHub","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise6 users only Reference Documentation What is RBAC for GitHubwhatisrbacforgithub RBAC for GitHub configurationrbacforgithubconfiguration Example RBAC for GitHub definitionexamplerbacforgithubdefinition RBAC for GitHub definition specificationrbacforgithubdefinitionspecification github attributesgithubattributes roles attributesrolesattributes Register an OAuth Application in GitHubregisteranoauthapplicationingithub What is RBAC for GitHub The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for GitHub driver provides support for using GitHubcom1 or a GitHub Enterprise2 installation for RBAC authentication RBAC for GitHub configuration Example RBAC for GitHub definition dashboard host 0000 port 3000 github clientId a8e43af034e7f2608780 clientSecret b63968394be6ed2edb61c93847ee792f31bf6216 server httpsgithubcom roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for GitHub definition specification github attributes clientId "},{"title":"RBAC for GitLab","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/rbac/rbac-for-gitlab","display_name":"Sensu Enterprise Dashboard 2.9: RBAC for GitLab","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise5 users only Reference Documentation What is RBAC for GitLabwhatisrbacforgitlab RBAC for GitLab configurationrbacforgitlabconfiguration Example RBAC for GitLab definitionexamplerbacforgitlabdefinition RBAC for GitLab definition specificationrbacforgitlabdefinitionspecification gitlab attributesgitlabattributes roles attributesrolesattributes Register an OAuth Application in GitLabregisteranoauthapplicationingitlab What is RBAC for GitLab The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for GitHub driver provides support for using GitLab1 for RBAC authentication RBAC for GitLab configuration Example RBAC for GitLab definition dashboard host 0000 port 3000 gitlab applicationId 6141d36e5ea48103bc39bb3eb5eede8735f0dd8f9788d8b30255dbf4d218628f secret 7d419a3b2f7b92edab30f963d7c0a4d1841f0dc46b4403b11146b4f1d5cb3a4e server httpsgitlabcom redirecturl httpssensuexampleorglogincallback roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for GitLab definition specification gitlab attributes applicationid "},{"title":"RBAC for LDAP","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/rbac/rbac-for-ldap","display_name":"Sensu Enterprise Dashboard 2.9: RBAC for LDAP","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise5 users only Reference Documentation What is RBAC for LDAPwhatisrbacforldap LDAP provider compatibilityldapprovidercompatibility RBAC for LDAP configurationrbacforldapconfiguration Example RBAC for LDAP definitionexamplerbacforldapdefinition RBAC for LDAP definition specificationrbacforldapdefinitionspecification ldap attributesldapattributes servers attributesserversattributes roles attributesrolesattributes What is RBAC for LDAP The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for LDAP driver provides support for using a Lightweight Directory Access Protocol LDAP provider eg Microsoft Active Directory1 OpenLDAP2 etc for RBAC authentication LDAP provider compatibility This driver is tested with Microsoft Active Directory AD and should be compatible with any standardscompliant LDAP provider RBAC for LDAP configuration Example RBAC for LDAP definition dashboard host 0000 port 3000 ldap debug false servers server localhost port 389 basedn cnusersdcdomaindctld binduser cnbindercnusersdcdomaindctld bindpass secret insecure false security starttls userattribute sAMAccountName roles name guests members guestsgroup datacenters uswest1 subscriptions webserver readonly true name operators members operatorsgroup datacenters subscriptions readonly false RBAC for LDAP definition specification ldap attributes debug "},{"title":"RBAC for OpenID Connect (OIDC)","product":"Sensu Enterprise Dashboard","version":"2.9","location":"/sensu-enterprise-dashboard/2.9/rbac/rbac-for-oidc","display_name":"Sensu Enterprise Dashboard 2.9: RBAC for OpenID Connect (OIDC)","content":"ENTERPRISE Role based access controls are available for Sensu Enterprise3 users only Reference Documentation What is RBAC for OIDCwhatisrbacforoidc RBAC for OIDC configurationrbacforoidcconfiguration Example RBAC for OIDC definitionexamplerbacforoidcdefinition RBAC for OIDC definition specificationrbacforoidcdefinitionspecification oidc attributesoidcattributes roles attributesrolesattributes Register an OIDC Applicationregisteranoidcapplication Oktaokta PingFederatepingfederate What is RBAC for OIDC The Sensu Enterprise Dashboard offers support for builtin Role Based Access Controls RBAC0 which depends on using some external source of truth for authentication The Sensu Enterprise Dashboard RBAC for OIDC driver provides support for using the OpenID Connect 10 protocol OIDC on top of the OAuth 20 protocol for RBAC authentication RBAC for OIDC configuration Example RBAC for OIDC definition dashboard host 0000 port 3000 oidc additionalScopes groups clientId a8e43af034e7f2608780 clientSecret b63968394be6ed2edb61c93847ee792f31bf6216 insecure false redirectURL http1270014000logincallback server httpslocalhost9031 roles name guests members myorganizationguests datacenters uswest1 subscriptions webserver readonly true name operators members myorganizationoperators datacenters subscriptions readonly false RBAC for OIDC definition specification oidc attributes additionalScopes "},{"title":"Sensu Enterprise Dashboard","product":"Sensu Enterprise Dashboard","version":"latest","location":"/sensu-enterprise-dashboard/_index","display_name":"Sensu Enterprise Dashboard latest: Sensu Enterprise Dashboard","content":""},{"title":"Uchiwa","product":"Uchiwa","version":"1.0","location":"/uchiwa/1.0/_index","display_name":"Uchiwa 1.0: Uchiwa","content":""},{"title":"Uchiwa","product":"Uchiwa","version":"latest","location":"/uchiwa/_index","display_name":"Uchiwa latest: Uchiwa","content":""}]