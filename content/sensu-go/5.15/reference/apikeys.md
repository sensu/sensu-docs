---
title: "API Keys"
description: "API keys are long-lived authentication tokens that are generated by the Sensu backend. You can provide API keys to applications that want to interact with the Sensu API. Read the reference doc to learn about API keys."
weight: 10
version: "5.15"
product: "Sensu Go"
menu: 
  sensu-go-5.15:
    parent: reference
---

- [API key compatibility](#api-key-compatibility)
- [API key resource structure](#api-key-resource-structure)
- [API key specification](#api-key-specification)
- [Examples](#examples)

API keys are long-lived authentication tokens that make it more convenient to authenticate with Sensu-adjacent applications. API keys are generated by the Sensu backend, and you can provide them to applications that want to interact with the Sensu API.

Use the [APIKey API][1] to create, retrieve, update, and delete API keys.

## API key compatibility

API keys are 100% backward-compatible with Sensu's [authentication token system][2], but API keys do not need to be refreshed every 15 minutes like the auth tokens.

When you specify an API key in a request, the system resolves it to an authentication token and continues through the regular authentication process.

_NOTE: The API key resource is not compatible with [`sensuctl create`][3]._

## API key resource structure

{{< language-toggle >}}

{{< highlight yml >}}
type: apikeys
api_version: core/v2
metadata:
  name: my-api-key
spec:
  key: key-id
  username: user1
  groups:
  - group1
  - group2
  created_at: 1569874845
{{< /highlight >}}

{{< highlight json >}}
{
  "type": "apikeys",
  "api_version": "core/v2",
  "metadata" : {
    "name": "my-api-key"
  },
  "spec": {
    "key": "key-id",
    "username": "user1",
    "groups": [
      "group1",
      "group2"
      ]
    "created_at": 1569874845
    }
  }
{{< /highlight >}}

{{< /language-toggle >}}

## API key specification

### Top-level attributes

type         | 
-------------|------
description  | Top-level attribute specifying the resource type. API keys should always be of type `apikeys`.
required     | true
type         | String
example      | {{< highlight shell >}}"type": "apikeys"{{< /highlight >}}

api_version  | 
-------------|------
description  | Top-level attribute specifying the Sensu API group and version. This attribute should always be `core/v2`.
required     | true
type         | String
example      | {{< highlight shell >}}"api_version": "core/v2"{{< /highlight >}}

metadata     | 
-------------|------
description  | Top-level collection of metadata about the API key, including the `name`. The `metadata` map is always at the top level of the check definition. This means that in `wrapped-json` and `yaml` formats, the `metadata` scope occurs outside the `spec` scope.
required     | true
type         | Map of key-value pairs
example      | {{< highlight shell >}}"metadata": {
  "name": "my-api-key"
}{{< /highlight >}}

spec         | 
-------------|------
description  | Top-level map that includes the API key [spec attributes](#spec-attributes).
required     | true
type         | Map of key-value pairs
example      | {{< highlight shell >}}"spec": {
    "key": "key-id",
    "username": "user1",
    "groups": [
      "dev",
      "ops"
      ]
    "created_at": 1569874845
    }
{{< /highlight >}}

### Metadata attributes

| name       |      |
-------------|------
description  | A unique string used to identify the API key. API key names cannot contain special characters or spaces (validated with Go regex [`\A[\w\.\-]+\z`](https://regex101.com/r/zo9mQU/2)).
required     | true
type         | String
example      | {{< highlight shell >}}"name": "my-api-key"{{< /highlight >}}

### Spec attributes

| key        |      |
-------------|------
description  | The API key ID.
required     | true
type         | String
example      | {{< highlight shell >}}"key": "key-id"{{< /highlight >}}

| username   |     |
-------------|------
description  | The user associated with the API key.
required     | true
type         | Array
example      | {{< highlight shell >}}"username": "user1"{{< /highlight >}}

| groups     |      |
-------------|------
description  | The groups the user belongs to.
required     | false
type         | Array
example      | {{< highlight shell >}}"groups": [
  "group1",
  "group2"
]{{< /highlight >}}

| created_at |      |
-------------|------
description  | The time at which the API key was created. Automatically generated when the API key is created. In UUID.
required     | true
type         | Integer
example      | {{< highlight shell >}}"created_at": 1234567890{{< /highlight >}}

## Examples

{{< language-toggle >}}

{{< highlight yml >}}
type: apikeys
api_version: core/v2
metadata:
  name: apikey1
spec:
  key: 79190ae3-ca48-4e08-80e3-97e8c89af32e
  username: user1
  groups:
  - dev
  - ops
  created_at: 1569874845
{{< /highlight >}}

{{< highlight json >}}
{
  "type": "apikeys",
  "api_version": "core/v2",
  "metadata" : {
    "name": "apikey1"
  },
  "spec": {
    "key": "79190ae3-ca48-4e08-80e3-97e8c89af32e",
    "username": "user1",
    "groups": [
      "dev",
      "ops"
      ]
    "created_at": 1569874845
    }
  }
{{< /highlight >}}
{{< /language-toggle >}}

[1]: ../../api/apikey/
[2]: ../../api/auth/#the-authtoken-api-endpoint
[3]: ../../sensuctl/reference/#creating-resources
